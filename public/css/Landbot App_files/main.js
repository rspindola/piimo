function autoSizeTextarea(){txt.addClass("txtstuff"),hiddenDiv.addClass("hiddendiv common"),hiddenDiv.css("width",txt.width()),$("body").append(hiddenDiv),txt.on("keyup",function(){content=$(this).val();var e=content.match(/\n/g);if(content=content.replace(/\n/g," "),hiddenDiv.text(content),e)for(var t=0;t<e.length;t++)hiddenDiv.append($("<br>"));hiddenDiv.append($('<br class="lbr">')),$(this).css("height",hiddenDiv.height()+20)})}function emojiPicker(){huEmojiPicker=new HuEmoji(document.getElementById("js-typearea"),document.getElementById("emoji-btn"),$(".col-sm-5.wz-col-height.wz-col-central")[0],{search:!0,preview:!0,height:"300px",width:"350px",positionX:"left",positionY:"top",offsetX:30,offsetY:140,spritesUrl:STATIC_URL+"daisho/img/sprite-icons.png"})}function showGhostChat(e,t){var n=txt.val();if(n.length>0){var i=formatShortTime(new Date),a=$(".js-loadtemplate-ghost").tmpl({avatar:e,name:t,date:i,message:n});return $(a).find(".js-resend-message").on("click",function(){$(this).parent().parent().parent().remove(),setTimeout(function(){var e=$(this).parent().parent().find(".js-chat-message-text").text();txt.val($.trim(e)),sendMessage(sendForm),txt.val("")}.bind(this),500)}),$(a).find(".js-remove-message").on("click",function(){$(this).parent().parent().parent().remove()}),chatList.append(a),scrollMessages(),txt.css("height","42px"),a}return!1}function hideGhostChat(){$(".js-chat-ghost").remove()}function linkify(e){return e.html(function(){return $(this).find(".js-chat-message-email").each(function(e){$(this).html($(this).html().replace(/\b((?:https?:\/\/|ftp:\/\/|www\.[\S])[a-z0-9-+&@#\/%?=~_|:,.;]*)/gim,'<a href="$1" class="wz-link" target="_blank">$1</a>').replace(/(\n){3,}/g,"\n\n"))}),$(this).find(".js-chat-message-text").each(function(e){$(this).html(linkifyString($(this).html()))}),$(this).html()})}function linkifyString(e){return e?e.replace(/\b((?:https?:\/\/|ftp:\/\/|www\.[\S])[a-z0-9-+&@#\/%?=~_|:,.;]*)/gim,'<a href="$1" class="wz-link" target="_blank">$1</a>'):""}function linkifyElem(e){e.html(linkifyString(e.html()))}function strongify(e){return e.html(function(){return $(this).find(".js-chat-umi-text").each(function(e){$(this).html($(this).html().replace(/(\*)([\S ]+)(\*)/gm,"<strong>$2</strong>"))}),$(this).html()})}function loadStylesheet(e){var t=new $.Deferred,n=document.createElement("style");n.textContent='@import "'+e+'"';var i=setInterval(function(){try{n.sheet.cssRules,t.resolve(),clearInterval(i)}catch(e){}},250);return document.head.appendChild(n),t.promise()}function mixpanelEvents(e,t){"sessionDuration"===e&&analytics.track("Session duration",{Duration:t}),"firstSession"===e&&analytics.track("First Session"),"demonError"===e&&analytics.track("Demon Error"),"sendRegister"===e&&analytics.track("Submit Register Form"),"onboardingPopup"===e&&analytics.track("Onboarding Popup"),"messageSent"===e&&analytics.track("Message Sent",{Channel:t}),"privateNoteSent"===e&&analytics.track("Private Note Sent",{Channel:t}),"privateNoteClick"===e&&analytics.track("Clicks Private Note"),"messageReceived"===e&&analytics.track("Message Received",{Channel:t}),"firstMessageReceived"===e&&analytics.track("user activation",{step:"04 first chat"}),"starredMessage"===e&&analytics.track("Starred Message"),"unstarredMessage"===e&&analytics.track("Unstarred Message"),"operatorStatus"===e&&analytics.track("Change operator status"),"searchMessages"===e&&analytics.track("Search messages"),"openSettings"===e&&analytics.track("Opens settings"),"openAutomate"===e&&analytics.track("Opens Automate"),"openShortcuts"===e&&analytics.track("Opens Shortcuts"),"clickShortcut"===e&&analytics.track("Clicks Shortcut"),"addShortcut"===e&&analytics.track("Adds Shortcut"),"openNotifications"===e&&analytics.track("Opens Notifications"),"addAgentClick"===e&&analytics.track("Clicks Add Agent"),"addChannelClick"===e&&analytics.track("Clicks Add Channel"),"archiveChat"===e&&analytics.track("Clicks Archive Chat"),"unarchiveChat"===e&&analytics.track("Clicks Unarchive Chat"),"editTelegramChannel"===e&&analytics.track("Edits Telegram Channel",{Phone:t}),"addTelegramChannel"===e&&analytics.track("Adds Telegram Channel",{Phone:t}),"editSmoochChannel"===e&&analytics.track("Edits Smooch Channel"),"addSmoochChannel"===e&&analytics.track("Adds Smooch Channel"),"editFacebookChannel"===e&&analytics.track("Edits Facebook Channel",{Page:t}),"addFacebookChannel"===e&&analytics.track("Adds Facebook Channel",{Page:t}),"addWhatsappChannel"===e&&analytics.track("Added Whatsapp Channel",{Phone:t.phone,Company:t.company}),"editWhatsappChannel"===e&&analytics.track("Edits Whatsapp Channel",{Phone:t}),"addUmichatChannel"===e&&analytics.track("Added Umichat Channel",{Company:t}),"editUmichatChannel"===e&&analytics.track("Edits Umichat Channel",{Company:t}),"addWebchatChannel"===e&&analytics.track("Added Webchat Channel",{Company:t}),"editWebchatChannel"===e&&analytics.track("Edits Webchat Channel",{Company:t}),"otherChannels"===e&&analytics.track("Other Channels"),"addFirstChannel"===e&&analytics.track("Adds First Channel",{Channel:t}),"addAgent"===e&&analytics.track("Adds Agent"),"editAgent"===e&&analytics.track("Edits Agent"),"changePermissions"===e&&analytics.track("Changes Agent Permissions",{Agent:"agent_"+t}),"createOrderManual"===e&&analytics.track("Create order Manually"),"createTicketAuto"===e&&analytics.track("Create order Automatically"),"editOrder"===e&&analytics.track("Edit order"),"viewOrdersList"===e&&analytics.track("View Orders List"),"viewOrder"===e&&analytics.track("View Order"),"changeOrderShortDescription"===e&&analytics.track("Change order short description"),"changeOrderDescription"===e&&analytics.track("Change order description"),"changeOrderTags"===e&&analytics.track("Change order tags",{Tags:t}),"changeOrderStatusTitle"===e&&analytics.track("Change order status from title",{Status:t}),"changeOrderStatusArchive"===e&&analytics.track("Change order status from archiving",{Status:t}),"changeOrderStatusAuto"===e&&analytics.track("Change order status automatically",{Status:t}),"viewClientNotes"===e&&analytics.track("View Client Notes"),"addClientNote"===e&&analytics.track("Add Client Note"),"viewOrderNotes"===e&&analytics.track("View Order Notes"),"addOrderNote"===e&&analytics.track("Add Order Note"),"createPayment"===e&&analytics.track("Create payment"),"receivePayment"===e&&analytics.track("Receive payment"),"createPaymentGateway"===e&&analytics.track("Adds Payment Gateway",{Type:t.type}),"removePaymentGateway"===e&&analytics.track("Removes Payment Gateway",{Type:t.type}),"saveBot"===e&&analytics.track("Saves Bot",{section:t.section,type:t.type}),"initRonin"===e&&analytics.track("Init Ronin"),"roninChurn"===e&&analytics.track("Ronin client churn"),"addRegisterBot"===e&&analytics.track("Creates Register Bot"),"editRegisterBot"===e&&analytics.track("Edits Register Bot"),"addAutoresponseBot"===e&&analytics.track("Creates Autoresponse Bot"),"editAutoresponseBot"===e&&analytics.track("Edits Autoresponse Bot"),"disableAutoresponseBot"===e&&analytics.track("Turns off Autoresponse Bot"),"disableRegisterBot"===e&&analytics.track("Turns off  Register Bot"),"deleteAutoresponseBot"===e&&analytics.track("Deletes Autoresponse Bot"),"deleteRegisterBot"===e&&analytics.track("Deletes Register Bot"),"createChatbot"===e&&analytics.track("Creates Chatbot"),"createChatbotBlock"===e&&analytics.track("Creates Chatbot Block"),"addGoogleAnalyticsBlock"===e&&analytics.track("Builder > Integrations > Add Google Analytics Event"),"addGoodbyeBlock"===e&&analytics.track("Builder > Add Goodbye Message"),"endSubscription"===e&&analytics.track("End of subscription"),"paySubscription"===e&&analytics.track("Pays Subscription",{plan:t}),"openSubscription"===e&&analytics.track("Opens Subscription"),"openSubscriptionForm"===e&&analytics.track("Open Subscription Form"),"openReports"===e&&analytics.track("Reports 2.0 Open"),"openReportsDashboard"===e&&analytics.track("Reports 2.0 > Dashboard"),"openReportsCustomers"===e&&analytics.track("Reports 2.0 > Customers"),"openReportsTickets"===e&&analytics.track("Reports 2.0 > Tickets"),"openReportsAgents"===e&&analytics.track("Reports 2.0 > Agents"),"clickReportsDateChange"===e&&analytics.track("Reports 2.0 - Date Change click"),"applyReportsDateChange"===e&&analytics.track("Reports 2.0 - Date Change apply")}function modalCRMTable(){$("#wz-modal-orders").on("shown.bs.modal",function(){$(".modal-backdrop").addClass("js-modal-orders")})}function modalClientsTable(){var e=($("#wz-table-clients"),$("#wz-modal-orders"));$("#wz-acc-h-01,#wz-acc-h-02");e.on("shown.bs.modal",function(){$(".modal-backdrop").addClass("js-modal-orders")})}function modalDismiss(){return $(".modal").on("shown.bs.modal",function(){$(document).off("focusin.modal")}),$(".js-tab-chats").click(function(){$(".modal").modal("hide")}),$(".modal").on("show.bs.modal",function(){var e;e=this,1!=$(this).data("modal-stack")&&$(".modal").each(function(){this!==e&&$(this).modal("hide")})})}function modalOrdersTable(){var e=$("#js-open-modal-orders"),t=$("#wz-modal-orders");e.click(function(){t.modal("show")});orderSelect.on("click",function(e){e.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$(this).parent().toggleClass("active")):($(this).parent().parent().find(".active").removeClass("active"),$(this).toggleClass("active"),$(this).parent().toggleClass("active"));var t=$(this).data("filter"),n=$(this).data("option");switch(t){case"assigned":orderAssignedView==n?orderAssignedView="all":orderAssignedView=n;break;case"status":orderStatusView==n?orderStatusView="all":orderStatusView=n}})}function modalNotification(e){e&&("boolean"==typeof e.submodal&&e.submodal?$notificationModal.data("modal-stack",!0):$notificationModal.data("modal-stack",!1),"string"==typeof e.icon?(removeClassByRegExp($notificationModalIcon,/^icon-/),$notificationModalIcon.addClass(e.icon)):$notificationModalSection.hide(),"string"==typeof e.title?$notificationModalTitle.text(e.title):($notificationModalTitle.hide(),$notificationModalSeparator.hide()),"object"==typeof e.message?($notificationModalMessage.html(e.message),$notificationModalFooter.addClass("custom-body"),tooltips("#wz-modal-notification")):"string"==typeof e.message?($notificationModalMessage.text(e.message),$notificationModalFooter.removeClass("custom-body")):$notificationModalMessage.hide(),"string"==typeof e.header?$notificationModalHeaderText.text(e.header):$notificationModalHeaderText.text(""),"boolean"==typeof e.close?e.close?$notificationModalCloseIcon.show():$notificationModalCloseIcon.hide():$notificationModalCloseIcon.show(),"boolean"==typeof e.reduced&&e.reduced?$notificationModal.addClass("reduced"):$notificationModal.removeClass("reduced"),$notificationModalButtons.empty(),"object"==typeof e.buttons&&($.each(e.buttons,function(t){var n=e.buttons[t].icon||"icon-arrow-right",i=$("<i class='"+n+"'>"),a=$("<strong>").text(e.buttons[t].text),r=$("<span>").append(a).append(i),o=$("<a class='btn btn-block'>").addClass(e.buttons[t].class).append(r);"function"==typeof e.buttons[t].callback&&o.on("click",e.buttons[t].callback),!0===e.buttons[t].close&&o.on("click",function(){$notificationModal.modal("hide")}),$notificationModalButtons.append(o)}),!0===e.stacked_buttons&&$notificationModalButtons.addClass("not-flex btn-group-vertical")),$notificationModal.modal("show"))}function renderAllNotificationPlugin(){for(var e=12,t=0;t<notificationArray.length;t++){if(t>0){e+=parseFloat(notificationArray[t-1].elem.outerHeight(!0))+12}notificationArray[t].elem.css("top",e+"px")}}function deleteNotificationPlugin(e){for(var t=0;t<notificationArray.length;t++)if(notificationArray[t].id===e.id){notificationArray.splice(t,1);break}renderAllNotificationPlugin()}function notifications(){iconBell.on("click",function(){$(this).removeClass("js-alarm-active")})}function notifyMe(e,t){if("Notification"in window)if("granted"===Notification.permission){console.log("Notification granted");var n={body:t,icon:e.avatar,dir:"ltr"},i=new Notification(e.name,n);i.onclick=function(){daisho.setMainChat(e.id),window.focus()},setTimeout(i.close.bind(i),2e3)}else"denied"!==Notification.permission?Notification.requestPermission(function(n){if("permission"in Notification||(Notification.permission=n),"granted"===n){console.log("Notification new granted");var i={body:t,icon:e.avatar,dir:"ltr"},a=new Notification(e.name,i);a.onclick=function(){daisho.setMainChat(e.id),window.focus()},setTimeout(a.close.bind(a),2e3)}else console.log("Notification new "+n)}):console.log("Notification denied");else console.log("This browser does not support desktop notification")}function sendOnlineStatus(){}function loadOldContacts(){contactListContainer.stop(),clearTimeout(timeoutUiAutoLoadContacts),timeoutUiAutoLoadContacts=!1,contactListContainer.on("scroll",uiAutoLoadContacts)}function getContactListHeight(){var e=contactListContainer.find(".js-filler-contact").outerHeight()+contactListContainer.find(".js-list-contacts").outerHeight();return"none"!=olderContactsLoader.css("display")&&(e+=olderContactsLoader.outerHeight()),e}function getContactTop(){var e=contactListContainer.scrollTop()+contactListContainer.first().outerHeight();return e>=getContactListHeight()-contactListContainer.height()&&(e=getContactListHeight()-contactListContainer.height()-5),e}function uiAutoLoadContacts(){var e=$(".js-list-contacts li").length,t=$(".js-list-contacts li.js-search").length,n=contactListContainer.scrollBottom()>lastContactScroll;lastContactScroll=contactListContainer.scrollBottom();var i=contactListContainer.scrollBottom()>=getContactListHeight(),a=daisho.getMediaUrl()+"avatars/yexir.png";if($(".js-see-older-contacts .wz-contact-avatar").css("background-image","url("+a+")"),numContactLoaded>=limitContacts&&i&&n&&!timeoutUiAutoLoadContacts){NProgress.inc(),olderContactsLoader.fadeIn(350),contactListContainer.animate({scrollTop:getContactTop()},350,"swing",function(){$sideleft2Scroll.perfectScrollbar("update")});timeoutUiAutoLoadContacts=setTimeout(function(){numContactLoaded>=limitContacts?daisho.loadContacts(e-t,limitContacts,chatView,chatViewSamurai,chatViewChannel).done(function(){$sideleft2Scroll.perfectScrollbar("update"),olderContactsLoader.fadeOut(500,"swing",function(){timeoutUiAutoLoadContacts=!1,NProgress.done(),clearTimeout(timeoutUiAutoLoadContacts)},function(){$sideleft2Scroll.perfectScrollbar("update")})}):olderContactsLoader.fadeOut(500,"swing",function(){timeoutUiAutoLoadContacts=!1,NProgress.done(),clearTimeout(timeoutUiAutoLoadContacts)},function(){$sideleft2Scroll.perfectScrollbar("update")})},358)}}function loadOldMessages(){messageListContainer.stop(),olderMessagesLoader.removeClass("js-loader-open"),clearTimeout(timeoutUiAutoScrollMessages),clearTimeout(timeoutUiAutoLoadMessages),clearInterval(intervalUiAutoScrollMessages),timeoutUiAutoScrollMessages=!1,timeoutUiAutoLoadMessages=!1,intervalUiAutoScrollMessages=!1,messageListContainer.on("scroll",uiAutoLoadMessages)}function scrollToFirstMessage(){intervalUiAutoScrollMessages||(intervalUiAutoScrollMessages=setInterval(function(){if(chatList.children().length>howManyMessages){chatList.find("li:hidden").fadeIn(1500);var e=getMessageTop(lastMessageToScroll);messageListContainer.scrollTop(e),$centralScroll.perfectScrollbar("update"),e>400?e-=400:e=10,timeoutUiAutoScrollMessages=setTimeout(function(){messageListContainer.stop().animate({scrollTop:e},"500","swing",function(){})},200),clearInterval(intervalUiAutoScrollMessages),intervalUiAutoScrollMessages=!1}},100))}function getMessageTop(e){var t=e.offset().top;return e.hasClass("js-chat-groupped")?t-=55:t-=70,e.prev()&&e.prev().hasClass("js-chat-date-subhead")&&(t-=e.prev().outerHeight()),t<10&&(t=10),t}function isScrolledIntoView(e){var t=messageListContainer.scrollTop(),n=t<lastMessageScroll,i=0==t;return lastMessageScroll=t,n&&i}function uiAutoLoadMessages(){if(howManyMessages=$(".js-list-chat li.js-chat-message").length,lastMessageToScroll=$(".js-list-chat li.js-chat-message").first(),howManyMessages>0&&howManyMessages>=limitMessages&&isScrolledIntoView(olderMessagesLoader)&&!timeoutUiAutoLoadMessages){NProgress.inc(),olderMessagesLoader.addClass("js-loader-open");timeoutUiAutoLoadMessages=setTimeout(function(){if(howManyMessages>=limitMessages){var e=firebaseService.getOlder();messageListContainer.find(".stick").removeClass("stick"),$.when(e).done(function(){olderMessagesLoader.removeClass("js-loader-open"),scrollToFirstMessage(),timeoutUiAutoLoadMessages=!1,NProgress.done()})}else olderMessagesLoader.removeClass("js-loader-open"),scrollToFirstMessage(),timeoutUiAutoLoadMessages=!1,NProgress.done()},800)}}function loadSearchContact(){inputFinder2.autocomplete("option",{source:daisho.searchContacts})}function onClickSearchContact(e,t){var n=$(".js-list-contacts .js-contact-"+t.item.id);return n.length>0?(CONTACTS[t.item.id].goToContact(),n.click()):(void 0===CONTACTS[t.item.id]&&(CONTACTS[t.item.id]=new Contact(t.item)),CONTACTS[t.item.id].isInChatview(chatView,chatViewSamurai,chatViewChannel)?CONTACTS[t.item.id].render(!0):resetChatview().done(function(){var e=$(".js-list-contacts .js-contact-"+t.item.id);e.length>0?(CONTACTS[t.item.id].goToContact(),e.click()):CONTACTS[t.item.id].render(!0)}),$(".js-close-wz-sl2-finder").click()),!1}function responsiveUI(){var e;$(".js-open-wz-column").click(function(t){t.preventDefault(),e=$(this).attr("href"),$(e).addClass("js-open-col"),$(".js-close-wz-column").click(function(t){t.preventDefault(),e=$(this).attr("href"),$(e).removeClass("js-open-col")})})}function sendMessages(){buttonSendimageA.on("click",function(e){e.preventDefault()}),buttonSendimage.on("click",function(){inputImage.click()}),buttonSendaudio.on("click",function(){inputAudio.click()}),submitImg.click(function(){sendImageForm()}),modalFormImageUpload.on("submit",function(e){e.preventDefault(),sendImageForm()}),submitLocation.on("click",function(){sendLocationForm()}),checkNote.on("click",function(e){$(this).hasClass("js-checked")?(txt.attr("placeholder",trWriteNote),$("#send_form").addClass("js-note"),mixpanelEvents("privateNoteClick")):(txt.attr("placeholder",trTypeMessage),$("#send_form").removeClass("js-note")),txt.focus()}),publishNote.on("click",function(){sendForm.submit()}),sendForm.on("submit",function(e){if(e.preventDefault(),firstMessageToScroll=!1,0==$.trim(txt.val()).length+$.trim(inputImageFlags.val()).length+$.trim(inputLatitude.val()).length+$.trim(inputLongitude.val()).length)return!1;agentTyping=!1,firebaseService.setTyping(!1),checkNote.hasClass("js-checked")?sendInnerNote(this):sendMessage(this),txt.val("")})}function sendMessage(e){if("object"==typeof CONTACTS[currentChat]){var t=CONTACTS[currentChat].getAgent();if(t&&t!=myID)return}var n=showGhostChat(SAMURAIS[myID].avatar,SAMURAIS[myID].name.capitalizeFirstLetter());daisho.sendForm(e,daisho.getURLs().wakizashi.send,function(e){if(e.error)e.list.customer&&e.list.customer.forEach(function(e){new NotificationPlugin("error",e,"icon-lock",null,null,2e3)});else{mixpanelEvents("messageSent",CONTACTS[currentChat].getChannel().type);var t=$(".js-status-select.selected");if(t.length>0){"0"==t.data("status")&&daisho.setStatus(1).done(function(){mixpanelEvents("changeOrderStatusAuto",1)})}}}).fail(function(){n&&n.find(".js-chat-ghost-action").fadeIn()}),inputAudio.val(""),inputImage.val(""),inputImageFlags.val(""),inputLatitude.val(""),inputLongitude.val("")}function sendInnerNote(e){txt.val().length>0&&(daisho.sendForm(e,daisho.getURLs().customers.inner_note,function(e){e.success?mixpanelEvents("privateNoteSent",CONTACTS[currentChat].getChannel().type):new NotificationPlugin(trError,trErrorSendingNote,"icon-lock",null,null,2e3)}),checkNote.click())}function settingsUI(e){var t="#wz-modal-clients "+(e||"");$(t+" .js-show-edit").click(function(){var e=$(this).attr("data-target"),t=$(this).attr("data-targethide");$(e).removeClass("hide"),$(t).addClass("hide")}),$(t+" .dropdown").on("hide.bs.dropdown",function(){"none"!=$(this).find(".wz-sub-dropdown").css("display")&&($(this).parent().find(".wz-sub-dropdown").hide(),$(this).find(".js-delete span:first-child").removeClass("hide"),$(this).find(".js-delete span:last-child").addClass("hide"))}),$(t+" .js-delete").on("click",function(e){e.stopPropagation(),$(this).parent().find(".wz-sub-dropdown").fadeToggle(),$(this).find("span").toggleClass("hide")}),$(t+" .js-delete-cancel").on("click",function(e){e.stopPropagation(),$(this).parent().parent().parent().find(".js-delete").click()}),$(t+" .js-custom-checkbox").checkbox(),$(t+" .js-custom-file").each(function(e){var t=$(this).find('input[type="text"]'),n=$(this).find('input[type="file"]'),i=$(this).find(".btn.js-upload"),a=$(this).find(".btn.js-browse"),r=function(e){n.click(),e.stopPropagation()},o=function(e){var n=$(this)[0].files[0];n?(i.removeClass("hide"),t.val(n.name)):(i.addClass("hide"),t.val(""))};t.length>0&&n.length>0&&(a.off("click"),t.off("click"),n.off("change"),a.on("click",r),t.on("click",r),n.on("change",o),t.prop("readonly",!0).prop("placeholder",trNoFileSelected))}),$(t+" .js-hide-edit").click(function(){var e=$(this).attr("data-target");$(e).addClass("hide"),$(targethide).addClass("hide")})}function loadShortcuts(e){printTable(e),shortcuts(e),setShortcuts(txt,sendForm),loadShortcutsButtons(e)}function printTable(e){var t=$("#wz-modal-shortcuts .tableContainer");t.empty(),t.append($('<div id="shortcuts-table">').hide().tabulator({columns:[{title:trShortcut,field:"shortcut",sortable:!0},{title:trText,field:"name",sortable:!0}],rowClick:function(e,t,n,i){daisho.getShortcutForm(t+"/")},fitColumns:!0,showLoader:!1,sortable:!0,renderComplete:function(){$("#shortcuts-table").fadeIn(100)},height:"calc(100vh - 195px)",data:e}))}function filter(e,t){t=$.trim(t),t=t.replace(/ /gi,"|"),$(e).each(function(){$(this).text().search(new RegExp(t,"i"))<0?$(this).hide().removeClass("visible"):$(this).show().addClass("visible")})}function tooltips(e){var t=e||"";$(t+' [data-toggle="tooltip"]').tooltip()}function zapierEvents(e,t){var n;"addFirstChannel"===e&&(n="https://hooks.zapier.com/hooks/catch/1674194/1ad8yh/"),"firstSession"===e&&(n="https://hooks.zapier.com/hooks/catch/1674194/1ati8w/"),n&&$.post(n,t)}function initDaisho(){connectSocket(),daisho=new DaishoService,daisho.currentOrder=new CurrentOrder,richText=new RichTextApp({linkify:{enable:!0,class:"wz-link",class_big:"wz-font-s-18"},code:{enable:!0,class:"wz-code"},symbols:{"*":{class:"wz-font-w-bold"},_:{class:"wz-font-italics"},"%h1":{class:"wz-font-s-18"},"%c1":{class:"wz-font-c-violet"},"%c2":{class:"wz-font-c-pink"}}}),moment.locale(LOCALE_LANGUAGE)}function initFirebase(){var e=new $.Deferred;return FIREBASE_APP=firebase.initializeApp(firebaseConfig,"helloumi-daisho"),FIREBASE_APP.auth().signInWithCustomToken(firebaseToken).catch(function(e){var t=e.code;e.message;"auth/invalid-custom-token"===t?console.log("The token you provided is not valid."):console.log(e)}).then(function(t){if(t){console.log("User is signed in."),firebaseService=new FirebaseService(FIREBASE_APP.database().ref(companyId));var n=function(){var t=contactList.find("li").first().data("key");t&&daisho.setMainChat(t),e.resolve()},i=daisho.loadContacts(0,limitContacts,chatView);$.when(i).done(n)}}),daisho.setMediaUrl(mediaURL),showOrderList.on("click",function(){daisho.getOrderList()}),e.promise()}function initMixpanel(e){!0===window.firstLogin&&localStorage.getItem("landbot-io-analytics-id")?analytics.alias("brand_"+e.ID,localStorage.getItem("landbot-io-analytics-id"),{},function(){identifyMixpanel(e)}):identifyMixpanel(e)}function onIdentifyMixpanel(e){analytics.group(e.company,{name:e.company},{},function(){analytics.track("Start session"),localStorage.removeItem("landbot-io-analytics-id")})}function identifyMixpanel(e){analytics.identify("brand_"+e.ID,{name:e.name,agent:e.firstName+" "+e.lastName,agentId:e.agentId,email:e.email,created:e.created,company:e.company,country:e.country,role:e.role,customersCount:e.customersCount,server:e.server,expired:e.expired,partner:e.partner,plan:e.plan,plan_version:e.plan_version,agents:e.agents,landbots:e.landbots,beta_segment:e.beta_segment,producthunter:e.producthunter},{integrations:{}},function(){onIdentifyMixpanel(e)})}function URL_(e){var e=e;this.loadDataParams=function(t){void 0!==t&&(e+="?",e+=Object.keys(t).map(function(e){return[e,t[e]].map(encodeURIComponent).join("=")}).join("&"))},this.getURL=function(){return e}}function DaishoService(){self.urls={brands:{channels:{edit:"/brands/channels/edit/",new:"/brands/channels/new/",delete:"/brands/channels/delete/",get_all:"/brands/channels/get_all/"},stripe:{delete:"/brands/stripe/delete/",save:"/brands/stripe/save/"},subscriptions:{subscription_form:"/brands/subscriptions/subscription_form/",payment_configured:"/brands/subscriptions/check_configured_payment/",trial_mode:"/brands/subscriptions/enable_trial/"},save_avatar:"/brands/save_avatar/"},customers:{new:"/customers/new",delete:"/customers/delete/",get_picture:"/customers/get_picture",profile:"/customers/profile",edit:"/customers/edit",send_note:"/customers/send_note",remove_note:"/customers/remove_note/",assign:"/customers/assign",assign_to:"/customers/assign_to",unassign:"/customers/unassign",last_order:"/customers/last_order",get:"/customers/get",block:"/customers/block/",inner_note:"/customers/inner_note/",list:"/customers/list/",read:"/customers/read/",archive:"/customers/archive/",unarchive:"/customers/unarchive/",search:"/customers/search/",options:"/customers/option/",autoticket:"/customers/create_autoticket/",clear_ronin:"/customers/clear_ronin/"},wakizashi:{send:"/wakizashi/send/",clear:"/wakizashi/clear/",get_shortcuts:"/wakizashi/get_shortcuts/",shortcut:"/wakizashi/shortcut/",delete:"/wakizashi/delete/"},katana:{orders:{new:"/katana/orders/new",edit:"/katana/orders/edit",send:"/katana/orders/send",view:"/katana/orders/view",set_short_description:"/katana/orders/set_short_description",set_description:"/katana/orders/set_description",set_status:"/katana/orders/set_status",edit_tags:"/katana/orders/edit_tags/",profile:"/katana/orders/get_order_view",send_note:"/katana/orders/send_note",edit_note:"/katana/orders/edit_note",remove_note:"/katana/orders/remove_note",attach:"/katana/orders/attach/",unattach:"/katana/orders/unattach/"},settings:{info:"/katana/settings/info/",brand:"/katana/settings/brand/",channels:"/katana/settings/channels/",samurais:"/katana/settings/samurais/",payments:"/katana/settings/payments/",suscription:"/katana/settings/suscription/"},send_email:"/katana/send_email",set_alert:"/katana/alert/",save_alert:"/katana/save_alert/",unassign:"/katana/unassign/",reports:"/katana/reports/",reports_export:"/katana/reports/csv/",samurais_top:"/katana/reports/samurais_top",customers_top:"/katana/reports/customers_top"},payments:{new:"/payments/new",save:"/payments/save",charge:"/payments/charge",view:"/payments/get_view/"},ronin:{load:"/ronin/load/",edit:"/ronin/edit/",save_mode:"/ronin/save_mode/",manager:"/ronin/manager/",save_image:"/ronin/save_image/",request_bot:"/ronin/request_bot/",disable:"/ronin/disable/",delete:"/ronin/delete/"},samurais:{new:"/samurais/new/",edit:"/samurais/edit/",admin:"/samurais/admin/",delete:"/samurais/delete/",get_all:"/samurais/get_all/",profile:"/samurais/get_samurai_view",set_status:"/samurais/set_status/",save_avatar:"/samurais/save_avatar/"}},self.createURL=function(){var e="";arguments.length>0&&(e=arguments[0]);for(var t=1;t<arguments.length;t++)e+="/"+arguments[t];return e}}function confirmMsgDel(e,t){var n=$deleteMessageDropdown.tmpl({key:t}),i=$(e).parent();i.append(n),i.on("hide.bs.dropdown",function(){i.find(".dropdown-menu").remove()})}function playAlert(e){audio.play(),date=new Date,notificationsList.append(notificationTemplate.tmpl({date:date.getDate()+"/"+(date.getMonth()+1)+"/"+date.getFullYear()+" "+date.getHours()+":"+date.getMinutes(),message:e.message,tag:e.tag})),iconBell.addClass("js-alarm-active"),$(".js-notifications-list li:nth-child(2)").remove(),new NotificationPlugin(trAlert,e.message,"icon-bell")}function showNotification(e){new NotificationPlugin(e.title,e.message,e.icon)}function processNotification(e){e.type?"alert"==e.type?playAlert(e.data):"browser-notification"==e.type?playNotification(e.data):"notification"==e.type&&showNotification(e.data):playAlert(e)}function createListeners(){agentTyping=!1,txt.on("keyup paste change",function(){""===this.value||!1!==agentTyping||checkNote.hasClass("js-checked")?!0!==agentTyping||""!==this.value&&!checkNote.hasClass("js-checked")||(agentTyping=!1,firebaseService.setTyping(!1)):(agentTyping=!0,firebaseService.setTyping(!0))}),$(".js-invite-agent").click(function(){$(".js-topbar-option").removeClass("loaded active"),$(".js-topbar-settings").addClass("loaded active"),daisho.openSettings("#agent-settings").done(function(){settingsModal.modal("show")})}),messageListContainer.on("click",function(e){"LI"!=e.target.nodeName&&"SECTION"!=e.target.nodeName||txt.focus()}),inputImage.on("change",function(e){$("#js-gallery-error-upload").addClass("hide"),$(".js-submit-image").prop("disabled",!1),modalImg.modal("show");for(var t=0;t<5;t++)imgSendFlags[t]=!1;var n=e.target.files;n.length<=fileUploadLimit?$.each(n,function(e,t){var n=new FileReader;n.onload=function(t){$("<div>",{class:"col-xs-4"}).append($("<a class='thumbnail' href='#' style='background-image: url("+t.target.result+")'><span class='js-thumbnail-close' data-index='"+e+"' href='#'>×</span></a>")).appendTo("#js-gallery-image-upload"),imgSendFlags[e]=!0},n.readAsDataURL(t),n.onloadend=function(){$(".js-thumbnail-close").off("click"),$(".js-thumbnail-close").on("click",function(){var e=$(this).data("index"),t=$(this).parent().parent();imgSendFlags[e]=!1,t.remove();var n=0;imgSendFlags.forEach(function(e,t){e&&n++}),0==n&&resetImg.trigger("click")})}}):($("#js-gallery-error-upload").removeClass("hide"),$(".js-submit-image").prop("disabled",!0),inputImage.val(""))}),resetImg.click(function(){sendForm[0].reset(),modalImg.modal("hide")}),modalImg.on("hidden.bs.modal",function(){$("#js-gallery-image-upload").html(""),inputImage.val("")}),settingsModal.on("shown.bs.modal",function(){settingsModal.find(".modal-body").scrollTop(0),settingsModalOpen=!0}),settingsModal.on("hidden.bs.modal",function(){settingsModalOpen&&tutorialActive&&(settingsModalOpen=!1)}),roninManagerModal.on("shown.bs.modal",function(){$("#drift-widget-container").hide()}),roninManagerModal.on("hidden.bs.modal",function(){$("#drift-widget-container").show()}),modalShortcuts.on("shown.bs.modal",function(){$("#shortcuts-table").hide()}),modalShortcuts.on("shown.bs.modal",function(){$("#shortcuts-table").tabulator("redraw",!0)}),chatsSelect.click(chatFilterSelection),$(".js-chats-select span").click(function(){$topBarModals.trigger("hidden.bs.modal")}),chatsStatusSelect.click(function(e){preventDefault(e),selectClient.html($(this).children("span").text()+"<span class='caret'>"),showOrderView(!1),contactStatusView=$(this).data("status"),contactList.empty(),daisho.loadContacts(0,limitContacts,chatView,chatViewSamurai,chatViewChannel)}),viewCurrentOrder.click(function(e){var t=daisho.currentOrder.getID();preventDefault(e),t&&(daisho.getOrderProfile(t),viewProfileOrder(t))}),archiveCurrent.click(function(e){var t=$(".js-status-select.selected");if(t.length>0){var n=t.data("status");if("0"==n||"1"==n)return void $(this).find("a").attr("data-toggle","dropdown")}$(this).find("a").attr("data-toggle",""),CONTACTS[currentChat].archive()}),archiveCurrentOption.click(function(e){var t=$(this).data("status");void 0!==t?daisho.setStatus(t).done(function(){CONTACTS[currentChat].archive(),mixpanelEvents("changeOrderStatusArchive",STATUS[t])}):CONTACTS[currentChat].archive()}),txt.on("focus",function(e){currentChat&&"object"==typeof CONTACTS[currentChat]&&CONTACTS[currentChat].isUnread()&&daisho.setReaded(currentChat)}),openCurrent.click(function(e){preventDefault(e),
CONTACTS[currentChat].unArchive()}),$("#wz-modal-clients .wz-crm-menu li a").click(function(e){e.preventDefault();var t=$(this).attr("href");daisho.openSettings(t)}),$topBarOption.click(function(){if(!$(this).hasClass("loaded")){$topBarOption.removeClass("loaded"),$topBarModals.modal("hide");var e=$(this).find("a").attr("href");if("#"!=e){var t;switch(e){case"#wz-modal-reports":t=daisho.getReports();break;case"#wz-modal-clients":t=daisho.openSettings(),mixpanelEvents("openSettings");break;case"#wz-modal-ronin-manager":t=daisho.roninManager();break;case"#wz-help-ref":return void window.open("http://landbot.helpscoutdocs.com","_blank").focus()}t&&t.done&&"#wz-modal-reports"!=e?t.fail(showDefaultErrorNotification).done(function(){$(e).modal("show")}):$(e).modal("show")}else tutorialActive&&$(".modal:visible").length<1&&welcomeModal.modal("show");$(this).addClass("loaded")}}),$topBarModals.on("hidden.bs.modal",function(){$(".js-topbar-option.active").find("a").attr("href")=="#"+$(this).attr("id")&&$topBarChats.trigger("click")}),$addAgent.on("click",function(){SAMURAIS[myID].shogun&&"sandbox"!=plan&&(daisho.openSettings("#agent-settings").done(openSettingsModal),mixpanelEvents("addAgentClick"))}),$addChannel.on("click",function(e){SAMURAIS[myID].shogun&&"sandbox"!=plan&&(daisho.openSettings("#channel-settings").done(openSettingsModal),mixpanelEvents("addChannelClick"))}),$("input[name='chat-search']").on("input propertychange paste",function(e){e.preventDefault();var t=$(this).val();t?($(".js-chat-date-subhead").fadeOut(),$(".js-chat-message-text:not(:Contains('"+t+"'))").parent().parent().fadeOut(),$(".js-chat-message-text:Contains('"+t+"')").parent().parent().fadeIn(),$(".js-chat-umi .js-chat-message-text:not(:Contains('"+t+"'))").parent().parent().parent().parent().fadeOut(),$(".js-chat-umi .js-chat-message-text:Contains('"+t+"')").parent().parent().parent().parent().fadeIn()):$(".js-chat-message, .js-chat-date-subhead").fadeIn()}),$(".js-close-wz-finder").on("click",function(e){$(".js-chat-message, .js-chat-date-subhead").fadeIn()}),$(".js-welcome-panel .btn.btn-pink[data-channeltype],.js-welcome-panel .wz-other-channels-link[data-channeltype]").on("click",function(){var e=$(this).data("channeltype"),t=($(this).data("target"),$(this).data("channelid")),n=$(this).hasClass("actived");Object.keys(CHANNELS).length<=0?(settingsModal.removeClass("wz-modal-right").addClass("wz-modal-fullscreen modal-firstchannel"),"facebook"==e&&settingsModal.addClass("modal-facebook"),settingsModal.find(".modal-menu").hide()):(settingsModal.addClass("wz-modal-right").removeClass("wz-modal-fullscreen modal-firstchannel modal-facebook"),settingsModal.find(".modal-menu").show()),"all"!==e&&(settingsChRedirect=n?{channel:e,action:"edit",id:t}:{channel:e,action:"add"}),$(".js-topbar-option").removeClass("loaded active"),$(".js-topbar-settings").addClass("loaded active"),daisho.openSettings("#channel-settings").done(function(){settingsModal.modal("show")})}),reportsModal.on("hide.bs.modal show.bs.modal",hideSideright),$(document).ajaxStart(function(){NProgress.inc()}),$(document).ajaxStop(function(){NProgress.done()}),$("#wz-modal-bots-contact .btn[data-step]").click(function(){var e=$(this).data("step"),t=$(this).data("cur-step");setBotsContactStep(e,t)}),$("#wz-modal-bots-contact .textarea-2A, #wz-modal-bots-contact .textarea-2B").on("input",function(){""==$(this).val()?$("#wz-modal-bots-contact .js-next-step").addClass("disabled"):$("#wz-modal-bots-contact .js-next-step").removeClass("disabled")}),$("#wz-modal-bots-contact #js-bots-contact-submit").click(function(){var e=botDescription2A.val()||botDescription2B.val(),t=botDescription2A.val()?"Current chatbots management":"New chatbot request";setTimeout(function(){botDescription2A.val(""),botDescription2B.val(""),$("#wz-modal-bots-contact .js-next-step").addClass("disabled"),setBotsContactStep("1")},200),daisho.roninRequest(e,t)})}function addDaishoReact(){var e=document.createElement("link");e.href=STATIC_PREFIX+"daisho-2-front/css/daisho-lb-preview-1.0.0.css?version="+version,e.type="text/css",e.rel="stylesheet",document.head.appendChild(e);var t=document.createElement("script");t.src=STATIC_PREFIX+"daisho-2-front/js/daisho-lb-preview-1.0.0.js?version="+version,t.type="text/javascript",document.head.appendChild(t),$("#daisho-container").css("display","none"),"sandbox"==plan&&$(".js-add-channel .badge, .js-add-agent .badge").css("display","none")}function sendImageForm(){txt.val(txtImage.val()),inputImageFlags.val(imgSendFlags),sendForm.submit(),$("#js-gallery-image-upload").html(""),inputImage.val(""),txtImage.val("")}function sendLocationForm(){txt.val(txtLocation.val()),inputLatitude.val(formLatitude.val()),inputLongitude.val(formLongitude.val()),sendForm.submit(),modalLocation.modal("hide")}function resetChatview(){return chatViewSamurai=!1,chatViewChannel=!1,chatView=!1,lastChatView=!1,$(".wz-col-sideleft-1 .js-tab-chats, .wz-filter li a").removeClass("active"),$('.wz-col-sideleft-1 .js-tab-chats[data-samurai="all"]').addClass("active"),$('.wz-col-sideleft-1 .js-tab-chats[data-channel="all"]').addClass("active"),$(".wz-filter .js-select-all").addClass("active"),daisho.loadContacts(0,limitContacts,chatView,chatViewSamurai,chatViewChannel)}function showOrders(){var e=getOrdersSelectorShow(),t=getOrdersSelectorHide();$(e).fadeIn(),t&&$(t).fadeOut()}function noCustomersViewHandler(){contactList.find("li").length>0?emptyCol02.hide():emptyCol02.show(),numContactLoaded>=limitContacts?fillerContactList.show():fillerContactList.hide()}function firstLoadSamurais(){$.post(daisho.getURLs().samurais.get_all,function(e){e.samurais&&e.samurais.forEach(function(e,t){$("li.js-samurai-list[data-samurai="+e.id+"]").removeClass("js-samurai-online"),$("li.js-samurai-list[data-samurai="+e.id+"]").removeClass("js-samurai-offline"),$("li.js-samurai-list[data-samurai="+e.id+"]").removeClass("js-samurai-busy"),$("li.js-samurai-list[data-samurai="+e.id+"]").addClass("js-samurai-"+e.status.toLowerCase())})})}function getOrdersSelectorShow(){var e=".js-list-orders li";return"assigned"==orderAssignedView?e+="[data-samurai='"+myID+"']":"unassigned"==orderAssignedView&&(e+="[data-samurai='']"),"all"!==orderStatusView&&(e+="[data-status='"+orderStatusView+"']"),e}function getOrdersSelectorHide(){var e=".js-list-orders li:not(";return"assigned"==orderAssignedView?e+="[data-samurai='"+myID+"']":"unassigned"==orderAssignedView&&(e+="[data-samurai='']"),"all"!==orderStatusView&&(e+="[data-status='"+orderStatusView+"']"),".js-list-orders li:not()"!=(e+=")")&&e}function loadTargetMessage(e,t){var n=$(t).data("message-key");return firebaseService.getMessage(CUSTOMER_ID,n).done(function(e){if(e){var i=$(t).hasClass("wz-starred-message")?$(t).find(".wz-starred-text span"):$(t).find(".wz-note-text span");if("text"==e.type||"note"==e.type)i.text(e.message),i[0]&&richText.transform(i[0],e.message);else if("image"==e.type){var a=e.message||"";if(0==a.length)if(e.file_name)a=e.file_name;else if(e.url){var r=e.url.split("/");a=r[r.length-1]}else a="image";var o=$("<span>").text(a).addClass("wz-link wz-cursor-hand").append($("<i class='icon-paper-clip wz-font-c-light-gray-4'></i>")).on("click",function(){openImageMessage(CUSTOMER_ID,n)});i.append(o)}else if("location"==e.type){var o=$('<a target="_blank" href="https://www.google.com/maps?q='+e.latitude+","+e.longitude+'">').text("Location").addClass("wz-link");i.append(o)}else i.text(" ");var s=formatShortDate(dateFromTimestamp(e.timestamp));($(t).hasClass("wz-starred-message")?$(t).find(".wz-starred-date"):$(t).find(".wz-note-date")).text(s),$(t).attr("data-timestamp",e.timestamp);if(($(t).hasClass("wz-starred-message")?$(t).find(".wz-starred-jump"):$(t).find(".wz-note-jump")).on("click",function(){daisho.goToMessage(CUSTOMER_ID,n,e.timestamp)}),void 0===e.samurai||!1===e.samurai){var l=function(){var e=CONTACTS[CUSTOMER_ID].getAvatar();$(this).find(".js-picture").css("background-image","url("+e+")"),$(this).find(".js-picture").addClass("js-picture-"+CUSTOMER_ID);var t=CONTACTS[CUSTOMER_ID].getInitials();$(this).find(".js-initials p").text(t),$(this).find(".js-initials").addClass("js-initials-"+CUSTOMER_ID+" "+getAvatarColor(CUSTOMER_ID)),-1!=e.indexOf("yexir.png")&&($(this).find(".js-initials").removeClass("hide"),$(this).find(".js-picture").addClass("hide")),$(this).find(".wz-starred-author").text(CONTACTS[CUSTOMER_ID].getName()),$(this).find(".js-picture").parent().attr("data-toggle","tooltip").attr("data-original-title",CONTACTS[CUSTOMER_ID].getName())};CONTACTS[CUSTOMER_ID]?l.bind(t)():daisho.getContact(CUSTOMER_ID,!0).done(l.bind(t))}else{var c;SAMURAIS[e.samurai]?(c=SAMURAIS[e.samurai].avatar,$(t).find(".wz-order-avatar, .wz-note-avatar, .wz-starred-avatar").attr("data-toggle","tooltip").attr("data-original-title",SAMURAIS[e.samurai].name)):(c=daisho.getMediaUrl()+"avatars/yexir.png",$(t).find(".wz-order-avatar, .wz-note-avatar, .wz-starred-avatar").attr("data-toggle","tooltip").attr("data-original-title","Deleted agent")),$(t).find(".js-picture").addClass("js-picture-agent-"+e.samurai),$(t).find(".js-picture").css("background-image","url("+c+")"),$(t).find(".js-initials").remove(),SAMURAIS[e.samurai]?$(t).find(".wz-starred-author").text(SAMURAIS[e.samurai].name):$(t).find(".wz-starred-author").text(trDeletedAgent)}$(t).removeClass("js-loader-open")}else $(t).remove()})}function viewProfileOrder(e){if(e){if(viewOrderSelected==e)return;viewOrderSelected=e}"order"!=viewProfile&&(viewProfile="order",viewSamuraiSelected=!1,viewPaymentSelected=!1,colSiderightOrder.show(),colSiderightClient.hide(),colSiderightPayment.hide(),colSiderightSamurai.hide()),mixpanelEvents("viewOrder")}function viewProfileClient(){"client"!=viewProfile&&(viewProfile="client",viewOrderSelected=!1,viewSamuraiSelected=!1,viewPaymentSelected=!1,colSiderightOrder.hide(),colSiderightPayment.hide(),colSiderightSamurai.hide(),colSiderightClient.show())}function viewProfileSamurai(e){if(e){if(viewSamuraiSelected==e)return;viewSamuraiSelected=e}"samurai"!=viewProfile&&(viewProfile="samurai",viewOrderSelected=!1,viewPaymentSelected=!1,colSiderightOrder.hide(),colSiderightClient.hide(),colSiderightPayment.hide(),colSiderightSamurai.show())}function viewProfilePayment(e){if(e){if(viewPaymentSelected==e)return;viewPaymentSelected=e}"payment"!=viewProfile&&(viewProfile="payment",viewOrderSelected=!1,viewSamuraiSelected=!1,colSiderightOrder.hide(),colSiderightClient.hide(),colSiderightSamurai.hide(),colSiderightPayment.show())}function removeSettings(){var e=function(e,t){$(t).hasClass("js-settings-suscription-opt")||$(t).remove()};$("#wz-modal-clients .modal-header .close").remove(),$(".js-topbar-option").each(e),$("#wz-modal-clients").modal({keyboard:!1}),$("#wz-modal-clients").modal("hide"),searchContactContainer.css("visibility","hidden")}function saveBrand(){daisho.sendForm(document.getElementById("form-settings-brand"),daisho.getURLs().katana.settings.brand,function(e){e.page?settingsBrand.html(e.page):(daisho.loadSettingsBrand(),new NotificationPlugin(NP_DATA_SAVE.title,NP_DATA_SAVE.message,NP_DATA_SAVE.icon,null,null,NP_DATA_SAVE.countdown))})}function openSettingsModal(){$topBarOption.removeClass("loaded active"),$topBarSettings.addClass("loaded active"),settingsModal.modal("show")}function saveInfo(){daisho.sendForm(document.getElementById("form-settings-info"),daisho.getURLs().katana.settings.info,function(e){e.page?settingsUser.html(e.page):(daisho.loadSettingsInfo(),new NotificationPlugin(NP_DATA_SAVE.title,NP_DATA_SAVE.message,NP_DATA_SAVE.icon,null,null,NP_DATA_SAVE.countdown))})}function saveSamurai(e){void 0===e?daisho.sendForm(document.getElementById("form-settings-samurai"),daisho.getURLs().samurais.new,function(e){e.page?$("#samurais-edit").html(e.page):e.error?new NotificationPlugin("An error ocurred",e.error,"icon-cross"):(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),daisho.loadSettingsSamurais(),daisho.reloadSamurais(),new NotificationPlugin(NP_DATA_SAVE.title,NP_DATA_SAVE.message,NP_DATA_SAVE.icon,null,null,NP_DATA_SAVE.countdown),$("#cancel-settings-samurai").click(),mixpanelEvents("addAgent"))}):daisho.sendForm(document.getElementById("form-settings-samurai"),daisho.getURLs().samurais.edit+e,function(e){e.page?$("#samurais-edit").html(e.page):(daisho.loadSettingsSamurais(),daisho.reloadSamurais(),new NotificationPlugin(NP_DATA_SAVE.title,NP_DATA_SAVE.message,NP_DATA_SAVE.icon,null,null,NP_DATA_SAVE.countdown),$("#cancel-settings-samurai").click(),mixpanelEvents("editAgent"))})}function saveChannelWhatsapp(e){void 0!==e?daisho.sendForm(document.getElementById("channels-whatsapp-form"),daisho.getURLs().brands.channels.edit+e,function(e){if(e.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)),e.success){$("#wz-modal-ronin-manager").hasClass("in")?(settingsModal.modal("hide"),roninManager&&roninManager.updateChannels()):daisho.loadSettingsChannels(),mixpanelEvents("editWhatsappChannel",phone)}}):daisho.sendForm(document.getElementById("channels-whatsapp-form"),daisho.getURLs().brands.channels.new+"whatsapp",function(e){e.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)),e.success&&(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),0==daisho.getHowManyChannel()&&(mixpanelEvents("addFirstChannel","Whatsapp"),zapierEvents("addFirstChannel",{email:email,company:company,admin:firstName+" "+lastName,channel:"Whatsapp"})),daisho.loadSettingsChannels(),mixpanelEvents("addWhatsappChannel",{phone:phone,company:company}),tutorialActive&&($(".js-welcome-panel .btn.btn-pink[data-channeltype='whatsapp']").addClass("actived"),$(".js-welcome-header").addClass("js-added"),addHow()))})}function saveChannelAPIChat(e){void 0!==e?daisho.sendForm(document.getElementById("channels-apichat-form"),daisho.getURLs().brands.channels.edit+e,function(e){if(e.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)),e.success){$("#wz-modal-ronin-manager").hasClass("in")?(settingsModal.modal("hide"),roninManager&&roninManager.updateChannels()):daisho.loadSettingsChannels(),mixpanelEvents("editApichatChannel")}}):daisho.sendForm(document.getElementById("channels-apichat-form"),daisho.getURLs().brands.channels.new+"apichat",function(e){e.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)),e.success&&(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),0==daisho.getHowManyChannel()&&(mixpanelEvents("addFirstChannel","APIChat"),zapierEvents("addFirstChannel",{email:email,company:company,admin:firstName+" "+lastName,channel:"APIChat"})),daisho.loadSettingsChannels(),mixpanelEvents("addAPIChatChannel",{company:company}),tutorialActive&&($(".js-welcome-panel .btn.btn-pink[data-channeltype='apichat']").addClass("actived"),$(".js-welcome-header").addClass("js-added"),addHow()))})}function saveChannelSmooch(e){void 0!==e?daisho.sendForm(document.getElementById("channels-smooch-form"),daisho.getURLs().brands.channels.edit+e,function(e){if(e.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)),e.success){$("#wz-modal-ronin-manager").hasClass("in")?(settingsModal.modal("hide"),roninManager&&roninManager.updateChannels()):daisho.loadSettingsChannels(),mixpanelEvents("editSmoochChannel")}}):daisho.sendForm(document.getElementById("channels-smooch-form"),daisho.getURLs().brands.channels.new+"smooch",function(e){e.page?(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)):(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),0==daisho.getHowManyChannel()&&(mixpanelEvents("addFirstChannel","Smooch"),zapierEvents("addFirstChannel",{email:email,company:company,admin:firstName+" "+lastName,channel:"Smooch"})),daisho.loadSettingsChannels(),mixpanelEvents("addSmoochChannel"))})}function saveChannelWebchat(e){void 0!==e?daisho.sendForm(document.getElementById("channels-webchat-form"),daisho.getURLs().brands.channels.edit+e,function(e){if(e.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)),e.success){$("#wz-modal-ronin-manager").hasClass("in")?(settingsModal.modal("hide"),roninManager&&roninManager.updateChannels()):daisho.loadSettingsChannels(),mixpanelEvents("editWebchatChannel")}}):daisho.sendForm(document.getElementById("channels-webchat-form"),daisho.getURLs().brands.channels.new+"webchat",function(e){e.page?(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)):(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),0==daisho.getHowManyChannel()&&(mixpanelEvents("addFirstChannel","Webchat"),zapierEvents("addFirstChannel",{email:email,company:company,admin:firstName+" "+lastName,channel:"Webchat"})),daisho.loadSettingsChannels(),mixpanelEvents("addWebchatChannel"))})}function channelSettingsWizardMode(e,t){$(e+" .form-group .btn").toggleClass("hide"),$(e+" .form-group "+t).on("click",finishWizard)}function saveChannelUmichat(e,t){void 0!==e?daisho.sendForm(document.getElementById("channels-umichat-form"),daisho.getURLs().brands.channels.edit+e,function(n){if(n.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(n.page)),n.success)if(t)$.post(daisho.getURLs().brands.channels.edit+e,function(e){e.page&&($("#channels-edit").html(e.page),settingsModal.find(".modal-body").scrollTop(0))});else{var i=$("#wz-modal-ronin-manager").hasClass("in");i?(settingsModal.modal("hide"),roninManager&&roninManager.updateChannels()):daisho.loadSettingsChannels().done(function(){tutorialActive&&(modalWelcome(),settingsModal.find(".modal-body").scrollTop(0))}),mixpanelEvents("editUmichatChannel",company)}}):daisho.sendForm(document.getElementById("channels-umichat-form"),daisho.getURLs().brands.channels.new+"umichat",function(e){e.page?($("#channels-edit").html(e.page),settingsModal.find(".modal-body").scrollTop(0)):(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),0==daisho.getHowManyChannel()&&(mixpanelEvents("addFirstChannel","Umichat"),zapierEvents("addFirstChannel",{email:email,company:company,admin:firstName+" "+lastName,channel:"Umichat"})),daisho.loadSettingsChannels().done(function(){tutorialActive&&(modalWelcome(),settingsModal.find(".modal-body").scrollTop(0))}),mixpanelEvents("addUmichatChannel",company))})}function saveChannelLandbot(e,t){!function(){function e(e){n.append('<input type="hidden" name="'+e+'" value="'+i[e]+'"/>')}var t=huLandbotPreviewConfig,n=$(document.getElementById("channels-landbot-form"));n.serialize();const i={accent:t.messages.background,background_color:1===t.background.type?t.background.color:t.filter.color,background_type:t.background.type,filter_type:t.filter.type,font:t.font,font_size:t.fontSize,gradient_from:2===t.background.type?t.background.gradient_from:t.filter.gradientFrom,gradient_to:2===t.background.type?t.background.gradient_to:t.filter.gradientTo,name:$("#id_name").val(),brand_name:$("#id_name").val(),light:t.messages.color,logo:t.logo.img_url||null,background_image_url:t.background.img_url||null};t.logo.url&&e("image_url"),e("gradient_from"),e("gradient_to"),e("background_color"),null!=i.logo&&e("logo"),null!=i.background_image_url&&e("background_image_url")}(),void 0!==e?daisho.sendForm(document.getElementById("channels-landbot-form"),daisho.getURLs().brands.channels.edit+e,function(n){if(n.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(n.page)),n.success)if(t)$.post(daisho.getURLs().brands.channels.edit+e,function(e){e.page&&($("#channels-edit").html(e.page),settingsModal.find(".modal-body").scrollTop(0))});else{var i=$("#wz-modal-ronin-manager").hasClass("in");i?(settingsModal.modal("hide"),roninManager&&roninManager.updateChannels()):daisho.loadSettingsChannels().done(function(){tutorialActive&&(modalWelcome(),settingsModal.find(".modal-body").scrollTop(0))}),mixpanelEvents("editLandbotChannel",company)}}):daisho.sendForm(document.getElementById("channels-landbot-form"),daisho.getURLs().brands.channels.new+"landbot",function(e){e.page?($("#channels-edit").html(e.page),settingsModal.find(".modal-body").scrollTop(0)):(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),0==daisho.getHowManyChannel()&&(mixpanelEvents("addFirstChannel","Landbot"),zapierEvents("addFirstChannel",{email:email,company:company,admin:firstName+" "+lastName,channel:"Landbot"})),daisho.loadSettingsChannels().done(function(){tutorialActive&&(modalWelcome(),settingsModal.find(".modal-body").scrollTop(0))}),mixpanelEvents("addLandbotChannel",company))})}function saveChannelLine(e){void 0!==e?daisho.sendForm(document.getElementById("channels-line-form"),daisho.getURLs().brands.channels.edit+e,function(e){if(e.page&&(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)),e.success){$("#wz-modal-ronin-manager").hasClass("in")?(settingsModal.modal("hide"),roninManager&&roninManager.updateChannels()):daisho.loadSettingsChannels(),mixpanelEvents("editLineChannel")}}):daisho.sendForm(document.getElementById("channels-line-form"),daisho.getURLs().brands.channels.new+"line",function(e){e.page?(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)):(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),0==daisho.getHowManyChannel()&&(mixpanelEvents("addFirstChannel","Line"),zapierEvents("addFirstChannel",{email:email,company:company,admin:firstName+" "+lastName,channel:"Line"})),daisho.loadSettingsChannels(),mixpanelEvents("addLineChannel"))})}function saveChannelFacebook(e,t){void 0!==e?daisho.sendForm(document.getElementById("channels-facebook-form"),daisho.getURLs().brands.channels.edit+e,function(e){if(e.page)settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page);else{$("#wz-modal-ronin-manager").hasClass("in")?(settingsModal.modal("hide"),roninManager&&roninManager.updateChannels()):daisho.loadSettingsChannels(),mixpanelEvents("editFacebookChannel",t)}}):daisho.sendForm(document.getElementById("channels-facebook-form"),daisho.getURLs().brands.channels.new+"facebook",function(e){e.page?(settingsModal.find(".modal-body").scrollTop(0),$("#channels-edit").html(e.page)):(e.paid&&new NotificationPlugin(NP_PAYMENT.title,NP_PAYMENT.message,NP_PAYMENT.icon,null,null,NP_PAYMENT.countdown),0==daisho.getHowManyChannel()&&(mixpanelEvents("addFirstChannel","Facebook"),zapierEvents("addFirstChannel",{email:email,company:company,admin:firstName+" "+lastName,channel:"Facebook"})),daisho.loadSettingsChannels().done(function(){tutorialActive&&(modalWelcome(),settingsModal.find(".modal-body").scrollTop(0))}),mixpanelEvents("addFacebookChannel",t))})}function refreshChannels(){return daisho.reloadChannels().done(daisho.loadSettingsChannels,daisho.loadSettingsSuscription)}function restoreButton(e){var t=$(e);t.length>0&&t.prop("disabled",!1)}function getAvatarColor(e){var t=e%AVATAR_COLOR.length;return t>=0&&t<AVATAR_COLOR.length?AVATAR_COLOR[t]:""}function refreshSamurai(e){SAMURAIS[e]&&void 0!==SAMURAIS[e].avatar?($(".js-picture-agent-"+e).css("background-image","url("+SAMURAIS[e].avatar+")"),$(".js-name-agent-"+e).text(SAMURAIS[e].name.capitalizeFirstLetter())):$(".js-picture-agent-"+e).css("background-image","url("+daisho.getMediaUrl()+"avatars/yexir.png)")}function setClientInfoBtn(e,t,n){$selector=$(e),$selector.find(".status").html(t),$selector.find(".dropdown i").removeClass("assigned unassigned archived").addClass(n),$selector.removeClass("hide")}function notificationBellClick(){$("#wz-dropdown-notifications").parent().hasClass("open")||mixpanelEvents("openNotifications")}function setAssignationListeners(e){var t=$(e);if("object"==typeof CONTACTS[currentChat]){var n=CONTACTS[currentChat].getAssignButton();setClientInfoBtn(e,n.text,n.class),"assigned"==n.class?$(".js-unassign-footer").css("display","block"):($(".js-unassign-footer").css("display","none"),t.find(".wz-search-popup ul li:last-child").css("border-bottom-left-radius","4px"),t.find(".wz-search-popup ul li:last-child").css("border-bottom-right-radius","4px"))}$(".js-unassign-footer").on("click",function(){CONTACTS[currentChat].unassignMe()}),t.find(".dropdown a").off("click"),t.find(".dropdown a").on("click",function(){t.find(".wz-search-popup").toggle(0),t.find(".dropdown .caret ").toggleClass("up")}),t.find(".js-assign-title").off("click"),t.find(".js-assign-title").on("click",function(){t.find(".wz-search-popup div").toggle(0),t.find(".js-assign-search input").focus()}),t.find(".js-assign-search i").off("click"),t.find(".js-assign-search i").on("click",function(){t.find(".wz-search-popup div").toggle(0),t.find(".js-assign-search input").val(""),t.find(".js-assign-search input").trigger("keyup")}),t.find(".js-assign-search input").off("keyup"),t.find(".js-assign-search input").on("keyup",function(e){var n=$(this).val(),i=new RegExp(n,"ig");t.find(".wz-search-popup ul li").each(function(e){0==n.length||$(this).find("span").text().match(i)?$(this).fadeIn():$(this).fadeOut()})}),loadSearchSamurai(e)}function loadSearchSamurai(e){var t=$(e+" .wz-search-popup ul");t.empty(),$.each(Object.keys(SAMURAIS),function(n,i){if(SAMURAIS[i]&&SAMURAIS[i].status&&"offline"!=SAMURAIS[i].status.toLowerCase()){var a=$('<li  data-key="'+i+'">').append('<i class="'+SAMURAIS[i].status+'">').append("<span>"+SAMURAIS[i].name+"</span>");a.click(function(){var t=$(this).data("key");CONTACTS[currentChat].assignTo(t),$(e+" .wz-search-popup").toggle(),$(e+" .dropdown .caret ").toggleClass("up")}),t.append(a)}}),$(e+" .js-assign-search input").trigger("keyup")}function openImageModal(e){$modalFullImage.find(".modal-body, .modal-header").on("click",function(e){"IMG"==e.target.nodeName?zoomImageElem($(e.target)):$modalFullImage.modal("hide")}),$modalFullImage.find(".modal-body").empty(),$modalFullImage.find(".modal-body").append(e),$modalFullImage.modal("show")}function openImageUrl(e){openImageModal($('<img class="wz-cursor-hand">').attr("src",e))}function openImageMessage(e,t){firebaseService.getAttach(e,t).done(function(e){openImageModal(new Message(e).getRendered("image-full"))})}function putText(e){txt.val($(e).text()),txt.focus()}function chatFilterSelection(e){e.preventDefault(),$('.js-tab-chats[data-option="'+$(this).data("option")+'"]').removeClass("active");var t=$(this).data("option"),n=$(this).data("samurai"),i=$(this).data("channel"),a=$('.js-tab-chats[data-option="samurai"][data-samurai="all"]');return $(this).parent().hasClass("panel-title")?$(".js-tab-chats[data-"+t+'="all"]').addClass("active"):$(this).parent().addClass("active"),"samurai"==t?"all"==n?(chatViewSamurai=!1,$(".js-active a").text(trAssigned),$(".js-all a").text(trAll),$(".wz-filter li a").removeClass("active"),$(".js-all a").addClass("active"),chatView=!1,$(".js-pending, .js-archived").fadeIn(200)):(chatViewSamurai=n,chatView="active",$(".js-pending, .js-archived").fadeOut(200,function(){$(".wz-filter li a").removeClass("active"),$(".js-active a").addClass("active"),$(".js-all a").text(trAllAgents),$(".js-active a").html(SAMURAIS[n].name||trDeletedAgent)})):"channel"==t?chatViewChannel="all"!=i&&i:"all"==t?(chatView=!1,0!=chatViewSamurai&&(chatViewSamurai=!1,$(".js-active a").text(trAssigned),$(".js-all a").text(trAll),$('.js-tab-chats[data-option="samurai"]').removeClass("active"),a.addClass("active"),$(".js-pending, .js-archived").fadeIn())):chatView=t,lastChatView=chatView,"samurai"!=t&&"channel"!=t||openContact.trigger("click"),contactList.empty(),daisho.loadContacts(0,limitContacts,chatView,chatViewSamurai,chatViewChannel)}function showSideright(){reportsModal.addClass("wz-modal-cutted"),$colSideright.addClass("wz-tweaked")}function hideSideright(){reportsModal.removeClass("wz-modal-cutted"),$colSideright.removeClass("wz-tweaked"),reportsModal.find(".tableContainer .selected").removeClass("selected"),(viewSamuraiSelected||viewPaymentSelected)&&viewProfileClient()}function generateWebchatSnippet(e){var t='<link rel="stylesheet" href="'+e.main_css+'"><script>function loadHelloumiLiveChat(){ HULiveChat = new Umichat({ "staticUrl": "'+e.static+'", "channelToken": "'+e.channelToken+'"',n=["brandID","version","apiKey","authDomain","databaseURL","storageBucket"];$.each(n,function(n,i){e[i]&&(t=t.concat(', "'+i+'": "'+e[i]+'"'))});var i='}); HULiveChat.createLiveChat(); }<\/script><script src="'+e.main_js+'" onload="loadHelloumiLiveChat()" charset="UTF-8"><\/script>';return t.concat(i)}function generateLandbotSnippet(e,t){return e?'<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Landbot | Convert a Landing Page into a Chatbot</title><style type="text/css">html { margin: 0; height: 100%; overflow: hidden; } iframe { position: absolute; left:0; right:0; bottom:0; top:0; border:0; }</style></head><body><iframe id="landbot-frame" width="100%" height="100%" frameborder="0" src="'+t+'"></iframe></body></html>':"Error generating landbot snippet"}function initPerfectScroll(){$sideleft1Scroll.perfectScrollbar({suppressScrollX:!0,wheelPropagation:!0}),$sideleft2Scroll.perfectScrollbar({suppressScrollX:!0,wheelPropagation:!0}),$centralScroll.perfectScrollbar({suppressScrollX:!0,wheelPropagation:!0}),$siderightScroll.perfectScrollbar({suppressScrollX:!0,wheelPropagation:!0})}function refreshImg(e,t){if(t)$(e).parent().addClass("loaded").removeClass("error");else{var n=$(e).data("retries")||0;n<3?setTimeout(function(){document.contains(e)&&(e.src=randomizeURL(e.src),$(e).data("retries",++n))},1e3*n+1500*Math.random()*n+1e3*Math.random()):$(e).parent().addClass("error")}}function verifyImage(e){var t=$(e);if(t.hasClass("error")){t.removeClass("error loaded");var n=$(e).find("img").data("retries")||0;setTimeout(function(){document.contains(e)&&(e.firstChild.src=randomizeURL(e.firstChild.src),$(e.firstChild).data("retries",++n))},1e3*n+1500*Math.random()*n+1e3*Math.random())}}function getWelcomeJSONwithMessage(e,t){var n;return""===e?"":(t&&t.length>0?(n=[{type:"dialog",title:e,buttons:t,payloads:t,extra:{hide_textbox:!0},samurai:"-1"}],2===t.length&&(n[0].extra.buttons={dual_buttons:!0})):n=[{type:"text",message:e,samurai:"-1"}],JSON.stringify(n))}function getWelcomeMessageFromJSON(e){try{var t=JSON.parse(e);return t.init?t.messages[t.init]:t instanceof Array?t[0]:{}}catch(e){return{}}}function getWelcomeFromJSON(e){try{return JSON.parse(e)}catch(e){return!1}}function appcuesChat(){!0===betaTester&&(history.pushState("","","?betabuilder"),"undefined"!=typeof Appcues&&Appcues.start())}function format0Value(e){return e<10?"0"+e:""+e}function getDateFromTimestamp(e){e<0&&(e*=-1);var t=new Date(1e3*e),n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],i=t.getFullYear(),a=n[t.getMonth()];return t.getDate()+"/"+a+"/"+i+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}function getMonthName(e){return"number"==typeof e&&(!(e<0||e>11)&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e])}function formatShortDatetime(e){return e.getMonth()+1+"/"+e.getDate()+" "+format0Value(e.getHours())+":"+format0Value(e.getMinutes())}function formatShortTime(e){return format0Value(e.getHours())+":"+format0Value(e.getMinutes())}function formatDateYYMD(e){var t=e.getMonth()+1;1==t.toString().length&&(t="0"+t);var n=e.getDate();return 1==n.toString().length&&(n="0"+n),e.getFullYear()+"-"+t+"-"+n}function getMonthLastDay(e){
return new Date(e.getFullYear(),e.getMonth()+1,0)}function getMonthFirstDay(e){return new Date(e.getFullYear(),e.getMonth(),1)}function formatShortDate(e,t){this.returnDateFormat=t;var n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear();if(!this.returnDateFormat){var r=daydiff(e,i);r<=0?a=trToday:1==r?a=trYesterday:(a=getMonthName(e.getMonth())+" "+e.getDate()+"th",e.getFullYear()!=n.getFullYear()&&(a+=", "+e.getFullYear()))}return a}function dateFromTimestamp(e){return new Date(1e3*Math.abs(e))}function daydiff(e,t){return Math.ceil((t-e)/864e5)}function setShortcuts(e,t){e.on("keyup",function(n){13!=n.keyCode||n.shiftKey||(n.altKey?e.val(e.val()+"\n"):(n.preventDefault(),t.submit())),"umichat"==CONTACTS[currentChat].getChannel().type&&(sendForm.hasClass("show-format")?(clearTimeout(formatInfoTimeout),formatInfoTimeout=setTimeout(function(){sendForm.removeClass("show-format")},formatInfoTime)):(sendForm.addClass("show-format"),formatInfoTimeout=setTimeout(function(){sendForm.removeClass("show-format")},formatInfoTime)))}),e.on("keypress",function(e){13!=e.keyCode||e.shiftKey||e.preventDefault()})}function sortContacts(){function e(e,t){return $(t).attr("timestamp")>$(e).attr("timestamp")?1:-1}$(".js-load-more").length>0?$(".js-list-contacts li").sort(e).insertBefore($(".js-load-more")):$(".js-list-contacts li").sort(e).appendTo(".js-list-contacts"),currentChat&&CONTACTS[currentChat].goToContact()}function sortStarredMessages(){function e(e,t){return $(t).data("timestamp")>$(e).data("timestamp")?1:-1}$(".js-ticket-starred .wz-starred-message").sort(e).appendTo($(".js-ticket-starred "))}function sortOrdersInverse(){var e=$(".js-order-view");for(i=0;i<e.length;i++)$("#wz-tab-pedidos").prepend($(e[i])),$(e[i]).removeClass("hidden")}function createSwitch(e,t){if("string"!=typeof e)throw new TypeError("createSwitch(): First arg must be a String.");if("function"!=typeof t)throw new TypeError("createSwitch(): Second arg must be a Function.");$(e).click(function(){$(this).hasClass("wz-switch-inactive")&&($(e+".wz-switch-active").removeClass("wz-switch-active").addClass("wz-switch-inactive"),$(this).removeClass("wz-switch-inactive").addClass("wz-switch-active"),t(this))})}function logError(e,t,n){var i="["+trError+"]"+e;t&&(i+=" @ "+t),n&&(i+=":"+n),console.log(i)}function removeClassByRegExp(e,t){var n=e.attr("class");if("string"==typeof n){for(var i=n.split(/\s+/),a=[],r=0;r<i.length;r++)i[r].match(t)||a.push(i[r]);e.attr("class",a.join(" "))}}function getClassByName(e,t){for(var n=e.attr("class").split(/\s+/),i=0;i<n.length;i++)if(n[i].match(t))return n[i];return""}function createSomeUmiMessages(e,t,n){var i=/\@helloumi\.com$/;if(!i.test(email)||!i.test(e))return messageUmiLastChat=currentChat,!1;if(messageUmiLastChat==currentChat)return!1;messageUmiTimestamp||(messageUmiTimestamp=Date.now()/1e3);var a=messageUmiTimestamp,r=dateFromTimestamp(a),o=new Date(formatShortDate(r,!0)),s="js-day-"+formatShortDate(r,!0).replace(/\//g,"-"),l=o.getTime()/1e3;if(MESSAGES["umi"+l]=new Message({key:function(){return"umi"+l},val:function(){return{chat:currentChat,message:trHeyCustomer+CONTACTS[currentChat].getName()+trHasStarted,author:0,date:l,day:o,dayClass:s,timestamp:a,samurai:1,read:!0,type:"umi",button_class_1:"hide",button_class_2:"hide"}},ref:function(){return $("<div>")}}),MESSAGES["umi"+l].render(),t&&$.each(t,function(e,t){if(""!=t&&"None"!=t){a+=.1;var n=dateFromTimestamp(a),i=new Date(formatShortDate(n,!0)),r="js-day-"+formatShortDate(n,!0).replace(/\//g,"-"),o=i.getTime()/1e3;MESSAGES["umi"+o]=new Message({key:function(){return"umi"+o},val:function(){return{chat:currentChat,message:CONTACTS[currentChat].getName()+trHasSet+e+trTo+"*"+t+"*.",author:0,date:o,day:i,dayClass:r,timestamp:a,samurai:1,read:!0,type:"umi",button_class_1:"hide",button_class_2:"hide"}},ref:function(){return $("<div>")}}),MESSAGES["umi"+o].render()}}),n){a+=.1;var r=dateFromTimestamp(a),o=new Date(formatShortDate(r,!0)),s="js-day-"+formatShortDate(r,!0).replace(/\//g,"-"),l=o.getTime()/1e3;MESSAGES["umi"+l]=new Message({key:function(){return"umi"+l},val:function(){return{chat:currentChat,message:trHey+firstName+"! "+CONTACTS[currentChat].getName()+trDemands+" *"+n.name+"*. "+trIVeCreated,author:0,date:l,day:o,dayClass:s,timestamp:a,samurai:1,read:!0,type:"umi",button_class_1:"btn-white-pink",button_text_1:trViewTicket,button_click_1:"daisho.getOrderProfile("+n.id+", [viewProfileOrder]);",button_class_2:"btn-white-pink",button_text_2:trSendPayment,button_click_2:"daisho.getOrderProfile("+n.id+", [viewProfileOrder, daisho.getPaymentForm]);"}},ref:function(){return $("<div>")}}),MESSAGES["umi"+l].render()}scrollMessages(),firebaseService.sortMessages("."+s),messageUmiLastChat=currentChat}function zoomImageElem(e){window.open(e.attr("src"))}function clearAccents(e){var t=e.replace(/[áàäâ]/g,"a");return t=t.replace(/[ÁÀÄÂ]/g,"A"),t=t.replace(/[éèëê]/g,"e"),t=t.replace(/[ÉÈËÊ]/g,"E"),t=t.replace(/[íìïî]/g,"i"),t=t.replace(/[ÍÌÏÎ]/g,"I"),t=t.replace(/[óòöô]/g,"o"),t=t.replace(/[ÓÒÖÔ]/g,"O"),t=t.replace(/[úùüû]/g,"u"),t=t.replace(/[ÚÙÜÛ]/g,"U"),t=t.replace(/ñ/g,"n"),t=t.replace(/Ñ/g,"N")}function getInitials(e){var t="?";if("string"==typeof e&&e.length>0)for(var t="",n=clearAccents(e).toUpperCase(),i=n.replace(/\W/g," ").replace(/\s+/g," ").split(" "),a=0;a<i.length&&a<2;a++)t+=i[a].charAt(0);return t}function preventDefault(e){e.preventDefault()}function preventPaste(e){document.execCommand("insertText",!1,e.originalEvent.clipboardData.getData("text")),e.preventDefault()}function preventPasteHard(e){e.preventDefault()}function preventSpecialChar(e,t){var n=e.keyCode||e.which;if(!(t&&t.length&&t.indexOf(n)>-1||46===e.keyCode||8===e.keyCode||e.keyCode>=37&&e.keyCode<=40)){13===e.keyCode&&(e.preventDefault(),$(this).trigger("change"),$(this).focusout());var i=String.fromCharCode(n);new RegExp("[0-9a-zA-Z_]").test(i)||e.preventDefault()}}function preventIntro(e){13==(e.keyCode||e.which)&&e.preventDefault()}function stopPropagation(e){e.stopPropagation()}function showDefaultErrorNotification(){new NotificationPlugin(trError,trAnErrorOcurred,"icon-cross")}function checkFormChanges(){""==$.trim($(this).val())?$(this).addClass("error"):$(this).removeClass("error")}function checkFormElements(e){var t=!0;return $(e).find("input.form-control, select.form-control").removeClass("error").off("change",checkFormChanges),$(e).find("input.form-control, select.form-control").each(function(e,n){var i=$(n);""==$.trim(i.val())&&(i.addClass("error"),i.on("change",checkFormChanges),t=!1)}),t}function copyToClipboard(e){var t=e.data.shareValue||$(this).data("share-value"),n=e.data.valueType||$(this).data("value-type"),i=e.data.shareValueHide||!1,a=e.data.basicNotification||!1,r=$("<input>").val(t);r.appendTo($("body")),r.select(),document.execCommand("copy"),a?new NotificationPlugin(n+trCopied,t,"icon-clipboard",null,null,longNotificationTimer):i?new NotificationPlugin(n+trCopied,trYour+" "+n+"  "+trHasBeenCopied,"icon-clipboard",null,null,longNotificationTimer):new NotificationPlugin(n+trCopied,trYour+" "+n+" ("+t+") "+trHasBeenCopied,"icon-clipboard",null,null,longNotificationTimer),r.remove()}function validateCIF(e){if("string"==typeof e&&9==e.length){var t=e.toUpperCase();if(-1!="ABCDEFGHJNPQRSUVW".indexOf(t[0])&&/^\d{2}$/.test(t.slice(1,3))&&!/^(00)$/.test(t.slice(1,3))&&/^\d{5}$/.test(t.slice(3,8))){var n=t.slice(1,8),a=0,r=0;for(i=0;i<n.length;i++){var o=parseInt(n[i]);if(o>0)if(i%2!=0)a+=o;else if(i%2==0){var s=(2*o).toString();s.length>1&&(s=parseInt(s[0])+parseInt(s[1])),r+=parseInt(s)}}var l=(a+r).toString(),c=parseInt(l[l.length-1]),u=0;0!=c&&(u=10-c);var h="JABCDEFGHI",d=h.charAt(u);return t[8]==d||t[8]==u}return!1}return!1}function getLocalStorage(e){return"undefined"!=typeof Storage?localStorage.getItem(e):(console.log(" No Web Storage support."),!1)}function setLocalStorage(e,t){return"undefined"!=typeof Storage?(localStorage.setItem(e,t),!0):(console.log(" No Web Storage support."),!1)}function clearLocalStorage(e){return"undefined"!=typeof Storage?(localStorage.removeItem(e),!0):(console.log(" No Web Storage support."),!1)}function randomizeURL(e){if("string"==typeof e){var t=new RegExp("(\\?|\\&)(timestamp=)([0-9]*)","g"),n=e.indexOf("?")>-1;if(e.search(t)>-1)return e.replace(t,"$1$2"+Date.now());return e+(n?"&":"?")+"timestamp="+Date.now()}return"timestamp="+Date.now()}function decreaseCounter(e){return e>0?--e:0}function connectSocket(){reconnecting=!1,ws=new MyWebSocket}function reconnectSocket(){reconnecting||(reconnecting=!0,remainingReconnectingTime=Math.pow(2,++currentRetry),$sideLeft1.find(".js-chats-select .badge").addClass("loading"),!notificationAlert.find(".alert-ws-disconnected").length>0&&notificationAlert.append(disconnectionTemplate.tmpl({})))}function changeStatus(){onlineStatus="online"==onlineStatus?"busy":"online",firebaseService.updateStatus(onlineStatus),daisho.changeStatus(onlineStatus).fail(showDefaultErrorNotification).done(function(){"online"==onlineStatus?($(".wz-operator-status").removeClass("busy"),$(".wz-status-text").html(trBusy+'<i class="pull-right icon-ban"></i>')):"busy"==onlineStatus&&($(".wz-operator-status").addClass("busy"),$(".wz-status-text").html(trActivate+'<i class="pull-right icon-reload"></i>')),refreshSamuraiStatus(myID,onlineStatus),mixpanelEvents("operatorStatus")})}function refreshSamuraiStatus(e,t){var n=t.toLowerCase();void 0===SAMURAIS[e]&&(SAMURAIS[e]={},daisho.reloadSamurais()),SAMURAIS[e].status=t,$("li.js-samurai-list[data-samurai="+e+"]").removeClass("js-samurai-online"),$("li.js-samurai-list[data-samurai="+e+"]").removeClass("js-samurai-offline"),$("li.js-samurai-list[data-samurai="+e+"]").removeClass("js-samurai-busy"),$("li.js-samurai-list[data-samurai="+e+"]").addClass("js-samurai-"+n),loadSearchSamurai("#client-status"),loadSearchSamurai(".wz-col-central footer .assignation")}+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.affix"),r="object"==typeof t&&t;a||i.data("bs.affix",a=new n(this,r)),"string"==typeof t&&a[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.2.0",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=e(document).height(),i=this.$target.scrollTop(),a=this.$element.offset(),r=this.options.offset,o=r.top,s=r.bottom;"object"!=typeof r&&(s=o=r),"function"==typeof o&&(o=r.top(this.$element)),"function"==typeof s&&(s=r.bottom(this.$element));var l=!(null!=this.unpin&&i+this.unpin<=a.top)&&(null!=s&&a.top+this.$element.height()>=t-s?"bottom":null!=o&&i<=o&&"top");if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),u=e.Event(c+".bs.affix");this.$element.trigger(u),u.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:t-this.$element.height()-s}))}}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new i(this)),"string"==typeof t&&a[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.2.0",i.prototype.close=function(t){function n(){r.detach().trigger("closed.bs.alert").remove()}var i=e(this),a=i.attr("data-target");a||(a=i.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var r=e(a);t&&t.preventDefault(),r.length||(r=i.hasClass("alert")?i:i.parent()),r.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(150):n())};var a=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=a,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.button"),r="object"==typeof t&&t;a||i.data("bs.button",a=new n(this,r)),"toggle"==t?a.toggle():t&&a.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.2.0",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,a=i.is("input")?"val":"html",r=i.data();t+="Text",null==r.resetText&&i.data("resetText",i[a]()),i[a](null==r[t]?this.options[t]:r[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),n.preventDefault()})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.carousel"),r=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),o="string"==typeof t?t:r.slide;a||i.data("bs.carousel",a=new n(this,r)),"number"==typeof t?a.to(t):o?a[o]():r.interval&&a.pause().cycle()})}var n=function(t,n){this.$element=e(t).on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.2.0",n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},n.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.to=function(t){var n=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(t,n){var i=this.$element.find(".item.active"),a=n||i[t](),r=this.interval,o="next"==t?"left":"right",s="next"==t?"first":"last",l=this;if(!a.length){if(!this.options.wrap)return;a=this.$element.find(".item")[s]()}if(a.hasClass("active"))return this.sliding=!1;var c=a[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:o});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=e(this.$indicators.children()[this.getItemIndex(a)]);h&&h.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:c,direction:o});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,i.addClass(o),a.addClass(o),i.one("bsTransitionEnd",function(){a.removeClass([t,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(d)),r&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(n){var i,a=e(this),r=e(a.attr("data-target")||(i=a.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var o=e.extend({},r.data(),a.data()),s=a.attr("data-slide-to");s&&(o.interval=!1),t.call(r,o),s&&r.data("bs.carousel").to(s),n.preventDefault()}}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.collapse"),r=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!a&&r.toggle&&"show"==t&&(t=!t),a||i.data("bs.collapse",a=new n(this,r)),"string"==typeof t&&a[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};n.VERSION="3.2.0",n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n=e.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var a=i.data("bs.collapse");if(a&&a.transitioning)return;t.call(i,"hide"),a||i.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var s=e.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(350)[r](this.$element[0][s])}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!e.support.transition)return i.call(this);this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(350)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var i,a=e(this),r=a.attr("data-target")||n.preventDefault()||(i=a.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),o=e(r),s=o.data("bs.collapse"),l=s?"toggle":a.data(),c=a.attr("data-parent"),u=c&&e(c);s&&s.transitioning||(u&&u.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(a).addClass("collapsed"),a[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),t.call(o,l)})}(jQuery),function(e){"use strict";function t(t){t&&3===t.which||(e(a).remove(),e(r).each(function(){var i=n(e(this)),a={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",a)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",a))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})}var a=".dropdown-backdrop",r='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.2.0",o.prototype.toggle=function(i){var a=e(this);if(!a.is(".disabled, :disabled")){var r=n(a),o=r.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(r.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;a.trigger("focus"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var a=n(i),o=a.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&a.find(r).trigger("focus"),i.trigger("click");var s=" li:not(.divider):visible a",l=a.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r+', [role="menu"], [role="listbox"]',o.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,i){return this.each(function(){var a=e(this),r=a.data("bs.modal"),o=e.extend({},n.DEFAULTS,a.data(),"object"==typeof t&&t);r||a.data("bs.modal",r=new n(this,o)),"string"==typeof t?r[t](i):o.show&&r.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.2.0",n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(300):n.$element.trigger("focus").trigger(a)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var n=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(150):r()}else t&&t()},n.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),a=i.attr("href"),r=e(i.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(a)&&a},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(r,o,this)})}(jQuery),function(e){"use strict";function t(n,i){var a=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(n).is("body")?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),a=i.data("bs.scrollspy"),r="object"==typeof n&&n;a||i.data("bs.scrollspy",a=new t(this,r)),"string"==typeof n&&a[n]()})}t.VERSION="3.2.0",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",n=0;e.isWindow(this.$scrollElement[0])||(t="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=e(this),a=i.data("target")||i.attr("href"),r=/^#./.test(a)&&e(a);return r&&r.length&&r.is(":visible")&&[[r[t]().top+n,a]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),a=this.offsets,r=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return o!=(e=r[r.length-1])&&this.activate(e);if(o&&t<=a[0])return o!=(e=r[0])&&this.activate(e);for(e=a.length;e--;)o!=r[e]&&t>=a[e]&&(!a[e+1]||t<=a[e+1])&&this.activate(r[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new n(this)),"string"==typeof t&&a[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.2.0",n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=n.find(".active:last a")[0],r=e.Event("show.bs.tab",{relatedTarget:a});if(t.trigger(r),!r.isDefaultPrevented()){var o=e(i);this.activate(t.closest("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:a})})}}},n.prototype.activate=function(t,n,i){function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),o=i&&e.support.transition&&r.hasClass("fade");o?r.one("bsTransitionEnd",a).emulateTransitionEnd(150):a(),r.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(n){n.preventDefault(),t.call(e(this),"show")})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.tooltip"),r="object"==typeof t&&t;(a||"destroy"!=t)&&(a||i.data("bs.tooltip",a=new n(this,r)),"string"==typeof t&&a[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.2.0",n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),
this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var a=this.options.trigger.split(" "),r=a.length;r--;){var o=a[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var i=this,a=this.tip(),r=this.getUID(this.type);this.setContent(),a.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&a.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,l=s.test(o);l&&(o=o.replace(s,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);var c=this.getPosition(),u=a[0].offsetWidth,h=a[0].offsetHeight;if(l){var d=o,f=this.$element.parent(),p=this.getPosition(f);o="bottom"==o&&c.top+c.height+h-p.scroll>p.height?"top":"top"==o&&c.top-p.scroll-h<0?"bottom":"right"==o&&c.right+u>p.width?"left":"left"==o&&c.left-u<p.left?"right":o,a.removeClass(d).addClass(o)}var m=this.getCalculatedOffset(o,c,u,h);this.applyPlacement(m,o);var g=function(){i.$element.trigger("shown.bs."+i.type),i.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),a=i[0].offsetWidth,r=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top=t.top+o,t.left=t.left+s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=r&&(t.top=t.top+r-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var h=u.left?2*u.left-a+l:2*u.top-r+c,d=u.left?"left":"top",f=u.left?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(h,i[0][f],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),a=e.Event("hide.bs."+this.type);if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(a),!a.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",t).emulateTransitionEnd(150):t(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName;return e.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():null,{scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:i?e(window).width():t.outerWidth(),height:i?e(window).height():t.outerHeight()},i?{top:0,left:0}:t.offset())},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var a={top:0,left:0};if(!this.$viewport)return a;var r=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-r-o.scroll,l=t.top+r-o.scroll+i;s<o.top?a.top=o.top-s:l>o.top+o.height&&(a.top=o.top+o.height-l)}else{var c=t.left-r,u=t.left+r+n;c<o.left?a.left=o.left-c:u>o.width&&(a.left=o.left+o.width-u)}return a},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var a=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.popover"),r="object"==typeof t&&t;(a||"destroy"!=t)&&(a||i.data("bs.popover",a=new n(this,r)),"string"==typeof t&&a[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.2.0",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery);var firebase=function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=void 0;if(void 0!==e)i=e;else if("undefined"!=typeof self)i=self;else try{i=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var a=i.Promise||n(8);t.local={Promise:a,GoogPromise:a}}).call(t,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=(0,i.createFirebaseNamespace)();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return a(void 0,e)}function a(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=a(e[n],t[n]));return e}function r(e,t,n){e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopy=i,t.deepExtend=a,t.patchProperty=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=o;return o=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.patchCapture=a;var o=Error.captureStackTrace,s=function e(t,n){if(i(this,e),this.code=t,this.message=n,o)o(this,l.prototype.create);else{var a=Error.apply(this,arguments);this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return a.stack}})}};s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s.prototype.name="FirebaseError";var l=t.ErrorFactory=function(){function e(t,n,a){i(this,e),this.service=t,this.serviceName=n,this.errors=a,this.pattern=/\{\$([^}]+)}/g}return r(e,[{key:"create",value:function(e,t){void 0===t&&(t={});var n=this.errors[e],i=this.service+"/"+e,a=void 0;a=void 0===n?"Error":n.replace(this.pattern,function(e,n){var i=t[n];return void 0!==i?i.toString():"<"+n+"?>"}),a=this.serviceName+": "+a+" ("+i+").";var r=new s(i,a);for(var o in t)t.hasOwnProperty(o)&&"_"!==o.slice(-1)&&(r[o]=t[o]);return r}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){function e(e){e=e||d;var t=i[e];return void 0===t&&r("no-app",{name:e}),t}function t(e,t){Object.keys(o).forEach(function(i){var a=n(e,i);null!==a&&p[a]&&p[a](t,e)})}function n(e,t){if("serverAuth"===t)return null;var n=t,i=e.options;return"auth"===t&&(i.serviceAccount||i.credential)&&(n="serverAuth","serverAuth"in o||r("sa-not-supported")),n}var i={},o={},p={},m={__esModule:!0,initializeApp:function(e,n){void 0===n?n=d:"string"==typeof n&&""!==n||r("bad-app-name",{name:n+""}),void 0!==i[n]&&r("duplicate-app",{name:n});var a=new f(e,n,m);return i[n]=a,t(a,"create"),void 0!=a.INTERNAL&&void 0!=a.INTERNAL.getToken||(0,s.deepExtend)(a,{INTERNAL:{getUid:function(){return null},getToken:function(){return h.resolve(null)},addAuthTokenListener:function(){},removeAuthTokenListener:function(){}}}),a},app:e,apps:null,Promise:h,SDK_VERSION:"3.9.0",INTERNAL:{registerService:function(t,n,i,a,l){o[t]&&r("duplicate-service",{name:t}),o[t]=l?n:function(e,t){return n(e,t,d)},a&&(p[t]=a);var c=void 0;return c=function(n){return void 0===n&&(n=e()),"function"!=typeof n[t]&&r("invalid-app-argument",{name:t}),n[t]()},void 0!==i&&(0,s.deepExtend)(c,i),m[t]=c,c},createFirebaseNamespace:a,extendNamespace:function(e){(0,s.deepExtend)(m,e)},createSubscribe:l.createSubscribe,ErrorFactory:c.ErrorFactory,removeApp:function(e){t(i[e],"delete"),delete i[e]},factories:o,useAsService:n,Promise:u.local.GoogPromise,deepExtend:s.deepExtend}};return(0,s.patchProperty)(m,"default",m),Object.defineProperty(m,"apps",{get:function(){return Object.keys(i).map(function(e){return i[e]})}}),(0,s.patchProperty)(e,"App",f),m}function r(e,t){throw m.create(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.createFirebaseNamespace=a;var s=n(3),l=n(6),c=n(4),u=n(0),h=u.local.Promise,d="[DEFAULT]",f=function(){function e(t,n,a){var r=this;i(this,e),this.firebase_=a,this.isDeleted_=!1,this.services_={},this.name_=n,this.options_=(0,s.deepCopy)(t);var o="credential"in this.options_,l="serviceAccount"in this.options_;if(o||l){var c=l?"serviceAccount":"credential";"undefined"!=typeof console&&console.log("The '"+c+"' property specified in the first argument to initializeApp() is deprecated and will be removed in the next major version. You should instead use the 'firebase-admin' package. See https://firebase.google.com/docs/admin/setup for details on how to get started.")}Object.keys(a.INTERNAL.factories).forEach(function(e){var t=a.INTERNAL.useAsService(r,e);if(null!==t){var n=r.getService.bind(r,t);(0,s.patchProperty)(r,e,n)}})}return o(e,[{key:"delete",value:function(){var e=this;return new h(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach(function(n){Object.keys(e.services_[n]).forEach(function(i){t.push(e.services_[n][i])})}),h.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})}},{key:"getService",value:function(e,t){this.checkDestroyed_(),void 0===this.services_[e]&&(this.services_[e]={});var n=t||d;if(void 0===this.services_[e][n]){var i=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),t);return this.services_[e][n]=i,i}return this.services_[e][n]}},{key:"extendApp",value:function(e){(0,s.deepExtend)(this,e)}},{key:"checkDestroyed_",value:function(){this.isDeleted_&&r("app-deleted",{name:this.name_})}},{key:"name",get:function(){return this.checkDestroyed_(),this.name_}},{key:"options",get:function(){return this.checkDestroyed_(),this.options_}}]),e}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var p={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},m=new c.ErrorFactory("app","Firebase",p)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){var n=new d(e,t);return n.subscribe.bind(n)}function r(e,t){return function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];h.resolve(!0).then(function(){e.apply(void 0,i)}).catch(function(e){t&&t(e)})}}function o(e,t){if("object"!==(void 0===e?"undefined":l(e))||null===e)return!1;var n=!0,i=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;if(s in e&&"function"==typeof e[s])return!0}}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return!1}function s(){}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.createSubscribe=a,t.async=r;var u=n(0),h=u.local.Promise,d=function(){function e(t,n){var a=this;i(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=h.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(a)}).catch(function(e){a.error(e)})}return c(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var i=this,a=void 0;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");a=o(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===a.next&&(a.next=s),void 0===a.error&&(a.error=s),void 0===a.complete&&(a.complete=s);var r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?a.error(i.finalError):a.complete()}catch(e){}}),this.observers.push(a),r}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}()},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function r(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function o(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&s())}function s(){if(!m){var e=a(o);m=!0;for(var t=p.length;t;){for(f=p,p=[];++g<t;)f&&f[g].run();g=-1,t=p.length}f=null,m=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,h,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var f,p=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){(function(t){!function(n){function i(){}function a(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function o(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:l)(t.promise,e._value);var i;try{i=n(e._value)}catch(e){return void l(t.promise,e)}s(t.promise,i)})}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void h(a(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){l(e,t)}}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,l(t,e))})}catch(e){if(n)return;n=!0,l(t,e)}}var d=setTimeout;r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(i);return o(this,new u(e,t,n)),n},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function i(r,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){i(r,e)},n)}t[r]=o,0==--a&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var a=t.length,r=0;r<t.length;r++)i(r,t[r])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var i=0,a=e.length;i<a;i++)e[i].then(t,n)})},r._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){d(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=r:n.Promise||(n.Promise=r)}(this)}).call(t,n(10).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,s(l),l++}function a(e){delete c[e]}function r(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function o(e){if(u)setTimeout(o,0,e);else{var t=c[e];if(t){u=!0;try{r(t)}finally{a(e),u=!1}}}}if(!e.setImmediate){var s,l=1,c={},u=!1,h=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){o(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},s=function(t){e.port2.postMessage(t)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var e=h.documentElement;s=function(t){var n=h.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(o,0,e)}}(),d.setImmediate=i,d.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(1),n(7))},function(e,t,n){function i(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(9),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){e.exports=n(2)}]);(function(){var e,t=t||{},n=this,i=function(){},a=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},r=function(e){return null===e},o=function(e){return"array"==a(e)},s=function(e){var t=a(e);return"array"==t||"object"==t&&"number"==typeof e.length},l=function(e){return"string"==typeof e},c=function(e){return"number"==typeof e},u=function(e){return"function"==a(e)},h=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},d=function(e,t,n){return e.call.apply(e.bind,arguments)},f=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},p=function(e,t,n){return p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:f,p.apply(null,arguments)},m=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},g=Date.now||function(){return+new Date},v=function(e,t){function n(){}n.prototype=t.prototype,e.xd=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Tf=function(e,n,i){for(var a=Array(arguments.length-2),r=2;r<arguments.length;r++)a[r-2]=arguments[r];return t.prototype[n].apply(e,a)}},b=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))};v(b,Error),b.prototype.name="CustomError";var y=function(e,t){for(var n=e.split("%s"),i="",a=Array.prototype.slice.call(arguments,1);a.length&&1<n.length;)i+=n.shift()+a.shift();return i+n.join("%s")},w=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},_=/&/g,k=/</g,C=/>/g,S=/"/g,T=/'/g,x=/\x00/g,D=/[\x00&<>"']/,E=function(e,t){return-1!=e.indexOf(t)},A=function(e,t){return e<t?-1:e>t?1:0},$=function(e,t){t.unshift(e),b.call(this,y.apply(null,t)),t.shift()};v($,b),$.prototype.name="AssertionError";var M,I=function(e,t,n,i){var a="Assertion failed";if(n)var a=a+": "+n,r=i;else e&&(a+=": "+e,r=t);throw new $(""+a,r||[])},N=function(e,t,n){e||I("",null,t,Array.prototype.slice.call(arguments,2))},P=function(e,t){throw new $("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))},O=function(e,t,n){return c(e)||I("Expected number but got %s: %s.",[a(e),e],t,Array.prototype.slice.call(arguments,2)),e},j=function(e,t,n){l(e)||I("Expected string but got %s: %s.",[a(e),e],t,Array.prototype.slice.call(arguments,2))},R=function(e,t,n){u(e)||I("Expected function but got %s: %s.",[a(e),e],t,Array.prototype.slice.call(arguments,2))},L=Array.prototype.indexOf?function(e,t,n){return N(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,l(e))return l(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},F=Array.prototype.forEach?function(e,t,n){N(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,a=l(e)?e.split(""):e,r=0;r<i;r++)r in a&&t.call(n,a[r],r,e)},U=function(e,t){for(var n=l(e)?e.split(""):e,i=e.length-1;0<=i;--i)i in n&&t.call(void 0,n[i],i,e)},W=Array.prototype.map?function(e,t,n){return N(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var i=e.length,a=Array(i),r=l(e)?e.split(""):e,o=0;o<i;o++)o in r&&(a[o]=t.call(n,r[o],o,e));return a},H=Array.prototype.some?function(e,t,n){return N(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var i=e.length,a=l(e)?e.split(""):e,r=0;r<i;r++)if(r in a&&t.call(n,a[r],r,e))return!0;return!1},z=function(e){var t;e:{t=$i;for(var n=e.length,i=l(e)?e.split(""):e,a=0;a<n;a++)if(a in i&&t.call(void 0,i[a],a,e)){t=a;break e}t=-1}return 0>t?null:l(e)?e.charAt(t):e[t]},Y=function(e,t){return 0<=L(e,t)},B=function(e,t){t=L(e,t);var n;return(n=0<=t)&&V(e,t),n},V=function(e,t){return N(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},q=function(e,t){var n=0;U(e,function(i,a){t.call(void 0,i,a,e)&&V(e,a)&&n++})},K=function(e){return Array.prototype.concat.apply([],arguments)},X=function(e){var t=e.length;if(0<t){for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}return[]},G=function(e){return W(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join("")};e:{var Q=n.navigator;if(Q){var J=Q.userAgent;if(J){M=J;break e}}M=""}var Z=function(e){return E(M,e)},ee=function(e,t){
for(var n in e)t.call(void 0,e[n],n,e)},te=function(e){var t,n=[],i=0;for(t in e)n[i++]=e[t];return n},ne=function(e){var t,n=[],i=0;for(t in e)n[i++]=t;return n},ie=function(e){for(var t in e)return!1;return!0},ae=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0},re=function(e){var t,n={};for(t in e)n[t]=e[t];return n},oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),se=function(e,t){for(var n,i,a=1;a<arguments.length;a++){i=arguments[a];for(n in i)e[n]=i[n];for(var r=0;r<oe.length;r++)n=oe[r],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}},le=function(e){return le[" "](e),e};le[" "]=i;var ce,ue=function(e,t){var n=Ce;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)},he=Z("Opera"),de=Z("Trident")||Z("MSIE"),fe=Z("Edge"),pe=fe||de,me=Z("Gecko")&&!(E(M.toLowerCase(),"webkit")&&!Z("Edge"))&&!(Z("Trident")||Z("MSIE"))&&!Z("Edge"),ge=E(M.toLowerCase(),"webkit")&&!Z("Edge"),ve=function(){var e=n.document;return e?e.documentMode:void 0};e:{var be="",ye=function(){var e=M;return me?/rv\:([^\);]+)(\)|;)/.exec(e):fe?/Edge\/([\d\.]+)/.exec(e):de?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ge?/WebKit\/(\S+)/.exec(e):he?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ye&&(be=ye?ye[1]:""),de){var we=ve();if(null!=we&&we>parseFloat(be)){ce=String(we);break e}}ce=be}var _e,ke=ce,Ce={},Se=function(e){return ue(e,function(){for(var t=0,n=w(String(ke)).split("."),i=w(String(e)).split("."),a=Math.max(n.length,i.length),r=0;0==t&&r<a;r++){var o=n[r]||"",s=i[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=A(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||A(0==o[2].length,0==s[2].length)||A(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t})},Te=n.document;_e=Te&&de?ve()||("CSS1Compat"==Te.compatMode?parseInt(ke,10):5):void 0;var xe,De=null,Ee=null,Ae=function(e){var t="";return $e(e,function(e){t+=String.fromCharCode(e)}),t},$e=function(e,t){function n(t){for(;i<e.length;){var n=e.charAt(i++),a=Ee[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}Me();for(var i=0;;){var a=n(-1),r=n(0),o=n(64),s=n(64);if(64===s&&-1===a)break;t(a<<2|r>>4),64!=o&&(t(r<<4&240|o>>2),64!=s&&t(o<<6&192|s))}},Me=function(){if(!De){De={},Ee={};for(var e=0;65>e;e++)De[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Ee[De[e]]=e,62<=e&&(Ee["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}},Ie=function(){this.Da=-1},Ne=function(e,t){this.Da=64,this.ec=n.Uint8Array?new Uint8Array(this.Da):Array(this.Da),this.Fc=this.hb=0,this.h=[],this.lf=e,this.Wd=t,this.Mf=n.Int32Array?new Int32Array(64):Array(64),void 0!==xe||(xe=n.Int32Array?new Int32Array(Le):Le),this.reset()};v(Ne,Ie);for(var Pe=[],Oe=0;63>Oe;Oe++)Pe[Oe]=0;var je=K(128,Pe);Ne.prototype.reset=function(){this.Fc=this.hb=0,this.h=n.Int32Array?new Int32Array(this.Wd):X(this.Wd)};var Re=function(e){var t=e.ec;N(t.length==e.Da);for(var n=e.Mf,i=0,a=0;a<t.length;)n[i++]=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3],a=4*i;for(t=16;64>t;t++){var a=0|n[t-15],i=0|n[t-2],r=(0|n[t-16])+((a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3)|0,o=(0|n[t-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[t]=r+o|0}for(var i=0|e.h[0],a=0|e.h[1],s=0|e.h[2],l=0|e.h[3],c=0|e.h[4],u=0|e.h[5],h=0|e.h[6],r=0|e.h[7],t=0;64>t;t++)var d=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&a^i&s^a&s)|0,o=c&u^~c&h,r=r+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,o=o+(0|xe[t])|0,o=r+(o+(0|n[t])|0)|0,r=h,h=u,u=c,c=l+o|0,l=s,s=a,a=i,i=o+d|0;e.h[0]=e.h[0]+i|0,e.h[1]=e.h[1]+a|0,e.h[2]=e.h[2]+s|0,e.h[3]=e.h[3]+l|0,e.h[4]=e.h[4]+c|0,e.h[5]=e.h[5]+u|0,e.h[6]=e.h[6]+h|0,e.h[7]=e.h[7]+r|0};Ne.prototype.update=function(e,t){void 0===t&&(t=e.length);var n=0,i=this.hb;if(l(e))for(;n<t;)this.ec[i++]=e.charCodeAt(n++),i==this.Da&&(Re(this),i=0);else{if(!s(e))throw Error("message must be string or array");for(;n<t;){var a=e[n++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");this.ec[i++]=a,i==this.Da&&(Re(this),i=0)}}this.hb=i,this.Fc+=t},Ne.prototype.digest=function(){var e=[],t=8*this.Fc;56>this.hb?this.update(je,56-this.hb):this.update(je,this.Da-(this.hb-56));for(var n=63;56<=n;n--)this.ec[n]=255&t,t/=256;for(Re(this),n=t=0;n<this.lf;n++)for(var i=24;0<=i;i-=8)e[t++]=this.h[n]>>i&255;return e};var Le=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Fe=function(){Ne.call(this,8,Ue)};v(Fe,Ne);var Ue=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],We=function(){this.Ga=this.Ga,this.tc=this.tc};We.prototype.Ga=!1,We.prototype.isDisposed=function(){return this.Ga},We.prototype.cb=function(){if(this.tc)for(;this.tc.length;)this.tc.shift()()};var He=!de||9<=Number(_e),ze=de&&!Se("9");!ge||Se("528"),me&&Se("1.9b")||de&&Se("8")||he&&Se("9.5")||ge&&Se("528"),me&&!Se("8")||de&&Se("9");var Ye=function(e,t){this.type=e,this.currentTarget=this.target=t,this.defaultPrevented=this.nb=!1,this.ee=!0};Ye.prototype.preventDefault=function(){this.defaultPrevented=!0,this.ee=!1};var Be=function(e,t){Ye.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.eb=this.state=null,e&&this.init(e,t)};v(Be,Ye),Be.prototype.init=function(e,t){var n=this.type=e.type,i=e.changedTouches?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.currentTarget=t,t=e.relatedTarget){if(me){var a;e:{try{le(t.nodeName),a=!0;break e}catch(e){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,null===i?(this.offsetX=ge||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=ge||void 0!==e.offsetY?e.offsetY:e.layerY,this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.charCode=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.state=e.state,this.eb=e,e.defaultPrevented&&this.preventDefault()},Be.prototype.preventDefault=function(){Be.xd.preventDefault.call(this);var e=this.eb;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ze)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},Be.prototype.Pe=function(){return this.eb};var Ve="closure_listenable_"+(1e6*Math.random()|0),qe=0,Ke=function(e,t,n,i,a){this.listener=e,this.xc=null,this.src=t,this.type=n,this.capture=!!i,this.kc=a,this.key=++qe,this.rb=this.dc=!1},Xe=function(e){e.rb=!0,e.listener=null,e.xc=null,e.src=null,e.kc=null},Ge=function(e){this.src=e,this.G={},this.$b=0};Ge.prototype.add=function(e,t,n,i,a){var r=e.toString();(e=this.G[r])||(e=this.G[r]=[],this.$b++);var o=Je(e,t,i,a);return-1<o?(t=e[o],n||(t.dc=!1)):(t=new Ke(t,this.src,r,!!i,a),t.dc=n,e.push(t)),t},Ge.prototype.remove=function(e,t,n,i){if(!((e=e.toString())in this.G))return!1;var a=this.G[e];return-1<(t=Je(a,t,n,i))&&(Xe(a[t]),V(a,t),0==a.length&&(delete this.G[e],this.$b--),!0)};var Qe=function(e,t){var n=t.type;n in e.G&&B(e.G[n],t)&&(Xe(t),0==e.G[n].length&&(delete e.G[n],e.$b--))};Ge.prototype.Uc=function(e,t,n,i){e=this.G[e.toString()];var a=-1;return e&&(a=Je(e,t,n,i)),-1<a?e[a]:null};var Je=function(e,t,n,i){for(var a=0;a<e.length;++a){var r=e[a];if(!r.rb&&r.listener==t&&r.capture==!!n&&r.kc==i)return a}return-1},Ze="closure_lm_"+(1e6*Math.random()|0),et={},tt=0,nt=function(e,t,n,i,a){if(o(t))for(var r=0;r<t.length;r++)nt(e,t[r],n,i,a);else n=pt(n),e&&e[Ve]?e.listen(t,n,i,a):it(e,t,n,!1,i,a)},it=function(e,t,n,i,a,r){if(!t)throw Error("Invalid event type");var o=!!a,s=dt(e);if(s||(e[Ze]=s=new Ge(e)),n=s.add(t,n,i,a,r),!n.xc){if(i=at(),n.xc=i,i.src=e,i.listener=n,e.addEventListener)e.addEventListener(t.toString(),i,o);else{if(!e.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");e.attachEvent(lt(t.toString()),i)}tt++}},at=function(){var e=ht,t=He?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t},rt=function(e,t,n,i,a){if(o(t))for(var r=0;r<t.length;r++)rt(e,t[r],n,i,a);else n=pt(n),e&&e[Ve]?gi(e,t,n,i,a):it(e,t,n,!0,i,a)},ot=function(e,t,n,i,a){if(o(t))for(var r=0;r<t.length;r++)ot(e,t[r],n,i,a);else n=pt(n),e&&e[Ve]?e.fa.remove(String(t),n,i,a):e&&(e=dt(e))&&(t=e.Uc(t,n,!!i,a))&&st(t)},st=function(e){if(!c(e)&&e&&!e.rb){var t=e.src;if(t&&t[Ve])Qe(t.fa,e);else{var n=e.type,i=e.xc;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent&&t.detachEvent(lt(n),i),tt--,(n=dt(t))?(Qe(n,e),0==n.$b&&(n.src=null,t[Ze]=null)):Xe(e)}}},lt=function(e){return e in et?et[e]:et[e]="on"+e},ct=function(e,t,n,i){var a=!0;if((e=dt(e))&&(t=e.G[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var r=t[e];r&&r.capture==n&&!r.rb&&(r=ut(r,i),a=a&&!1!==r)}return a},ut=function(e,t){var n=e.listener,i=e.kc||e.src;return e.dc&&st(e),n.call(i,t)},ht=function(e,t){if(e.rb)return!0;if(!He){if(!t)e:{t=["window","event"];for(var i,a=n;i=t.shift();){if(null==a[i]){t=null;break e}a=a[i]}t=a}if(i=t,t=new Be(i,this),a=!0,!(0>i.keyCode||void 0!=i.returnValue)){e:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break e}catch(e){r=!0}(r||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=t.currentTarget;r;r=r.parentNode)i.push(r);for(e=e.type,r=i.length-1;!t.nb&&0<=r;r--){t.currentTarget=i[r];var o=ct(i[r],e,!0,t),a=a&&o}for(r=0;!t.nb&&r<i.length;r++)t.currentTarget=i[r],o=ct(i[r],e,!1,t),a=a&&o}return a}return ut(e,new Be(t,this))},dt=function(e){return e=e[Ze],e instanceof Ge?e:null},ft="__closure_events_fn_"+(1e9*Math.random()>>>0),pt=function(e){return N(e,"Listener can not be null."),u(e)?e:(N(e.handleEvent,"An object listener must have handleEvent method."),e[ft]||(e[ft]=function(t){return e.handleEvent(t)}),e[ft])},mt=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/,gt=function(){this.Cc="",this.we=bt};gt.prototype.Eb=!0,gt.prototype.Bb=function(){return this.Cc},gt.prototype.toString=function(){return"Const{"+this.Cc+"}"};var vt=function(e){return e instanceof gt&&e.constructor===gt&&e.we===bt?e.Cc:(P("expected object of type Const, got '"+e+"'"),"type_error:Const")},bt={},yt=function(e){var t=new gt;return t.Cc=e,t};yt("");var wt=function(){this.wc="",this.xe=_t};wt.prototype.Eb=!0,wt.prototype.Bb=function(){return this.wc},wt.prototype.toString=function(){return"TrustedResourceUrl{"+this.wc+"}"};var _t={},kt=function(){this.pa="",this.ve=xt};kt.prototype.Eb=!0,kt.prototype.Bb=function(){return this.pa},kt.prototype.toString=function(){return"SafeUrl{"+this.pa+"}"};var Ct=function(e){return e instanceof kt&&e.constructor===kt&&e.ve===xt?e.pa:(P("expected object of type SafeUrl, got '"+e+"' of type "+a(e)),"type_error:SafeUrl")},St=/^(?:(?:https?|mailto|ftp):|[^&:\/?#]*(?:[\/?#]|$))/i,Tt=function(e){return e instanceof kt?e:(e=e.Eb?e.Bb():String(e),St.test(e)||(e="about:invalid#zClosurez"),Dt(e))},xt={},Dt=function(e){var t=new kt;return t.pa=e,t};Dt("about:blank");var Et=function(e){var t=[];return $t(new At,e,t),t.join("")},At=function(){this.yc=void 0},$t=function(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(o(t)){var i=t;t=i.length,n.push("[");for(var a="",r=0;r<t;r++)n.push(a),a=i[r],$t(e,e.yc?e.yc.call(i,String(r),a):a,n),a=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){n.push("{"),r="";for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&"function"!=typeof(a=t[i])&&(n.push(r),Nt(i,n),n.push(":"),$t(e,e.yc?e.yc.call(t,i,a):a,n),r=",");return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Nt(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}},Mt={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},It=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Nt=function(e,t){t.push('"',e.replace(It,function(e){var t=Mt[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Mt[e]=t),t}),'"')},Pt=function(){};Pt.prototype.Dd=null;var Ot,jt=function(e){return e.Dd||(e.Dd=e.$c())},Rt=function(){};v(Rt,Pt),Rt.prototype.fc=function(){var e=Lt(this);return e?new ActiveXObject(e):new XMLHttpRequest},Rt.prototype.$c=function(){var e={};return Lt(this)&&(e[0]=!0,e[1]=!0),e};var Lt=function(e){if(!e.Vd&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var i=t[n];try{return new ActiveXObject(i),e.Vd=i}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.Vd};Ot=new Rt;var Ft=function(){};v(Ft,Pt),Ft.prototype.fc=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Ut;throw Error("Unsupported browser")},Ft.prototype.$c=function(){return{}};var Ut=function(){this.ua=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.ua.onload=p(this.Re,this),this.ua.onerror=p(this.Sd,this),this.ua.onprogress=p(this.Se,this),this.ua.ontimeout=p(this.Te,this)};e=Ut.prototype,e.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.ua.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.ua.send(e)}else this.ua.send()},e.abort=function(){this.ua.abort()},e.setRequestHeader=function(){},e.Re=function(){this.status=200,this.responseText=this.ua.responseText,Wt(this,4)},e.Sd=function(){this.status=500,this.responseText="",Wt(this,4)},e.Te=function(){this.Sd()},e.Se=function(){this.status=200,Wt(this,1)};var Wt=function(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()},Ht=function(e,t,n){this.ef=n,this.Fe=e,this.wf=t,this.sc=0,this.lc=null};Ht.prototype.get=function(){var e;return 0<this.sc?(this.sc--,e=this.lc,this.lc=e.next,e.next=null):e=this.Fe(),e},Ht.prototype.put=function(e){this.wf(e),this.sc<this.ef&&(this.sc++,e.next=this.lc,this.lc=e)};var zt,Yt=function(e){n.setTimeout(function(){throw e},0)},Bt=function(){var e=n.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Z("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,e=t.document;e.open(),e.write(""),e.close();var n="callImmediate"+Math.random(),i="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,e=p(function(e){"*"!=i&&e.origin!=i||e.data!=n||this.port1.onmessage()},this);t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,i)}}}),void 0!==e&&!Z("Trident")&&!Z("MSIE")){var t=new e,i={},a=i;return t.port1.onmessage=function(){if(void 0!==i.next){i=i.next;var e=i.Gd;i.Gd=null,e()}},function(e){a.next={Gd:e},a=a.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){n.setTimeout(e,0)}},Vt=function(){this.Jc=this.Za=null},qt=new Ht(function(){return new Kt},function(e){e.reset()},100);Vt.prototype.add=function(e,t){var n=qt.get();n.set(e,t),this.Jc?this.Jc.next=n:(N(!this.Za),this.Za=n),this.Jc=n},Vt.prototype.remove=function(){var e=null;return this.Za&&(e=this.Za,this.Za=this.Za.next,this.Za||(this.Jc=null),e.next=null),e};var Kt=function(){this.next=this.scope=this.Tc=null};Kt.prototype.set=function(e,t){this.Tc=e,this.scope=t,this.next=null},Kt.prototype.reset=function(){this.next=this.scope=this.Tc=null};var Xt,Gt=function(e,t){Xt||Qt(),Jt||(Xt(),Jt=!0),Zt.add(e,t)},Qt=function(){if(-1!=String(n.Promise).indexOf("[native code]")){var e=n.Promise.resolve(void 0);Xt=function(){e.then(en)}}else Xt=function(){var e=en;!u(n.setImmediate)||n.Window&&n.Window.prototype&&!Z("Edge")&&n.Window.prototype.setImmediate==n.setImmediate?(zt||(zt=Bt()),zt(e)):n.setImmediate(e)}},Jt=!1,Zt=new Vt,en=function(){for(var e;e=Zt.remove();){try{e.Tc.call(e.scope)}catch(e){Yt(e)}qt.put(e)}Jt=!1};!me&&!de||de&&9<=Number(_e)||me&&Se("1.9.1"),de&&Se("9");var tn=function(){this.pa="",this.ue=an};tn.prototype.Eb=!0,tn.prototype.Bb=function(){return this.pa},tn.prototype.toString=function(){return"SafeHtml{"+this.pa+"}"};var nn=function(e){return e instanceof tn&&e.constructor===tn&&e.ue===an?e.pa:(P("expected object of type SafeHtml, got '"+e+"' of type "+a(e)),"type_error:SafeHtml")},an={};tn.prototype.$e=function(e){return this.pa=e,this};var rn=function(e,t){ee(t,function(t,n){t&&t.Eb&&(t=t.Bb()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:on.hasOwnProperty(n)?e.setAttribute(on[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})},on={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},sn=function(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0},ln=function(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}},cn=function(e,t){if(this.N=0,this.ra=void 0,this.bb=this.na=this.s=null,this.jc=this.Sc=!1,e!=i)try{var n=this;e.call(t,function(e){_n(n,2,e)},function(e){if(!(e instanceof $n))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}_n(n,3,e)})}catch(e){_n(this,3,e)}},un=function(){this.next=this.context=this.jb=this.Oa=this.child=null,this.xb=!1};un.prototype.reset=function(){this.context=this.jb=this.Oa=this.child=null,this.xb=!1};var hn=new Ht(function(){return new un},function(e){e.reset()},100),dn=function(e,t,n){var i=hn.get();return i.Oa=e,i.jb=t,i.context=n,i},fn=function(e){if(e instanceof cn)return e;var t=new cn(i);return _n(t,2,e),t},pn=function(e){return new cn(function(t,n){n(e)})},mn=function(e,t,n){kn(e,t,n,null)||Gt(m(t,e))},gn=function(e){return new cn(function(t){var n=e.length,i=[];if(n)for(var a,r=function(e,a,r){n--,i[e]=a?{Ne:!0,value:r}:{Ne:!1,reason:r},0==n&&t(i)},o=0;o<e.length;o++)a=e[o],mn(a,m(r,o,!0),m(r,o,!1));else t(i)})};cn.prototype.then=function(e,t,n){return null!=e&&R(e,"opt_onFulfilled should be a function."),null!=t&&R(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),wn(this,u(e)?e:null,u(t)?t:null,n)},sn(cn);var vn=function(e,t){return t=dn(t,t,void 0),t.xb=!0,yn(e,t),e};cn.prototype.f=function(e,t){return wn(this,null,e,t)},cn.prototype.cancel=function(e){0==this.N&&Gt(function(){var t=new $n(e);bn(this,t)},this)};var bn=function(e,t){if(0==e.N)if(e.s){var n=e.s;if(n.na){for(var i=0,a=null,r=null,o=n.na;o&&(o.xb||(i++,o.child==e&&(a=o),!(a&&1<i)));o=o.next)a||(r=o);a&&(0==n.N&&1==i?bn(n,t):(r?(i=r,N(n.na),N(null!=i),i.next==n.bb&&(n.bb=i),i.next=i.next.next):Tn(n),xn(n,a,3,t)))}e.s=null}else _n(e,3,t)},yn=function(e,t){e.na||2!=e.N&&3!=e.N||Sn(e),N(null!=t.Oa),e.bb?e.bb.next=t:e.na=t,e.bb=t},wn=function(e,t,n,i){var a=dn(null,null,null);return a.child=new cn(function(e,r){a.Oa=t?function(n){try{var a=t.call(i,n);e(a)}catch(e){r(e)}}:e,a.jb=n?function(t){try{var a=n.call(i,t);void 0===a&&t instanceof $n?r(t):e(a)}catch(e){r(e)}}:r}),a.child.s=e,yn(e,a),a.child};cn.prototype.Jf=function(e){N(1==this.N),this.N=0,_n(this,2,e)},cn.prototype.Kf=function(e){N(1==this.N),this.N=0,_n(this,3,e)};var _n=function(e,t,n){0==e.N&&(e===n&&(t=3,n=new TypeError("Promise cannot resolve to itself")),e.N=1,kn(n,e.Jf,e.Kf,e)||(e.ra=n,e.N=t,e.s=null,Sn(e),3!=t||n instanceof $n||En(e,n)))},kn=function(e,t,n,a){if(e instanceof cn)return null!=t&&R(t,"opt_onFulfilled should be a function."),null!=n&&R(n,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),yn(e,dn(t||i,n||null,a)),!0;if(ln(e))return e.then(t,n,a),!0;if(h(e))try{var r=e.then;if(u(r))return Cn(e,r,t,n,a),!0}catch(e){return n.call(a,e),!0}return!1},Cn=function(e,t,n,i,a){var r=!1,o=function(e){r||(r=!0,n.call(a,e))},s=function(e){r||(r=!0,i.call(a,e))};try{t.call(e,o,s)}catch(e){s(e)}},Sn=function(e){e.Sc||(e.Sc=!0,Gt(e.Je,e))},Tn=function(e){var t=null;return e.na&&(t=e.na,e.na=t.next,t.next=null),e.na||(e.bb=null),null!=t&&N(null!=t.Oa),t};cn.prototype.Je=function(){for(var e;e=Tn(this);)xn(this,e,this.N,this.ra);this.Sc=!1};var xn=function(e,t,n,i){if(3==n&&t.jb&&!t.xb)for(;e&&e.jc;e=e.s)e.jc=!1;if(t.child)t.child.s=null,Dn(t,n,i);else try{t.xb?t.Oa.call(t.context):Dn(t,n,i)}catch(e){An.call(null,e)}hn.put(t)},Dn=function(e,t,n){2==t?e.Oa.call(e.context,n):e.jb&&e.jb.call(e.context,n)},En=function(e,t){e.jc=!0,Gt(function(){e.jc&&An.call(null,t)})},An=Yt,$n=function(e){b.call(this,e)};v($n,b),$n.prototype.name="cancel";var Mn=function(e,t){this.zc=[],this.$d=e,this.Jd=t||null,this.Cb=this.fb=!1,this.ra=void 0,this.ud=this.Cd=this.Nc=!1,this.Gc=0,this.s=null,this.Oc=0};Mn.prototype.cancel=function(e){if(this.fb)this.ra instanceof Mn&&this.ra.cancel();else{if(this.s){var t=this.s;delete this.s,e?t.cancel(e):0>=--t.Oc&&t.cancel()}this.$d?this.$d.call(this.Jd,this):this.ud=!0,this.fb||Pn(this,new Wn)}},Mn.prototype.Hd=function(e,t){this.Nc=!1,In(this,e,t)};var In=function(e,t,n){e.fb=!0,e.ra=n,e.Cb=!t,Fn(e)},Nn=function(e){if(e.fb){if(!e.ud)throw new Un;e.ud=!1}};Mn.prototype.callback=function(e){Nn(this),On(e),In(this,!0,e)};var Pn=function(e,t){Nn(e),On(t),In(e,!1,t)},On=function(e){N(!(e instanceof Mn),"An execution sequence may not be initiated with a blocking Deferred.")},jn=function(e){var t=Yn("https://apis.google.com/js/client.js?onload="+Wr);Rn(t,null,e,void 0)},Rn=function(e,t,n,i){N(!e.Cd,"Blocking Deferreds can not be re-used"),e.zc.push([t,n,i]),e.fb&&Fn(e)};Mn.prototype.then=function(e,t,n){var i,a,r=new cn(function(e,t){i=e,a=t});return Rn(this,i,function(e){e instanceof Wn?r.cancel():a(e)}),r.then(e,t,n)},sn(Mn);var Ln=function(e){return H(e.zc,function(e){return u(e[1])})},Fn=function(e){if(e.Gc&&e.fb&&Ln(e)){var t=e.Gc,i=zn[t];i&&(n.clearTimeout(i.Db),delete zn[t]),e.Gc=0}e.s&&(e.s.Oc--,delete e.s);for(var t=e.ra,a=i=!1;e.zc.length&&!e.Nc;){var r=e.zc.shift(),o=r[0],s=r[1],r=r[2];if(o=e.Cb?s:o)try{var l=o.call(r||e.Jd,t);void 0!==l&&(e.Cb=e.Cb&&(l==t||l instanceof Error),e.ra=t=l),(ln(t)||"function"==typeof n.Promise&&t instanceof n.Promise)&&(a=!0,e.Nc=!0)}catch(n){t=n,e.Cb=!0,Ln(e)||(i=!0)}}e.ra=t,a&&(l=p(e.Hd,e,!0),a=p(e.Hd,e,!1),t instanceof Mn?(Rn(t,l,a),t.Cd=!0):t.then(l,a)),i&&(t=new Hn(t),zn[t.Db]=t,e.Gc=t.Db)},Un=function(){b.call(this)};v(Un,b),Un.prototype.message="Deferred has already fired",Un.prototype.name="AlreadyCalledError";var Wn=function(){b.call(this)};v(Wn,b),Wn.prototype.message="Deferred was canceled",Wn.prototype.name="CanceledError";var Hn=function(e){this.Db=n.setTimeout(p(this.If,this),0),this.P=e};Hn.prototype.If=function(){throw N(zn[this.Db],"Cannot throw an error that is not scheduled."),delete zn[this.Db],this.P};var zn={},Yn=function(e){var t=new wt;return t.wc=e,Bn(t)},Bn=function(e){var t,n={},i=n.document||document;e instanceof wt&&e.constructor===wt&&e.xe===_t?t=e.wc:(P("expected object of type TrustedResourceUrl, got '"+e+"' of type "+a(e)),t="type_error:TrustedResourceUrl");var r=document.createElement("SCRIPT");e={fe:r,Zb:void 0};var o=new Mn(qn,e),s=null,l=null!=n.timeout?n.timeout:5e3;return 0<l&&(s=window.setTimeout(function(){Kn(r,!0),Pn(o,new Xn(1,"Timeout reached for loading script "+t))},l),e.Zb=s),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Kn(r,n.Uf||!1,s),o.callback(null))},r.onerror=function(){Kn(r,!0,s),Pn(o,new Xn(0,"Error while loading script "+t))},e=n.attributes||{},se(e,{type:"text/javascript",charset:"UTF-8",src:t}),rn(r,e),Vn(i).appendChild(r),o},Vn=function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement},qn=function(){if(this&&this.fe){var e=this.fe;e&&"SCRIPT"==e.tagName&&Kn(e,!0,this.Zb)}},Kn=function(e,t,a){null!=a&&n.clearTimeout(a),e.onload=i,e.onerror=i,e.onreadystatechange=i,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)},Xn=function(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),b.call(this,n),this.code=e};v(Xn,b);var Gn="StopIteration"in n?n.StopIteration:{message:"StopIteration",stack:""},Qn=function(){};Qn.prototype.next=function(){throw Gn},Qn.prototype.ye=function(){return this};var Jn=function(e,t){this.ga={},this.w=[],this.wb=this.o=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else e&&this.addAll(e)};Jn.prototype.Z=function(){Zn(this);for(var e=[],t=0;t<this.w.length;t++)e.push(this.ga[this.w[t]]);return e},Jn.prototype.oa=function(){return Zn(this),this.w.concat()},Jn.prototype.yb=function(e){return ei(this.ga,e)},Jn.prototype.remove=function(e){return!!ei(this.ga,e)&&(delete this.ga[e],this.o--,this.wb++,this.w.length>2*this.o&&Zn(this),!0)};var Zn=function(e){if(e.o!=e.w.length){for(var t=0,n=0;t<e.w.length;){var i=e.w[t];ei(e.ga,i)&&(e.w[n++]=i),t++}e.w.length=n}if(e.o!=e.w.length){for(var a={},n=t=0;t<e.w.length;)i=e.w[t],ei(a,i)||(e.w[n++]=i,a[i]=1),t++;e.w.length=n}};e=Jn.prototype,e.get=function(e,t){return ei(this.ga,e)?this.ga[e]:t},e.set=function(e,t){ei(this.ga,e)||(this.o++,this.w.push(e),this.wb++),this.ga[e]=t},e.addAll=function(e){var t;e instanceof Jn?(t=e.oa(),e=e.Z()):(t=ne(e),e=te(e));for(var n=0;n<t.length;n++)this.set(t[n],e[n])},e.forEach=function(e,t){for(var n=this.oa(),i=0;i<n.length;i++){var a=n[i],r=this.get(a);e.call(t,r,a,this)}},e.clone=function(){return new Jn(this)},e.ye=function(e){Zn(this);var t=0,n=this.wb,i=this,a=new Qn;return a.next=function(){if(n!=i.wb)throw Error("The map has changed since the iterator was created");if(t>=i.w.length)throw Gn;var a=i.w[t++];return e?a:i.ga[a]},a};var ei=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ti=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if(l(e))return e.split("");if(s(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}return te(e)},ni=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.Z||"function"!=typeof e.Z){if(s(e)||l(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}return ne(e)}},ii=function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||l(e))F(e,t,void 0);else for(var n=ni(e),i=ti(e),a=i.length,r=0;r<a;r++)t.call(void 0,i[r],n&&n[r],e)},ai=function(e,t,n,i,a){this.reset(e,t,n,i,a)};ai.prototype.Md=null;var ri=0;ai.prototype.reset=function(e,t,n,i,a){"number"==typeof a||ri++,i||g(),this.Ib=e,this.hf=t,delete this.Md},ai.prototype.ie=function(e){this.Ib=e};var oi=function(e){this.jf=e,this.Td=this.Pc=this.Ib=this.s=null},si=function(e,t){this.name=e,this.value=t};si.prototype.toString=function(){return this.name};var li=new si("SEVERE",1e3),ci=new si("CONFIG",700),ui=new si("FINE",500);oi.prototype.getParent=function(){return this.s},oi.prototype.ie=function(e){this.Ib=e};var hi=function(e){return e.Ib?e.Ib:e.s?hi(e.s):(P("Root logger has no level set."),null)};oi.prototype.log=function(e,t,i){if(e.value>=hi(this).value)for(u(t)&&(t=t()),e=new ai(e,String(t),this.jf),i&&(e.Md=i),i="log:"+e.hf,n.console&&(n.console.timeStamp?n.console.timeStamp(i):n.console.markTimeline&&n.console.markTimeline(i)),n.msWriteProfilerMark&&n.msWriteProfilerMark(i),i=this;i;){var a=i,r=e;if(a.Td)for(var o=0;t=a.Td[o];o++)t(r);i=i.getParent()}};var di={},fi=null,pi=function(e){fi||(fi=new oi(""),di[""]=fi,fi.ie(ci));var t;if(!(t=di[e])){t=new oi(e);var n=e.lastIndexOf("."),i=e.substr(n+1),n=pi(e.substr(0,n));n.Pc||(n.Pc={}),n.Pc[i]=t,t.s=n,di[e]=t}return t},mi=function(){We.call(this),this.fa=new Ge(this),this.ze=this,this.hd=null};v(mi,We),mi.prototype[Ve]=!0,e=mi.prototype,e.addEventListener=function(e,t,n,i){nt(this,e,t,n,i)},e.removeEventListener=function(e,t,n,i){ot(this,e,t,n,i)},e.dispatchEvent=function(e){bi(this);var t,n=this.hd;if(n){t=[];for(var i=1;n;n=n.hd)t.push(n),N(1e3>++i,"infinite loop")}if(n=this.ze,i=e.type||e,l(e))e=new Ye(e,n);else if(e instanceof Ye)e.target=e.target||n;else{var a=e;e=new Ye(i,n),se(e,a)}var r,a=!0;if(t)for(var o=t.length-1;!e.nb&&0<=o;o--)r=e.currentTarget=t[o],a=vi(r,i,!0,e)&&a;if(e.nb||(r=e.currentTarget=n,a=vi(r,i,!0,e)&&a,e.nb||(a=vi(r,i,!1,e)&&a)),t)for(o=0;!e.nb&&o<t.length;o++)r=e.currentTarget=t[o],a=vi(r,i,!1,e)&&a;return a},e.cb=function(){if(mi.xd.cb.call(this),this.fa){var e,t=this.fa,n=0;for(e in t.G){for(var i=t.G[e],a=0;a<i.length;a++)++n,Xe(i[a]);delete t.G[e],t.$b--}}this.hd=null},e.listen=function(e,t,n,i){return bi(this),this.fa.add(String(e),t,!1,n,i)};var gi=function(e,t,n,i,a){e.fa.add(String(t),n,!0,i,a)},vi=function(e,t,n,i){if(!(t=e.fa.G[String(t)]))return!0;t=t.concat();for(var a=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.rb&&o.capture==n){var s=o.listener,l=o.kc||o.src;o.dc&&Qe(e.fa,o),a=!1!==s.call(l,i)&&a}}return a&&0!=i.ee};mi.prototype.Uc=function(e,t,n,i){return this.fa.Uc(String(e),t,n,i)};var bi=function(e){N(e.fa,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},yi=function(e,t){e&&e.log(ui,t,void 0)},wi=function(e,t,i){if(u(e))i&&(e=p(e,i));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=p(e.handleEvent,e)}return 2147483647<Number(t)?-1:n.setTimeout(e,t||0)},_i=function(e){var t=null;return new cn(function(n,i){-1==(t=wi(function(){n(void 0)},e))&&i(Error("Failed to schedule timer."))}).f(function(e){throw n.clearTimeout(t),e})},ki=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,Ci=function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i,a=e[n].indexOf("="),r=null;0<=a?(i=e[n].substring(0,a),r=e[n].substring(a+1)):i=e[n],t(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}},Si=function(e){mi.call(this),this.headers=new Jn,this.Lc=e||null,this.va=!1,this.Kc=this.b=null,this.Hb=this.Zd=this.qc="",this.Ka=this.Yc=this.oc=this.Rc=!1,this.sb=0,this.Ec=null,this.de="",this.Hc=this.sf=this.te=!1};v(Si,mi);var Ti=Si.prototype,xi=pi("goog.net.XhrIo");Ti.U=xi;var Di=/^https?$/i,Ei=["POST","PUT"];Si.prototype.send=function(e,t,i,a){
if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request="+this.qc+"; newUri="+e);t=t?t.toUpperCase():"GET",this.qc=e,this.Hb="",this.Zd=t,this.Rc=!1,this.va=!0,this.b=this.Lc?this.Lc.fc():Ot.fc(),this.Kc=jt(this.Lc?this.Lc:Ot),this.b.onreadystatechange=p(this.be,this),this.sf&&"onprogress"in this.b&&(this.b.onprogress=p(function(e){this.ae(e,!0)},this),this.b.upload&&(this.b.upload.onprogress=p(this.ae,this)));try{yi(this.U,Fi(this,"Opening Xhr")),this.Yc=!0,this.b.open(t,String(e),!0),this.Yc=!1}catch(e){return yi(this.U,Fi(this,"Error opening Xhr: "+e.message)),void this.P(5,e)}e=i||"";var r=this.headers.clone();a&&ii(a,function(e,t){r.set(t,e)}),a=z(r.oa()),i=n.FormData&&e instanceof n.FormData,!Y(Ei,t)||a||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(e,t){this.b.setRequestHeader(t,e)},this),this.de&&(this.b.responseType=this.de),"withCredentials"in this.b&&this.b.withCredentials!==this.te&&(this.b.withCredentials=this.te);try{Oi(this),0<this.sb&&(this.Hc=Ai(this.b),yi(this.U,Fi(this,"Will abort after "+this.sb+"ms if incomplete, xhr2 "+this.Hc)),this.Hc?(this.b.timeout=this.sb,this.b.ontimeout=p(this.Zb,this)):this.Ec=wi(this.Zb,this.sb,this)),yi(this.U,Fi(this,"Sending request")),this.oc=!0,this.b.send(e),this.oc=!1}catch(e){yi(this.U,Fi(this,"Send error: "+e.message)),this.P(5,e)}};var Ai=function(e){return de&&Se(9)&&c(e.timeout)&&void 0!==e.ontimeout},$i=function(e){return"content-type"==e.toLowerCase()};Si.prototype.Zb=function(){void 0!==t&&this.b&&(this.Hb="Timed out after "+this.sb+"ms, aborting",yi(this.U,Fi(this,this.Hb)),this.dispatchEvent("timeout"),this.abort(8))},Si.prototype.P=function(e,t){this.va=!1,this.b&&(this.Ka=!0,this.b.abort(),this.Ka=!1),this.Hb=t,Mi(this),Pi(this)};var Mi=function(e){e.Rc||(e.Rc=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))};Si.prototype.abort=function(){this.b&&this.va&&(yi(this.U,Fi(this,"Aborting")),this.va=!1,this.Ka=!0,this.b.abort(),this.Ka=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pi(this))},Si.prototype.cb=function(){this.b&&(this.va&&(this.va=!1,this.Ka=!0,this.b.abort(),this.Ka=!1),Pi(this,!0)),Si.xd.cb.call(this)},Si.prototype.be=function(){this.isDisposed()||(this.Yc||this.oc||this.Ka?Ii(this):this.nf())},Si.prototype.nf=function(){Ii(this)};var Ii=function(e){if(e.va&&void 0!==t)if(e.Kc[1]&&4==ji(e)&&2==Ri(e))yi(e.U,Fi(e,"Local request error detected and ignored"));else if(e.oc&&4==ji(e))wi(e.be,0,e);else if(e.dispatchEvent("readystatechange"),4==ji(e)){yi(e.U,Fi(e,"Request complete")),e.va=!1;try{var i,a=Ri(e);e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:i=!0;break e;default:i=!1}var r;if(!(r=i)){var o;if(o=0===a){var s=String(e.qc).match(ki)[1]||null;if(!s&&n.self&&n.self.location)var l=n.self.location.protocol,s=l.substr(0,l.length-1);o=!Di.test(s?s.toLowerCase():"")}r=o}if(r)e.dispatchEvent("complete"),e.dispatchEvent("success");else{var c;try{c=2<ji(e)?e.b.statusText:""}catch(t){yi(e.U,"Can not get status: "+t.message),c=""}e.Hb=c+" ["+Ri(e)+"]",Mi(e)}}finally{Pi(e)}}};Si.prototype.ae=function(e,t){N("progress"===e.type,"goog.net.EventType.PROGRESS is of the same type as raw XHR progress."),this.dispatchEvent(Ni(e,"progress")),this.dispatchEvent(Ni(e,t?"downloadprogress":"uploadprogress"))};var Ni=function(e,t){return{type:t,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total}},Pi=function(e,t){if(e.b){Oi(e);var n=e.b,a=e.Kc[0]?i:null;e.b=null,e.Kc=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=a}catch(t){(e=e.U)&&e.log(li,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}},Oi=function(e){e.b&&e.Hc&&(e.b.ontimeout=null),c(e.Ec)&&(n.clearTimeout(e.Ec),e.Ec=null)},ji=function(e){return e.b?e.b.readyState:0},Ri=function(e){try{return 2<ji(e)?e.b.status:-1}catch(e){return-1}},Li=function(e){try{return e.b?e.b.responseText:""}catch(t){return yi(e.U,"Can not get responseText: "+t.message),""}},Fi=function(e,t){return t+" ["+e.Zd+" "+e.qc+" "+Ri(e)+"]"},Ui=function(e,t){this.ea=this.Xa=this.ha="",this.lb=null,this.Ja=this.xa="",this.S=this.df=!1;var n;e instanceof Ui?(this.S=void 0!==t?t:e.S,Wi(this,e.ha),n=e.Xa,Ki(this),this.Xa=n,Hi(this,e.ea),zi(this,e.lb),Yi(this,e.xa),Bi(this,e.W.clone()),e=e.Ja,Ki(this),this.Ja=e):e&&(n=String(e).match(ki))?(this.S=!!t,Wi(this,n[1]||"",!0),e=n[2]||"",Ki(this),this.Xa=Qi(e),Hi(this,n[3]||"",!0),zi(this,n[4]),Yi(this,n[5]||"",!0),Bi(this,n[6]||"",!0),e=n[7]||"",Ki(this),this.Ja=Qi(e)):(this.S=!!t,this.W=new ra(null,0,this.S))};Ui.prototype.toString=function(){var e=[],t=this.ha;t&&e.push(Ji(t,ea,!0),":");var n=this.ea;return(n||"file"==t)&&(e.push("//"),(t=this.Xa)&&e.push(Ji(t,ea,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.lb)&&e.push(":",String(n))),(n=this.xa)&&(this.ea&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ji(n,"/"==n.charAt(0)?na:ta,!0))),(n=this.W.toString())&&e.push("?",n),(n=this.Ja)&&e.push("#",Ji(n,aa)),e.join("")},Ui.prototype.resolve=function(e){var t=this.clone(),n=!!e.ha;if(n?Wi(t,e.ha):n=!!e.Xa,n){var i=e.Xa;Ki(t),t.Xa=i}else n=!!e.ea;if(n?Hi(t,e.ea):n=null!=e.lb,i=e.xa,n)zi(t,e.lb);else if(n=!!e.xa){if("/"!=i.charAt(0))if(this.ea&&!this.xa)i="/"+i;else{var a=t.xa.lastIndexOf("/");-1!=a&&(i=t.xa.substr(0,a+1)+i)}if(".."==(a=i)||"."==a)i="";else if(E(a,"./")||E(a,"/.")){for(var i=0==a.lastIndexOf("/",0),a=a.split("/"),r=[],o=0;o<a.length;){var s=a[o++];"."==s?i&&o==a.length&&r.push(""):".."==s?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),i&&o==a.length&&r.push("")):(r.push(s),i=!0)}i=r.join("/")}else i=a}return n?Yi(t,i):n=""!==e.W.toString(),n?Bi(t,e.W.clone()):n=!!e.Ja,n&&(e=e.Ja,Ki(t),t.Ja=e),t},Ui.prototype.clone=function(){return new Ui(this)};var Wi=function(e,t,n){Ki(e),e.ha=n?Qi(t,!0):t,e.ha&&(e.ha=e.ha.replace(/:$/,""))},Hi=function(e,t,n){Ki(e),e.ea=n?Qi(t,!0):t},zi=function(e,t){if(Ki(e),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.lb=t}else e.lb=null},Yi=function(e,t,n){Ki(e),e.xa=n?Qi(t,!0):t},Bi=function(e,t,n){Ki(e),t instanceof ra?(e.W=t,e.W.td(e.S)):(n||(t=Ji(t,ia)),e.W=new ra(t,0,e.S))},Vi=function(e,t,n){Ki(e),e.W.set(t,n)},qi=function(e,t){return e.W.get(t)};Ui.prototype.removeParameter=function(e){return Ki(this),this.W.remove(e),this};var Ki=function(e){if(e.df)throw Error("Tried to modify a read-only Uri")};Ui.prototype.td=function(e){return this.S=e,this.W&&this.W.td(e),this};var Xi=function(e){return e instanceof Ui?e.clone():new Ui(e,void 0)},Gi=function(e,t){var n=new Ui(null,void 0);return Wi(n,"https"),e&&Hi(n,e),t&&Yi(n,t),n},Qi=function(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""},Ji=function(e,t,n){return l(e)?(e=encodeURI(e).replace(t,Zi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null},Zi=function(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)},ea=/[#\/\?@]/g,ta=/[\#\?:]/g,na=/[\#\?]/g,ia=/[\#\?@]/g,aa=/#/g,ra=function(e,t,n){this.o=this.l=null,this.O=e||null,this.S=!!n},oa=function(e){e.l||(e.l=new Jn,e.o=0,e.O&&Ci(e.O,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))},sa=function(e){var t=ni(e);if(void 0===t)throw Error("Keys are undefined");var n=new ra(null,0,void 0);e=ti(e);for(var i=0;i<t.length;i++){var a=t[i],r=e[i];o(r)?la(n,a,r):n.add(a,r)}return n};e=ra.prototype,e.add=function(e,t){oa(this),this.O=null,e=this.R(e);var n=this.l.get(e);return n||this.l.set(e,n=[]),n.push(t),this.o=O(this.o)+1,this},e.remove=function(e){return oa(this),e=this.R(e),!!this.l.yb(e)&&(this.O=null,this.o=O(this.o)-this.l.get(e).length,this.l.remove(e))},e.yb=function(e){return oa(this),e=this.R(e),this.l.yb(e)},e.oa=function(){oa(this);for(var e=this.l.Z(),t=this.l.oa(),n=[],i=0;i<t.length;i++)for(var a=e[i],r=0;r<a.length;r++)n.push(t[i]);return n},e.Z=function(e){oa(this);var t=[];if(l(e))this.yb(e)&&(t=K(t,this.l.get(this.R(e))));else{e=this.l.Z();for(var n=0;n<e.length;n++)t=K(t,e[n])}return t},e.set=function(e,t){return oa(this),this.O=null,e=this.R(e),this.yb(e)&&(this.o=O(this.o)-this.l.get(e).length),this.l.set(e,[t]),this.o=O(this.o)+1,this},e.get=function(e,t){return e=e?this.Z(e):[],0<e.length?String(e[0]):t};var la=function(e,t,n){e.remove(t),0<n.length&&(e.O=null,e.l.set(e.R(t),X(n)),e.o=O(e.o)+n.length)};ra.prototype.toString=function(){if(this.O)return this.O;if(!this.l)return"";for(var e=[],t=this.l.oa(),n=0;n<t.length;n++)for(var i=t[n],a=encodeURIComponent(String(i)),i=this.Z(i),r=0;r<i.length;r++){var o=a;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),e.push(o)}return this.O=e.join("&")},ra.prototype.clone=function(){var e=new ra;return e.O=this.O,this.l&&(e.l=this.l.clone(),e.o=this.o),e},ra.prototype.R=function(e){return e=String(e),this.S&&(e=e.toLowerCase()),e},ra.prototype.td=function(e){e&&!this.S&&(oa(this),this.O=null,this.l.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(this.remove(t),la(this,n,e))},this)),this.S=e};var ca=function(){var e=Da();return de&&!!_e&&11==_e||/Edge\/\d+/.test(e)},ua=function(){return n.window&&n.window.location.href||""},ha=function(e,t){t=t||n.window;var i="about:blank";e&&(i=Ct(Tt(e))),t.location.href=i},da=function(e,t){var n,i=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?i.push(n):o(e[n])?ae(e[n],t[n])||i.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<da(e[n],t[n]).length&&i.push(n):e[n]!==t[n]&&i.push(n):i.push(n);for(n in t)n in e||i.push(n);return i},fa=function(){var e;return e=Da(),!((e="Chrome"!=Ta(e)?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!de||!_e||9<_e)},pa=function(e){return e=(e||Da()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))},ma=function(e){e=e||n.window;try{e.close()}catch(e){}},ga=function(e,t,n){var i=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var a=(window.screen.availHeight-n)/2,r=(window.screen.availWidth-t)/2;t={width:t,height:n,top:0<a?a:0,left:0<r?r:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Da().toLowerCase(),i&&(t.target=i,E(n,"crios/")&&(t.target="_blank")),"Firefox"==Ta(Da())&&(e=e||"http://localhost",t.scrollbars=!0);var o;n=e||"about:blank",(i=t)||(i={}),e=window,t=n instanceof kt?n:Tt(void 0!==n.href?n.href:String(n)),n=i.target||n.target,a=[];for(o in i)switch(o){case"width":case"height":case"top":case"left":a.push(o+"="+i[o]);break;case"target":case"noreferrer":break;default:a.push(o+"="+(i[o]?1:0))}if(o=a.join(","),(Z("iPhone")&&!Z("iPod")&&!Z("iPad")||Z("iPad")||Z("iPod"))&&e.navigator&&e.navigator.standalone&&n&&"_self"!=n?(o=e.document.createElement("A"),"undefined"!=typeof HTMLAnchorElement&&"undefined"!=typeof Location&&"undefined"!=typeof Element&&(a=o&&(o instanceof HTMLAnchorElement||!(o instanceof Location||o instanceof Element)),r=h(o)?o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o):void 0===o?"undefined":null===o?"null":typeof o,N(a,"Argument is not a HTMLAnchorElement (or a non-Element mock); got: %s",r)),t=t instanceof kt?t:Tt(t),o.href=Ct(t),o.setAttribute("target",n),i.noreferrer&&o.setAttribute("rel","noreferrer"),i=document.createEvent("MouseEvent"),i.initMouseEvent("click",!0,!0,e,1),o.dispatchEvent(i),o={}):i.noreferrer?(o=e.open("",n,o),i=Ct(t),o&&(pe&&E(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),o.opener=null,e=yt("b/12014412, meta tag with sanitized URL"),D.test(i)&&(-1!=i.indexOf("&")&&(i=i.replace(_,"&amp;")),-1!=i.indexOf("<")&&(i=i.replace(k,"&lt;")),-1!=i.indexOf(">")&&(i=i.replace(C,"&gt;")),-1!=i.indexOf('"')&&(i=i.replace(S,"&quot;")),-1!=i.indexOf("'")&&(i=i.replace(T,"&#39;")),-1!=i.indexOf("\0")&&(i=i.replace(x,"&#0;"))),i='<META HTTP-EQUIV="refresh" content="0; url='+i+'">',j(vt(e),"must provide justification"),N(!/^[\s\xa0]*$/.test(vt(e)),"must provide non-empty justification"),o.document.write(nn((new tn).$e(i))),o.document.close())):o=e.open(Ct(t),n,o),o)try{o.focus()}catch(e){}return o},va=function(e){return new cn(function(t){var n=function(){_i(2e3).then(function(){if(e&&!e.closed)return n();t()})};return n()})},ba=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ya=function(){var e=null;return new cn(function(t){"complete"==n.document.readyState?t():(e=function(){t()},rt(window,"load",e))}).f(function(t){throw ot(window,"load",e),t})},wa=function(){return _a(void 0)?ya().then(function(){return new cn(function(e,t){var i=n.document,a=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);i.addEventListener("deviceready",function(){clearTimeout(a),e()},!1)})}):pn(Error("Cordova must run in an Android or iOS file scheme."))},_a=function(e){return e=e||Da(),!("file:"!==Ma()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))},ka=function(){var e=n.window;try{return!(!e||e==e.top)}catch(e){return!1}},Ca=function(){return firebase.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":firebase.INTERNAL.hasOwnProperty("node")?"Node":"Browser"},Sa=function(){var e=Ca();return"ReactNative"===e||"Node"===e},Ta=function(e){var t=e.toLowerCase();return E(t,"opera/")||E(t,"opr/")||E(t,"opios/")?"Opera":E(t,"iemobile")?"IEMobile":E(t,"msie")||E(t,"trident/")?"IE":E(t,"edge/")?"Edge":E(t,"firefox/")?"Firefox":E(t,"silk/")?"Silk":E(t,"blackberry")?"Blackberry":E(t,"webos")?"Webos":!E(t,"safari/")||E(t,"chrome/")||E(t,"crios/")||E(t,"android")?!E(t,"chrome/")&&!E(t,"crios/")||E(t,"edge/")?E(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":"Chrome":"Safari"},xa=function(e){var t=Ca();return("Browser"===t?Ta(Da()):t)+"/JsCore/"+e},Da=function(){return n.navigator&&n.navigator.userAgent||""},Ea=function(e,t){e=e.split("."),t=t||n;for(var i=0;i<e.length&&"object"==typeof t&&null!=t;i++)t=t[e[i]];return i!=e.length&&(t=void 0),t},Aa=function(){var e;if(e=($a()||"chrome-extension:"===Ma()||_a())&&!Sa())e:{try{var t=n.localStorage,i=ja();if(t){t.setItem(i,"1"),t.removeItem(i),e=!ca()||!!n.indexedDB;break e}}catch(e){}e=!1}return e},$a=function(){return"http:"===Ma()||"https:"===Ma()},Ma=function(){return n.location&&n.location.protocol||null},Ia=function(e){return e=e||Da(),!pa(e)&&"Firefox"!=Ta(e)},Na=function(e){return void 0===e?null:Et(e)},Pa=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n},Oa=function(e){if(null!==e)return JSON.parse(e)},ja=function(e){return e||""+Math.floor(1e9*Math.random()).toString()},Ra=function(e){return e=e||Da(),"Safari"!=Ta(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)},La=function(){var e=n.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null},Fa=function(){return!n.navigator||"boolean"!=typeof n.navigator.onLine||n.navigator.onLine},Ua=function(e,t,n,i){if(e>t)throw Error("Short delay should be less than long delay!");this.Ff=e,this.gf=t,e=n||Da(),i=i||Ca(),this.cf=pa(e)||"ReactNative"===i};Ua.prototype.get=function(){return this.cf?this.gf:this.Ff};var Wa,Ha=function(){var e=n.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState},za=function(){var e=n.document,t=null;return Ha()||!e?fn():new cn(function(n){t=function(){Ha()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).f(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})},Ya={},Ba=function(e){Ya[e]||(Ya[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))};try{var Va={};Object.defineProperty(Va,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Va,"abcd",{configurable:!0,enumerable:!0,value:2}),Wa=2==Va.abcd}catch(e){Wa=!1}var qa=function(e,t,n){Wa?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n},Ka=function(e,t){Wa?Object.defineProperty(e,"provider",{configurable:!0,enumerable:!0,get:function(){return Ba("firebase.auth.AuthCredential.provider is deprecated. Please use the providerId field instead."),t}}):e.provider=t},Xa=function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&qa(e,n,t[n])},Ga=function(e){var t={};return Xa(t,e),t},Qa=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},Ja=function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var i=e[t[n]];if(void 0===i||null===i||""===i)return!1}return!0},Za=function(e){var t=e;if("object"==typeof e&&null!=e){var n,t="length"in e?[]:{};for(n in e)qa(t,n,Za(e[n]))}return t},er="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),tr=["client_id","response_type","scope","redirect_uri","state"],nr={Pf:{Mb:500,Lb:600,providerId:"facebook.com",qd:tr},Qf:{Mb:500,Lb:620,providerId:"github.com",qd:tr},Rf:{Mb:515,Lb:680,providerId:"google.com",qd:tr},Sf:{Mb:485,Lb:705,providerId:"twitter.com",qd:er}},ir=function(e){for(var t in nr)if(nr[t].providerId==e)return nr[t];return null},ar=function(e,t){this.code="auth/"+e,this.message=t||or[e]||""};v(ar,Error),ar.prototype.C=function(){return{code:this.code,message:this.message}},ar.prototype.toJSON=function(){return this.C()};var rr=function(e){var t=e&&e.code;return t?new ar(t.substring(5),e.message):null},or={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"","code-expired":"","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-identifier-number":"","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"","missing-iframe-start":"An internal error has occurred.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"","missing-verification-code":"","missing-identifier-number":"","missing-verification-id":"","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},sr=function(e,t,n,i,a){if(this.da=e,this.J=t||null,this.tb=n||null,this.sd=i||null,this.P=a||null,!this.tb&&!this.P)throw new ar("invalid-auth-event");if(this.tb&&this.P)throw new ar("invalid-auth-event");if(this.tb&&!this.sd)throw new ar("invalid-auth-event")};sr.prototype.ic=function(){return this.sd},sr.prototype.getError=function(){return this.P},sr.prototype.C=function(){return{type:this.da,eventId:this.J,urlResponse:this.tb,sessionId:this.sd,error:this.P&&this.P.C()}};var lr=function(e){return e=e||{},e.type?new sr(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&rr(e.error)):null},cr=function(e){var t="unauthorized-domain",n=void 0,i=Xi(e);e=i.ea,i=i.ha,"chrome-extension"==i?n=y("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==i||"https"==i?n=y("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",ar.call(this,t,n)};v(cr,ar);var ur=function(e){this.ff=e.sub,g(),this.gc=e.email||null},hr=function(e,t){return e.then(function(e){if(e.idToken){var n;e:{var i=e.idToken.split(".");if(3==i.length){for(var i=i[1],a=(4-i.length%4)%4,r=0;r<a;r++)i+=".";try{var o=JSON.parse(Ae(i));if(o.sub&&o.iss&&o.aud&&o.exp){n=new ur(o);break e}}catch(e){}}n=null}if(!n||t!=n.ff)throw new ar("user-mismatch");return e}throw new ar("user-mismatch")}).f(function(e){throw e&&e.code&&"auth/user-not-found"==e.code?new ar("user-mismatch"):e})},dr=function(e,t){if(t.idToken||t.accessToken)t.idToken&&qa(this,"idToken",t.idToken),t.accessToken&&qa(this,"accessToken",t.accessToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new ar("internal-error","failed to construct a credential");qa(this,"accessToken",t.oauthToken),qa(this,"secret",t.oauthTokenSecret)}Ka(this,e),qa(this,"providerId",e)};dr.prototype.Ab=function(e){return to(e,fr(this))},dr.prototype.cd=function(e,t){var n=fr(this);return n.idToken=t,no(e,n)},dr.prototype.ed=function(e,t){var n=fr(this);return hr(io(e,n),t)};var fr=function(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,{postBody:sa(t).toString(),requestUri:"http://localhost"}};dr.prototype.C=function(){var e={providerId:this.providerId};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),e};var pr=function(e,t){this.vf=t||[],Xa(this,{providerId:e,isOAuthProvider:!0}),this.Id={}};pr.prototype.setCustomParameters=function(e){return this.Id=re(e),this};var mr=function(e){pr.call(this,e,tr),this.rd=[]};v(mr,pr),mr.prototype.addScope=function(e){return Y(this.rd,e)||this.rd.push(e),this},mr.prototype.Rd=function(){return X(this.rd)},mr.prototype.credential=function(e,t){if(!e&&!t)throw new ar("argument-error","credential failed: must provide the ID token and/or the access token.");return new dr(this.providerId,{idToken:e||null,accessToken:t||null})};var gr=function(){mr.call(this,"facebook.com")};v(gr,mr),qa(gr,"PROVIDER_ID","facebook.com");var vr=function(e){if(!e)throw new ar("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return h(e)&&(t=e.accessToken),(new gr).credential(null,t)},br=function(){mr.call(this,"github.com")};v(br,mr),qa(br,"PROVIDER_ID","github.com");var yr=function(e){if(!e)throw new ar("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return h(e)&&(t=e.accessToken),(new br).credential(null,t)},wr=function(){mr.call(this,"google.com"),this.addScope("profile")};v(wr,mr),qa(wr,"PROVIDER_ID","google.com");var _r=function(e,t){var n=e;return h(e)&&(n=e.idToken,t=e.accessToken),(new wr).credential(n,t)},kr=function(){pr.call(this,"twitter.com",er)};v(kr,pr),qa(kr,"PROVIDER_ID","twitter.com");var Cr=function(e,t){var n=e;if(h(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new ar("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new dr("twitter.com",n)},Sr=function(e,t){this.gc=e,this.jd=t,Ka(this,"password"),qa(this,"providerId","password")};Sr.prototype.Ab=function(e){return Ao(e,To,{email:this.gc,password:this.jd})},Sr.prototype.cd=function(e,t){return Ao(e,yo,{idToken:t,email:this.gc,password:this.jd})},Sr.prototype.ed=function(e,t){return hr(this.Ab(e),t)},Sr.prototype.C=function(){return{email:this.gc,password:this.jd}};var Tr=function(){Xa(this,{providerId:"password",isOAuthProvider:!1})};Xa(Tr,{PROVIDER_ID:"password"});var xr=function(e){if(!(e.Bd&&e.Ad||e.Yb&&e.ya))throw new ar("internal-error");this.I=e,qa(this,"providerId","identifier")};xr.prototype.Ab=function(e){return e.se(Dr(this))},xr.prototype.cd=function(e,t){var n=Dr(this);return n.idToken=t,Ao(e,Do,n)},xr.prototype.ed=function(e,t){var n=Dr(this);return n.operation="REAUTH",e=Ao(e,Eo,n),hr(e,t)},xr.prototype.C=function(){var e={providerId:"identifier"};return this.I.Bd&&(e.verificationId=this.I.Bd),this.I.Ad&&(e.verificationCode=this.I.Ad),this.I.Yb&&(e.temporaryProof=this.I.Yb),this.I.ya&&(e.identifierNumber=this.I.ya),e};var Dr=function(e){return e.I.Yb&&e.I.ya?{temporaryProof:e.I.Yb,identifierNumber:e.I.ya}:{sessionInfo:e.I.Bd,code:e.I.Ad}},Er=function(e){try{this.Ce=e||firebase.auth()}catch(e){throw new ar("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.identifierAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xa(this,{providerId:"identifier",isOAuthProvider:!1})};Er.prototype.se=function(e,t){var n=this.Ce.g;return fn(t.verify()).then(function(i){if(!l(i))throw new ar("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return Ao(n,vo,{identifierNumber:e,recaptchaToken:i});default:throw new ar("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Xa(Er,{PROVIDER_ID:"identifier"});var Ar=function(e){if(e.temporaryProof&&e.identifierNumber)return new xr({Yb:e.temporaryProof,ya:e.identifierNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,i=e&&e.oauthTokenSecret;e=e&&e.oauthIdToken;try{switch(t){case"google.com":return _r(e,n);case"facebook.com":return vr(n);case"github.com":return yr(n);case"twitter.com":return Cr(n,i);default:return new mr(t).credential(e,n)}}catch(e){return null}},$r=function(e){if(!e.isOAuthProvider)throw new ar("invalid-oauth-provider")},Mr=function(e,t,n){ar.call(this,e,n),e=t||{},e.email&&qa(this,"email",e.email),e.ya&&qa(this,"identifierNumber",e.ya),e.credential&&qa(this,"credential",e.credential)};v(Mr,ar),Mr.prototype.C=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.identifierNumber&&(e.identifierNumber=this.identifierNumber);var t=this.credential&&this.credential.C();return t&&se(e,t),e},Mr.prototype.toJSON=function(){return this.C()};var Ir=function(e){if(e.code){var t=e.code||"";0==t.indexOf("auth/")&&(t=t.substring(5));var n={credential:Ar(e)};if(e.email)n.email=e.email;else{if(!e.identifierNumber)return new ar(t,e.message||void 0);n.ya=e.identifierNumber}return new Mr(t,n,e.message)}return null},Nr=function(e){this.Of=e};v(Nr,Pt),Nr.prototype.fc=function(){return new this.Of},Nr.prototype.$c=function(){return{}};var Pr,Or=function(e,t,i){var a;if(a="Node"==Ca(),!(a=n.XMLHttpRequest||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.XMLHttpRequest))throw new ar("internal-error","The XMLHttpRequest compatibility library was not found.");this.j=e,e=t||{},this.Bf=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.Cf=e.secureTokenTimeout||jr,this.ge=re(e.secureTokenHeaders||Rr),this.Le=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.Me=e.firebaseTimeout||Lr,this.Pd=re(e.firebaseHeaders||Fr),i&&(this.Pd["X-Client-Version"]=i,this.ge["X-Client-Version"]=i),this.Ee=new Ft,this.Nf=new Nr(a)},jr=new Ua(3e4,6e4),Rr={"Content-Type":"application/x-www-form-urlencoded"},Lr=new Ua(3e4,6e4),Fr={"Content-Type":"application/json"},Ur=function(e,t,n,i,a,r,o){Fa()?(fa()?e=p(e.Ef,e):(Pr||(Pr=new cn(function(e,t){Hr(e,t)})),e=p(e.Df,e)),e(t,n,i,a,r,o)):n&&n(null)};Or.prototype.Ef=function(e,t,n,i,a,r){var o,s="Node"==Ca(),l=Sa()?s?new Si(this.Nf):new Si:new Si(this.Ee);r&&(l.sb=Math.max(0,r),o=setTimeout(function(){l.dispatchEvent("timeout")},r)),l.listen("complete",function(){
o&&clearTimeout(o);var e=null;try{e=JSON.parse(Li(this))||null}catch(t){e=null}t&&t(e)}),gi(l,"ready",function(){o&&clearTimeout(o),this.Ga||(this.Ga=!0,this.cb())}),gi(l,"timeout",function(){o&&clearTimeout(o),this.Ga||(this.Ga=!0,this.cb()),t&&t(null)}),l.send(e,n,i,a)};var Wr="__fcb"+Math.floor(1e6*Math.random()).toString(),Hr=function(e,t){((window.gapi||{}).client||{}).request?e():(n[Wr]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},jn(function(){t(Error("CORS_UNSUPPORTED"))}))};Or.prototype.Df=function(e,t,n,i,a){var r=this;Pr.then(function(){window.gapi.client.setApiKey(r.j);var o=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:i,headers:a,authType:"none",callback:function(e){window.gapi.auth.setToken(o),t&&t(e)}})}).f(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})};var zr=function(e,t){return new cn(function(n,i){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Ur(e,e.Bf+"?key="+encodeURIComponent(e.j),function(e){e?e.error?i($o(e)):e.access_token&&e.refresh_token?n(e):i(new ar("internal-error")):i(new ar("network-request-failed"))},"POST",sa(t).toString(),e.ge,e.Cf.get()):i(new ar("internal-error"))})},Yr=function(e,t,n,i,a,r){var o=Xi(e.Le+t);Vi(o,"key",e.j),r&&Vi(o,"cb",g().toString());var s="GET"==n;if(s)for(var l in i)i.hasOwnProperty(l)&&Vi(o,l,i[l]);return new cn(function(t,r){Ur(e,o.toString(),function(e){e?e.error?r($o(e,a||{})):t(e):r(new ar("network-request-failed"))},n,s?void 0:Et(Pa(i)),e.Pd,e.Me.get())})},Br=function(e){if(!mt.test(e.email))throw new ar("invalid-email")},Vr=function(e){"email"in e&&Br(e)},qr=function(e,t){return Ao(e,lo,{identifier:t,continueUri:$a()?ua():"http://localhost"}).then(function(e){return e.allProviders||[]})},Kr=function(e){return Ao(e,mo,{}).then(function(e){return e.authorizedDomains||[]})},Xr=function(e){if(!e.idToken)throw new ar("internal-error")},Gr=function(e){if(e.identifierNumber||e.temporaryProof){if(!e.identifierNumber||!e.temporaryProof)throw new ar("internal-error")}else{if(!e.sessionInfo)throw new ar("missing-verification-id");if(!e.code)throw new ar("missing-verification-code")}};Or.prototype.signInAnonymously=function(){return Ao(this,wo,{})},Or.prototype.updateEmail=function(e,t){return Ao(this,bo,{idToken:e,email:t})},Or.prototype.updatePassword=function(e,t){return Ao(this,yo,{idToken:e,password:t})};var Qr={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};Or.prototype.updateProfile=function(e,t){var n={idToken:e},i=[];return ee(Qr,function(e,a){var r=t[a];null===r?i.push(e):a in t&&(n[a]=r)}),i.length&&(n.deleteAttribute=i),Ao(this,bo,n)},Or.prototype.sendPasswordResetEmail=function(e){return Ao(this,po,{requestType:"PASSWORD_RESET",email:e})},Or.prototype.sendEmailVerification=function(e){return Ao(this,fo,{requestType:"VERIFY_EMAIL",idToken:e})},Or.prototype.se=function(e){return Ao(this,xo,e)};var Jr=function(e,t,n){return Ao(e,uo,{idToken:t,deleteProvider:n})},Zr=function(e){if(!e.requestUri||!e.sessionId&&!e.postBody)throw new ar("internal-error")},eo=function(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Ir(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Ir(e)):"EMAIL_EXISTS"==e.errorMessage&&(e.code="email-already-in-use",t=Ir(e)),t)throw t;if(!e.idToken)throw new ar("internal-error")},to=function(e,t){return t.returnIdpCredential=!0,Ao(e,_o,t)},no=function(e,t){return t.returnIdpCredential=!0,Ao(e,Co,t)},io=function(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Ao(e,ko,t)},ao=function(e){if(!e.oobCode)throw new ar("invalid-action-code")};Or.prototype.confirmPasswordReset=function(e,t){return Ao(this,go,{oobCode:e,newPassword:t})},Or.prototype.checkActionCode=function(e){return Ao(this,oo,{oobCode:e})},Or.prototype.applyActionCode=function(e){return Ao(this,ro,{oobCode:e})};var ro={endpoint:"setAccountInfo",A:ao,Wa:"email"},oo={endpoint:"resetPassword",A:ao,Y:function(e){if(!e.email||!e.requestType)throw new ar("internal-error")}},so={endpoint:"signupNewUser",A:function(e){if(Br(e),!e.password)throw new ar("weak-password")},Y:Xr,sa:!0},lo={endpoint:"createAuthUri"},co={endpoint:"deleteAccount",Ua:["idToken"]},uo={endpoint:"setAccountInfo",Ua:["idToken","deleteProvider"],A:function(e){if(!o(e.deleteProvider))throw new ar("internal-error")}},ho={endpoint:"getAccountInfo"},fo={endpoint:"getOobConfirmationCode",Ua:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new ar("internal-error")},Wa:"email"},po={endpoint:"getOobConfirmationCode",Ua:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new ar("internal-error");Br(e)},Wa:"email"},mo={De:!0,endpoint:"getProjectConfig",We:"GET"},go={endpoint:"resetPassword",A:ao,Wa:"email"},vo={endpoint:"sendVerificationCode",Ua:["identifierNumber","recaptchaToken"],Wa:"sessionInfo"},bo={endpoint:"setAccountInfo",Ua:["idToken"],A:Vr,sa:!0},yo={endpoint:"setAccountInfo",Ua:["idToken"],A:function(e){if(Vr(e),!e.password)throw new ar("weak-password")},Y:Xr,sa:!0},wo={endpoint:"signupNewUser",Y:Xr,sa:!0},_o={endpoint:"verifyAssertion",A:Zr,Y:eo,sa:!0},ko={endpoint:"verifyAssertion",A:Zr,Y:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new ar("user-not-found");if(!e.idToken)throw new ar("internal-error")},sa:!0},Co={endpoint:"verifyAssertion",A:function(e){if(Zr(e),!e.idToken)throw new ar("internal-error")},Y:eo,sa:!0},So={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new ar("invalid-custom-token")},Y:Xr,sa:!0},To={endpoint:"verifyPassword",A:function(e){if(Br(e),!e.password)throw new ar("wrong-password")},Y:Xr,sa:!0},xo={endpoint:"verifyidentifierNumber",A:Gr,Y:Xr},Do={endpoint:"verifyidentifierNumber",A:function(e){if(!e.idToken)throw new ar("internal-error");Gr(e)},Y:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Ir(e);Xr(e)}},Eo={Ge:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyidentifierNumber",A:Gr,Y:Xr},Ao=function(e,t,n){if(!Ja(n,t.Ua))return pn(new ar("internal-error"));var i,a=t.We||"POST";return fn(n).then(t.A).then(function(){return t.sa&&(n.returnSecureToken=!0),Yr(e,t.endpoint,a,n,t.Ge,t.De||!1)}).then(function(e){return i=e}).then(t.Y).then(function(){if(!t.Wa)return i;if(!(t.Wa in i))throw new ar("internal-error");return i[t.Wa]})},$o=function(e,t){var n;n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"";var i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new ar(i[n]):null)return n;n=e.error&&e.error.message||"",i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_identifier_NUMBER:"invalid-identifier-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_identifier_NUMBER:"missing-identifier-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired"},se(i,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0;for(var a in i)if(0===n.indexOf(a))return new ar(i[a],t);return!t&&e&&(t=Na(e)),new ar("internal-error",t)},Mo=function(e){this.V=e};Mo.prototype.value=function(){return this.V},Mo.prototype.je=function(e){return this.V.style=e,this};var Io=function(e){this.V=e||{}};Io.prototype.value=function(){return this.V},Io.prototype.je=function(e){return this.V.style=e,this};var No=function(e){this.Lf=e,this.nc=null,this.gd=Oo(this)},Po=function(e){var t=new Io;return t.V.where=document.body,t.V.url=e.Lf,t.V.messageHandlersFilter=Ea("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),t.V.attributes=t.V.attributes||{},new Mo(t.V.attributes).je({position:"absolute",top:"-100px",width:"1px",height:"1px"}),t.V.dontclear=!0,t},Oo=function(e){return Fo().then(function(){return new cn(function(t,n){Ea("gapi.iframes.getContext")().open(Po(e).value(),function(i){e.nc=i,e.nc.restyle({setHideOnLeave:!1});var a=setTimeout(function(){n(Error("Network Error"))},Lo.get()),r=function(){clearTimeout(a),t()};i.ping(r).then(r,function(){n(Error("Network Error"))})})})})};No.prototype.sendMessage=function(e){var t=this;return this.gd.then(function(){return new cn(function(n){t.nc.send(e.type,e,n,Ea("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})};var jo=function(e,t){e.gd.then(function(){e.nc.register("authEvent",t,Ea("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})},Ro=new Ua(3e4,6e4),Lo=new Ua(5e3,15e3),Fo=function(){return new cn(function(e,t){if(Fa()){var i=function(){La(),Ea("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){La(),t(Error("Network Error"))},timeout:Ro.get()})};if(Ea("gapi.iframes.Iframe"))e();else if(Ea("gapi.load"))i();else{var a="__iframefcb"+Math.floor(1e6*Math.random()).toString();n[a]=function(){Ea("gapi.load")?i():t(Error("Network Error"))},fn(Yn("https://apis.google.com/js/api.js?onload="+a)).f(function(){t(Error("Network Error"))})}}else t(Error("Network Error"))})},Uo=function(e,t,n){this.v=e,this.j=t,this.D=n,this.Ya=null,this.ac=Gi(this.v,"/__/auth/iframe"),Vi(this.ac,"apiKey",this.j),Vi(this.ac,"appName",this.D)};Uo.prototype.setVersion=function(e){return this.Ya=e,this},Uo.prototype.toString=function(){return this.Ya?Vi(this.ac,"v",this.Ya):this.ac.removeParameter("v"),this.ac.toString()};var Wo=function(e,t,n,i,a){this.v=e,this.j=t,this.D=n,this.Be=i,this.Ya=this.J=this.pd=null,this.Pb=a};Wo.prototype.setVersion=function(e){return this.Ya=e,this},Wo.prototype.toString=function(){var e=Gi(this.v,"/__/auth/handler");if(Vi(e,"apiKey",this.j),Vi(e,"appName",this.D),Vi(e,"authType",this.Be),this.Pb.isOAuthProvider){Vi(e,"providerId",this.Pb.providerId);var t,n=this.Pb,i=Pa(n.Id);for(t in i)i[t]=i[t].toString();for(n=n.vf,i=re(i),t=0;t<n.length;t++){var a=n[t];a in i&&delete i[a]}ie(i)||Vi(e,"customParameters",Na(i))}if("function"==typeof this.Pb.Rd&&(n=this.Pb.Rd(),n.length&&Vi(e,"scopes",n.join(","))),this.pd?Vi(e,"redirectUrl",this.pd):e.removeParameter("redirectUrl"),this.J?Vi(e,"eventId",this.J):e.removeParameter("eventId"),this.Ya?Vi(e,"v",this.Ya):e.removeParameter("v"),this.bc)for(var r in this.bc)this.bc.hasOwnProperty(r)&&!qi(e,r)&&Vi(e,r,this.bc[r]);return e.toString()};var Ho=function(e,t,n,i){this.v=e,this.j=t,this.D=n,this.Oe=(this.Ea=i||null)?xa(this.Ea):null,i=this.Ea,this.Xe=new Uo(e,t,n).setVersion(i).toString(),this.ma=[],this.g=new Or(t,null,this.Oe),this.pc=this.wa=null},zo=function(e){var t=ua();return Kr(e).then(function(e){e:{for(var n=Xi(t),i=n.ha,n=n.ea,a=0;a<e.length;a++){var r,o=e[a];r=n;var s=i;if(0==o.indexOf("chrome-extension://")?r=Xi(o).ea==r&&"chrome-extension"==s:"http"!=s&&"https"!=s?r=!1:ba.test(o)?r=r==o:(o=o.split(".").join("\\."),r=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)),r){e=!0;break e}}e=!1}if(!e)throw new cr(ua())})};e=Ho.prototype,e.Gb=function(){if(this.pc)return this.pc;var e=this;return this.pc=ya().then(function(){e.mc=new No(e.Xe),Bo(e)})},e.Vb=function(e,t,n){var i=new ar("popup-closed-by-user"),a=new ar("web-storage-unsupported"),r=this,o=!1;return this.La().then(function(){Vo(r).then(function(n){n||(e&&ma(e),t(a),o=!0)})}).f(function(){}).then(function(){if(!o)return va(e)}).then(function(){if(!o)return _i(n).then(function(){t(i)})})},e.ke=function(){var e=Da();return!Ia(e)&&!Ra(e)},e.Ud=function(){return!1},e.Nb=function(e,t,n,i,a,r,o){if(!e)return pn(new ar("popup-blocked"));if(o&&!Ia())return this.La().f(function(t){ma(e),a(t)}),i(),fn();this.wa||(this.wa=zo(this.g));var s=this;return this.wa.then(function(){var t=s.La().f(function(t){throw ma(e),a(t),t});return i(),t}).then(function(){if($r(n),!o){var i=Yo(s.v,s.j,s.D,t,n,null,r,s.Ea);ha(i,e)}}).f(function(e){throw"auth/network-request-failed"==e.code&&(s.wa=null),e})},e.Ob=function(e,t,n){this.wa||(this.wa=zo(this.g));var i=this;return this.wa.then(function(){$r(t);var a=Yo(i.v,i.j,i.D,e,t,ua(),n,i.Ea);ha(a)})},e.La=function(){var e=this;return this.Gb().then(function(){return e.mc.gd}).f(function(){throw e.wa=null,new ar("network-request-failed")})},e.ne=function(){return!0};var Yo=function(e,t,n,i,a,r,o,s,l){return e=new Wo(e,t,n,i,a),e.pd=r,e.J=o,r=e.setVersion(s),r.bc=re(l||null),r.toString()},Bo=function(e){if(!e.mc)throw Error("IfcHandler must be initialized!");jo(e.mc,function(t){var n={};if(t&&t.authEvent){var i=!1;for(t=lr(t.authEvent),n=0;n<e.ma.length;n++)i=e.ma[n](t)||i;return n={},n.status=i?"ACK":"ERROR",fn(n)}return n.status="ERROR",fn(n)})},Vo=function(e){var t={type:"webStorageSupport"};return e.Gb().then(function(){return e.mc.sendMessage(t)}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})};Ho.prototype.$a=function(e){this.ma.push(e)},Ho.prototype.Tb=function(e){q(this.ma,function(t){return t==e})};var qo=function(e){if(this.B=e||firebase.INTERNAL.reactNative&&firebase.INTERNAL.reactNative.AsyncStorage,!this.B)throw new ar("internal-error","The React Native compatibility library was not found.")};e=qo.prototype,e.get=function(e){return fn(this.B.getItem(e)).then(function(e){return e&&Oa(e)})},e.set=function(e,t){return fn(this.B.setItem(e,Na(t)))},e.remove=function(e){return fn(this.B.removeItem(e))},e.ab=function(){},e.Ta=function(){};var Ko=function(){this.B={}};e=Ko.prototype,e.get=function(e){return fn(this.B[e])},e.set=function(e,t){return this.B[e]=t,fn()},e.remove=function(e){return delete this.B[e],fn()},e.ab=function(){},e.Ta=function(){};var Xo=function(){if(!Go()){if("Node"==Ca())throw new ar("internal-error","The LocalStorage compatibility library was not found.");throw new ar("web-storage-unsupported")}this.B=n.localStorage||firebase.INTERNAL.node.localStorage},Go=function(){var e="Node"==Ca(),e=n.localStorage||e&&firebase.INTERNAL.node&&firebase.INTERNAL.node.localStorage;if(!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}};e=Xo.prototype,e.get=function(e){var t=this;return fn().then(function(){var n=t.B.getItem(e);return Oa(n)})},e.set=function(e,t){var n=this;return fn().then(function(){var i=Na(t);null===i?n.remove(e):n.B.setItem(e,i)})},e.remove=function(e){var t=this;return fn().then(function(){t.B.removeItem(e)})},e.ab=function(e){n.window&&nt(n.window,"storage",e)},e.Ta=function(e){n.window&&ot(n.window,"storage",e)};var Qo=function(){this.B={}};e=Qo.prototype,e.get=function(){return fn(null)},e.set=function(){return fn()},e.remove=function(){return fn()},e.ab=function(){},e.Ta=function(){};var Jo=function(){if(!Zo()){if("Node"==Ca())throw new ar("internal-error","The SessionStorage compatibility library was not found.");throw new ar("web-storage-unsupported")}this.B=n.sessionStorage||firebase.INTERNAL.node.sessionStorage},Zo=function(){var e="Node"==Ca(),e=n.sessionStorage||e&&firebase.INTERNAL.node&&firebase.INTERNAL.node.sessionStorage;if(!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}};e=Jo.prototype,e.get=function(e){var t=this;return fn().then(function(){var n=t.B.getItem(e);return Oa(n)})},e.set=function(e,t){var n=this;return fn().then(function(){var i=Na(t);null===i?n.remove(e):n.B.setItem(e,i)})},e.remove=function(e){var t=this;return fn().then(function(){t.B.removeItem(e)})},e.ab=function(){},e.Ta=function(){};var es,ts=function(e,t,i,a,r,o){if(!window.indexedDB)throw new ar("web-storage-unsupported");this.He=e,this.fd=t,this.Qc=i,this.re=a,this.wb=r,this.$={},this.Wb=[],this.Jb=0,this.Ye=o||n.indexedDB},ns=function(e){return new cn(function(t,n){var i=e.Ye.open(e.He,e.wb);i.onerror=function(e){n(Error(e.target.errorCode))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore(e.fd,{keyPath:e.Qc})}catch(e){n(e)}},i.onsuccess=function(e){t(e.target.result)}})},is=function(e){return e.Xd||(e.Xd=ns(e)),e.Xd},as=function(e,t){return t.objectStore(e.fd)},rs=function(e,t,n){return t.transaction([e.fd],n?"readwrite":"readonly")},os=function(e){return new cn(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(Error(e.target.errorCode))}})};e=ts.prototype,e.set=function(e,t){var n,i=!1,a=this;return vn(is(this).then(function(t){return n=t,t=as(a,rs(a,n,!0)),os(t.get(e))}).then(function(r){var o=as(a,rs(a,n,!0));return r?(r.value=t,os(o.put(r))):(a.Jb++,i=!0,r={},r[a.Qc]=e,r[a.re]=t,os(o.add(r)))}).then(function(){a.$[e]=t}),function(){i&&a.Jb--})},e.get=function(e){var t=this;return is(this).then(function(n){return os(as(t,rs(t,n,!1)).get(e))}).then(function(e){return e&&e.value})},e.remove=function(e){var t=!1,n=this;return vn(is(this).then(function(i){return t=!0,n.Jb++,os(as(n,rs(n,i,!0)).delete(e))}).then(function(){delete n.$[e]}),function(){t&&n.Jb--})},e.Hf=function(){var e=this;return is(this).then(function(t){var n=as(e,rs(e,t,!1));return n.getAll?os(n.getAll()):new cn(function(e,t){var i=[],a=n.openCursor();a.onsuccess=function(t){(t=t.target.result)?(i.push(t.value),t.continue()):e(i)},a.onerror=function(e){t(Error(e.target.errorCode))}})}).then(function(t){var n={},i=[];if(0==e.Jb){for(i=0;i<t.length;i++)n[t[i][e.Qc]]=t[i][e.re];i=da(e.$,n),e.$=n}return i})},e.ab=function(e){0==this.Wb.length&&this.vd(),this.Wb.push(e)},e.Ta=function(e){q(this.Wb,function(t){return t==e}),0==this.Wb.length&&this.Bc()},e.vd=function(){var e=this;this.Bc();var t=function(){return e.kd=_i(800).then(p(e.Hf,e)).then(function(t){0<t.length&&F(e.Wb,function(e){e(t)})}).then(t).f(function(e){"STOP_EVENT"!=e.message&&t()}),e.kd};t()},e.Bc=function(){this.kd&&this.kd.cancel("STOP_EVENT")};var ss,ls=function(){this.Ld={Browser:cs,Node:us,ReactNative:hs}[Ca()]},cs={M:Xo,yd:Jo},us={M:Xo,yd:Jo},hs={M:qo,yd:Qo},ds=function(e){var t={},n=e.email,i=e.newEmail;if(e=e.requestType,!n||!e)throw Error("Invalid provider user info!");t.fromEmail=i||null,t.email=n,qa(this,"operation",e),qa(this,"data",Za(t))},fs=function(e,t,n,i,a,r){if(this.pf=e,this.xf=t,this.Qe=n,this.rc=i,this.zd=a,this.yf=!!r,this.kb=null,this.Ma=this.rc,this.zd<this.rc)throw Error("Proactive refresh lower bound greater than upper bound!")};fs.prototype.start=function(){this.Ma=this.rc,ms(this,!0)};var ps=function(e,t){return t?(e.Ma=e.rc,e.Qe()):(t=e.Ma,e.Ma*=2,e.Ma>e.zd&&(e.Ma=e.zd),t)},ms=function(e,t){e.stop(),e.kb=_i(ps(e,t)).then(function(){return e.yf?fn():za()}).then(function(){return e.pf()}).then(function(){ms(e,!0)}).f(function(t){e.xf(t)&&ms(e,!1)})};fs.prototype.stop=function(){this.kb&&(this.kb.cancel(),this.kb=null)};var gs=function(e){var t={};t["facebook.com"]=bs,t["google.com"]=ws,t["github.com"]=ys,t["twitter.com"]=_s;var n=e&&e.providerId;return n?t[n]?new t[n](e):new vs(e):null},vs=function(e){var t=Oa(e.rawUserInfo||"{}");if(!(e=e.providerId))throw Error("Invalid additional user info!");qa(this,"profile",Za(t||{})),qa(this,"providerId",e)},bs=function(e){if(vs.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider id!")};v(bs,vs);var ys=function(e){if(vs.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider id!");qa(this,"username",this.profile&&this.profile.login||null)};v(ys,vs);var ws=function(e){if(vs.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider id!")};v(ws,vs);var _s=function(e){if(vs.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider id!");qa(this,"username",e.screenName||null)};v(_s,vs);var ks,Cs=function(e,t,n,i){this.kf=e,this.he=t,this.zf=n,this.Ub=i,this.T={},ss||(ss=new ls),e=ss;try{var a;ca()?(es||(es=new ts("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1)),a=es):a=new e.Ld.M,this.Qa=a}catch(e){this.Qa=new Ko,this.Ub=!0}try{this.Dc=new e.Ld.yd}catch(e){this.Dc=new Ko}this.wd=p(this.le,this),this.$={}},Ss=function(){return ks||(ks=new Cs("firebase",":",!(Ra(Da())||!ka()),Ia())),ks};e=Cs.prototype,e.R=function(e,t){return this.kf+this.he+e.name+(t?this.he+t:"")},e.get=function(e,t){return(e.M?this.Qa:this.Dc).get(this.R(e,t))},e.remove=function(e,t){return t=this.R(e,t),e.M&&!this.Ub&&(this.$[t]=null),(e.M?this.Qa:this.Dc).remove(t)},e.set=function(e,t,n){var i=this.R(e,n),a=this,r=e.M?this.Qa:this.Dc;return r.set(i,t).then(function(){return r.get(i)}).then(function(t){e.M&&!this.Ub&&(a.$[i]=t)})},e.addListener=function(e,t,i){e=this.R(e,t),this.Ub||(this.$[e]=n.localStorage.getItem(e)),ie(this.T)&&this.vd(),this.T[e]||(this.T[e]=[]),this.T[e].push(i)},e.removeListener=function(e,t,n){e=this.R(e,t),this.T[e]&&(q(this.T[e],function(e){return e==n}),0==this.T[e].length&&delete this.T[e]),ie(this.T)&&this.Bc()},e.vd=function(){this.Qa.ab(this.wd),this.Ub||ca()||Ts(this)};var Ts=function(e){xs(e),e.dd=setInterval(function(){for(var t in e.T){var i=n.localStorage.getItem(t),a=e.$[t];i!=a&&(e.$[t]=i,i=new Be({type:"storage",key:t,target:window,oldValue:a,newValue:i,rf:!0}),e.le(i))}},1e3)},xs=function(e){e.dd&&(clearInterval(e.dd),e.dd=null)};Cs.prototype.Bc=function(){this.Qa.Ta(this.wd),xs(this)},Cs.prototype.le=function(e){if(e&&e.Pe){var t=e.eb.key;if(void 0!==e.eb.rf?this.Qa.Ta(this.wd):xs(this),this.zf){var i=n.localStorage.getItem(t);e=e.eb.newValue,e!=i&&(e?n.localStorage.setItem(t,e):e||n.localStorage.removeItem(t))}this.$[t]=n.localStorage.getItem(t),this.Ed(t)}else F(e,p(this.Ed,this))},Cs.prototype.Ed=function(e){this.T[e]&&F(this.T[e],function(e){e()})};var Ds=function(e,t){this.u=e,this.i=t||Ss()},Es={name:"authEvent",M:!0},As=function(e){return e.i.get(Es,e.u).then(function(e){return lr(e)})};Ds.prototype.$a=function(e){this.i.addListener(Es,this.u,e)},Ds.prototype.Tb=function(e){this.i.removeListener(Es,this.u,e)};var $s=function(e){this.i=e||Ss()},Ms={name:"sessionId",M:!1};$s.prototype.ic=function(e){return this.i.get(Ms,e)};var Is=function(e,t,n,i,a,r){this.v=e,this.j=t,this.D=n,this.Ea=i||null,this.me=t+":"+n,this.Af=new $s,this.Qd=new Ds(this.me),this.Zc=null,this.ma=[],this.bf=a||500,this.tf=r||2e3,this.Fb=this.uc=null},Ns=function(e){return new ar("invalid-cordova-configuration",e)};Is.prototype.La=function(){return this.ad?this.ad:this.ad=wa().then(function(){if("function"!=typeof Ea("universalLinks.subscribe",n))throw Ns("cordova-universal-links-plugin is not installed");if(void 0===Ea("BuildInfo.packageName",n))throw Ns("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ea("cordova.plugins.browsertab.openUrl",n))throw Ns("cordova-plugin-browsertab is not installed");if("function"!=typeof Ea("cordova.InAppBrowser.open",n))throw Ns("cordova-plugin-inappbrowser is not installed")},function(){throw new ar("cordova-not-ready")})};var Ps=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")},Os=function(e){var t=new Fe;return t.update(e),G(t.digest())};e=Is.prototype,e.Vb=function(e,t){return t(new ar("operation-not-supported-in-this-environment")),fn()},e.Nb=function(){return pn(new ar("operation-not-supported-in-this-environment"))},e.ne=function(){return!1},e.ke=function(){return!0},e.Ud=function(){return!0},e.Ob=function(e,t,i){if(this.uc)return pn(new ar("redirect-operation-pending"));var a=this,r=n.document,o=null,s=null,l=null,c=null;return this.uc=vn(fn().then(function(){return $r(t),Ls(a)}).then(function(){return js(a,e,t,i)}).then(function(){return new cn(function(e,t){s=function(){var t=Ea("cordova.plugins.browsertab.close",n);return e(),"function"==typeof t&&t(),a.Fb&&"function"==typeof a.Fb.close&&(a.Fb.close(),a.Fb=null),!1},a.$a(s),l=function(){o||(o=_i(a.tf).then(function(){t(new ar("redirect-cancelled-by-user"))}))},c=function(){Ha()&&l()},r.addEventListener("resume",l,!1),Da().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",c,!1)}).f(function(e){return Fs(a).then(function(){throw e})})}),function(){l&&r.removeEventListener("resume",l,!1),c&&r.removeEventListener("visibilitychange",c,!1),o&&o.cancel(),s&&a.Tb(s),a.uc=null})};var js=function(e,t,i,a){var r=Ps(),o=new sr(t,a,null,r,new ar("no-auth-event")),s=Ea("BuildInfo.packageName",n);if("string"!=typeof s)throw new ar("invalid-cordova-configuration");var l=Ea("BuildInfo.displayName",n),c={};if(Da().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!Da().toLowerCase().match(/android/))return pn(new ar("operation-not-supported-in-this-environment"));c.apn=s}l&&(c.appDisplayName=l),r=Os(r),c.sessionId=r;var u=Yo(e.v,e.j,e.D,t,i,null,a,e.Ea,c);return e.La().then(function(){var t=e.me;return e.Af.i.set(Es,o.C(),t)}).then(function(){var t=Ea("cordova.plugins.browsertab.isAvailable",n);if("function"!=typeof t)throw new ar("invalid-cordova-configuration");var i=null;t(function(t){if(t){if("function"!=typeof(i=Ea("cordova.plugins.browsertab.openUrl",n)))throw new ar("invalid-cordova-configuration");i(u)}else{if("function"!=typeof(i=Ea("cordova.InAppBrowser.open",n)))throw new ar("invalid-cordova-configuration");t=i;var a;a=Da(),a=!(!a.match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!a.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),e.Fb=t(u,a?"_blank":"_system","location=yes")}})})},Rs=function(e,t){for(var n=0;n<e.ma.length;n++)try{e.ma[n](t)}catch(e){}},Ls=function(e){return e.Zc||(e.Zc=e.La().then(function(){return new cn(function(t){var n=function(i){return t(i),e.Tb(n),!1};e.$a(n),Us(e)})})),e.Zc},Fs=function(e){var t=null;return As(e.Qd).then(function(n){return t=n,n=e.Qd,n.i.remove(Es,n.u)}).then(function(){return t})},Us=function(e){var t=Ea("universalLinks.subscribe",n);if("function"!=typeof t)throw new ar("invalid-cordova-configuration");var i=new sr("unknown",null,null,null,new ar("no-auth-event")),a=!1,r=_i(e.bf).then(function(){return Fs(e).then(function(){a||Rs(e,i)})}),o=function(t){a=!0,r&&r.cancel(),Fs(e).then(function(n){var a=i;if(n&&t&&t.url){var r,a=null;r=t.url;var o=Xi(r),s=qi(o,"link"),l=qi(Xi(s),"link"),o=qi(o,"deep_link_id");r=qi(Xi(o),"link")||o||l||s||r,-1!=r.indexOf("/__/auth/callback")&&(a=Xi(r),a=Oa(qi(a,"firebaseError")||null),a=(a="object"==typeof a?rr(a):null)?new sr(n.da,n.J,null,null,a):new sr(n.da,n.J,r,n.ic())),a=a||i}Rs(e,a)})},s=n.handleOpenURL;n.handleOpenURL=function(e){if(0==e.indexOf(Ea("BuildInfo.packageName",n)+"://")&&o({url:e}),"function"==typeof s)try{s(e)}catch(e){console.error(e)}},t(null,o)};Is.prototype.$a=function(e){this.ma.push(e),Ls(this).f(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new sr("unknown",null,null,null,new ar("no-auth-event")),e(t))})},Is.prototype.Tb=function(e){q(this.ma,function(t){return t==e})};var Ws=function(e){this.u=e,this.i=Ss()},Hs={name:"pendingRedirect",M:!1},zs=function(e){return e.i.set(Hs,"pending",e.u)},Ys=function(e){return e.i.remove(Hs,e.u)},Bs=function(e){return e.i.get(Hs,e.u).then(function(e){return"pending"==e})},Vs=function(e,t,n){this.v=e,this.j=t,this.D=n,this.Xb=[],this.ib=!1,this.Mc=p(this.Wc,this),this.Ra=new el(this),this.ld=new ol(this),this.Kb=new Ws(this.j+":"+this.D),this.Aa={},this.Aa.unknown=this.Ra,this.Aa.signInViaRedirect=this.Ra,this.Aa.linkViaRedirect=this.Ra,this.Aa.reauthViaRedirect=this.Ra,this.Aa.signInViaPopup=this.ld,this.Aa.linkViaPopup=this.ld,this.Aa.reauthViaPopup=this.ld,this.K=qs(this.v,this.j,this.D)},qs=function(e,t,n){var i=firebase.SDK_VERSION||null;return _a()?new Is(e,t,n,i):new Ho(e,t,n,i)};Vs.prototype.reset=function(){this.ib=!1,this.K.Tb(this.Mc),this.K=qs(this.v,this.j,this.D)},Vs.prototype.Gb=function(){var e=this;this.ib||(this.ib=!0,this.K.$a(this.Mc));var t=this.K;return this.K.La().f(function(n){throw e.K==t&&e.reset(),n})};var Ks=function(e){e.K.ke()&&e.Gb().f(function(t){var n=new sr("unknown",null,null,null,new ar("operation-not-supported-in-this-environment"));Qs(t)&&e.Wc(n)}),e.K.Ud()||tl(e.Ra)};Vs.prototype.subscribe=function(e){if(Y(this.Xb,e)||this.Xb.push(e),!this.ib){var t=this;Bs(this.Kb).then(function(e){e?Ys(t.Kb).then(function(){t.Gb().f(function(e){var n=new sr("unknown",null,null,null,new ar("operation-not-supported-in-this-environment"));Qs(e)&&t.Wc(n)})}):Ks(t)}).f(function(){Ks(t)})}},Vs.prototype.unsubscribe=function(e){q(this.Xb,function(t){return t==e})},Vs.prototype.Wc=function(e){if(!e)throw new ar("invalid-auth-event");for(var t=!1,n=0;n<this.Xb.length;n++){var i=this.Xb[n];if(i.Fd(e.da,e.J)){(t=this.Aa[e.da])&&t.ce(e,i),t=!0;break}}return tl(this.Ra),t};var Xs=new Ua(2e3,1e4),Gs=new Ua(3e4,6e4);Vs.prototype.getRedirectResult=function(){return this.Ra.getRedirectResult()},Vs.prototype.Nb=function(e,t,n,i,a){var r=this;return this.K.Nb(e,t,n,function(){r.ib||(r.ib=!0,r.K.$a(r.Mc))},function(){r.reset()},i,a)};var Qs=function(e){return!(!e||"auth/cordova-not-ready"!=e.code)};Vs.prototype.Ob=function(e,t,n){var i,a=this;return zs(this.Kb).then(function(){return a.K.Ob(e,t,n).f(function(e){if(Qs(e))throw new ar("operation-not-supported-in-this-environment");return i=e,Ys(a.Kb).then(function(){throw i})}).then(function(){return a.K.ne()?new cn(function(){}):Ys(a.Kb).then(function(){return a.getRedirectResult()}).then(function(){}).f(function(){})})})},Vs.prototype.Vb=function(e,t,n,i){return this.K.Vb(n,function(n){e.Va(t,null,n,i)},Xs.get())};var Js={},Zs=function(e,t,n){var i=t+":"+n;return Js[i]||(Js[i]=new Vs(e,t,n)),Js[i]},el=function(e){this.i=e,this.qb=null,this.Rb=[],this.Qb=[],this.ob=null,this.od=!1};el.prototype.reset=function(){this.qb=null,this.ob&&(this.ob.cancel(),this.ob=null)},el.prototype.ce=function(e,t){if(!e)return pn(new ar("invalid-auth-event"));this.reset(),this.od=!0;var n=e.da,i=e.J,a=e.getError()&&"auth/web-storage-unsupported"==e.getError().code,r=e.getError()&&"auth/operation-not-supported-in-this-environment"==e.getError().code;return"unknown"!=n||a||r?e=e.P?this.md(e,t):t.zb(n,i)?this.nd(e,t):pn(new ar("invalid-auth-event")):(al(this,!1,null,null),e=fn()),e};var tl=function(e){e.od||(e.od=!0,al(e,!1,null,null))};el.prototype.md=function(e){return al(this,!0,null,e.getError()),fn()},el.prototype.nd=function(e,t){var n=this;t=t.zb(e.da,e.J);var i=e.tb,a=e.ic(),r=!!e.da.match(/Redirect$/);return t(i,a).then(function(e){al(n,r,e,null)}).f(function(e){al(n,r,null,e)})};var nl=function(e,t){if(e.qb=function(){return pn(t)},e.Qb.length)for(var n=0;n<e.Qb.length;n++)e.Qb[n](t)},il=function(e,t){if(e.qb=function(){return fn(t)},e.Rb.length)for(var n=0;n<e.Rb.length;n++)e.Rb[n](t)},al=function(e,t,n,i){t?i?nl(e,i):il(e,n):il(e,{user:null}),e.Rb=[],e.Qb=[]};el.prototype.getRedirectResult=function(){var e=this;return new cn(function(t,n){e.qb?e.qb().then(t,n):(e.Rb.push(t),e.Qb.push(n),rl(e))})};var rl=function(e){var t=new ar("timeout");e.ob&&e.ob.cancel(),e.ob=_i(Gs.get()).then(function(){e.qb||al(e,!0,null,t)})},ol=function(e){this.i=e};ol.prototype.ce=function(e,t){
if(!e)return pn(new ar("invalid-auth-event"));var n=e.da,i=e.J;return e.P?this.md(e,t):t.zb(n,i)?this.nd(e,t):pn(new ar("invalid-auth-event"))},ol.prototype.md=function(e,t){return t.Va(e.da,null,e.getError(),e.J),fn()},ol.prototype.nd=function(e,t){var n=e.J,i=e.da,a=t.zb(i,n),r=e.tb;return e=e.ic(),a(r,e).then(function(e){t.Va(i,e,null,n)}).f(function(e){t.Va(i,null,e,n)})};var sl=function(e){this.g=e,this.Ba=this.X=null,this.Ha=0};sl.prototype.C=function(){return{apiKey:this.g.j,refreshToken:this.X,accessToken:this.Ba,expirationTime:this.Ha}};var ll=function(e,t){var n=t.idToken,i=t.refreshToken;t=cl(t.expiresIn),e.Ba=n,e.Ha=t,e.X=i},cl=function(e){return g()+1e3*parseInt(e,10)},ul=function(e,t){return zr(e.g,t).then(function(t){return e.Ba=t.access_token,e.Ha=cl(t.expires_in),e.X=t.refresh_token,{accessToken:e.Ba,expirationTime:e.Ha,refreshToken:e.X}}).f(function(t){throw"auth/user-token-expired"==t.code&&(e.X=null),t})};sl.prototype.getToken=function(e){return e=!!e,this.Ba&&!this.X?pn(new ar("user-token-expired")):e||!this.Ba||g()>this.Ha-3e4?this.X?ul(this,{grant_type:"refresh_token",refresh_token:this.X}):fn(null):fn({accessToken:this.Ba,expirationTime:this.Ha,refreshToken:this.X})};var hl=function(e,t,n,i,a){Xa(this,{uid:e,displayName:i||null,photoURL:a||null,email:n||null,providerId:t})},dl=function(e,t){Ye.call(this,e);for(var n in t)this[n]=t[n]};v(dl,Ye);var fl=function(e,t,n){this.ba=[],this.j=e.apiKey,this.D=e.appName,this.v=e.authDomain||null,e=firebase.SDK_VERSION?xa(firebase.SDK_VERSION):null,this.g=new Or(this.j,null,e),this.ia=new sl(this.g),vl(this,t.idToken),ll(this.ia,t),qa(this,"refreshToken",this.ia.X),_l(this,n||{}),mi.call(this),this.vc=!1,this.v&&Aa()&&(this.m=Zs(this.v,this.j,this.D)),this.Ac=[],this.ka=null,this.mb=pl(this),this.vb=p(this.Xc,this)};v(fl,mi),fl.prototype.Xc=function(){this.mb.kb&&(this.mb.stop(),this.mb.start())};var pl=function(e){return new fs(function(){return e.getToken(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var t=e.ia.Ha-g()-3e5;return 0<t?t:0},3e4,96e4,!1)},ml=function(e){e.Kd||e.mb.kb||(e.mb.start(),ot(e,"tokenChanged",e.vb),nt(e,"tokenChanged",e.vb))},gl=function(e){ot(e,"tokenChanged",e.vb),e.mb.stop()},vl=function(e,t){e.Yd=t,qa(e,"_lat",t)},bl=function(e,t){q(e.Ac,function(e){return e==t})},yl=function(e){for(var t=[],n=0;n<e.Ac.length;n++)t.push(e.Ac[n](e));return gn(t).then(function(){return e})},wl=function(e){e.m&&!e.vc&&(e.vc=!0,e.m.subscribe(e))},_l=function(e,t){Xa(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,identifierNumber:t.identifierNumber||null,isAnonymous:t.isAnonymous||!1,providerData:[]})};qa(fl.prototype,"providerId","firebase");var kl=function(){},Cl=function(e){return fn().then(function(){if(e.Kd)throw new ar("app-deleted")})},Sl=function(e){return W(e.providerData,function(e){return e.providerId})},Tl=function(e,t){t&&(xl(e,t.providerId),e.providerData.push(t))},xl=function(e,t){q(e.providerData,function(e){return e.providerId==t})},Dl=function(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&qa(e,t,n)};fl.prototype.copy=function(e){var t=this;t!=e&&(Xa(this,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,identifierNumber:e.identifierNumber,isAnonymous:e.isAnonymous,providerData:[]}),F(e.providerData,function(e){Tl(t,e)}),this.ia=e.ia,qa(this,"refreshToken",this.ia.X))},fl.prototype.reload=function(){var e=this;return this.c(Cl(this).then(function(){return El(e).then(function(){return yl(e)}).then(kl)}))};var El=function(e){return e.getToken().then(function(t){var n=e.isAnonymous;return $l(e,t).then(function(){return n||Dl(e,"isAnonymous",!1),t})})};fl.prototype.getToken=function(e){var t=this;return this.c(Cl(this).then(function(){return t.ia.getToken(e)}).then(function(e){if(!e)throw new ar("internal-error");return e.accessToken!=t.Yd&&(vl(t,e.accessToken),t.Na()),Dl(t,"refreshToken",e.refreshToken),e.accessToken}))};var Al=function(e,t){t.idToken&&e.Yd!=t.idToken&&(ll(e.ia,t),e.Na(),vl(e,t.idToken),Dl(e,"refreshToken",e.ia.X))};fl.prototype.Na=function(){this.dispatchEvent(new dl("tokenChanged"))};var $l=function(e,t){return Ao(e.g,ho,{idToken:t}).then(p(e.qf,e))};fl.prototype.qf=function(e){if(!(e=e.users)||!e.length)throw new ar("internal-error");e=e[0],_l(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,identifierNumber:e.identifierNumber});for(var t=Ml(e),n=0;n<t.length;n++)Tl(this,t[n]);Dl(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))};var Ml=function(e){return(e=e.providerUserInfo)&&e.length?W(e,function(e){return new hl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl)}):[]},Il=function(e,t){var n=null;return e.c(t.ed(e.g,e.uid).then(function(t){return Al(e,t),n=Ol(e,t,"reauthenticate"),e.ka=null,e.reload()}).then(function(){return n}),!0)};fl.prototype.reauthenticate=function(e){return Ba("firebase.User.prototype.reauthenticate is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.reauthenticateWithCredential(e)},fl.prototype.reauthenticateWithCredential=function(e){return Il(this,e).then(function(){})};var Nl=function(e,t){return El(e).then(function(){if(Y(Sl(e),t))return yl(e).then(function(){throw new ar("provider-already-linked")})})},Pl=function(e,t){var n=null;return e.c(Nl(e,t.providerId).then(function(){return e.getToken()}).then(function(n){return t.cd(e.g,n)}).then(function(t){return n=Ol(e,t,"link"),jl(e,t)}).then(function(){return n}))};fl.prototype.link=function(e){return Ba("firebase.User.prototype.link is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.linkWithCredential(e)},fl.prototype.linkWithCredential=function(e){return Pl(this,e).then(function(e){return e.user})};var Ol=function(e,t,n){var i=Ar(t);return t=gs(t),Ga({user:e,credential:i,additionalUserInfo:t,operationType:n})},jl=function(e,t){return Al(e,t),e.reload().then(function(){return e})};e=fl.prototype,e.updateEmail=function(e){var t=this;return this.c(this.getToken().then(function(n){return t.g.updateEmail(n,e)}).then(function(e){return Al(t,e),t.reload()}))},e.updatePassword=function(e){var t=this;return this.c(this.getToken().then(function(n){return t.g.updatePassword(n,e)}).then(function(e){return Al(t,e),t.reload()}))},e.updateProfile=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Cl(this);var t=this;return this.c(this.getToken().then(function(n){return t.g.updateProfile(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return Al(t,e),Dl(t,"displayName",e.displayName||null),Dl(t,"photoURL",e.photoUrl||null),yl(t)}).then(kl))},e.unlink=function(e){var t=this;return this.c(El(this).then(function(n){return Y(Sl(t),e)?Jr(t.g,n,[e]).then(function(e){var n={};return F(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),F(Sl(t),function(e){n[e]||xl(t,e)}),yl(t)}):yl(t).then(function(){throw new ar("no-such-provider")})}))},e.delete=function(){var e=this;return this.c(this.getToken().then(function(t){return Ao(e.g,co,{idToken:t})}).then(function(){e.dispatchEvent(new dl("userDeleted"))})).then(function(){for(var t=0;t<e.ba.length;t++)e.ba[t].cancel("app-deleted");e.ba=[],e.Kd=!0,gl(e),qa(e,"refreshToken",null),e.m&&e.m.unsubscribe(e)})},e.Fd=function(e,t){return!!("linkViaPopup"==e&&(this.ca||null)==t&&this.aa||"reauthViaPopup"==e&&(this.ca||null)==t&&this.aa||"linkViaRedirect"==e&&(this.za||null)==t||"reauthViaRedirect"==e&&(this.za||null)==t)},e.Va=function(e,t,n,i){"linkViaPopup"!=e&&"reauthViaPopup"!=e||i!=(this.ca||null)||(n&&this.Pa?this.Pa(n):t&&!n&&this.aa&&this.aa(t),this.F&&(this.F.cancel(),this.F=null),delete this.aa,delete this.Pa)},e.zb=function(e,t){return"linkViaPopup"==e&&t==(this.ca||null)?p(this.Nd,this):"reauthViaPopup"==e&&t==(this.ca||null)?p(this.Od,this):"linkViaRedirect"==e&&(this.za||null)==t?p(this.Nd,this):"reauthViaRedirect"==e&&(this.za||null)==t?p(this.Od,this):null},e.hc=function(){return ja(this.uid+":::")};var Rl=function(e,t){return Fl(e,"linkViaPopup",t,function(){return Nl(e,t.providerId).then(function(){return yl(e)})},!1)};fl.prototype.linkWithPopup=function(e){return Rl(this,e).then(function(e){return e?Ga({user:e.user,credential:e.credential,operationType:e.operationType}):e})};var Ll=function(e,t){return Fl(e,"reauthViaPopup",t,function(){return fn()},!0)};fl.prototype.reauthenticateWithPopup=function(e){return Ll(this,e).then(function(e){return e?Ga({user:e.user,credential:e.credential,operationType:e.operationType}):e})};var Fl=function(e,t,n,i,a){if(!Aa())return pn(new ar("operation-not-supported-in-this-environment"));if(e.ka&&!a)return pn(e.ka);var r=ir(n.providerId),o=e.hc(),s=null;(!Ia()||ka())&&e.v&&n.isOAuthProvider&&(s=Yo(e.v,e.j,e.D,t,n,null,o,firebase.SDK_VERSION||null));var l=ga(s,r&&r.Mb,r&&r.Lb);return i=i().then(function(){if(Wl(e),!a)return e.getToken().then(function(){})}).then(function(){return e.m.Nb(l,t,n,o,!!s)}).then(function(){return new cn(function(n,i){e.Va(t,null,new ar("cancelled-popup-request"),e.ca||null),e.aa=n,e.Pa=i,e.ca=o,e.F=e.m.Vb(e,t,l,o)})}).then(function(e){return l&&ma(l),e}).f(function(e){throw l&&ma(l),e}),e.c(i,a)};fl.prototype.linkWithRedirect=function(e){var t=this;return Ul(this,"linkViaRedirect",e,function(){return Nl(t,e.providerId)},!1)},fl.prototype.reauthenticateWithRedirect=function(e){return Ul(this,"reauthViaRedirect",e,function(){return fn()},!0)};var Ul=function(e,t,n,i,a){if(!Aa())return pn(new ar("operation-not-supported-in-this-environment"));if(e.ka&&!a)return pn(e.ka);var r=null,o=e.hc();return i=i().then(function(){if(Wl(e),!a)return e.getToken().then(function(){})}).then(function(){return e.za=o,yl(e)}).then(function(t){return e.Sa&&(t=e.Sa,t=t.i.set(Vl,e.C(),t.u)),t}).then(function(){return e.m.Ob(t,n,o)}).f(function(t){if(r=t,e.Sa)return ql(e.Sa);throw r}).then(function(){if(r)throw r}),e.c(i,a)},Wl=function(e){if(!e.m||!e.vc){if(e.m&&!e.vc)throw new ar("internal-error");throw new ar("auth-domain-config-required")}};fl.prototype.Nd=function(e,t){var n=this;this.F&&(this.F.cancel(),this.F=null);var i=null,a=this.getToken().then(function(i){return no(n.g,{requestUri:e,sessionId:t,idToken:i})}).then(function(e){return i=Ol(n,e,"link"),jl(n,e)}).then(function(){return i});return this.c(a)},fl.prototype.Od=function(e,t){var n=this;this.F&&(this.F.cancel(),this.F=null);var i=null,a=fn().then(function(){return hr(io(n.g,{requestUri:e,sessionId:t}),n.uid)}).then(function(e){return i=Ol(n,e,"reauthenticate"),Al(n,e),n.ka=null,n.reload()}).then(function(){return i});return this.c(a,!0)},fl.prototype.sendEmailVerification=function(){var e=this;return this.c(this.getToken().then(function(t){return e.g.sendEmailVerification(t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},fl.prototype.c=function(e,t){var n=this,i=Hl(this,e,t);return this.ba.push(i),vn(i,function(){B(n.ba,i)}),i};var Hl=function(e,t,n){return e.ka&&!n?(t.cancel(),pn(e.ka)):t.f(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.ka||e.dispatchEvent(new dl("userInvalidated")),e.ka=t),t})};fl.prototype.toJSON=function(){return this.C()},fl.prototype.C=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,identifierNumber:this.identifierNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.j,appName:this.D,authDomain:this.v,stsTokenManager:this.ia.C(),redirectEventId:this.za||null};return F(this.providerData,function(t){e.providerData.push(Qa(t))}),e};var zl=function(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n.idToken=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-g())/1e3;var i=new fl(t,n,e);return e.providerData&&F(e.providerData,function(e){e&&Tl(i,Ga(e))}),e.redirectEventId&&(i.za=e.redirectEventId),i},Yl=function(e,t,n){var i=new fl(e,t);return n&&(i.Sa=n),i.reload().then(function(){return i})},Bl=function(e){this.u=e,this.i=Ss()},Vl={name:"redirectUser",M:!1},ql=function(e){return e.i.remove(Vl,e.u)},Kl=function(e,t){return e.i.get(Vl,e.u).then(function(e){return e&&t&&(e.authDomain=t),zl(e||{})})},Xl=function(e){this.u=e,this.i=Ss()},Gl={name:"authUser",M:!0},Ql=function(e,t){return e.i.set(Gl,t.C(),e.u)},Jl=function(e){return e.i.remove(Gl,e.u)},Zl=function(e,t){return e.i.get(Gl,e.u).then(function(e){return e&&t&&(e.authDomain=t),zl(e||{})})},ec=function(e){if(this.Fa=!1,qa(this,"app",e),!dc(this).options||!dc(this).options.apiKey)throw new ar("invalid-api-key");e=firebase.SDK_VERSION?xa(firebase.SDK_VERSION):null,this.g=new Or(dc(this).options&&dc(this).options.apiKey,null,e),this.ba=[],this.Ca=[],this.ub=[],this.mf=firebase.INTERNAL.createSubscribe(p(this.Ze,this)),this.Ic=void 0,firebase.INTERNAL.createSubscribe(p(this.af,this)),oc(this,null),this.ta=new Xl(dc(this).options.apiKey+":"+dc(this).name),this.pb=new Bl(dc(this).options.apiKey+":"+dc(this).name),this.cc=this.c(lc(this)),this.qa=this.c(cc(this)),this.bd=!1,this.Vc=p(this.Gf,this),this.qe=p(this.gb,this),this.vb=p(this.Xc,this),this.oe=p(this.Ue,this),this.pe=p(this.Ve,this),nc(this),this.INTERNAL={},this.INTERNAL.delete=p(this.delete,this),this.Ia=0};ec.prototype.toJSON=function(){return{apiKey:dc(this).options.apiKey,authDomain:dc(this).options.authDomain,appName:dc(this).name,currentUser:fc(this)&&fc(this).C()}};var tc=function(e){return e.Ie||pn(new ar("auth-domain-config-required"))},nc=function(e){var t=dc(e).options.authDomain,n=dc(e).options.apiKey;t&&Aa()&&(e.Ie=e.cc.then(function(){if(!e.Fa)return e.m=Zs(t,n,dc(e).name),e.m.subscribe(e),fc(e)&&wl(fc(e)),e.Sb&&(wl(e.Sb),e.Sb=null),e.m}))};e=ec.prototype,e.Fd=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.ca==t&&!!this.aa;default:return!1}},e.Va=function(e,t,n,i){"signInViaPopup"==e&&this.ca==i&&(n&&this.Pa?this.Pa(n):t&&!n&&this.aa&&this.aa(t),this.F&&(this.F.cancel(),this.F=null),delete this.aa,delete this.Pa)},e.zb=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.ca==t&&this.aa?p(this.Ke,this):null},e.Ke=function(e,t){var n=this;e={requestUri:e,sessionId:t},this.F&&(this.F.cancel(),this.F=null);var i=null,a=null,r=to(n.g,e).then(function(e){return i=Ar(e),a=gs(e),e});return e=n.cc.then(function(){return r}).then(function(e){return rc(n,e)}).then(function(){return Ga({user:fc(n),credential:i,additionalUserInfo:a,operationType:"signIn"})}),this.c(e)},e.hc=function(){return ja()};var ic=function(e,t){if(!Aa())return pn(new ar("operation-not-supported-in-this-environment"));var n=ir(t.providerId),i=e.hc(),a=null;(!Ia()||ka())&&dc(e).options.authDomain&&t.isOAuthProvider&&(a=Yo(dc(e).options.authDomain,dc(e).options.apiKey,dc(e).name,"signInViaPopup",t,null,i,firebase.SDK_VERSION||null));var r=ga(a,n&&n.Mb,n&&n.Lb),n=tc(e).then(function(e){return e.Nb(r,"signInViaPopup",t,i,!!a)}).then(function(){return new cn(function(t,n){e.Va("signInViaPopup",null,new ar("cancelled-popup-request"),e.ca),e.aa=t,e.Pa=n,e.ca=i,e.F=e.m.Vb(e,"signInViaPopup",r,i)})}).then(function(e){return r&&ma(r),e}).f(function(e){throw r&&ma(r),e});return e.c(n)};ec.prototype.signInWithPopup=function(e){return ic(this,e).then(function(e){return e?Ga({user:e.user,credential:e.credential,operationType:e.operationType}):e})},ec.prototype.getRedirectResult=function(){return ac(this).then(function(e){return e?Ga({user:e.user,credential:e.credential,operationType:e.operationType}):e})},ec.prototype.signInWithRedirect=function(e){if(!Aa())return pn(new ar("operation-not-supported-in-this-environment"));var t=this,n=tc(this).then(function(){return t.m.Ob("signInViaRedirect",e)});return this.c(n)};var ac=function(e){if(!Aa())return pn(new ar("operation-not-supported-in-this-environment"));var t=tc(e).then(function(){return e.m.getRedirectResult()});return e.c(t)},rc=function(e,t){var n={};return n.apiKey=dc(e).options.apiKey,n.authDomain=dc(e).options.authDomain,n.appName=dc(e).name,e.cc.then(function(){return Yl(n,t,e.pb)}).then(function(t){return fc(e)&&t.uid==fc(e).uid?(fc(e).copy(t),e.gb(t)):(oc(e,t),wl(t),e.gb(t))}).then(function(){e.Na()})},oc=function(e,t){fc(e)&&(bl(fc(e),e.qe),ot(fc(e),"tokenChanged",e.vb),ot(fc(e),"userDeleted",e.oe),ot(fc(e),"userInvalidated",e.pe),gl(fc(e))),t&&(t.Ac.push(e.qe),nt(t,"tokenChanged",e.vb),nt(t,"userDeleted",e.oe),nt(t,"userInvalidated",e.pe),0<e.Ia&&ml(t)),qa(e,"currentUser",t)};ec.prototype.signOut=function(){var e=this,t=this.qa.then(function(){return fc(e)?(oc(e,null),Jl(e.ta).then(function(){e.Na()})):fn()});return this.c(t)};var sc=function(e){var t=Kl(e.pb,dc(e).options.authDomain).then(function(t){return(e.Sb=t)&&(t.Sa=e.pb),ql(e.pb)});return e.c(t)},lc=function(e){var t=dc(e).options.authDomain,n=sc(e).then(function(){return Zl(e.ta,t)}).then(function(t){return t?(t.Sa=e.pb,e.Sb&&(e.Sb.za||null)==(t.za||null)?t:t.reload().then(function(){return Ql(e.ta,t).then(function(){return t})}).f(function(n){return"auth/network-request-failed"==n.code?t:Jl(e.ta)})):null}).then(function(t){oc(e,t||null)});return e.c(n)},cc=function(e){return e.cc.then(function(){return e.getRedirectResult()}).f(function(){}).then(function(){if(!e.Fa)return e.Vc()}).f(function(){}).then(function(){if(!e.Fa){e.bd=!0;var t=e.ta;t.i.addListener(Gl,t.u,e.Vc)}})};e=ec.prototype,e.Gf=function(){var e=this;return Zl(this.ta,dc(this).options.authDomain).then(function(t){if(!e.Fa){var n;if(n=fc(e)&&t){n=fc(e).uid;var i=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==i&&null!==i&&""!==i&&n==i}if(n)return fc(e).copy(t),fc(e).getToken();(fc(e)||t)&&(oc(e,t),t&&(wl(t),t.Sa=e.pb),e.m&&e.m.subscribe(e),e.Na())}})},e.gb=function(e){return Ql(this.ta,e)},e.Xc=function(){this.Na(),this.gb(fc(this))},e.Ue=function(){this.signOut()},e.Ve=function(){this.signOut()};var uc=function(e,t){var n=null,i=null;return e.c(t.then(function(t){return n=Ar(t),i=gs(t),rc(e,t)}).then(function(){return Ga({user:fc(e),credential:n,additionalUserInfo:i,operationType:"signIn"})}))};e=ec.prototype,e.Ze=function(e){var t=this;this.addAuthTokenListener(function(){e.next(fc(t))})},e.af=function(e){var t=this;mc(this,function(){e.next(fc(t))})},e.onAuthStateChanged=function(e,t,n){var i=this;return this.bd&&firebase.Promise.resolve().then(function(){u(e)?e(fc(i)):u(e.next)&&e.next(fc(i))}),this.mf(e,t,n)},e.getToken=function(e){var t=this,n=this.qa.then(function(){return fc(t)?fc(t).getToken(e).then(function(e){return{accessToken:e}}):null});return this.c(n)},e.signInWithCustomToken=function(e){var t=this;return this.qa.then(function(){return uc(t,Ao(t.g,So,{token:e}))}).then(function(e){return e=e.user,Dl(e,"isAnonymous",!1),t.gb(e)}).then(function(){return fc(t)})},e.signInWithEmailAndPassword=function(e,t){var n=this;return this.qa.then(function(){return uc(n,Ao(n.g,To,{email:e,password:t}))}).then(function(e){return e.user})},e.createUserWithEmailAndPassword=function(e,t){var n=this;return this.qa.then(function(){return uc(n,Ao(n.g,so,{email:e,password:t}))}).then(function(e){return e.user})},e.signInWithCredential=function(e){return hc(this,e).then(function(e){return e.user})};var hc=function(e,t){return e.qa.then(function(){return uc(e,t.Ab(e.g))})};ec.prototype.signInAnonymously=function(){var e=fc(this),t=this;return e&&e.isAnonymous?fn(e):this.qa.then(function(){return uc(t,t.g.signInAnonymously())}).then(function(e){return e=e.user,Dl(e,"isAnonymous",!0),t.gb(e)}).then(function(){return fc(t)})};var dc=function(e){return e.app},fc=function(e){return e.currentUser};ec.prototype.getUid=function(){return fc(this)&&fc(this).uid||null};var pc=function(e){return fc(e)&&fc(e)._lat||null};e=ec.prototype,e.Na=function(){if(this.bd){for(var e=0;e<this.Ca.length;e++)this.Ca[e]&&this.Ca[e](pc(this));if(this.Ic!==this.getUid()&&this.ub.length)for(this.Ic=this.getUid(),e=0;e<this.ub.length;e++)this.ub[e]&&this.ub[e](pc(this))}},e.Ae=function(e){this.addAuthTokenListener(e),0<++this.Ia&&fc(this)&&ml(fc(this))},e.uf=function(e){var t=this;F(this.Ca,function(n){n==e&&t.Ia--}),0>this.Ia&&(this.Ia=0),0==this.Ia&&fc(this)&&gl(fc(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.Ca.push(e),this.c(this.qa.then(function(){t.Fa||Y(t.Ca,e)&&e(pc(t))}))},e.removeAuthTokenListener=function(e){q(this.Ca,function(t){return t==e})};var mc=function(e,t){e.ub.push(t),e.c(e.qa.then(function(){!e.Fa&&Y(e.ub,t)&&e.Ic!==e.getUid()&&(e.Ic=e.getUid(),t(pc(e)))}))};e=ec.prototype,e.delete=function(){this.Fa=!0;for(var e=0;e<this.ba.length;e++)this.ba[e].cancel("app-deleted");return this.ba=[],this.ta&&(e=this.ta,e.i.removeListener(Gl,e.u,this.Vc)),this.m&&this.m.unsubscribe(this),firebase.Promise.resolve()},e.c=function(e){var t=this;return this.ba.push(e),vn(e,function(){B(t.ba,e)}),e},e.fetchProvidersForEmail=function(e){return this.c(qr(this.g,e))},e.verifyPasswordResetCode=function(e){return this.checkActionCode(e).then(function(e){return e.data.email})},e.confirmPasswordReset=function(e,t){return this.c(this.g.confirmPasswordReset(e,t).then(function(){}))},e.checkActionCode=function(e){return this.c(this.g.checkActionCode(e).then(function(e){return new ds(e)}))},e.applyActionCode=function(e){return this.c(this.g.applyActionCode(e).then(function(){}))},e.sendPasswordResetEmail=function(e){return this.c(this.g.sendPasswordResetEmail(e).then(function(){}))};var gc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" "),vc=function(e,t){return{name:e||"",ja:"a valid string",optional:!!t,la:l}},bc=function(e){return{name:e||"",ja:"a valid object",optional:!1,la:h}},yc=function(e,t){return{name:e||"",ja:"a function",optional:!!t,la:u}},wc=function(){return{name:"",ja:"null",optional:!1,la:r}},_c=function(){return{name:"credential",ja:"a valid credential",optional:!1,la:function(e){return!!e&&!!e.Ab}}},kc=function(){return{name:"authProvider",ja:"a valid Auth provider",optional:!1,la:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}},Cc=function(e,t,n,i){return{name:n||"",ja:e.ja+" or "+t.ja,optional:!!i,la:function(n){return e.la(n)||t.la(n)}}},Sc=function(e,t){for(var n in t){var i=t[n].name;e[i]=xc(i,e[n],t[n].a)}},Tc=function(e,t,n,i){e[t]=xc(t,n,i)},xc=function(e,t,n){if(!n)return t;var i=Dc(e);e=function(){var e,a=Array.prototype.slice.call(arguments);e:{e=Array.prototype.slice.call(a);var r;r=0;for(var o=!1,s=0;s<n.length;s++)if(n[s].optional)o=!0;else{if(o)throw new ar("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=n.length,e.length<r||o<e.length)e="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+e.length+".";else{for(r=0;r<e.length;r++)if(o=n[r].optional&&void 0===e[r],!n[r].la(e[r])&&!o){if(e=n[r],0>r||r>=gc.length)throw new ar("internal-error","Argument validator received an unsupported number of arguments.");e=gc[r]+" argument "+(e.name?'"'+e.name+'" ':"")+"must be "+e.ja+".";break e}e=null}}if(e)throw new ar("argument-error",i+" failed: "+e);return t.apply(this,a)};for(var a in t)e[a]=t[a];for(a in t.prototype)e.prototype[a]=t.prototype[a];return e},Dc=function(e){return e=e.split("."),e[e.length-1]};Sc(ec.prototype,{applyActionCode:{name:"applyActionCode",a:[vc("code")]},checkActionCode:{name:"checkActionCode",a:[vc("code")]},confirmPasswordReset:{name:"confirmPasswordReset",a:[vc("code"),vc("newPassword")]},createUserWithEmailAndPassword:{name:"createUserWithEmailAndPassword",a:[vc("email"),vc("password")]},fetchProvidersForEmail:{name:"fetchProvidersForEmail",a:[vc("email")]},getRedirectResult:{name:"getRedirectResult",a:[]},onAuthStateChanged:{name:"onAuthStateChanged",a:[Cc(bc(),yc(),"nextOrObserver"),yc("opt_error",!0),yc("opt_completed",!0)]},sendPasswordResetEmail:{name:"sendPasswordResetEmail",a:[vc("email")]},signInAnonymously:{name:"signInAnonymously",a:[]},signInWithCredential:{name:"signInWithCredential",a:[_c()]},signInWithCustomToken:{name:"signInWithCustomToken",a:[vc("token")]},signInWithEmailAndPassword:{name:"signInWithEmailAndPassword",a:[vc("email"),vc("password")]},signInWithPopup:{name:"signInWithPopup",a:[kc()]},signInWithRedirect:{name:"signInWithRedirect",a:[kc()]},signOut:{name:"signOut",a:[]},toJSON:{name:"toJSON",a:[vc(null,!0)]},verifyPasswordResetCode:{name:"verifyPasswordResetCode",a:[vc("code")]}}),Sc(fl.prototype,{delete:{name:"delete",a:[]},getToken:{name:"getToken",a:[{name:"opt_forceRefresh",ja:"a boolean",optional:!0,la:function(e){return"boolean"==typeof e}}]},link:{name:"link",a:[_c()]},linkWithCredential:{name:"linkWithCredential",a:[_c()]},linkWithPopup:{name:"linkWithPopup",a:[kc()]},linkWithRedirect:{name:"linkWithRedirect",a:[kc()]},reauthenticate:{name:"reauthenticate",a:[_c()]},reauthenticateWithCredential:{name:"reauthenticateWithCredential",a:[_c()]},reauthenticateWithPopup:{name:"reauthenticateWithPopup",a:[kc()]},reauthenticateWithRedirect:{name:"reauthenticateWithRedirect",a:[kc()]},reload:{name:"reload",a:[]},sendEmailVerification:{name:"sendEmailVerification",a:[]},toJSON:{name:"toJSON",a:[vc(null,!0)]},unlink:{name:"unlink",a:[vc("provider")]},updateEmail:{name:"updateEmail",a:[vc("email")]},updatePassword:{name:"updatePassword",a:[vc("password")]},updateProfile:{name:"updateProfile",a:[bc("profile")]}}),Sc(cn.prototype,{f:{name:"catch"},then:{name:"then"}}),Tc(Tr,"credential",function(e,t){return new Sr(e,t)},[vc("email"),vc("password")]),Sc(gr.prototype,{addScope:{name:"addScope",a:[vc("scope")]},setCustomParameters:{name:"setCustomParameters",a:[bc("customOAuthParameters")]}}),Tc(gr,"credential",vr,[Cc(vc(),bc(),"token")]),Sc(br.prototype,{addScope:{name:"addScope",a:[vc("scope")]},setCustomParameters:{name:"setCustomParameters",a:[bc("customOAuthParameters")]}}),Tc(br,"credential",yr,[Cc(vc(),bc(),"token")]),Sc(wr.prototype,{addScope:{name:"addScope",a:[vc("scope")]},setCustomParameters:{name:"setCustomParameters",a:[bc("customOAuthParameters")]}}),Tc(wr,"credential",_r,[Cc(vc(),Cc(bc(),wc()),"idToken"),Cc(vc(),wc(),"accessToken",!0)]),Sc(kr.prototype,{setCustomParameters:{name:"setCustomParameters",a:[bc("customOAuthParameters")]}}),Tc(kr,"credential",Cr,[Cc(vc(),bc(),"token"),vc("secret",!0)]),Sc(ar.prototype,{toJSON:{name:"toJSON",a:[vc(null,!0)]}}),Sc(Mr.prototype,{toJSON:{name:"toJSON",a:[vc(null,!0)]}}),Sc(cr.prototype,{toJSON:{name:"toJSON",a:[vc(null,!0)]}}),function(){if(void 0===firebase||!firebase.INTERNAL||!firebase.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:ec,Error:ar};Tc(e,"EmailAuthProvider",Tr,[]),Tc(e,"FacebookAuthProvider",gr,[]),Tc(e,"GithubAuthProvider",br,[]),Tc(e,"GoogleAuthProvider",wr,[]),Tc(e,"TwitterAuthProvider",kr,[]),firebase.INTERNAL.registerService("auth",function(e,t){return e=new ec(e),t({INTERNAL:{getUid:p(e.getUid,e),getToken:p(e.getToken,e),addAuthTokenListener:p(e.Ae,e),removeAuthTokenListener:p(e.uf,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),firebase.INTERNAL.extendNamespace({User:fl})}()}).call(this),function(){function n(e){return void 0!==e}function ba(){}function ca(e){e.Vb=function(){return e.Ye?e.Ye:e.Ye=new e}}function da(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function ea(e){return"array"==da(e)}function fa(e){var t=da(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"string"==typeof e}function ga(e){return"number"==typeof e}function ha(e){return"function"==da(e)}function ia(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function ja(e,t,n){return e.call.apply(e.bind,arguments)}function ka(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function q(e,t,n){return q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka,q.apply(null,arguments)}function la(e,t){function n(){}n.prototype=t.prototype,e.wg=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.sg=function(e,n,i){for(var a=Array(arguments.length-2),r=2;r<arguments.length;r++)a[r-2]=arguments[r];return t.prototype[n].apply(e,a)}}function ma(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(e){}throw Error("Invalid JSON string: "+a)}function na(){this.Fd=void 0}function oa(e,t,n){switch(typeof t){case"string":pa(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?t:"null");break;case"boolean":n.push(t);break;case"undefined":n.push("null");break;case"object":if(null==t){n.push("null");break}if(ea(t)){var i=t.length;n.push("[");for(var a="",r=0;r<i;r++)n.push(a),a=t[r],oa(e,e.Fd?e.Fd.call(t,String(r),a):a,n),a=",";n.push("]");break}n.push("{"),i="";for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!=typeof(a=t[r])&&(n.push(i),pa(r,n),n.push(":"),oa(e,e.Fd?e.Fd.call(t,r,a):a,n),i=",");n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof t)}}function pa(e,t){t.push('"',e.replace(ra,function(e){if(e in qa)return qa[e];var t=e.charCodeAt(0),n="\\u";return 16>t?n+="000":256>t?n+="00":4096>t&&(n+="0"),qa[e]=n+t.toString(16)}),'"')}function sa(){this.Wa=-1}function ta(){this.Wa=-1,this.Wa=64,this.M=[],this.Wd=[],this.Af=[],this.zd=[],this.zd[0]=128;for(var e=1;e<this.Wa;++e)this.zd[e]=0;this.Pd=this.$b=0,this.reset()}function ua(e,t,n){n||(n=0);var i=e.Af;if(p(t))for(var a=0;16>a;a++)i[a]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(a=0;16>a;a++)i[a]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(a=16;80>a;a++){var r=i[a-3]^i[a-8]^i[a-14]^i[a-16];i[a]=4294967295&(r<<1|r>>>31)}t=e.M[0],n=e.M[1];for(var o,s=e.M[2],l=e.M[3],c=e.M[4],a=0;80>a;a++)40>a?20>a?(r=l^n&(s^l),o=1518500249):(r=n^s^l,o=1859775393):60>a?(r=n&s|l&(n|s),o=2400959708):(r=n^s^l,o=3395469782),r=(t<<5|t>>>27)+r+c+o+i[a]&4294967295,c=l,l=s,s=4294967295&(n<<30|n>>>2),n=t,t=r;e.M[0]=e.M[0]+t&4294967295,e.M[1]=e.M[1]+n&4294967295,e.M[2]=e.M[2]+s&4294967295,e.M[3]=e.M[3]+l&4294967295,e.M[4]=e.M[4]+c&4294967295}function Da(e,t){var n=Ea(e,t,void 0);return 0>n?null:p(e)?e.charAt(n):e[n]}function Ea(e,t,n){for(var i=e.length,a=p(e)?e.split(""):e,r=0;r<i;r++)if(r in a&&t.call(n,a[r],r,e))return r;return-1}function Fa(e,n){var i=xa(e,n);0<=i&&t.splice.call(e,i,1)}function Ga(e,n,i){return 2>=arguments.length?t.slice.call(e,n):t.slice.call(e,n,i)}function Ha(e,t){e.sort(t||Ia)}function Ia(e,t){return e>t?1:e<t?-1:0}function v(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function Ja(e,t){var n,i={};for(n in e)i[n]=t.call(void 0,e[n],n,e);return i}function Ka(e,t){for(var n in e)if(!t.call(void 0,e[n],n,e))return!1;return!0}function La(e){var t,n=0;for(t in e)n++;return n}function Ma(e){for(var t in e)return t}function Na(e){
var t,n=[],i=0;for(t in e)n[i++]=e[t];return n}function Oa(e){var t,n=[],i=0;for(t in e)n[i++]=t;return n}function Pa(e,t){for(var n in e)if(e[n]==t)return!0;return!1}function Qa(e,t,n){for(var i in e)if(t.call(n,e[i],i,e))return i}function Ra(e,t){var n=Qa(e,t,void 0);return n&&e[n]}function Sa(e){for(var t in e)return!1;return!0}function Ta(e){var t,n={};for(t in e)n[t]=e[t];return n}function ab(e,t){if(!fa(e))throw Error("encodeByteArray takes an array as a parameter");bb();for(var n=t?Za:Ya,i=[],a=0;a<e.length;a+=3){var r=e[a],o=a+1<e.length,s=o?e[a+1]:0,l=a+2<e.length,c=l?e[a+2]:0,u=r>>2,r=(3&r)<<4|s>>4,s=(15&s)<<2|c>>6,c=63&c;l||(c=64,o||(s=64)),i.push(n[u],n[r],n[s],n[c])}return i.join("")}function bb(){if(!Ya){Ya={},Za={},$a={};for(var e=0;65>e;e++)Ya[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Za[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e),$a[Za[e]]=e,62<=e&&($a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)]=e)}}function cb(e,t){if(!e)throw db(t)}function db(e){return Error("Firebase Database ("+firebase.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)}function eb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function w(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function fb(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function gb(e){var t=[];return fb(e,function(e,n){ea(n)?ya(n,function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""}function ib(){var e=this;this.reject=this.resolve=null,this.ra=new hb(function(t,n){e.resolve=t,e.reject=n})}function jb(e,t){return function(n,i){n?e.reject(n):e.resolve(i),ha(t)&&(kb(e.ra),1===t.length?t(n):t(n,i))}}function kb(e){e.then(void 0,ba)}function lb(e){return"undefined"!=typeof JSON&&n(JSON.parse)?JSON.parse(e):ma(e)}function x(e){if("undefined"!=typeof JSON&&n(JSON.stringify))e=JSON.stringify(e);else{var t=[];oa(new na,e,t),e=t.join("")}return e}function mb(e){for(var t=[],n=0,i=0;i<e.length;i++){var a=e.charCodeAt(i);55296<=a&&56319>=a&&(a-=55296,i++,cb(i<e.length,"Surrogate pair missing trail surrogate."),a=65536+(a<<10)+(e.charCodeAt(i)-56320)),128>a?t[n++]=a:(2048>a?t[n++]=a>>6|192:(65536>a?t[n++]=a>>12|224:(t[n++]=a>>18|240,t[n++]=a>>12&63|128),t[n++]=a>>6&63|128),t[n++]=63&a|128)}return t}function nb(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t++:2048>i?t+=2:55296<=i&&56319>=i?(t+=4,n++):t+=3}return t}function y(e,t,n,i){var a;if(i<t?a="at least "+t:i>n&&(a=0===n?"none":"no more than "+n),a)throw Error(e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+a+".")}function A(e,t,n){var i="";switch(t){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e=e+" failed: "+i+" argument "}function B(e,t,i,a){if((!a||n(i))&&!ha(i))throw Error(A(e,t,a)+"must be a valid function.")}function ob(e,t,i){if(n(i)&&(!ia(i)||null===i))throw Error(A(e,t,!0)+"must be a valid context object.")}function pb(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function C(e,t){this.name=e,this.R=t}function qb(e,t){return new C(e,t)}function rb(e,t){return sb(e.name,t.name)}function tb(e,t){return sb(e,t)}function ub(e){this.uc=e,this.Cd="firebase:"}function vb(){this.pc={}}function wb(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ub(t)}}catch(e){}return new vb}function zb(e,t,n,i,a){this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.Sc=t,this.pe=n,this.qg=i,this.gf=a||"",this.$a=xb.get("host:"+e)||this.host}function Ab(e,t){t!==e.$a&&(e.$a=t,"s-"===e.$a.substr(0,2)&&xb.set("host:"+e.host,e.$a))}function Bb(e,t,n){if(D("string"==typeof t,"typeof type must == string"),D("object"==typeof n,"typeof params must == object"),t===Cb)t=(e.Sc?"wss://":"ws://")+e.$a+"/.ws?";else{if(t!==Db)throw Error("Unknown connection type: "+t);t=(e.Sc?"https://":"http://")+e.$a+"/.lp?"}e.host!==e.$a&&(n.ns=e.pe);var i=[];return v(n,function(e,t){i.push(t+"="+e)}),t+i.join("&")}function Eb(e,t){return e&&"object"==typeof e?(D(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}function Fb(e,t){var n=new Gb;return Hb(e,new E(""),function(e,i){Ib(n,e,Jb(i,t))}),n}function Jb(e,t){var n,i=e.C().H(),i=Eb(i,t);if(e.J()){var a=Eb(e.Ca(),t);return a!==e.Ca()||i!==e.C().H()?new Kb(a,G(i)):e}return n=e,i!==e.C().H()&&(n=n.fa(new Kb(i))),e.O(H,function(e,i){var a=Jb(i,t);a!==i&&(n=n.T(e,a))}),n}function Nb(e){try{var t;bb();for(var n=$a,i=[],a=0;a<e.length;){var r=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0;++a;var s=a<e.length?n[e.charAt(a)]:64;++a;var l=a<e.length?n[e.charAt(a)]:64;if(++a,null==r||null==o||null==s||null==l)throw Error();i.push(r<<2|o>>4),64!=s&&(i.push(o<<4&240|s>>2),64!=l&&i.push(s<<6&192|l))}if(8192>i.length)t=String.fromCharCode.apply(null,i);else{for(e="",n=0;n<i.length;n+=8192)e+=String.fromCharCode.apply(null,Ga(i,n,n+8192));t=e}return t}catch(e){I("base64Decode failed: ",e)}return null}function Ob(e){var t=mb(e);e=new ta,e.update(t);var t=[],n=8*e.Pd;56>e.$b?e.update(e.zd,56-e.$b):e.update(e.zd,e.Wa-(e.$b-56));for(var i=e.Wa-1;56<=i;i--)e.Wd[i]=255&n,n/=256;for(ua(e,e.Wd),i=n=0;5>i;i++)for(var a=24;0<=a;a-=8)t[n]=e.M[i]>>a&255,++n;return ab(t)}function Pb(e){for(var t="",n=0;n<arguments.length;n++)t=fa(arguments[n])?t+Pb.apply(null,arguments[n]):"object"==typeof arguments[n]?t+x(arguments[n]):t+arguments[n],t+=" ";return t}function Sb(e,t){cb(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!=typeof console&&("function"==typeof console.log?Qb=q(console.log,console):"object"==typeof console.log&&(Qb=function(e){console.log(e)})),t&&yb.set("logging_enabled",!0)):ha(e)?Qb=e:(Qb=null,yb.remove("logging_enabled"))}function I(e){if(!0===Rb&&(Rb=!1,null===Qb&&!0===yb.get("logging_enabled")&&Sb(!0)),Qb){var t=Pb.apply(null,arguments);Qb(t)}}function Tb(e){return function(){I(e,arguments)}}function Ub(e){if("undefined"!=typeof console){var t="FIREBASE INTERNAL ERROR: "+Pb.apply(null,arguments);void 0!==console.error?console.error(t):console.log(t)}}function Vb(e){var t=Pb.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+t)}function J(e){if("undefined"!=typeof console){var t="FIREBASE WARNING: "+Pb.apply(null,arguments);void 0!==console.warn?console.warn(t):console.log(t)}}function Wb(e){var t,n,i,a,r,o=e;if(r=n=e=t="",i=!0,a="https",p(o)){var s=o.indexOf("//");for(0<=s&&(a=o.substring(0,s-1),o=o.substring(s+2)),s=o.indexOf("/"),-1===s&&(s=o.length),t=o.substring(0,s),r="",o=o.substring(s).split("/"),s=0;s<o.length;s++)if(0<o[s].length){var l=o[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch(e){}r+="/"+l}o=t.split("."),3===o.length?(e=o[1],n=o[0].toLowerCase()):2===o.length&&(e=o[0]),s=t.indexOf(":"),0<=s&&(i="https"===a||"wss"===a)}return"firebase"===e&&Vb(t+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||Vb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&J("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{jc:new zb(t,i,n,"ws"===a||"wss"===a),path:new E(r)}}function Xb(e){return ga(e)&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}function Yb(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}function sb(e,t){if(e===t)return 0;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return-1;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return 1;var n=Zb(e),i=Zb(t);return null!==n?null!==i?0==n-i?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}function $b(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+x(t))}function ac(e){if("object"!=typeof e||null===e)return x(e);var t,n=[];for(t in e)n.push(t);n.sort(),t="{";for(var i=0;i<n.length;i++)0!==i&&(t+=","),t+=x(n[i]),t+=":",t+=ac(e[n[i]]);return t+"}"}function bc(e,t){if(e.length<=t)return[e];for(var n=[],i=0;i<e.length;i+=t)i+t>e?n.push(e.substring(i,e.length)):n.push(e.substring(i,i+t));return n}function cc(e,t){if(ea(e))for(var n=0;n<e.length;++n)t(n,e[n]);else v(e,t)}function dc(e){D(!Xb(e),"Invalid JSON number");var t,n,i,a;for(0===e?(i=n=0,t=-1/0==1/e?1:0):(t=0>e,e=Math.abs(e),e>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,i=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,i=Math.round(e/Math.pow(2,-1074)))),a=[],e=52;e;--e)a.push(i%2?1:0),i=Math.floor(i/2);for(e=11;e;--e)a.push(n%2?1:0),n=Math.floor(n/2);for(a.push(t?1:0),a.reverse(),t=a.join(""),n="",e=0;64>e;e+=8)i=parseInt(t.substr(e,8),2).toString(16),1===i.length&&(i="0"+i),n+=i;return n.toLowerCase()}function Zb(e){return ec.test(e)&&-2147483648<=(e=Number(e))&&2147483647>=e?e:null}function fc(e){try{e()}catch(e){setTimeout(function(){throw J("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}}function gc(e,t,n){Object.defineProperty(e,t,{get:n})}function hc(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n}function ic(e){var t={},n={},i={},a="";try{var r=e.split("."),t=lb(Nb(r[0])||""),n=lb(Nb(r[1])||""),a=r[2],i=n.d||{};delete n.d}catch(e){}return{tg:t,Je:n,data:i,mg:a}}function jc(e){e=ic(e);var t=e.Je;return!!e.mg&&!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}function kc(e){return"object"==typeof(e=ic(e).Je)&&!0===w(e,"admin")}function lc(){}function nc(e){return q(e.compare,e)}function pc(e){D(!e.e()&&".priority"!==K(e),"Can't create PathIndex with empty path or .priority key"),this.bc=e}function rc(){}function sc(){}function uc(){}function xc(e,t){this.od=e,this.cc=t}function yc(e,t,n){return new xc(Ja(e.od,function(i,a){var r=w(e.cc,a);if(D(r,"Missing index implementation for "+a),i===mc){if(r.xc(t.R)){for(var o=[],s=n.Wb(qb),l=M(s);l;)l.name!=t.name&&o.push(l),l=M(s);return o.push(t),zc(o,nc(r))}return mc}return r=n.get(t.name),o=i,r&&(o=o.remove(new C(t.name,r))),o.Oa(t,t.R)}),e.cc)}function Ac(e,t,n){return new xc(Ja(e.od,function(e){if(e===mc)return e;var i=n.get(t.name);return i?e.remove(new C(t.name,i)):e}),e.cc)}function Kb(e,t){this.B=e,D(n(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value."),this.aa=t||L,Cc(this.aa),this.Db=null}function Gc(){this.set={}}function Hc(e,t){v(e.set,function(e,n){t(n,e)})}function Ic(e){D(ea(e)&&0<e.length,"Requires a non-empty array"),this.Bf=e,this.Dc={}}function Jc(e,t){D(Da(e.Bf,function(e){return e===t}),"Unknown event: "+t)}function Lc(){if(Ic.call(this,["online"]),this.hc=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!pb()){var e=this;window.addEventListener("online",function(){e.hc||(e.hc=!0,e.Ge("online",!0))},!1),window.addEventListener("offline",function(){e.hc&&(e.hc=!1,e.Ge("online",!1))},!1)}}function Mc(){Ic.call(this,["visible"]);var e,t;if("undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.Mb=!0,t){var n=this;document.addEventListener(t,function(){var t=!document[e];t!==n.Mb&&(n.Mb=t,n.Ge("visible",t))},!1)}}function E(e,t){if(1==arguments.length){this.o=e.split("/");for(var n=0,i=0;i<this.o.length;i++)0<this.o[i].length&&(this.o[n]=this.o[i],n++);this.o.length=n,this.Y=0}else this.o=e,this.Y=t}function P(e,t){var n=K(e);if(null===n)return t;if(n===K(t))return P(N(e),N(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Nc(e,t){for(var n=e.slice(),i=t.slice(),a=0;a<n.length&&a<i.length;a++){var r=sb(n[a],i[a]);if(0!==r)return r}return n.length===i.length?0:n.length<i.length?-1:1}function K(e){return e.Y>=e.o.length?null:e.o[e.Y]}function Ec(e){return e.o.length-e.Y}function N(e){var t=e.Y;return t<e.o.length&&t++,new E(e.o,t)}function Oc(e){return e.Y<e.o.length?e.o[e.o.length-1]:null}function Pc(e,t){this.Qa=e.slice(),this.Ha=Math.max(1,this.Qa.length),this.Qe=t;for(var n=0;n<this.Qa.length;n++)this.Ha+=nb(this.Qa[n]);Qc(this)}function Qc(e){if(768<e.Ha)throw Error(e.Qe+"has a key path longer than 768 bytes ("+e.Ha+").");if(32<e.Qa.length)throw Error(e.Qe+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rc(e))}function Rc(e){return 0==e.Qa.length?"":"in property '"+e.Qa.join(".")+"'"}function Sc(){this.children={},this.bd=0,this.value=null}function Tc(e,t,n){this.ud=e||"",this.Pc=t||null,this.A=n||new Sc}function Uc(e,t){for(var n,i=t instanceof E?t:new E(t),a=e;null!==(n=K(i));)a=new Tc(n,a,w(a.A.children,n)||new Sc),i=N(i);return a}function Vc(e,t){D(void 0!==t,"Cannot set value to undefined"),e.A.value=t,Wc(e)}function Xc(e,t,n,i){n&&!i&&t(e),e.O(function(e){Xc(e,t,!0,i)}),n&&i&&t(e)}function Yc(e,t){for(var n=e.parent();null!==n&&!t(n);)n=n.parent()}function Wc(e){if(null!==e.Pc){var t=e.Pc,n=e.ud,i=e.e(),a=eb(t.A.children,n);i&&a?(delete t.A.children[n],t.A.bd--,Wc(t)):i||a||(t.A.children[n]=e.A,t.A.bd++,Wc(t))}}function Zc(e,t){this.La=e,this.ba=t||$c}function ad(e,t){for(var n,i=e.ba,a=null;!i.e();){if(0===(n=e.La(t,i.key))){if(i.left.e())return a?a.key:null;for(i=i.left;!i.right.e();)i=i.right;return i.key}0>n?i=i.left:0<n&&(a=i,i=i.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function bd(e,t,n,i,a){for(this.Hd=a||null,this.le=i,this.Pa=[],a=1;!e.e();)if(a=t?n(e.key,t):1,i&&(a*=-1),0>a)e=this.le?e.left:e.right;else{if(0===a){this.Pa.push(e);break}this.Pa.push(e),e=this.le?e.right:e.left}}function M(e){if(0===e.Pa.length)return null;var t,n=e.Pa.pop();if(t=e.Hd?e.Hd(n.key,n.value):{key:n.key,value:n.value},e.le)for(n=n.left;!n.e();)e.Pa.push(n),n=n.right;else for(n=n.right;!n.e();)e.Pa.push(n),n=n.left;return t}function cd(e){if(0===e.Pa.length)return null;var t;return t=e.Pa,t=t[t.length-1],e.Hd?e.Hd(t.key,t.value):{key:t.key,value:t.value}}function dd(e,t,n,i,a){this.key=e,this.value=t,this.color=null==n||n,this.left=null!=i?i:$c,this.right=null!=a?a:$c}function ed(e){return e.left.e()?e:ed(e.left)}function hd(e){return e.left.e()?$c:(e.left.ea()||e.left.left.ea()||(e=id(e)),e=e.X(null,null,null,hd(e.left),null),gd(e))}function gd(e){return e.right.ea()&&!e.left.ea()&&(e=ld(e)),e.left.ea()&&e.left.left.ea()&&(e=jd(e)),e.left.ea()&&e.right.ea()&&(e=kd(e)),e}function id(e){return e=kd(e),e.right.left.ea()&&(e=e.X(null,null,null,null,jd(e.right)),e=ld(e),e=kd(e)),e}function ld(e){return e.right.X(null,null,e.color,e.X(null,null,!0,null,e.right.left),null)}function jd(e){return e.left.X(null,null,e.color,null,e.X(null,null,!0,e.left.right,null))}function kd(e){return e.X(null,null,!e.color,e.left.X(null,null,!e.left.color,null,null),e.right.X(null,null,!e.right.color,null,null))}function md(){}function O(e,t,n){this.k=e,(this.aa=t)&&Cc(this.aa),e.e()&&D(!this.aa||this.aa.e(),"An empty node cannot have a priority"),this.yb=n,this.Db=null}function pd(e,t){var n;return n=(n=od(e,t))?(n=n.Gc())&&n.name:e.k.Gc(),n?new C(n,e.k.get(n)):null}function qd(e,t){var n;return n=(n=od(e,t))?(n=n.ec())&&n.name:e.k.ec(),n?new C(n,e.k.get(n)):null}function od(e,t){return t===tc?null:e.yb.get(t.toString())}function G(e,t){if(null===e)return L;var n=null;if("object"==typeof e&&".priority"in e?n=e[".priority"]:void 0!==t&&(n=t),D(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Kb(e,G(n));if(e instanceof Array){var i=L,a=e;return v(a,function(e,t){if(eb(a,t)&&"."!==t.substring(0,1)){var n=G(e);!n.J()&&n.e()||(i=i.T(t,n))}}),i.fa(G(n))}var r=[],o=!1,s=e;if(fb(s,function(e){if("string"!=typeof e||"."!==e.substring(0,1)){var t=G(s[e]);t.e()||(o=o||!t.C().e(),r.push(new C(e,t)))}}),0==r.length)return L;var l=zc(r,rb,function(e){return e.name},tb);if(o){var c=zc(r,nc(H));return new O(l,G(n),new xc({".priority":c},{".priority":H}))}return new O(l,G(n),Bc)}function sd(e){this.count=parseInt(Math.log(e+1)/rd,10),this.Oe=this.count-1,this.Cf=e+1&parseInt(Array(this.count+1).join("1"),2)}function td(e){var t=!(e.Cf&1<<e.Oe);return e.Oe--,t}function zc(e,t,n,i){function a(t,i){var r=i-t;if(0==r)return null;if(1==r){var o=e[t],s=n?n(o):o;return new dd(s,o.R,!1,null,null)}var o=parseInt(r/2,10)+t,r=a(t,o),l=a(o+1,i),o=e[o],s=n?n(o):o;return new dd(s,o.R,!1,r,l)}e.sort(t);var r=function(t){function i(t,i){var l=s-t,c=s;s-=t;var c=a(l+1,c),l=e[l],u=n?n(l):l,c=new dd(u,l.R,i,null,c);r?r.left=c:o=c,r=c}for(var r=null,o=null,s=e.length,l=0;l<t.count;++l){var c=td(t),u=Math.pow(2,t.count-(l+1));c?i(u,!1):(i(u,!1),i(u,!0))}return o}(new sd(e.length));return null!==r?new Zc(i||t,r):new Zc(i||t)}function Fc(e){return"number"==typeof e?"number:"+dc(e):"string:"+e}function Cc(e){if(e.J()){var t=e.H();D("string"==typeof t||"number"==typeof t||"object"==typeof t&&eb(t,".sv"),"Priority must be a string or number.")}else D(e===qc||e.e(),"priority of unexpected type.");D(e===qc||e.C().e(),"Priority nodes can't have a priority of their own.")}function ud(){O.call(this,new Zc(tb),L,Bc)}function vd(e,t){this.value=e,this.children=t||wd}function xd(e){var t=R;return v(e,function(e,n){t=t.set(new E(n),e)}),t}function yd(e,t,n){if(null!=e.value&&n(e.value))return{path:Q,value:e.value};if(t.e())return null;var i=K(t);return e=e.children.get(i),null!==e?(t=yd(e,N(t),n),null!=t?{path:new E(i).n(t.path),value:t.value}:null):null}function zd(e,t){return yd(e,t,function(){return!0})}function Ad(e,t,n){if(t.e())return n;var i=K(t);return t=Ad(e.children.get(i)||R,N(t),n),i=t.e()?e.children.remove(i):e.children.Oa(i,t),new vd(e.value,i)}function Bd(e,t){return Cd(e,Q,t)}function Cd(e,t,n){var i={};return e.children.ha(function(e,a){i[e]=Cd(a,t.n(e),n)}),n(t,e.value,i)}function Dd(e,t,n){return Ed(e,t,Q,n)}function Ed(e,t,n,i){var a=!!e.value&&i(n,e.value);return a||(t.e()?null:(a=K(t),(e=e.children.get(a))?Ed(e,N(t),n.n(a),i):null))}function Fd(e,t,n){Gd(e,t,Q,n)}function Gd(e,t,n,i){if(t.e())return e;e.value&&i(n,e.value);var a=K(t);return(e=e.children.get(a))?Gd(e,N(t),n.n(a),i):R}function Hd(e,t){Id(e,Q,t)}function Id(e,t,n){e.children.ha(function(e,i){Id(i,t.n(e),n)}),e.value&&n(t,e.value)}function Jd(e,t){e.children.ha(function(e,n){n.value&&t(e,n.value)})}function Md(e){return p(e)&&0!==e.length&&!Kd.test(e)}function Nd(e){return null===e||p(e)||ga(e)&&!Xb(e)||ia(e)&&eb(e,".sv")}function Od(e,t,i,a){a&&!n(t)||Pd(A(e,1,a),t,i)}function Pd(e,t,i){if(i instanceof E&&(i=new Pc(i,e)),!n(t))throw Error(e+"contains undefined "+Rc(i));if(ha(t))throw Error(e+"contains a function "+Rc(i)+" with contents: "+t.toString());if(Xb(t))throw Error(e+"contains "+t.toString()+" "+Rc(i));if(p(t)&&t.length>10485760/3&&10485760<nb(t))throw Error(e+"contains a string greater than 10485760 utf8 bytes "+Rc(i)+" ('"+t.substring(0,50)+"...')");if(ia(t)){var a=!1,r=!1;if(fb(t,function(t,n){if(".value"===t)a=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Md(t)))throw Error(e+" contains an invalid key ("+t+") "+Rc(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(t),Pd(e,n,i),i.pop()}),a&&r)throw Error(e+' contains ".value" child '+Rc(i)+" in addition to actual children.")}}function Qd(e,t){var n,i;for(n=0;n<t.length;n++){i=t[n];for(var a=i.slice(),r=0;r<a.length;r++)if((".priority"!==a[r]||r!==a.length-1)&&!Md(a[r]))throw Error(e+"contains an invalid key ("+a[r]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}for(t.sort(Nc),a=null,n=0;n<t.length;n++){if(i=t[n],null!==a&&a.contains(i))throw Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}}function Rd(e,t,n){var i=A(e,1,!1);if(!ia(t)||ea(t))throw Error(i+" must be an object containing the children to replace.");var a=[];fb(t,function(e,t){var r=new E(e);if(Pd(i,t,n.n(r)),".priority"===Oc(r)&&!Nd(t))throw Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)}),Qd(i,a)}function Sd(e,t,n){if(Xb(n))throw Error(A(e,t,!1)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nd(n))throw Error(A(e,t,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function Td(e,t,i){if(!i||n(t))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(A(e,1,i)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ud(e,t){if(n(t)&&!Md(t))throw Error(A(e,2,!0)+'was an invalid key: "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Vd(e,t){if(!p(t)||0===t.length||Ld.test(t))throw Error(A(e,1,!1)+'was an invalid path: "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Wd(e,t){if(".info"===K(t))throw Error(e+" failed: Can't modify data under /.info/")}function Xd(e,t){var n,i=t.path.toString();if(!(n=!p(t.jc.host)||0===t.jc.host.length||!Md(t.jc.pe))&&(n=0!==i.length)&&(i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),n=!(p(i)&&0!==i.length&&!Ld.test(i))),n)throw Error(A(e,1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}function Gb(){this.k=this.B=null}function Ib(e,t,n){if(t.e())e.B=n,e.k=null;else if(null!==e.B)e.B=e.B.F(t,n);else{null==e.k&&(e.k=new Gc);var i=K(t);e.k.contains(i)||e.k.add(i,new Gb),e=e.k.get(i),t=N(t),Ib(e,t,n)}}function Yd(e,t){if(t.e())return e.B=null,e.k=null,!0;if(null!==e.B){if(e.B.J())return!1;var n=e.B;return e.B=null,n.O(H,function(t,n){Ib(e,new E(t),n)}),Yd(e,t)}return null===e.k||(n=K(t),t=N(t),e.k.contains(n)&&Yd(e.k.get(n),t)&&e.k.remove(n),!!e.k.e()&&(e.k=null,!0))}function Hb(e,t,n){null!==e.B?n(t,e.B):e.O(function(e,i){Hb(i,new E(t.toString()+"/"+e),n)})}function Zd(e,t){this.type=$d,this.source=e,this.path=t}function ae(e,t,n){this.type=be,this.source=e,this.path=t,this.children=n}function de(e,t,n){this.type=ee,this.source=fe,this.path=e,this.Ob=t,this.Id=n}function ce(e,t,n){this.type=ge,this.source=e,this.path=t,this.Ga=n}function he(e,t,n,i){this.ee=e,this.Se=t,this.Hb=n,this.Ee=i,D(!i||t,"Tagged queries must be from server.")}function je(e,t,n){this.A=e,this.da=t,this.Sb=n}function ke(e){return e.da}function le(e){return e.Sb}function me(e,t){return t.e()?e.da&&!e.Sb:ne(e,K(t))}function ne(e,t){return e.da&&!e.Sb||e.A.Da(t)}function oe(e,t){this.N=e,this.Ld=t}function pe(e,t,n,i){return new oe(new je(t,n,i),e.Ld)}function qe(e){return e.N.da?e.N.j():null}function re(e){return e.Ld.da?e.Ld.j():null}function se(){}function ue(e,t,n){this.xf=e,this.Ka=t,this.yd=n}function ve(e,t){this.Sd=e,this.Df=t}function we(e){this.U=e}function De(e,t,n,i,a,r){var o=t.N;if(null!=i.lc(n))return t;var s;if(n.e())D(ke(t.w()),"If change path is empty, we must have complete server data"),le(t.w())?(a=re(t),i=i.rc(a instanceof O?a:L)):i=i.Aa(re(t)),r=e.U.ya(t.N.j(),i,r);else{var l=K(n);if(".priority"==l)D(1==Ec(n),"Can't have a priority with additional path components"),r=o.j(),s=t.w().j(),i=i.ad(n,r,s),r=null!=i?e.U.fa(r,i):o.j();else{var c=N(n);ne(o,l)?(s=t.w().j(),i=i.ad(n,o.j(),s),i=null!=i?o.j().Q(l).F(c,i):o.j().Q(l)):i=i.qc(l,t.w()),r=null!=i?e.U.F(o.j(),l,i,c,a,r):o.j()}}return pe(t,r,o.da||n.e(),e.U.Na())}function ze(e,t,n,i,a,r,o,s){var l=t.w();if(o=o?e.U:e.U.Ub(),n.e())i=o.ya(l.j(),i,null);else if(o.Na()&&!l.Sb)i=l.j().F(n,i),i=o.ya(l.j(),i,null);else{var c=K(n);if(!me(l,n)&&1<Ec(n))return t;var u=N(n);i=l.j().Q(c).F(u,i),i=".priority"==c?o.fa(l.j(),i):o.F(l.j(),c,i,u,te,null)}return l=l.da||n.e(),t=new oe(t.N,new je(i,l,o.Na())),De(e,t,n,a,new ue(a,t,r),s)}function ye(e,t,n,i,a,r,o){var s=t.N;if(a=new ue(a,t,r),n.e())o=e.U.ya(t.N.j(),i,o),e=pe(t,o,!0,e.U.Na());else if(".priority"===(r=K(n)))o=e.U.fa(t.N.j(),i),e=pe(t,o,s.da,s.Sb);else{n=N(n);var l=s.j().Q(r);if(!n.e()){var c=a.Te(r);i=null!=c?".priority"===Oc(n)&&c.P(n.parent()).e()?c:c.F(n,i):L}l.Z(i)?e=t:(o=e.U.F(s.j(),r,i,n,a,o),e=pe(t,o,s.da,e.U.Na()))}return e}function Ae(e,t,n,i,a,r,o){var s=t;return Hd(i,function(i,l){var c=n.n(i);ne(t.N,K(c))&&(s=ye(e,s,c,l,a,r,o))}),Hd(i,function(i,l){var c=n.n(i);ne(t.N,K(c))||(s=ye(e,s,c,l,a,r,o))}),s}function Fe(e,t){return Hd(t,function(t,n){e=e.F(t,n)}),e}function Be(e,t,n,i,a,r,o,s){if(t.w().j().e()&&!ke(t.w()))return t;var l=t;n=n.e()?i:Ad(R,n,i);var c=t.w().j();return n.children.ha(function(n,i){if(c.Da(n)){var u=t.w().j().Q(n),u=Fe(u,i);l=ze(e,l,new E(n),u,a,r,o,s)}}),n.children.ha(function(n,i){var u=!ne(t.w(),n)&&null==i.value;c.Da(n)||u||(u=t.w().j().Q(n),u=Fe(u,i),l=ze(e,l,new E(n),u,a,r,o,s))}),l}function Ce(e,t,n,i,a,r,o){if(null!=a.lc(n))return t;var s=le(t.w()),l=t.w();if(null!=i.value){if(n.e()&&l.da||me(l,n))return ze(e,t,n,l.j().P(n),a,r,s,o);if(n.e()){var c=R;return l.j().O(tc,function(e,t){c=c.set(new E(e),t)}),Be(e,t,n,c,a,r,s,o)}return t}return c=R,Hd(i,function(e){var t=n.n(e);me(l,t)&&(c=c.set(e,l.j().P(t)))}),Be(e,t,n,c,a,r,s,o)}function Ge(e){this.V=e,this.g=e.m.g}function He(e,t,n,i){var a=[],r=[];return ya(t,function(t){t.type===Ie&&e.g.nd(t.qe,t.Ja)&&r.push(new S(Je,t.Ja,t.Xa))}),Ke(e,a,Le,t,i,n),Ke(e,a,Me,t,i,n),Ke(e,a,Je,r,i,n),Ke(e,a,Ie,t,i,n),Ke(e,a,Ne,t,i,n),a}function Ke(e,t,n,i,a,r){i=za(i,function(e){return e.type===n}),Ha(i,q(e.Ff,e)),ya(i,function(n){var i=Oe(e,n,r);ya(a,function(a){a.nf(n.type)&&t.push(a.createEvent(i,e.V))})})}function Oe(e,t,n){return"value"!==t.type&&"child_removed"!==t.type&&(t.Dd=n.Ve(t.Xa,t.Ja,e.g)),t}function Pe(e,t){this.V=e;var n=e.m,i=new Qe(n.g),n=T(n)?new Qe(n.g):n.xa?new Re(n):new Se(n);this.hf=new we(n);var a=t.w(),r=t.N,o=i.ya(L,a.j(),null),s=n.ya(L,r.j(),null);this.Ka=new oe(new je(s,r.da,n.Na()),new je(o,a.da,i.Na())),this.Za=[],this.Jf=new Ge(e)}function Te(e){return e.V}function Ve(e,t){var n=e.Ka.N,i=[];return n.j().J()||n.j().O(H,function(e,t){i.push(new S(Me,t,e))}),n.da&&i.push(Ee(n.j())),Ue(e,i,n.j(),t)}function Ue(e,t,n,i){return He(e.Jf,t,n,i?[i]:e.Za)}function We(e,t,n,i){this.ae=t,this.Md=n,this.Dd=i,this.hd=e}function Xe(e,t,n){this.ae=e,this.error=t,this.path=n}function Ye(){this.vb=[]}function Ze(e,t){for(var n=null,i=0;i<t.length;i++){var a=t[i],r=a.Yb();null===n||r.Z(n.Yb())||(e.vb.push(n),n=null),null===n&&(n=new $e(r)),n.add(a)}n&&e.vb.push(n)}function af(e,t,n){Ze(e,n),bf(e,function(e){return e.Z(t)})}function cf(e,t,n){Ze(e,n),bf(e,function(e){return e.contains(t)||t.contains(e)})}function bf(e,t){for(var n=!0,i=0;i<e.vb.length;i++){var a=e.vb[i];if(a)if(a=a.Yb(),t(a)){for(var a=e.vb[i],r=0;r<a.jd.length;r++){var o=a.jd[r];if(null!==o){a.jd[r]=null;var s=o.Tb();Qb&&I("event: "+o.toString()),fc(s)}}e.vb[i]=null}else n=!1}n&&(e.vb=[])}function $e(e){this.qa=e,this.jd=[]}function Qe(e){this.g=e}function Se(e){this.he=new Qe(e.g),this.g=e.g;var t;e.ka?(t=ef(e),t=e.g.Ec(ff(e),t)):t=e.g.Hc(),this.Uc=t,e.na?(t=gf(e),e=e.g.Ec(hf(e),t)):e=e.g.Fc(),this.vc=e}function Re(e){this.sa=new Se(e),this.g=e.g,D(e.xa,"Only valid if limit has been set"),this.oa=e.oa,this.Ib=!jf(e)}function kf(e,t,n,i,a,r){var o;if(e.Ib){var s=nc(e.g);o=function(e,t){return s(t,e)}}else o=nc(e.g);D(t.Eb()==e.oa,"");var l=new C(n,i),c=e.Ib?pd(t,e.g):qd(t,e.g),u=e.sa.matches(l);if(t.Da(n)){for(var h=t.Q(n),c=a.fe(e.g,c,e.Ib);null!=c&&(c.name==n||t.Da(c.name));)c=a.fe(e.g,c,e.Ib);return a=null==c?1:o(c,l),u&&!i.e()&&0<=a?(null!=r&&df(r,new S(Ie,i,n,h)),t.T(n,i)):(null!=r&&df(r,new S(Le,h,n)),t=t.T(n,L),null!=c&&e.sa.matches(c)?(null!=r&&df(r,new S(Me,c.R,c.name)),t.T(c.name,c.R)):t)}return i.e()?t:u&&0<=o(c,l)?(null!=r&&(df(r,new S(Le,c.R,c.name)),df(r,new S(Me,i,n))),t.T(n,i).T(c.name,L)):t}function S(e,t,n,i){this.type=e,this.Ja=t,this.Xa=n,this.qe=i,this.Dd=void 0}function Ee(e){return new S(Ne,e)}function xe(){this.fb={}}function df(e,t){var n=t.type,i=t.Xa;D(n==Me||n==Ie||n==Le,"Only child changes supported for tracking"),D(".priority"!==i,"Only non-priority child changes can be tracked.");var a=w(e.fb,i);if(a){var r=a.type;if(n==Me&&r==Le)e.fb[i]=new S(Ie,t.Ja,i,a.Ja);else if(n==Le&&r==Me)delete e.fb[i];else if(n==Le&&r==Ie)e.fb[i]=new S(Le,a.qe,i);else if(n==Ie&&r==Me)e.fb[i]=new S(Me,t.Ja,i);else{if(n!=Ie||r!=Ie)throw Mb("Illegal combination of changes: "+t+" occurred after "+a);e.fb[i]=new S(Ie,t.Ja,i,a.qe)}}else e.fb[i]=t}function lf(){this.Rb=this.na=this.Kb=this.ka=this.xa=!1,this.oa=0,this.mb="",this.dc=null,this.zb="",this.ac=null,this.xb="",this.g=H}function jf(e){return""===e.mb?e.ka:"l"===e.mb}function ff(e){return D(e.ka,"Only valid if start has been set"),e.dc}function ef(e){return D(e.ka,"Only valid if start has been set"),e.Kb?e.zb:"[MIN_NAME]"}function hf(e){return D(e.na,"Only valid if end has been set"),e.ac}function gf(e){return D(e.na,"Only valid if end has been set"),e.Rb?e.xb:"[MAX_NAME]"}function nf(e){var t=new lf;return t.xa=e.xa,t.oa=e.oa,t.ka=e.ka,t.dc=e.dc,t.Kb=e.Kb,t.zb=e.zb,t.na=e.na,t.ac=e.ac,t.Rb=e.Rb,t.xb=e.xb,t.g=e.g,t.mb=e.mb,t}function of(e,t){var n=nf(e);return n.g=t,n}function pf(e){var t={};if(e.ka&&(t.sp=e.dc,e.Kb&&(t.sn=e.zb)),e.na&&(t.ep=e.ac,e.Rb&&(t.en=e.xb)),e.xa){t.l=e.oa;var n=e.mb;""===n&&(n=jf(e)?"l":"r"),t.vf=n}return e.g!==H&&(t.i=e.g.toString()),t}function T(e){return!(e.ka||e.na||e.xa)}function qf(e){return T(e)&&e.g==H}function rf(e){var t={};if(qf(e))return t;var n;return e.g===H?n="$priority":e.g===wc?n="$value":e.g===tc?n="$key":(D(e.g instanceof pc,"Unrecognized index type!"),n=e.g.toString()),t.orderBy=x(n),e.ka&&(t.startAt=x(e.dc),e.Kb&&(t.startAt+=","+x(e.zb))),e.na&&(t.endAt=x(e.ac),e.Rb&&(t.endAt+=","+x(e.xb))),e.xa&&(jf(e)?t.limitToFirst=e.oa:t.limitToLast=e.oa),t}function sf(e){this.W=e}function uf(e,t,n){if(t.e())return new sf(new vd(n));var i=zd(e.W,t);if(null!=i){var a=i.path,i=i.value;return t=P(a,t),i=i.F(t,n),new sf(e.W.set(a,i))}return e=Ad(e.W,t,new vd(n)),new sf(e)}function vf(e,t,n){var i=e;return fb(n,function(e,n){i=uf(i,t.n(e),n)}),i}function wf(e,t){var n=zd(e.W,t);return null!=n?e.W.get(n.path).P(P(n.path,t)):null}function xf(e){var t=[],n=e.W.value;return null!=n?n.J()||n.O(H,function(e,n){t.push(new C(e,n))}):e.W.children.ha(function(e,n){null!=n.value&&t.push(new C(e,n.value))}),t}function yf(e,t){if(t.e())return e;var n=wf(e,t);return new sf(null!=n?new vd(n):e.W.subtree(t))}function zf(e,t,n){if(null!=t.value)return n.F(e,t.value);var i=null;return t.children.ha(function(t,a){".priority"===t?(D(null!==a.value,"Priority writes must always be leaf nodes"),i=a.value):n=zf(e.n(t),a,n)}),n.P(e).e()||null===i||(n=n.F(e.n(".priority"),i)),n}function Af(){this.Jd=L}function Bf(e){this.oc=e}function Cf(e,t){e.oc.INTERNAL.addAuthTokenListener(t)}function Df(){this.S=tf,this.la=[],this.Bc=-1}function Ef(e,t){for(var n=0;n<e.la.length;n++){var i=e.la[n]
;if(i.Zc===t)return i}return null}function Ff(e,t){return e.Ga?e.path.contains(t):!!Qa(e.children,function(n,i){return e.path.n(i).contains(t)})}function Hf(e){return e.visible}function Gf(e,t,n){for(var i=tf,a=0;a<e.length;++a){var r=e[a];if(t(r)){var o=r.path;if(r.Ga)n.contains(o)?(o=P(n,o),i=uf(i,o,r.Ga)):o.contains(n)&&(o=P(o,n),i=uf(i,Q,r.Ga.P(o)));else{if(!r.children)throw Mb("WriteRecord should have .snap or .children");n.contains(o)?(o=P(n,o),i=vf(i,o,r.children)):o.contains(n)&&(o=P(o,n),o.e()?i=vf(i,Q,r.children):(r=w(r.children,K(o)))&&(r=r.P(N(o)),i=uf(i,Q,r)))}}}return i}function If(e,t){this.Lb=e,this.W=t}function Jf(e,t){this.rf={},this.Vc=new Kf(e),this.va=t;var n=1e4+2e4*Math.random();hc(q(this.lf,this),Math.floor(n))}function Lf(){this.tc={}}function Mf(e,t,i){n(i)||(i=1),eb(e.tc,t)||(e.tc[t]=0),e.tc[t]+=i}function Kf(e){this.Ef=e,this.rd=null}function Pf(e){return e=e.toString(),Nf[e]||(Nf[e]=new Lf),Nf[e]}function Qf(e,t){var n=e.toString();return Of[n]||(Of[n]=t()),Of[n]}function Rf(e,t,n){this.f=Tb("p:rest:"),this.L=e,this.Gb=t,this.$c=n,this.$={}}function Sf(e,t){return n(t)?"tag$"+t:(D(qf(e.m),"should have a tag if it's not a default query."),e.path.toString())}function Tf(e,t,n,i){n=n||{},n.format="export",e.$c.getToken(!1).then(function(a){(a=a&&a.accessToken)&&(n.auth=a);var r=(e.L.Sc?"https://":"http://")+e.L.host+t+"?"+gb(n);e.f("Sending REST request for "+r);var o=new XMLHttpRequest;o.onreadystatechange=function(){if(i&&4===o.readyState){e.f("REST Response for "+r+" received. status:",o.status,"response:",o.responseText);var t=null;if(200<=o.status&&300>o.status){try{t=lb(o.responseText)}catch(e){J("Failed to parse JSON response for "+r+": "+o.responseText)}i(null,t)}else 401!==o.status&&404!==o.status&&J("Got unsuccessful REST response for "+r+" Status: "+o.status),i(o.status);i=null}},o.open("GET",r,!0),o.send()})}function Uf(e){this.te=e,this.Bd=[],this.Qb=0,this.Yd=-1,this.Fb=null}function Vf(e,t,n){e.Yd=t,e.Fb=n,e.Yd<e.Qb&&(e.Fb(),e.Fb=null)}function Wf(e,t,n){for(e.Bd[t]=n;e.Bd[e.Qb];){var i=e.Bd[e.Qb];delete e.Bd[e.Qb];for(var a=0;a<i.length;++a)if(i[a]){var r=e;fc(function(){r.te(i[a])})}if(e.Qb===e.Yd){e.Fb&&(clearTimeout(e.Fb),e.Fb(),e.Fb=null);break}e.Qb++}}function Yf(e,t,n,i){this.Zd=e,this.f=Tb(this.Zd),this.frames=this.zc=null,this.pb=this.qb=this.Fe=0,this.Va=Pf(t),e={v:"5"},"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f"),n&&(e.s=n),i&&(e.ls=i),this.Ke=Bb(t,Cb,e)}function ag(e,t){if(e.frames.push(t),e.frames.length==e.Fe){var n=e.frames.join("");e.frames=null,n=lb(n),e.Xf(n)}}function $f(e){clearInterval(e.zc),e.zc=setInterval(function(){e.Ia&&bg(e,"0"),$f(e)},Math.floor(45e3))}function bg(e,t){try{e.Ia.send(t)}catch(t){e.f("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(q(e.bb,e),0)}}function cg(e,t,n,i){this.Zd=e,this.f=Tb(e),this.jc=t,this.pb=this.qb=0,this.Va=Pf(t),this.tf=n,this.wc=!1,this.Cb=i,this.Yc=function(e){return Bb(t,Db,e)}}function gg(e,t){var n=x(t).length;e.pb+=n,Mf(e.Va,"bytes_received",n)}function fg(e,t,n,i){if(this.Yc=i,this.ib=n,this.ve=new Gc,this.Qc=[],this.$d=Math.floor(1e8*Math.random()),this.Kd=!0,this.Qd=Lb(),window["pLPCommand"+this.Qd]=e,window["pRTLPCB"+this.Qd]=t,e=document.createElement("iframe"),e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||I("No IE domain setting required")}catch(t){e.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}e.contentDocument?e.gb=e.contentDocument:e.contentWindow?e.gb=e.contentWindow.document:e.document&&(e.gb=e.document),this.Ea=e,e="",this.Ea.src&&"javascript:"===this.Ea.src.substr(0,11)&&(e='<script>document.domain="'+document.domain+'";<\/script>'),e="<html><body>"+e+"</body></html>";try{this.Ea.gb.open(),this.Ea.gb.write(e),this.Ea.gb.close()}catch(e){I("frame writing exception"),e.stack&&I(e.stack),I(e)}}function ig(e){if(e.Ud&&e.Kd&&e.ve.count()<(0<e.Qc.length?2:1)){e.$d++;var t={};t.id=e.Vf,t.pw=e.Wf,t.ser=e.$d;for(var t=e.Yc(t),n="",i=0;0<e.Qc.length&&1870>=e.Qc[0].Pe.length+30+n.length;){var a=e.Qc.shift(),n=n+"&seg"+i+"="+a.jg+"&ts"+i+"="+a.pg+"&d"+i+"="+a.Pe;i++}return jg(e,t+n,e.$d),!0}return!1}function jg(e,t,n){function i(){e.ve.remove(n),ig(e)}e.ve.add(n,1);var a=setTimeout(i,Math.floor(25e3));hg(e,t,function(){clearTimeout(a),i()})}function hg(e,t,n){setTimeout(function(){try{if(e.Kd){var i=e.Ea.gb.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){I("Long-poll script failed to load: "+t),e.Kd=!1,e.close()},e.Ea.gb.body.appendChild(i)}}catch(e){}},Math.floor(1))}function kg(e){lg(this,e)}function lg(e,t){var n=Yf&&Yf.isAvailable(),i=n&&!(xb.Ze||!0===xb.get("previous_websocket_failure"));if(t.qg&&(n||J("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)e.Wc=[Yf];else{var a=e.Wc=[];cc(mg,function(e,t){t&&t.isAvailable()&&a.push(t)})}}function ng(e){if(0<e.Wc.length)return e.Wc[0];throw Error("No transports available")}function og(e,t,n,i,a,r,o){this.id=e,this.f=Tb("c:"+this.id+":"),this.te=n,this.Lc=i,this.ia=a,this.se=r,this.L=t,this.Ad=[],this.Le=0,this.sf=new kg(t),this.Ua=0,this.Cb=o,this.f("Connection created"),pg(this)}function pg(e){var t=ng(e.sf);e.I=new t("c:"+e.id+":"+e.Le++,e.L,void 0,e.Cb),e.xe=t.responsesRequiredToBeHealthy||0;var n=qg(e,e.I),i=rg(e,e.I);e.Xc=e.I,e.Rc=e.I,e.D=null,e.Bb=!1,setTimeout(function(){e.I&&e.I.open(n,i)},Math.floor(0)),0<(t=t.healthyTimeout||0)&&(e.md=hc(function(){e.md=null,e.Bb||(e.I&&102400<e.I.pb?(e.f("Connection exceeded healthy timeout but has received "+e.I.pb+" bytes.  Marking connection healthy."),e.Bb=!0,e.I.sd()):e.I&&10240<e.I.qb?e.f("Connection exceeded healthy timeout but has sent "+e.I.qb+" bytes.  Leaving connection alive."):(e.f("Closing unhealthy connection after timeout."),e.close()))},Math.floor(t)))}function rg(e,t){return function(n){t===e.I?(e.I=null,n||0!==e.Ua?1===e.Ua&&e.f("Realtime connection lost."):(e.f("Realtime connection failed."),"s-"===e.L.$a.substr(0,2)&&(xb.remove("host:"+e.L.host),e.L.$a=e.L.host)),e.close()):t===e.D?(e.f("Secondary connection lost."),n=e.D,e.D=null,e.Xc!==n&&e.Rc!==n||e.close()):e.f("closing an old connection")}}function qg(e,t){return function(n){if(2!=e.Ua)if(t===e.Rc){var i=$b("t",n);if(n=$b("d",n),"c"==i){if(i=$b("t",n),"d"in n)if(n=n.d,"h"===i){var i=n.ts,a=n.v,r=n.h;e.qf=n.s,Ab(e.L,r),0==e.Ua&&(e.I.start(),sg(e,e.I,i),"5"!==a&&J("Protocol version mismatch detected"),n=e.sf,(n=1<n.Wc.length?n.Wc[1]:null)&&tg(e,n))}else if("n"===i){for(e.f("recvd end transmission on primary"),e.Rc=e.D,n=0;n<e.Ad.length;++n)e.wd(e.Ad[n]);e.Ad=[],ug(e)}else"s"===i?(e.f("Connection shutdown command received. Shutting down..."),e.se&&(e.se(n),e.se=null),e.ia=null,e.close()):"r"===i?(e.f("Reset packet received.  New host: "+n),Ab(e.L,n),1===e.Ua?e.close():(vg(e),pg(e))):"e"===i?Ub("Server Error: "+n):"o"===i?(e.f("got pong on primary."),wg(e),xg(e)):Ub("Unknown control packet command: "+i)}else"d"==i&&e.wd(n)}else if(t===e.D)if(i=$b("t",n),n=$b("d",n),"c"==i)"t"in n&&(n=n.t,"a"===n?yg(e):"r"===n?(e.f("Got a reset on secondary, closing it"),e.D.close(),e.Xc!==e.D&&e.Rc!==e.D||e.close()):"o"===n&&(e.f("got pong on secondary."),e.pf--,yg(e)));else{if("d"!=i)throw Error("Unknown protocol layer: "+i);e.Ad.push(n)}else e.f("message on old connection")}}function ug(e){e.Xc===e.D&&e.Rc===e.D&&(e.f("cleaning up and promoting a connection: "+e.D.Zd),e.I=e.D,e.D=null)}function yg(e){0>=e.pf?(e.f("Secondary connection is healthy."),e.Bb=!0,e.D.sd(),e.D.start(),e.f("sending client ack on secondary"),e.D.send({t:"c",d:{t:"a",d:{}}}),e.f("Ending transmission on primary"),e.I.send({t:"c",d:{t:"n",d:{}}}),e.Xc=e.D,ug(e)):(e.f("sending ping on secondary."),e.D.send({t:"c",d:{t:"p",d:{}}}))}function wg(e){e.Bb||0>=--e.xe&&(e.f("Primary connection is healthy."),e.Bb=!0,e.I.sd())}function tg(e,t){e.D=new t("c:"+e.id+":"+e.Le++,e.L,e.qf),e.pf=t.responsesRequiredToBeHealthy||0,e.D.open(qg(e,e.D),rg(e,e.D)),hc(function(){e.D&&(e.f("Timed out trying to upgrade."),e.D.close())},Math.floor(6e4))}function sg(e,t,n){e.f("Realtime connection established."),e.I=t,e.Ua=1,e.Lc&&(e.Lc(n,e.qf),e.Lc=null),0===e.xe?(e.f("Primary connection is healthy."),e.Bb=!0):hc(function(){xg(e)},Math.floor(5e3))}function xg(e){e.Bb||1!==e.Ua||(e.f("sending ping on primary."),zg(e,{t:"c",d:{t:"p",d:{}}}))}function zg(e,t){if(1!==e.Ua)throw"Connection is not connected";e.Xc.send(t)}function vg(e){e.f("Shutting down all connections"),e.I&&(e.I.close(),e.I=null),e.D&&(e.D.close(),e.D=null),e.md&&(clearTimeout(e.md),e.md=null)}function Ag(e,t,n,i,a,r){if(this.id=Bg++,this.f=Tb("p:"+this.id+":"),this.qd={},this.$={},this.pa=[],this.Oc=0,this.Kc=[],this.ma=!1,this.Sa=1e3,this.td=3e5,this.Gb=t,this.Jc=n,this.ue=i,this.L=e,this.ob=this.Fa=this.Cb=this.ze=null,this.$c=a,this.de=!1,this.ke=0,r)throw Error("Auth override specified in options, but not supported on non Node.js platforms");this.Vd=r,this.ub=null,this.Mb=!1,this.Gd={},this.ig=0,this.Re=!0,this.Ac=this.me=null,Cg(this,0),Mc.Vb().gc("visible",this.Zf,this),-1===e.host.indexOf("fblocal")&&Lc.Vb().gc("online",this.Yf,this)}function Eg(e,t){var n=t.eg,i=n.path.toString(),a=n.ja();e.f("Listen on "+i+" for "+a);var r={p:i};t.tag&&(r.q=pf(n.m),r.t=t.tag),r.h=t.ld(),e.ua("q",r,function(r){var o=r.d,s=r.s;if(o&&"object"==typeof o&&eb(o,"w")){var l=w(o,"w");ea(l)&&0<=xa(l,"no_index")&&J('Using an unspecified index. Consider adding ".indexOn": "'+n.m.g.toString()+'" at '+n.path.toString()+" to your security rules for better performance")}(e.$[i]&&e.$[i][a])===t&&(e.f("listen response",r),"ok"!==s&&Fg(e,i,a),t.G&&t.G(s,o))})}function Gg(e){if(e.ma&&e.ob){var t=e.ob,n=jc(t)?"auth":"gauth",i={cred:t};null===e.Vd?i.noauth=!0:"object"==typeof e.Vd&&(i.authvar=e.Vd),e.ua(n,i,function(n){var i=n.s;n=n.d||"error",e.ob===t&&("ok"===i?e.ke=0:Hg(e,i,n))})}}function Ig(e,t,n,i,a){n={p:n,d:i},e.f("onDisconnect "+t,n),e.ua(t,n,function(e){a&&setTimeout(function(){a(e.s,e.d)},Math.floor(0))})}function Jg(e,t,i,a,r,o){a={p:i,d:a},n(o)&&(a.h=o),e.pa.push({action:t,mf:a,G:r}),e.Oc++,t=e.pa.length-1,e.ma?Kg(e,t):e.f("Buffering put: "+i)}function Kg(e,t){var n=e.pa[t].action,i=e.pa[t].mf,a=e.pa[t].G;e.pa[t].fg=e.ma,e.ua(n,i,function(i){e.f(n+" response",i),delete e.pa[t],e.Oc--,0===e.Oc&&(e.pa=[]),a&&a(i.s,i.d)})}function Cg(e,t){D(!e.Fa,"Scheduling a connect when we're already connected/ing?"),e.ub&&clearTimeout(e.ub),e.ub=setTimeout(function(){e.ub=null,Ng(e)},Math.floor(t))}function Ng(e){if(Og(e)){e.f("Making a connection attempt"),e.me=(new Date).getTime(),e.Ac=null;var t=q(e.wd,e),n=q(e.Lc,e),i=q(e.df,e),a=e.id+":"+Dg++,r=e.Cb,o=!1,s=null,l=function(){s?s.close():(o=!0,i())};e.Fa={close:l,ua:function(e){D(s,"sendRequest call when we're not connected not allowed."),s.ua(e)}};var c=e.de;e.de=!1,e.$c.getToken(c).then(function(l){o?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),e.ob=l&&l.accessToken,s=new og(a,e.L,t,n,i,function(t){J(t+" ("+e.L.toString()+")"),e.ab("server_kill")},r))}).then(null,function(t){e.f("Failed to get token: "+t),o||l()})}}function Lg(e,t,n){n=n?Aa(n,function(e){return ac(e)}).join("$"):"default",(e=Fg(e,t,n))&&e.G&&e.G("permission_denied")}function Fg(e,t,i){t=new E(t).toString();var a;return n(e.$[t])?(a=e.$[t][i],delete e.$[t][i],0===La(e.$[t])&&delete e.$[t]):a=void 0,a}function Hg(e,t,n){I("Auth token revoked: "+t+"/"+n),e.ob=null,e.de=!0,e.Fa.close(),"invalid_token"!==t&&"permission_denied"!==t||3<=++e.ke&&(e.Sa=3e4,e=e.$c,t='Provided authentication credentials for the app named "'+e.oc.name+'" are invalid. This usually indicates your app was not initialized correctly. ',t="credential"in e.oc.options?t+'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in e.oc.options?t+'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',J(t))}function Mg(e){Gg(e),v(e.$,function(t){v(t,function(t){Eg(e,t)})});for(var t=0;t<e.pa.length;t++)e.pa[t]&&Kg(e,t);for(;e.Kc.length;)t=e.Kc.shift(),Ig(e,t.action,t.we,t.data,t.G)}function Og(e){var t;return t=Lc.Vb().hc,Sa(e.qd)&&t}function Pg(e){e instanceof Qg||Vb("Don't call new Database() directly - please use firebase.database()."),this.ta=e,this.ba=new U(e,Q),this.INTERNAL=new Rg(this)}function Tg(e,t){null===e.ta&&Vb("Cannot call "+t+" on a deleted database.")}function Rg(e){this.Ya=e}function V(e,t,n){this.A=e,this.V=t,this.g=n}function Vg(e,t,n){this.Pb=e,this.rb=t,this.tb=n||null}function Wg(e,t,n){this.ga=e,this.rb=t,this.tb=n}function Xg(){this.za={}}function Zg(e){return za(Na(e.za),function(e){return!T(e.V.m)})}function $g(e,t){if(T(t.m))return Yg(e);var n=t.ja();return w(e.za,n)}function Yg(e){return Ra(e.za,function(e){return T(e.V.m)})||null}function ah(e){this.wa=R,this.jb=new Df,this.De={},this.ic={},this.Cc=e}function bh(e,t,i,a,r){var o=e.jb,s=r;return D(a>o.Bc,"Stacking an older write on top of newer ones"),n(s)||(s=!0),o.la.push({path:t,Ga:i,Zc:a,visible:s}),s&&(o.S=uf(o.S,t,i)),o.Bc=a,r?ch(e,new ce(fe,t,i)):[]}function dh(e,t,n,i){var a=e.jb;return D(i>a.Bc,"Stacking an older merge on top of newer ones"),a.la.push({path:t,children:n,Zc:i,visible:!0}),a.S=vf(a.S,t,n),a.Bc=i,n=xd(n),ch(e,new ae(fe,t,n))}function eh(e,t,n){n=n||!1;var i=Ef(e.jb,t);if(e.jb.Ed(t)){var a=R;return null!=i.Ga?a=a.set(Q,!0):fb(i.children,function(e,t){a=a.set(new E(e),t)}),ch(e,new de(i.path,a,n))}return[]}function fh(e,t,n){return n=xd(n),ch(e,new ae(ie,t,n))}function gh(e,t,n,i){if(null!=(i=hh(e,i))){var a=ih(i);return i=a.path,a=a.Hb,t=P(i,t),n=new ce(new he(!1,!0,a,!0),t,n),jh(e,i,n)}return[]}function kh(e,t,n,i){if(i=hh(e,i)){var a=ih(i);return i=a.path,a=a.Hb,t=P(i,t),n=xd(n),n=new ae(new he(!1,!0,a,!0),t,n),jh(e,i,n)}return[]}function oh(e){return Bd(e,function(e,t,n){if(t&&null!=Yg(t))return[Yg(t)];var i=[];return t&&(i=Zg(t)),v(n,function(e){i=i.concat(e)}),i})}function sh(e,t){for(var n=0;n<t.length;++n){var i=t[n];if(!T(i.m)){var i=lh(i),a=e.ic[i];delete e.ic[i],delete e.De["_"+a]}}}function qh(e){return T(e.m)&&!qf(e.m)?e.wb():e}function nh(e,t,n){var i=t.path,a=rh(e,t);if(n=ph(e,n),t=e.Cc.Ae(qh(t),a,n.ld,n.G),i=e.wa.subtree(i),a)D(null==Yg(i.value),"If we're adding a query, it shouldn't be shadowed");else for(a=Bd(i,function(e,t,n){if(!e.e()&&t&&null!=Yg(t))return[Te(Yg(t))];var i=[];return t&&(i=i.concat(Aa(Zg(t),function(e){return e.V}))),v(n,function(e){i=i.concat(e)}),i}),i=0;i<a.length;++i)n=a[i],e.Cc.Od(qh(n),rh(e,n));return t}function ph(e,t){var n=t.V,i=rh(e,n);return{ld:function(){return(t.w()||L).hash()},G:function(t){if("ok"===t){if(i){var a=n.path;if(t=hh(e,i)){var r=ih(t);t=r.path,r=r.Hb,a=P(t,a),a=new Zd(new he(!1,!0,r,!0),a),t=jh(e,t,a)}else t=[]}else t=ch(e,new Zd(ie,n.path));return t}return a="Unknown Error","too_big"===t?a="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?a="Client doesn't have permission to access the desired data.":"unavailable"==t&&(a="The service is unavailable"),a=Error(t+" at "+n.path.toString()+": "+a),a.code=t.toUpperCase(),e.kb(n,null,a)}}}function lh(e){return e.path.toString()+"$"+e.ja()}function ih(e){var t=e.indexOf("$");return D(-1!==t&&t<e.length-1,"Bad queryKey."),{Hb:e.substr(t+1),path:new E(e.substr(0,t))}}function hh(e,t){var n=e.De,i="_"+t;return i in n?n[i]:void 0}function rh(e,t){var n=lh(t);return w(e.ic,n)}function jh(e,t,n){var i=e.wa.get(t);return D(i,"Missing sync point for query tag that we're tracking"),i.eb(n,new If(t,e.jb),null)}function ch(e,t){return th(e,t,e.wa,null,new If(Q,e.jb))}function th(e,t,n,i,a){if(t.path.e())return uh(e,t,n,i,a);var r=n.get(Q);null==i&&null!=r&&(i=r.hb(Q));var o=[],s=K(t.path),l=t.Mc(s);if((n=n.children.get(s))&&l)var c=i?i.Q(s):null,s=a.n(s),o=o.concat(th(e,l,n,c,s));return r&&(o=o.concat(r.eb(t,a,i))),o}function uh(e,t,n,i,a){var r=n.get(Q);null==i&&null!=r&&(i=r.hb(Q));var o=[];return n.children.ha(function(n,r){var s=i?i.Q(n):null,l=a.n(n),c=t.Mc(n);c&&(o=o.concat(uh(e,c,r,s,l)))}),r&&(o=o.concat(r.eb(t,a,i))),o}function Qg(e,t,n){this.app=n;var i=new Bf(n);if(this.L=e,this.Va=Pf(e),this.Vc=null,this.ca=new Ye,this.vd=1,this.Ra=null,t||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.va=new Rf(this.L,q(this.Gb,this),i),setTimeout(q(this.Jc,this,!0),0);else{if(t=n.options.databaseAuthVariableOverride,"undefined"!==da(t)&&null!==t){if("object"!==da(t))throw Error("Only objects are supported for option databaseAuthVariableOverride");try{x(t)}catch(e){throw Error("Invalid authOverride provided: "+e)}}this.va=this.Ra=new Ag(this.L,q(this.Gb,this),q(this.Jc,this),q(this.ue,this),i,t)}var a=this;Cf(i,function(e){a.va.kf(e)}),this.og=Qf(e,q(function(){return new Jf(this.Va,this.va)},this)),this.mc=new Tc,this.ie=new Af,this.pd=new ah({Ae:function(e,t,n,i){return t=[],n=a.ie.j(e.path),n.e()||(t=ch(a.pd,new ce(ie,e.path,n)),setTimeout(function(){i("ok")},0)),t},Od:ba}),vh(this,"connected",!1),this.ia=new Gb,this.Ya=new Pg(this),this.fd=0,this.je=null,this.K=new ah({Ae:function(e,t,n,i){return a.va.$e(e,n,t,function(t,n){var r=i(t,n);cf(a.ca,e.path,r)}),[]},Od:function(e,t){a.va.uf(e,t)}})}function wh(e){return e=e.ie.j(new E(".info/serverTimeOffset")).H()||0,(new Date).getTime()+e}function xh(e){return e=e={timestamp:wh(e)},e.timestamp=e.timestamp||(new Date).getTime(),e}function vh(e,t,n){t=new E("/.info/"+t),n=G(n);var i=e.ie;i.Jd=i.Jd.F(t,n),n=ch(e.pd,new ce(ie,t,n)),cf(e.ca,t,n)}function zh(e){e.f("onDisconnectEvents");var t=xh(e),n=[];Hb(Fb(e.ia,t),Q,function(t,i){n=n.concat(ch(e.K,new ce(ie,t,i)));var a=Bh(e,t);yh(e,a)}),e.ia=new Gb,cf(e.ca,Q,n)}function Ch(e,t,n,i){var a=G(n);e.va.re(t.toString(),a.H(!0),function(n,r){"ok"===n&&Ib(e.ia,t,a),Ah(i,n,r)})}function Dh(e,t,n,i,a){var r=G(n,i);e.va.re(t.toString(),r.H(!0),function(n,i){"ok"===n&&Ib(e.ia,t,r),Ah(a,n,i)})}function Eh(e,t,n,i){var a,r=!0;for(a in n)r=!1;r?(I("onDisconnect().update() called with empty data.  Don't do anything."),Ah(i,"ok")):e.va.cf(t.toString(),n,function(a,r){if("ok"===a)for(var o in n){var s=G(n[o]);Ib(e.ia,t.n(o),s)}Ah(i,a,r)})}function Fh(e,t,n){n=".info"===K(t.path)?e.pd.Nb(t,n):e.K.Nb(t,n),af(e.ca,t.path,n)}function Ah(e,t,n){e&&fc(function(){if("ok"==t)e(null);else{var i=(t||"error").toUpperCase(),a=i;n&&(a+=": "+n),a=Error(a),a.code=i,e(a)}})}function Gh(e,t,i,a,r){function o(){}e.f("transaction on "+t);var s=new U(e,t);if(s.gc("value",o),i={path:t,update:i,G:a,status:null,ef:Lb(),He:r,of:0,Rd:function(){s.Ic("value",o)},Td:null,Ba:null,cd:null,dd:null,ed:null},a=e.K.Aa(t,void 0)||L,i.cd=a,a=i.update(a.H()),n(a)){Pd("transaction failed: Data returned ",a,i.path),i.status=1,r=Uc(e.mc,t);var l=r.Ca()||[];l.push(i),Vc(r,l),"object"==typeof a&&null!==a&&eb(a,".priority")?(l=w(a,".priority"),D(Nd(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(e.K.Aa(t)||L).C().H(),r=xh(e),a=G(a,l),r=Jb(a,r),i.dd=a,i.ed=r,i.Ba=e.vd++,i=bh(e.K,t,r,i.Ba,i.He),cf(e.ca,t,i),Hh(e)}else i.Rd(),i.dd=null,i.ed=null,i.G&&(e=new V(i.cd,new U(e,i.path),H),i.G(null,!1,e))}function Hh(e,t){var n=t||e.mc;if(t||Ih(e,n),null!==n.Ca()){var i=Jh(e,n);D(0<i.length,"Sending zero length transaction queue"),Ca(i,function(e){return 1===e.status})&&Kh(e,n.path(),i)}else n.kd()&&n.O(function(t){Hh(e,t)})}function Kh(e,t,n){for(var i=Aa(n,function(e){return e.Ba}),a=e.K.Aa(t,i)||L,i=a,a=a.hash(),r=0;r<n.length;r++){var o=n[r];D(1===o.status,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=2,o.of++;var s=P(t,o.path),i=i.F(s,o.dd)}i=i.H(!0),e.va.put(t.toString(),i,function(i){e.f("transaction put response",{path:t.toString(),status:i});var a=[];if("ok"===i){for(i=[],r=0;r<n.length;r++){if(n[r].status=3,a=a.concat(eh(e.K,n[r].Ba)),n[r].G){var o=n[r].ed,s=new U(e,n[r].path);i.push(q(n[r].G,null,null,!0,new V(o,s,H)))}n[r].Rd()}for(Ih(e,Uc(e.mc,t)),Hh(e),cf(e.ca,t,a),r=0;r<i.length;r++)fc(i[r])}else{if("datastale"===i)for(r=0;r<n.length;r++)n[r].status=4===n[r].status?5:1;else for(J("transaction at "+t.toString()+" failed: "+i),r=0;r<n.length;r++)n[r].status=5,n[r].Td=i;yh(e,t)}},a)}function yh(e,t){var n=Lh(e,t),i=n.path(),n=Jh(e,n);return Mh(e,n,i),i}function Mh(e,t,i){if(0!==t.length){for(var a=[],r=[],o=za(t,function(e){return 1===e.status}),o=Aa(o,function(e){return e.Ba}),s=0;s<t.length;s++){var l,c=t[s],u=P(i,c.path),h=!1;if(D(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),5===c.status)h=!0,l=c.Td,r=r.concat(eh(e.K,c.Ba,!0));else if(1===c.status)if(25<=c.of)h=!0,l="maxretry",r=r.concat(eh(e.K,c.Ba,!0));else{var d=e.K.Aa(c.path,o)||L;c.cd=d;var f=t[s].update(d.H());n(f)?(Pd("transaction failed: Data returned ",f,c.path),u=G(f),"object"==typeof f&&null!=f&&eb(f,".priority")||(u=u.fa(d.C())),d=c.Ba,f=xh(e),f=Jb(u,f),c.dd=u,c.ed=f,c.Ba=e.vd++,Fa(o,d),r=r.concat(bh(e.K,c.path,f,c.Ba,c.He)),r=r.concat(eh(e.K,d,!0))):(h=!0,l="nodata",r=r.concat(eh(e.K,c.Ba,!0)))}cf(e.ca,i,r),r=[],h&&(t[s].status=3,setTimeout(t[s].Rd,Math.floor(0)),t[s].G&&("nodata"===l?(c=new U(e,t[s].path),a.push(q(t[s].G,null,null,!1,new V(t[s].cd,c,H)))):a.push(q(t[s].G,null,Error(l),!1,null))))}for(Ih(e,e.mc),s=0;s<a.length;s++)fc(a[s]);Hh(e)}}function Lh(e,t){for(var n,i=e.mc;null!==(n=K(t))&&null===i.Ca();)i=Uc(i,n),t=N(t);return i}function Jh(e,t){var n=[];return Nh(e,t,n),n.sort(function(e,t){return e.ef-t.ef}),n}function Nh(e,t,n){var i=t.Ca();if(null!==i)for(var a=0;a<i.length;a++)n.push(i[a]);t.O(function(t){Nh(e,t,n)})}function Ih(e,t){var n=t.Ca();if(n){for(var i=0,a=0;a<n.length;a++)3!==n[a].status&&(n[i]=n[a],i++);n.length=i,Vc(t,0<n.length?n:null)}t.O(function(t){Ih(e,t)})}function Bh(e,t){var n=Lh(e,t).path(),i=Uc(e.mc,t);return Yc(i,function(t){Oh(e,t)}),Oh(e,i),Xc(i,function(t){Oh(e,t)}),n}function Oh(e,t){var n=t.Ca();if(null!==n){for(var i=[],a=[],r=-1,o=0;o<n.length;o++)4!==n[o].status&&(2===n[o].status?(D(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=4,n[o].Td="set"):(D(1===n[o].status,"Unexpected transaction status in abort"),n[o].Rd(),a=a.concat(eh(e.K,n[o].Ba,!0)),n[o].G&&i.push(q(n[o].G,null,Error("set"),!1,null))));for(-1===r?Vc(t,null):n.length=r+1,cf(e.ca,t.path(),a),o=0;o<i.length;o++)fc(i[o])}}function Ug(){this.lb={},this.wf=!1}function Ph(e,t){this.committed=e,this.snapshot=t}function X(e,t,n,i){this.u=e,this.path=t,this.m=n,this.Nc=i}function Qh(e){var t=null,n=null;if(e.ka&&(t=ff(e)),e.na&&(n=hf(e)),e.g===tc){if(e.ka){if("[MIN_NAME]"!=ef(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof t)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(e.na){if("[MAX_NAME]"!=gf(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(e.g===H){if(null!=t&&!Nd(t)||null!=n&&!Nd(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(D(e.g instanceof pc||e.g===wc,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function Rh(e){if(e.ka&&e.na&&e.xa&&(!e.xa||""===e.mb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function Sh(e,t){if(!0===e.Nc)throw Error(t+": You can't combine multiple orderBy calls.")}function Th(e,t,n){var i={cancel:null,Ma:null};if(t&&n)i.cancel=t,B(e,3,i.cancel,!0),i.Ma=n,ob(e,4,i.Ma);else if(t)if("object"==typeof t&&null!==t)i.Ma=t;else{if("function"!=typeof t)throw Error(A(e,3,!0)+" must either be a cancel callback or a context object.");i.cancel=t}return i}function Y(e,t){this.ta=e,this.qa=t}function U(e,t){if(!(e instanceof Qg))throw Error("new Firebase() no longer supported - use app.database().");X.call(this,e,t,mf,!1),this.then=void 0,this.catch=void 0}var g,aa=this,qa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ra=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;la(ta,sa),ta.prototype.reset=function(){this.M[0]=1732584193,this.M[1]=4023233417,this.M[2]=2562383102,this.M[3]=271733878,this.M[4]=3285377520,this.Pd=this.$b=0},ta.prototype.update=function(e,t){if(null!=e){n(t)||(t=e.length);for(var i=t-this.Wa,a=0,r=this.Wd,o=this.$b;a<t;){if(0==o)for(;a<=i;)ua(this,e,a),a+=this.Wa;if(p(e)){for(;a<t;)if(r[o]=e.charCodeAt(a),++o,++a,o==this.Wa){ua(this,r),o=0;break}}else for(;a<t;)if(r[o]=e[a],++o,++a,o==this.Wa){ua(this,r),o=0;break}}this.$b=o,this.Pd+=t}};var r;e:{var va=aa.navigator;if(va){var wa=va.userAgent;if(wa){r=wa;break e}}r=""}var t=Array.prototype,xa=t.indexOf?function(e,n,i){return t.indexOf.call(e,n,i)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,p(e))return p(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ya=t.forEach?function(e,n,i){t.forEach.call(e,n,i)}:function(e,t,n){for(var i=e.length,a=p(e)?e.split(""):e,r=0;r<i;r++)r in a&&t.call(n,a[r],r,e)},za=t.filter?function(e,n,i){return t.filter.call(e,n,i)}:function(e,t,n){for(var i=e.length,a=[],r=0,o=p(e)?e.split(""):e,s=0;s<i;s++)if(s in o){var l=o[s];t.call(n,l,s,e)&&(a[r++]=l)}return a},Aa=t.map?function(e,n,i){return t.map.call(e,n,i)}:function(e,t,n){for(var i=e.length,a=Array(i),r=p(e)?e.split(""):e,o=0;o<i;o++)o in r&&(a[o]=t.call(n,r[o],o,e));return a},Ba=t.reduce?function(e,n,i,a){for(var r=[],o=1,s=arguments.length;o<s;o++)r.push(arguments[o]);return a&&(r[0]=q(n,a)),t.reduce.apply(e,r)}:function(e,t,n,i){var a=n;return ya(e,function(n,r){a=t.call(i,a,n,r,e)}),a},Ca=t.every?function(e,n,i){return t.every.call(e,n,i)}:function(e,t,n){for(var i=e.length,a=p(e)?e.split(""):e,r=0;r<i;r++)if(r in a&&!t.call(n,a[r],r,e))return!1;return!0},Ua=-1!=r.indexOf("Opera")||-1!=r.indexOf("OPR"),Va=-1!=r.indexOf("Trident")||-1!=r.indexOf("MSIE"),Wa=-1!=r.indexOf("Gecko")&&-1==r.toLowerCase().indexOf("webkit")&&!(-1!=r.indexOf("Trident")||-1!=r.indexOf("MSIE")),Xa=-1!=r.toLowerCase().indexOf("webkit");!function(){var e,t="";Ua&&aa.opera?(t=aa.opera.version,ha(t)&&t()):(Wa?e=/rv\:([^\);]+)(\)|;)/:Va?e=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Xa&&(e=/WebKit\/(\S+)/),e&&(t=(t=e.exec(r))?t[1]:""),Va&&(e=(e=aa.document)?e.documentMode:void 0)>parseFloat(t)&&String(e))}();var Ya=null,Za=null,$a=null,hb=firebase.Promise;g=ub.prototype,g.set=function(e,t){null==t?this.uc.removeItem(this.Cd+e):this.uc.setItem(this.Cd+e,x(t))},g.get=function(e){return e=this.uc.getItem(this.Cd+e),null==e?null:lb(e)},g.remove=function(e){this.uc.removeItem(this.Cd+e)},g.Ze=!1,g.toString=function(){return this.uc.toString()},vb.prototype.set=function(e,t){null==t?delete this.pc[e]:this.pc[e]=t},vb.prototype.get=function(e){return eb(this.pc,e)?this.pc[e]:null},vb.prototype.remove=function(e){delete this.pc[e]},vb.prototype.Ze=!0;var xb=wb("localStorage"),yb=wb("sessionStorage");zb.prototype.toString=function(){var e=(this.Sc?"https://":"http://")+this.host;return this.gf&&(e+="<"+this.gf+">"),e};var Lb=function(){var e=1;return function(){return e++}}(),D=cb,Mb=db,Qb=null,Rb=!0,ec=/^-?\d{1,10}$/,mc={};lc.prototype.nd=function(e,t){return 0!==this.compare(new C("[MIN_NAME]",e),new C("[MIN_NAME]",t))},lc.prototype.Hc=function(){return oc},la(pc,lc),g=pc.prototype,g.xc=function(e){return!e.P(this.bc).e()},g.compare=function(e,t){var n=e.R.P(this.bc),i=t.R.P(this.bc),n=n.sc(i);return 0===n?sb(e.name,t.name):n},g.Ec=function(e,t){var n=G(e),n=L.F(this.bc,n);return new C(t,n)},g.Fc=function(){return new C("[MAX_NAME]",L.F(this.bc,qc))},g.toString=function(){return this.bc.slice().join("/")},la(rc,lc),g=rc.prototype,g.compare=function(e,t){var n=e.R.C(),i=t.R.C(),n=n.sc(i);return 0===n?sb(e.name,t.name):n},g.xc=function(e){return!e.C().e()},g.nd=function(e,t){return!e.C().Z(t.C())},g.Hc=function(){return oc},g.Fc=function(){return new C("[MAX_NAME]",new Kb("[PRIORITY-POST]",qc))},g.Ec=function(e,t){return new C(t,new Kb("[PRIORITY-POST]",G(e)))},g.toString=function(){return".priority"};var H=new rc;la(sc,lc),g=sc.prototype,g.compare=function(e,t){return sb(e.name,t.name)},g.xc=function(){throw Mb("KeyIndex.isDefinedOn not expected to be called.")},g.nd=function(){return!1},g.Hc=function(){return oc},g.Fc=function(){return new C("[MAX_NAME]",L)},g.Ec=function(e){return D(p(e),"KeyIndex indexValue must always be a string."),new C(e,L)},g.toString=function(){return".key"};var tc=new sc;la(uc,lc),g=uc.prototype,g.compare=function(e,t){var n=e.R.sc(t.R);return 0===n?sb(e.name,t.name):n},g.xc=function(){return!0},g.nd=function(e,t){return!e.Z(t)},g.Hc=function(){return oc},g.Fc=function(){return vc},g.Ec=function(e,t){return new C(t,G(e))},g.toString=function(){return".value"};var wc=new uc;xc.prototype.get=function(e){var t=w(this.od,e);if(!t)throw Error("No index defined for "+e);return t===mc?null:t};var Bc=new xc({".priority":mc},{".priority":H}),Dc=["object","boolean","number","string"];g=Kb.prototype,g.J=function(){return!0},g.C=function(){return this.aa},g.fa=function(e){return new Kb(this.B,e)},g.Q=function(e){return".priority"===e?this.aa:L},g.P=function(e){return e.e()?this:".priority"===K(e)?this.aa:L},g.Da=function(){return!1},g.Ve=function(){return null},g.T=function(e,t){return".priority"===e?this.fa(t):t.e()&&".priority"!==e?this:L.T(e,t).fa(this.aa)},g.F=function(e,t){var n=K(e);return null===n?t:t.e()&&".priority"!==n?this:(D(".priority"!==n||1===Ec(e),".priority must be the last token in a path"),this.T(n,L.F(N(e),t)))},g.e=function(){return!1},g.Eb=function(){return 0},g.O=function(){return!1},g.H=function(e){return e&&!this.C().e()?{".value":this.Ca(),".priority":this.C().H()}:this.Ca()},g.hash=function(){if(null===this.Db){var e="";this.aa.e()||(e+="priority:"+Fc(this.aa.H())+":");var t=typeof this.B,e=e+(t+":"),e="number"===t?e+dc(this.B):e+this.B;this.Db=Ob(e)}return this.Db},g.Ca=function(){return this.B},g.sc=function(e){if(e===L)return 1;if(e instanceof O)return-1;D(e.J(),"Unknown node type");var t=typeof e.B,n=typeof this.B,i=xa(Dc,t),a=xa(Dc,n);return D(0<=i,"Unknown leaf type: "+t),D(0<=a,"Unknown leaf type: "+n),i===a?"object"===n?0:this.B<e.B?-1:this.B===e.B?0:1:a-i},g.nb=function(){return this},g.yc=function(){return!0},g.Z=function(e){return e===this||!!e.J()&&(this.B===e.B&&this.aa.Z(e.aa))},g.toString=function(){return x(this.H(!0))},g=Gc.prototype,g.add=function(e,t){this.set[e]=null===t||t},g.contains=function(e){return eb(this.set,e)},g.get=function(e){return this.contains(e)?this.set[e]:void 0},g.remove=function(e){delete this.set[e]},g.clear=function(){this.set={}},g.e=function(){return Sa(this.set)},g.count=function(){return La(this.set)},g.keys=function(){var e=[];return v(this.set,function(t,n){e.push(n)}),e},
Ic.prototype.Ge=function(e,t){var n;n=this.Dc[e]||[];var i=n.length;if(0<i){for(var a=Array(i),r=0;r<i;r++)a[r]=n[r];n=a}else n=[];for(i=0;i<n.length;i++)n[i].Ie.apply(n[i].Ma,Array.prototype.slice.call(arguments,1))},Ic.prototype.gc=function(e,t,n){Jc(this,e),this.Dc[e]=this.Dc[e]||[],this.Dc[e].push({Ie:t,Ma:n}),(e=this.Ue(e))&&t.apply(n,e)},Ic.prototype.Ic=function(e,t,n){Jc(this,e),e=this.Dc[e]||[];for(var i=0;i<e.length;i++)if(e[i].Ie===t&&(!n||n===e[i].Ma)){e.splice(i,1);break}};var Kc=function(){var e=0,t=[];return function(n){var i=n===e;e=n;for(var a=Array(8),r=7;0<=r;r--)a[r]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Math.floor(n/64);if(D(0===n,"Cannot push at time == 0"),n=a.join(""),i){for(r=11;0<=r&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;12>r;r++)t[r]=Math.floor(64*Math.random());for(r=0;12>r;r++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(t[r]);return D(20===n.length,"nextPushId: Length should be 20."),n}}();la(Lc,Ic),Lc.prototype.Ue=function(e){return D("online"===e,"Unknown event type: "+e),[this.hc]},ca(Lc),la(Mc,Ic),Mc.prototype.Ue=function(e){return D("visible"===e,"Unknown event type: "+e),[this.Mb]},ca(Mc),g=E.prototype,g.toString=function(){for(var e="",t=this.Y;t<this.o.length;t++)""!==this.o[t]&&(e+="/"+this.o[t]);return e||"/"},g.slice=function(e){return this.o.slice(this.Y+(e||0))},g.parent=function(){if(this.Y>=this.o.length)return null;for(var e=[],t=this.Y;t<this.o.length-1;t++)e.push(this.o[t]);return new E(e,0)},g.n=function(e){for(var t=[],n=this.Y;n<this.o.length;n++)t.push(this.o[n]);if(e instanceof E)for(n=e.Y;n<e.o.length;n++)t.push(e.o[n]);else for(e=e.split("/"),n=0;n<e.length;n++)0<e[n].length&&t.push(e[n]);return new E(t,0)},g.e=function(){return this.Y>=this.o.length},g.Z=function(e){if(Ec(this)!==Ec(e))return!1;for(var t=this.Y,n=e.Y;t<=this.o.length;t++,n++)if(this.o[t]!==e.o[n])return!1;return!0},g.contains=function(e){var t=this.Y,n=e.Y;if(Ec(this)>Ec(e))return!1;for(;t<this.o.length;){if(this.o[t]!==e.o[n])return!1;++t,++n}return!0};var Q=new E("");Pc.prototype.push=function(e){0<this.Qa.length&&(this.Ha+=1),this.Qa.push(e),this.Ha+=nb(e),Qc(this)},Pc.prototype.pop=function(){var e=this.Qa.pop();this.Ha-=nb(e),0<this.Qa.length&&--this.Ha},g=Tc.prototype,g.Ca=function(){return this.A.value},g.clear=function(){this.A.value=null,this.A.children={},this.A.bd=0,Wc(this)},g.kd=function(){return 0<this.A.bd},g.e=function(){return null===this.Ca()&&!this.kd()},g.O=function(e){var t=this;v(this.A.children,function(n,i){e(new Tc(i,t,n))})},g.path=function(){return new E(null===this.Pc?this.ud:this.Pc.path()+"/"+this.ud)},g.name=function(){return this.ud},g.parent=function(){return this.Pc},g=Zc.prototype,g.Oa=function(e,t){return new Zc(this.La,this.ba.Oa(e,t,this.La).X(null,null,!1,null,null))},g.remove=function(e){return new Zc(this.La,this.ba.remove(e,this.La).X(null,null,!1,null,null))},g.get=function(e){for(var t,n=this.ba;!n.e();){if(0===(t=this.La(e,n.key)))return n.value;0>t?n=n.left:0<t&&(n=n.right)}return null},g.e=function(){return this.ba.e()},g.count=function(){return this.ba.count()},g.Gc=function(){return this.ba.Gc()},g.ec=function(){return this.ba.ec()},g.ha=function(e){return this.ba.ha(e)},g.Wb=function(e){return new bd(this.ba,null,this.La,!1,e)},g.Xb=function(e,t){return new bd(this.ba,e,this.La,!1,t)},g.Zb=function(e,t){return new bd(this.ba,e,this.La,!0,t)},g.We=function(e){return new bd(this.ba,null,this.La,!0,e)},g=dd.prototype,g.X=function(e,t,n,i,a){return new dd(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=a?a:this.right)},g.count=function(){return this.left.count()+1+this.right.count()},g.e=function(){return!1},g.ha=function(e){return this.left.ha(e)||e(this.key,this.value)||this.right.ha(e)},g.Gc=function(){return ed(this).key},g.ec=function(){return this.right.e()?this.key:this.right.ec()},g.Oa=function(e,t,n){var i,a;return a=this,i=n(e,a.key),a=0>i?a.X(null,null,null,a.left.Oa(e,t,n),null):0===i?a.X(null,t,null,null,null):a.X(null,null,null,null,a.right.Oa(e,t,n)),gd(a)},g.remove=function(e,t){var n,i;if(n=this,0>t(e,n.key))n.left.e()||n.left.ea()||n.left.left.ea()||(n=id(n)),n=n.X(null,null,null,n.left.remove(e,t),null);else{if(n.left.ea()&&(n=jd(n)),n.right.e()||n.right.ea()||n.right.left.ea()||(n=kd(n),n.left.left.ea()&&(n=jd(n),n=kd(n))),0===t(e,n.key)){if(n.right.e())return $c;i=ed(n.right),n=n.X(i.key,i.value,null,null,hd(n.right))}n=n.X(null,null,null,null,n.right.remove(e,t))}return gd(n)},g.ea=function(){return this.color},g=md.prototype,g.X=function(){return this},g.Oa=function(e,t){return new dd(e,t,null)},g.remove=function(){return this},g.count=function(){return 0},g.e=function(){return!0},g.ha=function(){return!1},g.Gc=function(){return null},g.ec=function(){return null},g.ea=function(){return!1};var $c=new md;g=O.prototype,g.J=function(){return!1},g.C=function(){return this.aa||L},g.fa=function(e){return this.k.e()?this:new O(this.k,e,this.yb)},g.Q=function(e){return".priority"===e?this.C():(e=this.k.get(e),null===e?L:e)},g.P=function(e){var t=K(e);return null===t?this:this.Q(t).P(N(e))},g.Da=function(e){return null!==this.k.get(e)},g.T=function(e,t){if(D(t,"We should always be passing snapshot nodes"),".priority"===e)return this.fa(t);var n,i,a=new C(e,t);return t.e()?(n=this.k.remove(e),a=Ac(this.yb,a,this.k)):(n=this.k.Oa(e,t),a=yc(this.yb,a,this.k)),i=n.e()?L:this.aa,new O(n,i,a)},g.F=function(e,t){var n=K(e);if(null===n)return t;D(".priority"!==K(e)||1===Ec(e),".priority must be the last token in a path");var i=this.Q(n).F(N(e),t);return this.T(n,i)},g.e=function(){return this.k.e()},g.Eb=function(){return this.k.count()};var nd=/^(0|[1-9]\d*)$/;g=O.prototype,g.H=function(e){if(this.e())return null;var t={},n=0,i=0,a=!0;if(this.O(H,function(r,o){t[r]=o.H(e),n++,a&&nd.test(r)?i=Math.max(i,Number(r)):a=!1}),!e&&a&&i<2*n){var r,o=[];for(r in t)o[r]=t[r];return o}return e&&!this.C().e()&&(t[".priority"]=this.C().H()),t},g.hash=function(){if(null===this.Db){var e="";this.C().e()||(e+="priority:"+Fc(this.C().H())+":"),this.O(H,function(t,n){var i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.Db=""===e?"":Ob(e)}return this.Db},g.Ve=function(e,t,n){return(n=od(this,n))?(e=ad(n,new C(e,t)))?e.name:null:ad(this.k,e)},g.O=function(e,t){var n=od(this,e);return n?n.ha(function(e){return t(e.name,e.R)}):this.k.ha(t)},g.Wb=function(e){return this.Xb(e.Hc(),e)},g.Xb=function(e,t){var n=od(this,t);if(n)return n.Xb(e,function(e){return e});for(var n=this.k.Xb(e.name,qb),i=cd(n);null!=i&&0>t.compare(i,e);)M(n),i=cd(n);return n},g.We=function(e){return this.Zb(e.Fc(),e)},g.Zb=function(e,t){var n=od(this,t);if(n)return n.Zb(e,function(e){return e});for(var n=this.k.Zb(e.name,qb),i=cd(n);null!=i&&0<t.compare(i,e);)M(n),i=cd(n);return n},g.sc=function(e){return this.e()?e.e()?0:-1:e.J()||e.e()?1:e===qc?-1:0},g.nb=function(e){if(e===tc||Pa(this.yb.cc,e.toString()))return this;var t=this.yb,n=this.k;D(e!==tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i=[],a=!1,n=n.Wb(qb),r=M(n);r;)a=a||e.xc(r.R),i.push(r),r=M(n);return i=a?zc(i,nc(e)):mc,a=e.toString(),n=Ta(t.cc),n[a]=e,e=Ta(t.od),e[a]=i,new O(this.k,this.aa,new xc(e,n))},g.yc=function(e){return e===tc||Pa(this.yb.cc,e.toString())},g.Z=function(e){if(e===this)return!0;if(e.J())return!1;if(this.C().Z(e.C())&&this.k.count()===e.k.count()){var t=this.Wb(H);e=e.Wb(H);for(var n=M(t),i=M(e);n&&i;){if(n.name!==i.name||!n.R.Z(i.R))return!1;n=M(t),i=M(e)}return null===n&&null===i}return!1},g.toString=function(){return x(this.H(!0))};var rd=Math.log(2),L=new O(new Zc(tb),null,Bc);la(ud,O),g=ud.prototype,g.sc=function(e){return e===this?0:1},g.Z=function(e){return e===this},g.C=function(){return this},g.Q=function(){return L},g.e=function(){return!1};var qc=new ud,oc=new C("[MIN_NAME]",L),vc=new C("[MAX_NAME]",qc),wd=new Zc(function(e,t){return e===t?0:e<t?-1:1});g=vd.prototype,g.e=function(){return null===this.value&&this.children.e()},g.subtree=function(e){if(e.e())return this;var t=this.children.get(K(e));return null!==t?t.subtree(N(e)):R},g.set=function(e,t){if(e.e())return new vd(t,this.children);var n=K(e),i=(this.children.get(n)||R).set(N(e),t),n=this.children.Oa(n,i);return new vd(this.value,n)},g.remove=function(e){if(e.e())return this.children.e()?R:new vd(null,this.children);var t=K(e),n=this.children.get(t);return n?(e=n.remove(N(e)),t=e.e()?this.children.remove(t):this.children.Oa(t,e),null===this.value&&t.e()?R:new vd(this.value,t)):this},g.get=function(e){if(e.e())return this.value;var t=this.children.get(K(e));return t?t.get(N(e)):null};var R=new vd(null);vd.prototype.toString=function(){var e={};return Hd(this,function(t,n){e[t.toString()]=n.toString()}),x(e)};var Kd=/[\[\].#$\/\u0000-\u001F\u007F]/,Ld=/[\[\].#$\u0000-\u001F\u007F]/;Gb.prototype.find=function(e){if(null!=this.B)return this.B.P(e);if(e.e()||null==this.k)return null;var t=K(e);return e=N(e),this.k.contains(t)?this.k.get(t).find(e):null},Gb.prototype.O=function(e){null!==this.k&&Hc(this.k,function(t,n){e(t,n)})},Zd.prototype.Mc=function(){return this.path.e()?new Zd(this.source,Q):new Zd(this.source,N(this.path))},Zd.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"},ae.prototype.Mc=function(e){return this.path.e()?(e=this.children.subtree(new E(e)),e.e()?null:e.value?new ce(this.source,Q,e.value):new ae(this.source,Q,e)):(D(K(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ae(this.source,N(this.path),this.children))},ae.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},de.prototype.Mc=function(e){return this.path.e()?null!=this.Ob.value?(D(this.Ob.children.e(),"affectedTree should not have overlapping affected paths."),this):(e=this.Ob.subtree(new E(e)),new de(Q,e,this.Id)):(D(K(this.path)===e,"operationForChild called for unrelated child."),new de(N(this.path),this.Ob,this.Id))},de.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Id+" affectedTree="+this.Ob+")"},ce.prototype.Mc=function(e){return this.path.e()?new ce(this.source,Q,this.Ga.Q(e)):new ce(this.source,N(this.path),this.Ga)},ce.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ga.toString()+")"};var ge=0,be=1,ee=2,$d=3,fe=new he(!0,!1,null,!1),ie=new he(!1,!0,null,!1);he.prototype.toString=function(){return this.ee?"user":this.Ee?"server(queryID="+this.Hb+")":"server"},je.prototype.j=function(){return this.A},oe.prototype.w=function(){return this.Ld},se.prototype.Te=function(){return null},se.prototype.fe=function(){return null};var te=new se;ue.prototype.Te=function(e){var t=this.Ka.N;return ne(t,e)?t.j().Q(e):(t=null!=this.yd?new je(this.yd,!0,!1):this.Ka.w(),this.xf.qc(e,t))},ue.prototype.fe=function(e,t,n){var i=null!=this.yd?this.yd:re(this.Ka);return e=this.xf.Xd(i,t,1,n,e),0===e.length?null:e[0]},we.prototype.eb=function(e,t,n,i){var a,r=new xe;if(t.type===ge)t.source.ee?n=ye(this,e,t.path,t.Ga,n,i,r):(D(t.source.Se,"Unknown source."),a=t.source.Ee||le(e.w())&&!t.path.e(),n=ze(this,e,t.path,t.Ga,n,i,a,r));else if(t.type===be)t.source.ee?n=Ae(this,e,t.path,t.children,n,i,r):(D(t.source.Se,"Unknown source."),a=t.source.Ee||le(e.w()),n=Be(this,e,t.path,t.children,n,i,a,r));else if(t.type===ee)if(t.Id)if(t=t.path,null!=n.lc(t))n=e;else{if(a=new ue(n,e,i),i=e.N.j(),t.e()||".priority"===K(t))ke(e.w())?t=n.Aa(re(e)):(t=e.w().j(),D(t instanceof O,"serverChildren would be complete if leaf node"),t=n.rc(t)),t=this.U.ya(i,t,r);else{var o=K(t),s=n.qc(o,e.w());null==s&&ne(e.w(),o)&&(s=i.Q(o)),t=null!=s?this.U.F(i,o,s,N(t),a,r):e.N.j().Da(o)?this.U.F(i,o,L,N(t),a,r):i,t.e()&&ke(e.w())&&(i=n.Aa(re(e)),i.J()&&(t=this.U.ya(t,i,r)))}i=ke(e.w())||null!=n.lc(Q),n=pe(e,t,i,this.U.Na())}else n=Ce(this,e,t.path,t.Ob,n,i,r);else{if(t.type!==$d)throw Mb("Unknown operation type: "+t.type);i=t.path,t=e.w(),a=t.j(),o=t.da||i.e(),n=De(this,new oe(e.N,new je(a,o,t.Sb)),i,n,te,r)}return r=Na(r.fb),i=n,t=i.N,t.da&&(a=t.j().J()||t.j().e(),o=qe(e),(0<r.length||!e.N.da||a&&!t.j().Z(o)||!t.j().C().Z(o.C()))&&r.push(Ee(qe(i)))),new ve(n,r)},Ge.prototype.Ff=function(e,t){if(null==e.Xa||null==t.Xa)throw Mb("Should only compare child_ events.");return this.g.compare(new C(e.Xa,e.Ja),new C(t.Xa,t.Ja))},g=Pe.prototype,g.w=function(){return this.Ka.w().j()},g.hb=function(e){var t=re(this.Ka);return t&&(T(this.V.m)||!e.e()&&!t.Q(K(e)).e())?t.P(e):null},g.e=function(){return 0===this.Za.length},g.Nb=function(e){this.Za.push(e)},g.kb=function(e,t){var n=[];if(t){D(null==e,"A cancel should cancel all event registrations.");var i=this.V.path;ya(this.Za,function(e){(e=e.Me(t,i))&&n.push(e)})}if(e){for(var a=[],r=0;r<this.Za.length;++r){var o=this.Za[r];if(o.matches(e)){if(e.Xe()){a=a.concat(this.Za.slice(r+1));break}}else a.push(o)}this.Za=a}else this.Za=[];return n},g.eb=function(e,t,n){e.type===be&&null!==e.source.Hb&&(D(re(this.Ka),"We should always have a full cache before handling merges"),D(qe(this.Ka),"Missing event cache, even though we have a server cache"));var i=this.Ka;return e=this.hf.eb(i,e,t,n),t=this.hf,n=e.Sd,D(n.N.j().yc(t.U.g),"Event snap not indexed"),D(n.w().j().yc(t.U.g),"Server snap not indexed"),D(ke(e.Sd.w())||!ke(i.w()),"Once a server snap is complete, it should never go back"),this.Ka=e.Sd,Ue(this,e.Df,e.Sd.N.j(),null)},We.prototype.Yb=function(){var e=this.Md.wb();return"value"===this.hd?e.path:e.getParent().path},We.prototype.ge=function(){return this.hd},We.prototype.Tb=function(){return this.ae.Tb(this)},We.prototype.toString=function(){return this.Yb().toString()+":"+this.hd+":"+x(this.Md.be())},Xe.prototype.Yb=function(){return this.path},Xe.prototype.ge=function(){return"cancel"},Xe.prototype.Tb=function(){return this.ae.Tb(this)},Xe.prototype.toString=function(){return this.path.toString()+":cancel"},$e.prototype.add=function(e){this.jd.push(e)},$e.prototype.Yb=function(){return this.qa},g=Qe.prototype,g.F=function(e,t,n,i,a,r){return D(e.yc(this.g),"A node must be indexed if only a child is updated"),a=e.Q(t),a.P(i).Z(n.P(i))&&a.e()==n.e()?e:(null!=r&&(n.e()?e.Da(t)?df(r,new S(Le,a,t)):D(e.J(),"A child remove without an old child only makes sense on a leaf node"):a.e()?df(r,new S(Me,n,t)):df(r,new S(Ie,n,t,a))),e.J()&&n.e()?e:e.T(t,n).nb(this.g))},g.ya=function(e,t,n){return null!=n&&(e.J()||e.O(H,function(e,i){t.Da(e)||df(n,new S(Le,i,e))}),t.J()||t.O(H,function(t,i){if(e.Da(t)){var a=e.Q(t);a.Z(i)||df(n,new S(Ie,i,t,a))}else df(n,new S(Me,i,t))})),t.nb(this.g)},g.fa=function(e,t){return e.e()?L:e.fa(t)},g.Na=function(){return!1},g.Ub=function(){return this},g=Se.prototype,g.matches=function(e){return 0>=this.g.compare(this.Uc,e)&&0>=this.g.compare(e,this.vc)},g.F=function(e,t,n,i,a,r){return this.matches(new C(t,n))||(n=L),this.he.F(e,t,n,i,a,r)},g.ya=function(e,t,n){t.J()&&(t=L);var i=t.nb(this.g),i=i.fa(L),a=this;return t.O(H,function(e,t){a.matches(new C(e,t))||(i=i.T(e,L))}),this.he.ya(e,i,n)},g.fa=function(e){return e},g.Na=function(){return!0},g.Ub=function(){return this.he},g=Re.prototype,g.F=function(e,t,n,i,a,r){return this.sa.matches(new C(t,n))||(n=L),e.Q(t).Z(n)?e:e.Eb()<this.oa?this.sa.Ub().F(e,t,n,i,a,r):kf(this,e,t,n,a,r)},g.ya=function(e,t,n){var i;if(t.J()||t.e())i=L.nb(this.g);else if(2*this.oa<t.Eb()&&t.yc(this.g)){i=L.nb(this.g),t=this.Ib?t.Zb(this.sa.vc,this.g):t.Xb(this.sa.Uc,this.g);for(var a=0;0<t.Pa.length&&a<this.oa;){var r=M(t);if(!(this.Ib?0>=this.g.compare(this.sa.Uc,r):0>=this.g.compare(r,this.sa.vc)))break;i=i.T(r.name,r.R),a++}}else{i=t.nb(this.g),i=i.fa(L);var o,s,l;if(this.Ib){t=i.We(this.g),o=this.sa.vc,s=this.sa.Uc;var c=nc(this.g);l=function(e,t){return c(t,e)}}else t=i.Wb(this.g),o=this.sa.Uc,s=this.sa.vc,l=nc(this.g);for(var a=0,u=!1;0<t.Pa.length;)r=M(t),!u&&0>=l(o,r)&&(u=!0),u&&a<this.oa&&0>=l(r,s)?a++:i=i.T(r.name,L)}return this.sa.Ub().ya(e,i,n)},g.fa=function(e){return e},g.Na=function(){return!0},g.Ub=function(){return this.sa.Ub()};var Me="child_added",Le="child_removed",Ie="child_changed",Je="child_moved",Ne="value",mf=new lf;g=lf.prototype,g.ne=function(e){var t=nf(this);return t.xa=!0,t.oa=e,t.mb="l",t},g.oe=function(e){var t=nf(this);return t.xa=!0,t.oa=e,t.mb="r",t},g.Nd=function(e,t){var i=nf(this);return i.ka=!0,n(e)||(e=null),i.dc=e,null!=t?(i.Kb=!0,i.zb=t):(i.Kb=!1,i.zb=""),i},g.gd=function(e,t){var i=nf(this);return i.na=!0,n(e)||(e=null),i.ac=e,n(t)?(i.Rb=!0,i.xb=t):(i.vg=!1,i.xb=""),i},g.toString=function(){return x(pf(this))};var tf=new sf(new vd(null));sf.prototype.Ed=function(e){return e.e()?tf:(e=Ad(this.W,e,R),new sf(e))},sf.prototype.e=function(){return this.W.e()},sf.prototype.apply=function(e){return zf(Q,this.W,e)},Af.prototype.j=function(e){return this.Jd.P(e)},Af.prototype.toString=function(){return this.Jd.toString()},Bf.prototype.getToken=function(e){return this.oc.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},g=Df.prototype,g.Ed=function(e){var t=Ea(this.la,function(t){return t.Zc===e});D(0<=t,"removeWrite called with nonexistent writeId.");var n=this.la[t];this.la.splice(t,1);for(var i=n.visible,a=!1,r=this.la.length-1;i&&0<=r;){var o=this.la[r];o.visible&&(r>=t&&Ff(o,n.path)?i=!1:n.path.contains(o.path)&&(a=!0)),r--}if(i){if(a)this.S=Gf(this.la,Hf,Q),this.Bc=0<this.la.length?this.la[this.la.length-1].Zc:-1;else if(n.Ga)this.S=this.S.Ed(n.path);else{var s=this;v(n.children,function(e,t){s.S=s.S.Ed(n.path.n(t))})}return!0}return!1},g.Aa=function(e,t,n,i){if(n||i){var a=yf(this.S,e);return!i&&a.e()?t:i||null!=t||null!=wf(a,Q)?(a=Gf(this.la,function(t){return(t.visible||i)&&(!n||!(0<=xa(n,t.Zc)))&&(t.path.contains(e)||e.contains(t.path))},e),t=t||L,a.apply(t)):null}return null!=(a=wf(this.S,e))?a:(a=yf(this.S,e),a.e()?t:null!=t||null!=wf(a,Q)?(t=t||L,a.apply(t)):null)},g.rc=function(e,t){var n=L,i=wf(this.S,e);if(i)i.J()||i.O(H,function(e,t){n=n.T(e,t)});else if(t){var a=yf(this.S,e);t.O(H,function(e,t){var i=yf(a,new E(e)).apply(t);n=n.T(e,i)}),ya(xf(a),function(e){n=n.T(e.name,e.R)})}else a=yf(this.S,e),ya(xf(a),function(e){n=n.T(e.name,e.R)});return n},g.ad=function(e,t,n,i){return D(n||i,"Either existingEventSnap or existingServerSnap must exist"),e=e.n(t),null!=wf(this.S,e)?null:(e=yf(this.S,e),e.e()?i.P(t):e.apply(i.P(t)))},g.qc=function(e,t,n){e=e.n(t);var i=wf(this.S,e);return null!=i?i:ne(n,t)?yf(this.S,e).apply(n.j().Q(t)):null},g.lc=function(e){return wf(this.S,e)},g.Xd=function(e,t,n,i,a,r){var o;if(e=yf(this.S,e),null==(o=wf(e,Q))){if(null==t)return[];o=e.apply(t)}if(o=o.nb(r),o.e()||o.J())return[];for(t=[],e=nc(r),a=a?o.Zb(n,r):o.Xb(n,r),r=M(a);r&&t.length<i;)0!==e(r,n)&&t.push(r),r=M(a);return t},g=If.prototype,g.Aa=function(e,t,n){return this.W.Aa(this.Lb,e,t,n)},g.rc=function(e){return this.W.rc(this.Lb,e)},g.ad=function(e,t,n){return this.W.ad(this.Lb,e,t,n)},g.lc=function(e){return this.W.lc(this.Lb.n(e))},g.Xd=function(e,t,n,i,a){return this.W.Xd(this.Lb,e,t,n,i,a)},g.qc=function(e,t){return this.W.qc(this.Lb,e,t)},g.n=function(e){return new If(this.Lb.n(e),this.W)},Jf.prototype.lf=function(){var e,t=this.Vc.get(),n={},i=!1;for(e in t)0<t[e]&&eb(this.rf,e)&&(n[e]=t[e],i=!0);i&&this.va.ye(n),hc(q(this.lf,this),Math.floor(6e5*Math.random()))},Lf.prototype.get=function(){return Ta(this.tc)},Kf.prototype.get=function(){var e=this.Ef.get(),t=Ta(e);if(this.rd)for(var n in this.rd)t[n]-=this.rd[n];return this.rd=e,t};var Nf={},Of={};g=Rf.prototype,g.$e=function(e,t,n,i){var a=e.path.toString();this.f("Listen called for "+a+" "+e.ja());var r=Sf(e,n),o={};this.$[r]=o,e=rf(e.m);var s=this;Tf(this,a+".json",e,function(e,t){var l=t;404===e&&(e=l=null),null===e&&s.Gb(a,l,!1,n),w(s.$,r)===o&&i(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)})},g.uf=function(e,t){var n=Sf(e,t);delete this.$[n]},g.kf=function(){},g.re=function(){},g.cf=function(){},g.xd=function(){},g.put=function(){},g.af=function(){},g.ye=function(){};var Cb="websocket",Db="long_polling",Xf=null;"undefined"!=typeof MozWebSocket?Xf=MozWebSocket:"undefined"!=typeof WebSocket&&(Xf=WebSocket);var Zf;Yf.prototype.open=function(e,t){this.ib=t,this.Xf=e,this.f("Websocket connecting to "+this.Ke),this.wc=!1,xb.set("previous_websocket_failure",!0);try{this.Ia=new Xf(this.Ke)}catch(e){this.f("Error instantiating WebSocket.");var n=e.message||e.data;return n&&this.f(n),void this.bb()}var i=this;this.Ia.onopen=function(){i.f("Websocket connected."),i.wc=!0},this.Ia.onclose=function(){i.f("Websocket connection was disconnected."),i.Ia=null,i.bb()},this.Ia.onmessage=function(e){if(null!==i.Ia)if(e=e.data,i.pb+=e.length,Mf(i.Va,"bytes_received",e.length),$f(i),null!==i.frames)ag(i,e);else{e:{if(D(null===i.frames,"We already have a frame buffer"),6>=e.length){var t=Number(e);if(!isNaN(t)){i.Fe=t,i.frames=[],e=null;break e}}i.Fe=1,i.frames=[]}null!==e&&ag(i,e)}},this.Ia.onerror=function(e){i.f("WebSocket error.  Closing connection."),(e=e.message||e.data)&&i.f(e),i.bb()}},Yf.prototype.start=function(){},Yf.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==Xf&&!Zf},Yf.responsesRequiredToBeHealthy=2,Yf.healthyTimeout=3e4,g=Yf.prototype,g.sd=function(){xb.remove("previous_websocket_failure")},g.send=function(e){$f(this),e=x(e),this.qb+=e.length,Mf(this.Va,"bytes_sent",e.length),e=bc(e,16384),1<e.length&&bg(this,String(e.length));for(var t=0;t<e.length;t++)bg(this,e[t])},g.Tc=function(){this.Ab=!0,this.zc&&(clearInterval(this.zc),this.zc=null),this.Ia&&(this.Ia.close(),this.Ia=null)},g.bb=function(){this.Ab||(this.f("WebSocket is closing itself"),this.Tc(),this.ib&&(this.ib(this.wc),this.ib=null))},g.close=function(){this.Ab||(this.f("WebSocket is being closed"),this.Tc())};var dg,eg;cg.prototype.open=function(e,t){this.Ne=0,this.ia=t,this.bf=new Uf(e),this.Ab=!1;var n=this;this.sb=setTimeout(function(){n.f("Timed out trying to connect."),n.bb(),n.sb=null},Math.floor(3e4)),Yb(function(){if(!n.Ab){n.Ta=new fg(function(e,t,i,a,r){if(gg(n,arguments),n.Ta)if(n.sb&&(clearTimeout(n.sb),n.sb=null),n.wc=!0,"start"==e)n.id=t,n.ff=i;else{if("close"!==e)throw Error("Unrecognized command received: "+e);t?(n.Ta.Kd=!1,Vf(n.bf,t,function(){n.bb()})):n.bb()}},function(e,t){gg(n,arguments),Wf(n.bf,e,t)},function(){n.bb()},n.Yc);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.Ta.Qd&&(e.cb=n.Ta.Qd),e.v="5",n.tf&&(e.s=n.tf),n.Cb&&(e.ls=n.Cb),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f"),e=n.Yc(e),n.f("Connecting via long-poll to "+e),hg(n.Ta,e,function(){})}})},cg.prototype.start=function(){var e=this.Ta,t=this.ff;for(e.Vf=this.id,e.Wf=t,e.Ud=!0;ig(e););e=this.id,t=this.ff,this.fc=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.fc.src=this.Yc(n),this.fc.style.display="none",document.body.appendChild(this.fc)},cg.isAvailable=function(){return dg||!eg&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.rg)&&!0},g=cg.prototype,g.sd=function(){},g.Tc=function(){this.Ab=!0,this.Ta&&(this.Ta.close(),this.Ta=null),this.fc&&(document.body.removeChild(this.fc),this.fc=null),this.sb&&(clearTimeout(this.sb),this.sb=null)},g.bb=function(){this.Ab||(this.f("Longpoll is closing itself"),this.Tc(),this.ia&&(this.ia(this.wc),this.ia=null))},g.close=function(){this.Ab||(this.f("Longpoll is being closed."),this.Tc())},g.send=function(e){e=x(e),this.qb+=e.length,Mf(this.Va,"bytes_sent",e.length),e=mb(e),e=ab(e,!0),e=bc(e,1840);for(var t=0;t<e.length;t++){var n=this.Ta;n.Qc.push({jg:this.Ne,pg:e.length,Pe:e[t]}),n.Ud&&ig(n),this.Ne++}},fg.prototype.close=function(){if(this.Ud=!1,this.Ea){this.Ea.gb.body.innerHTML="";var e=this;setTimeout(function(){null!==e.Ea&&(document.body.removeChild(e.Ea),e.Ea=null)},Math.floor(0))}var t=this.ib;t&&(this.ib=null,t())};var mg=[cg,Yf];og.prototype.ua=function(e){zg(this,{t:"d",d:e})},og.prototype.wd=function(e){wg(this),this.te(e)},og.prototype.close=function(){2!==this.Ua&&(this.f("Closing realtime connection."),this.Ua=2,vg(this),this.ia&&(this.ia(),this.ia=null))};var Bg=0,Dg=0;g=Ag.prototype,g.ua=function(e,t,n){var i=++this.ig;e={r:i,a:e,b:t},this.f(x(e)),D(this.ma,"sendRequest call when we're not connected not allowed."),this.Fa.ua(e),n&&(this.Gd[i]=n)},g.$e=function(e,t,n,i){var a=e.ja(),r=e.path.toString();this.f("Listen called for "+r+" "+a),this.$[r]=this.$[r]||{},D(qf(e.m)||!T(e.m),"listen() called for non-default but complete query"),D(!this.$[r][a],"listen() called twice for same path/queryId."),e={G:i,ld:t,eg:e,tag:n},this.$[r][a]=e,this.ma&&Eg(this,e)},g.kf=function(e){this.ob=e,this.f("Auth token refreshed"),this.ob?Gg(this):this.ma&&this.ua("unauth",{},function(){}),(e&&40===e.length||kc(e))&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.td=3e4)},g.uf=function(e,t){var n=e.path.toString(),i=e.ja();if(this.f("Unlisten called for "+n+" "+i),D(qf(e.m)||!T(e.m),"unlisten() called for non-default but complete query"),Fg(this,n,i)&&this.ma){var a=pf(e.m);this.f("Unlisten on "+n+" for "+i),n={p:n},t&&(n.q=a,n.t=t),this.ua("n",n)}},g.re=function(e,t,n){this.ma?Ig(this,"o",e,t,n):this.Kc.push({we:e,action:"o",data:t,G:n})},g.cf=function(e,t,n){this.ma?Ig(this,"om",e,t,n):this.Kc.push({we:e,action:"om",data:t,G:n})},g.xd=function(e,t){this.ma?Ig(this,"oc",e,null,t):this.Kc.push({we:e,action:"oc",data:null,G:t})},g.put=function(e,t,n,i){Jg(this,"p",e,t,n,i)},g.af=function(e,t,n,i){Jg(this,"m",e,t,n,i)},g.ye=function(e){this.ma&&(e={c:e},this.f("reportStats",e),this.ua("s",e,function(e){"ok"!==e.s&&this.f("reportStats","Error sending stats: "+e.d)}))},g.wd=function(e){if("r"in e){this.f("from server: "+x(e));var t=e.r,n=this.Gd[t];n&&(delete this.Gd[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&(t=e.a,e=e.b,this.f("handleServerMessage",t,e),"d"===t?this.Gb(e.p,e.d,!1,e.t):"m"===t?this.Gb(e.p,e.d,!0,e.t):"c"===t?Lg(this,e.p,e.q):"ac"===t?Hg(this,e.s,e.d):"sd"===t?this.ze?this.ze(e):"msg"in e&&"undefined"!=typeof console&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: ")):Ub("Unrecognized action received from server: "+x(t)+"\nAre you using the latest client?"))}},g.Lc=function(e,t){if(this.f("connection ready"),this.ma=!0,this.Ac=(new Date).getTime(),this.ue({serverTimeOffset:e-(new Date).getTime()}),this.Cb=t,this.Re){var n={};n["sdk.js."+firebase.SDK_VERSION.replace(/\./g,"-")]=1,pb()?n["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(n["framework.reactnative"]=1),this.ye(n)}Mg(this),this.Re=!1,this.Jc(!0)},g.Zf=function(e){e&&!this.Mb&&this.Sa===this.td&&(this.f("Window became visible.  Reducing delay."),this.Sa=1e3,this.Fa||Cg(this,0)),this.Mb=e},g.Yf=function(e){e?(this.f("Browser went online."),this.Sa=1e3,this.Fa||Cg(this,0)):(this.f("Browser went offline.  Killing connection."),this.Fa&&this.Fa.close())},g.df=function(){this.f("data client disconnected"),this.ma=!1,this.Fa=null;for(var e=0;e<this.pa.length;e++){var t=this.pa[e];t&&"h"in t.mf&&t.fg&&(t.G&&t.G("disconnect"),delete this.pa[e],this.Oc--)}0===this.Oc&&(this.pa=[]),this.Gd={},Og(this)&&(this.Mb?this.Ac&&(3e4<(new Date).getTime()-this.Ac&&(this.Sa=1e3),this.Ac=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Sa=this.td,this.me=(new Date).getTime()),e=Math.max(0,this.Sa-((new Date).getTime()-this.me)),e*=Math.random(),this.f("Trying to reconnect in "+e+"ms"),Cg(this,e),this.Sa=Math.min(this.td,1.3*this.Sa)),this.Jc(!1)},g.ab=function(e){I("Interrupting connection for reason: "+e),this.qd[e]=!0,this.Fa?this.Fa.close():(this.ub&&(clearTimeout(this.ub),this.ub=null),this.ma&&this.df())},g.kc=function(e){I("Resuming connection for reason: "+e),delete this.qd[e],Sa(this.qd)&&(this.Sa=1e3,this.Fa||Cg(this,0))};var Sg={TIMESTAMP:{".sv":"timestamp"}};g=Pg.prototype,g.app=null,g.jf=function(e){return Tg(this,"ref"),y("database.ref",0,1,arguments.length),n(e)?this.ba.n(e):this.ba},g.gg=function(e){Tg(this,"database.refFromURL"),y("database.refFromURL",1,1,arguments.length);var t=Wb(e);Xd("database.refFromURL",t);var n=t.jc;return n.host!==this.ta.L.host&&Vb("database.refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+this.ta.L.host+")"),this.jf(t.path.toString())},g.Pf=function(){y("database.goOffline",0,0,arguments.length),Tg(this,"goOffline"),this.ta.ab()},g.Qf=function(){y("database.goOnline",0,0,arguments.length),Tg(this,"goOnline"),this.ta.kc()},Object.defineProperty(Pg.prototype,"app",{get:function(){return this.ta.app}}),Rg.prototype.delete=function(){Tg(this.Ya,"delete");var e=Ug.Vb(),t=this.Ya.ta;return w(e.lb,t.app.name)!==t&&Vb("Database "+t.app.name+" has already been deleted."),t.ab(),delete e.lb[t.app.name],this.Ya.ta=null,this.Ya.ba=null,this.Ya=this.Ya.INTERNAL=null,firebase.Promise.resolve()},Pg.prototype.ref=Pg.prototype.jf,Pg.prototype.refFromURL=Pg.prototype.gg,Pg.prototype.goOnline=Pg.prototype.Qf,Pg.prototype.goOffline=Pg.prototype.Pf,Rg.prototype.delete=Rg.prototype.delete,V.prototype.H=function(){return y("Firebase.DataSnapshot.val",0,0,arguments.length),this.A.H()},V.prototype.val=V.prototype.H,V.prototype.be=function(){return y("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.A.H(!0)},V.prototype.exportVal=V.prototype.be,V.prototype.toJSON=function(){return y("Firebase.DataSnapshot.toJSON",0,1,arguments.length),this.be()},V.prototype.toJSON=V.prototype.toJSON,V.prototype.Lf=function(){return y("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.A.e()},V.prototype.exists=V.prototype.Lf,V.prototype.n=function(e){y("Firebase.DataSnapshot.child",0,1,arguments.length),ga(e)&&(e=String(e)),Vd("Firebase.DataSnapshot.child",e);var t=new E(e),n=this.V.n(t);return new V(this.A.P(t),n,H)},V.prototype.child=V.prototype.n,V.prototype.Da=function(e){y("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Vd("Firebase.DataSnapshot.hasChild",e);var t=new E(e);return!this.A.P(t).e()},V.prototype.hasChild=V.prototype.Da,V.prototype.C=function(){return y("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.A.C().H()},V.prototype.getPriority=V.prototype.C,V.prototype.forEach=function(e){if(y("Firebase.DataSnapshot.forEach",1,1,arguments.length),B("Firebase.DataSnapshot.forEach",1,e,!1),this.A.J())return!1;var t=this;return!!this.A.O(this.g,function(n,i){return e(new V(i,t.V.n(n),H))})},V.prototype.forEach=V.prototype.forEach,V.prototype.kd=function(){return y("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),!this.A.J()&&!this.A.e()},V.prototype.hasChildren=V.prototype.kd,V.prototype.getKey=function(){return y("Firebase.DataSnapshot.key",0,0,arguments.length),this.V.getKey()},gc(V.prototype,"key",V.prototype.getKey),V.prototype.Eb=function(){return y("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.A.Eb()},V.prototype.numChildren=V.prototype.Eb,V.prototype.wb=function(){return y("Firebase.DataSnapshot.ref",0,0,arguments.length),this.V},gc(V.prototype,"ref",V.prototype.wb),g=Vg.prototype,g.nf=function(e){return"value"===e},g.createEvent=function(e,t){var n=t.m.g;return new We("value",this,new V(e.Ja,t.wb(),n))},g.Tb=function(e){var t=this.tb;if("cancel"===e.ge()){D(this.rb,"Raising a cancel event on a listener with no cancel callback");var n=this.rb;return function(){n.call(t,e.error)}}var i=this.Pb;return function(){i.call(t,e.Md)}},g.Me=function(e,t){return this.rb?new Xe(this,e,t):null},g.matches=function(e){
return e instanceof Vg&&(!e.Pb||!this.Pb||e.Pb===this.Pb&&e.tb===this.tb)},g.Xe=function(){return null!==this.Pb},g=Wg.prototype,g.nf=function(e){return e="children_added"===e?"child_added":e,("children_removed"===e?"child_removed":e)in this.ga},g.Me=function(e,t){return this.rb?new Xe(this,e,t):null},g.createEvent=function(e,t){D(null!=e.Xa,"Child events should have a childName.");var n=t.wb().n(e.Xa);return new We(e.type,this,new V(e.Ja,n,t.m.g),e.Dd)},g.Tb=function(e){var t=this.tb;if("cancel"===e.ge()){D(this.rb,"Raising a cancel event on a listener with no cancel callback");var n=this.rb;return function(){n.call(t,e.error)}}var i=this.ga[e.hd];return function(){i.call(t,e.Md,e.Dd)}},g.matches=function(e){if(e instanceof Wg){if(!this.ga||!e.ga)return!0;if(this.tb===e.tb){var t=La(e.ga);if(t===La(this.ga)){if(1===t){var t=Ma(e.ga),n=Ma(this.ga);return!(n!==t||e.ga[t]&&this.ga[n]&&e.ga[t]!==this.ga[n])}return Ka(this.ga,function(t,n){return e.ga[n]===t})}}}return!1},g.Xe=function(){return null!==this.ga},g=Xg.prototype,g.e=function(){return Sa(this.za)},g.eb=function(e,t,n){var i=e.source.Hb;if(null!==i)return i=w(this.za,i),D(null!=i,"SyncTree gave us an op for an invalid query."),i.eb(e,t,n);var a=[];return v(this.za,function(i){a=a.concat(i.eb(e,t,n))}),a},g.Nb=function(e,t,n,i,a){var r=e.ja(),o=w(this.za,r);if(!o){var o=n.Aa(a?i:null),s=!1;o?s=!0:(o=i instanceof O?n.rc(i):L,s=!1),o=new Pe(e,new oe(new je(o,s,!1),new je(i,a,!1))),this.za[r]=o}return o.Nb(t),Ve(o,t)},g.kb=function(e,t,n){var i=e.ja(),a=[],r=[],o=null!=Yg(this);if("default"===i){var s=this;v(this.za,function(e,i){r=r.concat(e.kb(t,n)),e.e()&&(delete s.za[i],T(e.V.m)||a.push(e.V))})}else{var l=w(this.za,i);l&&(r=r.concat(l.kb(t,n)),l.e()&&(delete this.za[i],T(l.V.m)||a.push(l.V)))}return o&&null==Yg(this)&&a.push(new U(e.u,e.path)),{hg:a,Kf:r}},g.hb=function(e){var t=null;return v(this.za,function(n){t=t||n.hb(e)}),t},ah.prototype.Nb=function(e,t){var n=e.path,i=null,a=!1;Fd(this.wa,n,function(e,t){var r=P(e,n);i=i||t.hb(r),a=a||null!=Yg(t)});var r=this.wa.get(n);r?(a=a||null!=Yg(r),i=i||r.hb(Q)):(r=new Xg,this.wa=this.wa.set(n,r));var o;null!=i?o=!0:(o=!1,i=L,Jd(this.wa.subtree(n),function(e,t){var n=t.hb(Q);n&&(i=i.T(e,n))}));var s=null!=$g(r,e);if(!s&&!T(e.m)){var l=lh(e);D(!(l in this.ic),"View does not exist, but we have a tag");var c=mh++;this.ic[l]=c,this.De["_"+c]=l}return o=r.Nb(e,t,new If(n,this.jb),i,o),s||a||(r=$g(r,e),o=o.concat(nh(this,e,r))),o},ah.prototype.kb=function(e,t,n){var i=e.path,a=this.wa.get(i),r=[];if(a&&("default"===e.ja()||null!=$g(a,e))){r=a.kb(e,t,n),a.e()&&(this.wa=this.wa.remove(i)),a=r.hg,r=r.Kf,t=-1!==Ea(a,function(e){return T(e.m)});var o=Dd(this.wa,i,function(e,t){return null!=Yg(t)});if(t&&!o&&(i=this.wa.subtree(i),!i.e()))for(var i=oh(i),s=0;s<i.length;++s){var l=i[s],c=l.V,l=ph(this,l);this.Cc.Ae(qh(c),rh(this,c),l.ld,l.G)}if(!o&&0<a.length&&!n)if(t)this.Cc.Od(qh(e),null);else{var u=this;ya(a,function(e){e.ja();var t=u.ic[lh(e)];u.Cc.Od(qh(e),t)})}sh(this,a)}return r},ah.prototype.Aa=function(e,t){var n=this.jb,i=Dd(this.wa,e,function(t,n){var i=P(t,e);if(i=n.hb(i))return i});return n.Aa(e,i,t,!0)};var mh=1;g=Qg.prototype,g.toString=function(){return(this.L.Sc?"https://":"http://")+this.L.host},g.name=function(){return this.L.pe},g.Gb=function(e,t,n,i){this.fd++;var a=new E(e);t=this.je?this.je(e,t):t,e=[],i?n?(t=Ja(t,function(e){return G(e)}),e=kh(this.K,a,t,i)):(t=G(t),e=gh(this.K,a,t,i)):n?(i=Ja(t,function(e){return G(e)}),e=fh(this.K,a,i)):(i=G(t),e=ch(this.K,new ce(ie,a,i))),i=a,0<e.length&&(i=yh(this,a)),cf(this.ca,i,e)},g.Jc=function(e){vh(this,"connected",e),!1===e&&zh(this)},g.ue=function(e){var t=this;cc(e,function(e,n){vh(t,n,e)})},g.Jb=function(e,t,n,i){this.f("set",{path:e.toString(),value:t,ug:n});var a=xh(this);t=G(t,n);var a=Jb(t,a),r=this.vd++,a=bh(this.K,e,a,r,!0);Ze(this.ca,a);var o=this;this.va.put(e.toString(),t.H(!0),function(t,n){var a="ok"===t;a||J("set at "+e+" failed: "+t),a=eh(o.K,r,!a),cf(o.ca,e,a),Ah(i,t,n)}),a=Bh(this,e),yh(this,a),cf(this.ca,a,[])},g.update=function(e,t,n){this.f("update",{path:e.toString(),value:t});var i=!0,a=xh(this),r={};if(v(t,function(e,t){i=!1;var n=G(e);r[t]=Jb(n,a)}),i)I("update() called with empty data.  Don't do anything."),Ah(n,"ok");else{var o=this.vd++,s=dh(this.K,e,r,o);Ze(this.ca,s);var l=this;this.va.af(e.toString(),t,function(t,i){var a="ok"===t;a||J("update at "+e+" failed: "+t);var a=eh(l.K,o,!a),r=e;0<a.length&&(r=yh(l,e)),cf(l.ca,r,a),Ah(n,t,i)}),v(t,function(t,n){var i=Bh(l,e.n(n));yh(l,i)}),cf(this.ca,e,[])}},g.xd=function(e,t){var n=this;this.va.xd(e.toString(),function(i,a){"ok"===i&&Yd(n.ia,e),Ah(t,i,a)})},g.ab=function(){this.Ra&&this.Ra.ab("repo_interrupt")},g.kc=function(){this.Ra&&this.Ra.kc("repo_interrupt")},g.Be=function(e){if("undefined"!=typeof console){e?(this.Vc||(this.Vc=new Kf(this.Va)),e=this.Vc.get()):e=this.Va.get();var t,n=Ba(Oa(e),function(e,t){return Math.max(t.length,e)},0);for(t in e){for(var i=e[t],a=t.length;a<n+2;a++)t+=" ";console.log(t+i)}}},g.Ce=function(e){Mf(this.Va,e),this.og.rf[e]=!0},g.f=function(e){var t="";this.Ra&&(t=this.Ra.id+":"),I(t,arguments)},Ug.prototype.ab=function(){for(var e in this.lb)this.lb[e].ab()},Ug.prototype.kc=function(){for(var e in this.lb)this.lb[e].kc()},Ug.prototype.ce=function(e){this.wf=e},ca(Ug),Ug.prototype.interrupt=Ug.prototype.ab,Ug.prototype.resume=Ug.prototype.kc;var W={};W.nc=Ag,W.DataConnection=W.nc,Ag.prototype.ng=function(e,t){this.ua("q",{p:e},t)},W.nc.prototype.simpleListen=W.nc.prototype.ng,Ag.prototype.Hf=function(e,t){this.ua("echo",{d:e},t)},W.nc.prototype.echo=W.nc.prototype.Hf,Ag.prototype.interrupt=Ag.prototype.ab,W.zf=og,W.RealTimeConnection=W.zf,og.prototype.sendRequest=og.prototype.ua,og.prototype.close=og.prototype.close,W.Rf=function(e){var t=Ag.prototype.put;return Ag.prototype.put=function(i,a,r,o){n(o)&&(o=e()),t.call(this,i,a,r,o)},function(){Ag.prototype.put=t}},W.hijackHash=W.Rf,W.yf=zb,W.ConnectionTarget=W.yf,W.ja=function(e){return e.ja()},W.queryIdentifier=W.ja,W.Uf=function(e){return e.u.Ra.$},W.listens=W.Uf,W.ce=function(e){Ug.Vb().ce(e)},W.forceRestClient=W.ce,W.Context=Ug,g=X.prototype,g.wb=function(){return y("Query.ref",0,0,arguments.length),new U(this.u,this.path)},g.gc=function(e,t,n,i){y("Query.on",2,4,arguments.length),Td("Query.on",e,!1),B("Query.on",2,t,!1);var a=Th("Query.on",n,i);if("value"===e)Fh(this.u,this,new Vg(t,a.cancel||null,a.Ma||null));else{var r={};r[e]=t,Fh(this.u,this,new Wg(r,a.cancel,a.Ma))}return t},g.Ic=function(e,t,n){y("Query.off",0,3,arguments.length),Td("Query.off",e,!0),B("Query.off",2,t,!0),ob("Query.off",3,n);var i=null,a=null;"value"===e?i=new Vg(t||null,null,n||null):e&&(t&&(a={},a[e]=t),i=new Wg(a,null,n||null)),a=this.u,i=".info"===K(this.path)?a.pd.kb(this,i):a.K.kb(this,i),af(a.ca,this.path,i)},g.$f=function(e,t){function n(s){r&&(r=!1,a.Ic(e,n),t&&t.call(i.Ma,s),o.resolve(s))}y("Query.once",1,4,arguments.length),Td("Query.once",e,!1),B("Query.once",2,t,!0);var i=Th("Query.once",arguments[2],arguments[3]),a=this,r=!0,o=new ib;return kb(o.ra),this.gc(e,n,function(t){a.Ic(e,n),i.cancel&&i.cancel.call(i.Ma,t),o.reject(t)}),o.ra},g.ne=function(e){if(y("Query.limitToFirst",1,1,arguments.length),!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new X(this.u,this.path,this.m.ne(e),this.Nc)},g.oe=function(e){if(y("Query.limitToLast",1,1,arguments.length),!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new X(this.u,this.path,this.m.oe(e),this.Nc)},g.ag=function(e){if(y("Query.orderByChild",1,1,arguments.length),"$key"===e)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Vd("Query.orderByChild",e),Sh(this,"Query.orderByChild");var t=new E(e);if(t.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");return t=new pc(t),t=of(this.m,t),Qh(t),new X(this.u,this.path,t,!0)},g.bg=function(){y("Query.orderByKey",0,0,arguments.length),Sh(this,"Query.orderByKey");var e=of(this.m,tc);return Qh(e),new X(this.u,this.path,e,!0)},g.cg=function(){y("Query.orderByPriority",0,0,arguments.length),Sh(this,"Query.orderByPriority");var e=of(this.m,H);return Qh(e),new X(this.u,this.path,e,!0)},g.dg=function(){y("Query.orderByValue",0,0,arguments.length),Sh(this,"Query.orderByValue");var e=of(this.m,wc);return Qh(e),new X(this.u,this.path,e,!0)},g.Nd=function(e,t){y("Query.startAt",0,2,arguments.length),Od("Query.startAt",e,this.path,!0),Ud("Query.startAt",t);var i=this.m.Nd(e,t);if(Rh(i),Qh(i),this.m.ka)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return n(e)||(t=e=null),new X(this.u,this.path,i,this.Nc)},g.gd=function(e,t){y("Query.endAt",0,2,arguments.length),Od("Query.endAt",e,this.path,!0),Ud("Query.endAt",t);var n=this.m.gd(e,t);if(Rh(n),Qh(n),this.m.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new X(this.u,this.path,n,this.Nc)},g.If=function(e,t){if(y("Query.equalTo",1,2,arguments.length),Od("Query.equalTo",e,this.path,!1),Ud("Query.equalTo",t),this.m.ka)throw Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.m.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Nd(e,t).gd(e,t)},g.toString=function(){y("Query.toString",0,0,arguments.length);for(var e=this.path,t="",n=e.Y;n<e.o.length;n++)""!==e.o[n]&&(t+="/"+encodeURIComponent(String(e.o[n])));return this.u.toString()+(t||"/")},g.toJSON=function(){return y("Query.toJSON",0,1,arguments.length),this.toString()},g.ja=function(){var e=ac(pf(this.m));return"{}"===e?"default":e},g.isEqual=function(e){if(y("Query.isEqual",1,1,arguments.length),!(e instanceof X))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var t=this.u===e.u,n=this.path.Z(e.path),i=this.ja()===e.ja();return t&&n&&i},X.prototype.on=X.prototype.gc,X.prototype.off=X.prototype.Ic,X.prototype.once=X.prototype.$f,X.prototype.limitToFirst=X.prototype.ne,X.prototype.limitToLast=X.prototype.oe,X.prototype.orderByChild=X.prototype.ag,X.prototype.orderByKey=X.prototype.bg,X.prototype.orderByPriority=X.prototype.cg,X.prototype.orderByValue=X.prototype.dg,X.prototype.startAt=X.prototype.Nd,X.prototype.endAt=X.prototype.gd,X.prototype.equalTo=X.prototype.If,X.prototype.toString=X.prototype.toString,X.prototype.isEqual=X.prototype.isEqual,gc(X.prototype,"ref",X.prototype.wb),Y.prototype.cancel=function(e){y("Firebase.onDisconnect().cancel",0,1,arguments.length),B("Firebase.onDisconnect().cancel",1,e,!0);var t=new ib;return this.ta.xd(this.qa,jb(t,e)),t.ra},Y.prototype.cancel=Y.prototype.cancel,Y.prototype.remove=function(e){y("Firebase.onDisconnect().remove",0,1,arguments.length),Wd("Firebase.onDisconnect().remove",this.qa),B("Firebase.onDisconnect().remove",1,e,!0);var t=new ib;return Ch(this.ta,this.qa,null,jb(t,e)),t.ra},Y.prototype.remove=Y.prototype.remove,Y.prototype.set=function(e,t){y("Firebase.onDisconnect().set",1,2,arguments.length),Wd("Firebase.onDisconnect().set",this.qa),Od("Firebase.onDisconnect().set",e,this.qa,!1),B("Firebase.onDisconnect().set",2,t,!0);var n=new ib;return Ch(this.ta,this.qa,e,jb(n,t)),n.ra},Y.prototype.set=Y.prototype.set,Y.prototype.Jb=function(e,t,n){y("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),Wd("Firebase.onDisconnect().setWithPriority",this.qa),Od("Firebase.onDisconnect().setWithPriority",e,this.qa,!1),Sd("Firebase.onDisconnect().setWithPriority",2,t),B("Firebase.onDisconnect().setWithPriority",3,n,!0);var i=new ib;return Dh(this.ta,this.qa,e,t,jb(i,n)),i.ra},Y.prototype.setWithPriority=Y.prototype.Jb,Y.prototype.update=function(e,t){if(y("Firebase.onDisconnect().update",1,2,arguments.length),Wd("Firebase.onDisconnect().update",this.qa),ea(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,J("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}return Rd("Firebase.onDisconnect().update",e,this.qa),B("Firebase.onDisconnect().update",2,t,!0),n=new ib,Eh(this.ta,this.qa,e,jb(n,t)),n.ra},Y.prototype.update=Y.prototype.update;var Z={Mf:function(){dg=Zf=!0}};if(Z.forceLongPolling=Z.Mf,Z.Nf=function(){eg=!0},Z.forceWebSockets=Z.Nf,Z.Tf=function(){return Yf.isAvailable()},Z.isWebSocketsAvailable=Z.Tf,Z.lg=function(e,t){e.u.Ra.ze=t},Z.setSecurityDebugCallback=Z.lg,Z.Be=function(e,t){e.u.Be(t)},Z.stats=Z.Be,Z.Ce=function(e,t){e.u.Ce(t)},Z.statsIncrementCounter=Z.Ce,Z.fd=function(e){return e.u.fd},Z.dataUpdateCount=Z.fd,Z.Sf=function(e,t){e.u.je=t},Z.interceptServerData=Z.Sf,la(U,X),g=U.prototype,g.getKey=function(){return y("Firebase.key",0,0,arguments.length),this.path.e()?null:Oc(this.path)},g.n=function(e){if(y("Firebase.child",1,1,arguments.length),ga(e))e=String(e);else if(!(e instanceof E))if(null===K(this.path)){var t=e;t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Vd("Firebase.child",t)}else Vd("Firebase.child",e);return new U(this.u,this.path.n(e))},g.getParent=function(){y("Firebase.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new U(this.u,e)},g.Of=function(){y("Firebase.ref",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},g.Gf=function(){return this.u.Ya},g.set=function(e,t){y("Firebase.set",1,2,arguments.length),Wd("Firebase.set",this.path),Od("Firebase.set",e,this.path,!1),B("Firebase.set",2,t,!0);var n=new ib;return this.u.Jb(this.path,e,null,jb(n,t)),n.ra},g.update=function(e,t){if(y("Firebase.update",1,2,arguments.length),Wd("Firebase.update",this.path),ea(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,J("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}return Rd("Firebase.update",e,this.path),B("Firebase.update",2,t,!0),n=new ib,this.u.update(this.path,e,jb(n,t)),n.ra},g.Jb=function(e,t,n){if(y("Firebase.setWithPriority",2,3,arguments.length),Wd("Firebase.setWithPriority",this.path),Od("Firebase.setWithPriority",e,this.path,!1),Sd("Firebase.setWithPriority",2,t),B("Firebase.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new ib;return this.u.Jb(this.path,e,t,jb(i,n)),i.ra},g.remove=function(e){return y("Firebase.remove",0,1,arguments.length),Wd("Firebase.remove",this.path),B("Firebase.remove",1,e,!0),this.set(null,e)},g.transaction=function(e,t,i){if(y("Firebase.transaction",1,3,arguments.length),Wd("Firebase.transaction",this.path),B("Firebase.transaction",1,e,!1),B("Firebase.transaction",2,t,!0),n(i)&&"boolean"!=typeof i)throw Error(A("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.transaction failed: "+this.getKey()+" is a read-only object.";void 0===i&&(i=!0);var a=new ib;return ha(t)&&kb(a.ra),Gh(this.u,this.path,e,function(e,n,i){e?a.reject(e):a.resolve(new Ph(n,i)),ha(t)&&t(e,n,i)},i),a.ra},g.kg=function(e,t){y("Firebase.setPriority",1,2,arguments.length),Wd("Firebase.setPriority",this.path),Sd("Firebase.setPriority",1,e),B("Firebase.setPriority",2,t,!0);var n=new ib;return this.u.Jb(this.path.n(".priority"),e,null,jb(n,t)),n.ra},g.push=function(e,t){y("Firebase.push",0,2,arguments.length),Wd("Firebase.push",this.path),Od("Firebase.push",e,this.path,!0),B("Firebase.push",2,t,!0);var n=wh(this.u),i=Kc(n),n=this.n(i),a=this.n(i),i=null!=e?n.set(e,t).then(function(){return a}):hb.resolve(a);return n.then=q(i.then,i),n.catch=q(i.then,i,void 0),ha(t)&&kb(i),n},g.ib=function(){return Wd("Firebase.onDisconnect",this.path),new Y(this.u,this.path)},U.prototype.child=U.prototype.n,U.prototype.set=U.prototype.set,U.prototype.update=U.prototype.update,U.prototype.setWithPriority=U.prototype.Jb,U.prototype.remove=U.prototype.remove,U.prototype.transaction=U.prototype.transaction,U.prototype.setPriority=U.prototype.kg,U.prototype.push=U.prototype.push,U.prototype.onDisconnect=U.prototype.ib,gc(U.prototype,"database",U.prototype.Gf),gc(U.prototype,"key",U.prototype.getKey),gc(U.prototype,"parent",U.prototype.getParent),gc(U.prototype,"root",U.prototype.Of),void 0===firebase)throw Error("Cannot install Firebase Database - be sure to load firebase-app.js first.");try{firebase.INTERNAL.registerService("database",function(e){var t=Ug.Vb(),i=e.options.databaseURL;n(i)||Vb("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var a=Wb(i),i=a.jc;return Xd("Invalid Firebase Database URL",a),a.path.e()||Vb("Database URL must point to the root of a Firebase Database (not including a child path)."),(a=w(t.lb,e.name))&&Vb("FIREBASE INTERNAL ERROR: Database initialized multiple times."),a=new Qg(i,t.wf,e),t.lb[e.name]=a,a.Ya},{Reference:U,Query:X,Database:Pg,enableLogging:Sb,INTERNAL:Z,TEST_ACCESS:W,ServerValue:Sg})}catch(e){Vb("Failed to register the Firebase Database Service ("+e+")")}}(),function(){var e=function(e,t){function n(){}n.prototype=t.prototype,e.u=t.prototype,e.prototype=new n;for(var i in t)if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(t,i);a&&Object.defineProperty(e,i,a)}else e[i]=t[i]},t=this,n=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},i=function(e,t){function n(){}n.prototype=t.prototype,e.u=t.prototype,e.prototype=new n,e.v=function(e,n,i){for(var a=Array(arguments.length-2),r=2;r<arguments.length;r++)a[r-2]=arguments[r];return t.prototype[n].apply(e,a)}},a=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,a);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))};i(a,Error);var r=function(e,t){for(var n=e.split("%s"),i="",a=Array.prototype.slice.call(arguments,1);a.length&&1<n.length;)i+=n.shift()+a.shift();return i+n.join("%s")},o=function(e,t){t.unshift(e),a.call(this,r.apply(null,t)),t.shift()};i(o,a);var s=function(e,t,n){if(!e){var i="Assertion failed";if(t)var i=i+": "+t,a=Array.prototype.slice.call(arguments,2);throw new o(""+i,a||[])}},l=null,c=function(e){e=new Uint8Array(e);var t=n(e);if(s("array"==t||"object"==t&&"number"==typeof e.length,"encodeByteArray takes an array as a parameter"),!l)for(l={},t=0;65>t;t++)l[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t);for(var t=l,i=[],a=0;a<e.length;a+=3){var r=e[a],o=a+1<e.length,c=o?e[a+1]:0,u=a+2<e.length,h=u?e[a+2]:0,d=r>>2,r=(3&r)<<4|c>>4,c=(15&c)<<2|h>>6,h=63&h;u||(h=64,o||(c=64)),i.push(t[d],t[r],t[c],t[h])}return i.join("").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},u={},h=(u["only-available-in-window"]="This method is available in a Window context.",u["only-available-in-sw"]="This method is available in a service worker context.",u["should-be-overriden"]="This method should be overriden by extended classes.",u["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",u["permission-default"]="The required permissions were not granted and dismissed instead.",u["permission-blocked"]="The required permissions were not granted and blocked instead.",u["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",u["notifications-blocked"]="Notifications have been blocked.",u["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",u["sw-registration-expected"]="A service worker registration was the expected input.",u["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",u["invalid-saved-token"]="Unable to access details of the saved token.",u["sw-reg-redundant"]="The service worker being used for push was made redundant.",u["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",u["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",u["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",u["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",u["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",u["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",u["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",u["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",u["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",u["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",u["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",u["failed-to-delete-token"]="Unable to delete the currently saved token.",u["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",u["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",u["bad-scope"]="The service worker scope must be a string with at least one character.",u["bad-vapid-key"]="The public VAPID key must be a string with at least one character.",u["bad-subscription"]="The subscription must be a valid PushSubscription.",u["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",u["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",u["failed-delete-vapid-key"]="The VAPID key could not be deleted.",u),d={userVisibleOnly:!0,applicationServerKey:new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])},f=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",h),p=function(){this.a=null},m=function(e){return e.a?e.a:(e.a=new Promise(function(e,n){var i=t.indexedDB.open("fcm_token_details_db",1);i.onerror=function(e){n(e.target.error)},i.onsuccess=function(t){e(t.target.result)},i.onupgradeneeded=function(e){e=e.target.result.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"}),e.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),e.createIndex("fcmToken","fcmToken",{unique:!0})}}),e.a)},g=function(e){e.a?e.a.then(function(t){t.close(),e.a=null}):Promise.resolve()},v=function(e,t){return m(e).then(function(e){return new Promise(function(n,i){var a=e.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(t);a.onerror=function(e){i(e.target.error)},a.onsuccess=function(e){n(e.target.result)}})})},b=function(e,t){return m(e).then(function(e){return new Promise(function(n,i){var a=[],r=e.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").openCursor();r.onerror=function(e){i(e.target.error)},r.onsuccess=function(e){(e=e.target.result)?(e.value.fcmSenderId===t&&a.push(e.value),e.continue()):n(a)}})})},y=function(e,t,n){var i=c(t.getKey("p256dh")),a=c(t.getKey("auth"));return e="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+i+"&encryption_auth="+a,n&&(e+="&pushSet="+n),n=new Headers,n.append("Content-Type","application/x-www-form-urlencoded"),fetch("https://fcm.googleapis.com/fcm/connect/subscribe",{method:"POST",headers:n,body:e}).then(function(e){return e.json()}).then(function(e){if(e.error)throw f.create("token-subscribe-failed",{message:e.error.message});if(!e.token)throw f.create("token-subscribe-no-token");if(!e.pushSet)throw f.create("token-subscribe-no-push-set");return{token:e.token,pushSet:e.pushSet}})},w=function(e,t,n,i,a,r){var o={swScope:n.scope,endpoint:i.endpoint,auth:c(i.getKey("auth")),p256dh:c(i.getKey("p256dh")),fcmToken:a,fcmPushSet:r,fcmSenderId:t};return m(e).then(function(e){return new Promise(function(t,n){var i=e.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").put(o);i.onerror=function(e){n(e.target.error)},i.onsuccess=function(){t()}})})};p.prototype.i=function(e,t){return t instanceof ServiceWorkerRegistration?"string"!=typeof e||0===e.length?Promise.reject(f.create("bad-sender-id")):b(this,e).then(function(n){if(0!==n.length){var i=n.findIndex(function(n){return t.scope===n.swScope&&e===n.fcmSenderId});if(-1!==i)return n[i]}}).then(function(e){if(e)return t.pushManager.getSubscription().catch(function(){throw f.create("get-subscription-failed")}).then(function(t){var n;if((n=t)&&(n=t.endpoint===e.endpoint&&c(t.getKey("auth"))===e.auth&&c(t.getKey("p256dh"))===e.p256dh),n)return e.fcmToken})}):Promise.reject(f.create("sw-registration-expected"))},p.prototype.getSavedToken=p.prototype.i,p.prototype.h=function(e,t){var n=this;return"string"!=typeof e||0===e.length?Promise.reject(f.create("bad-sender-id")):t instanceof ServiceWorkerRegistration?t.pushManager.getSubscription().then(function(e){return e||t.pushManager.subscribe(d)}).then(function(i){return y(e,i).then(function(a){return w(n,e,t,i,a.token,a.pushSet).then(function(){return a.token})})}):Promise.reject(f.create("sw-registration-expected"))},p.prototype.createToken=p.prototype.h,p.prototype.deleteToken=function(e){var t=this;return"string"!=typeof e||0===e.length?Promise.reject(f.create("invalid-delete-token")):v(this,e).then(function(e){if(!e)throw f.create("delete-token-not-found");return m(t).then(function(t){return new Promise(function(n,i){var a=t.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").delete(e.swScope);a.onerror=function(e){i(e.target.error)},a.onsuccess=function(t){0===t.target.result?i(f.create("failed-to-delete-token")):n(e)}})})})};var _=function(e){var t=this;if(this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",h),!e.options.messagingSenderId||"string"!=typeof e.options.messagingSenderId)throw this.a.create("bad-sender-id");this.l=e.options.messagingSenderId,this.c=new p,this.app=e,this.INTERNAL={},this.INTERNAL.delete=function(){return t.delete}};_.prototype.getToken=function(){var e=this,t=Notification.permission;return"granted"!==t?"denied"===t?Promise.reject(this.a.create("notifications-blocked")):Promise.resolve(null):this.f().then(function(t){return e.c.i(e.l,t).then(function(n){return n||e.c.h(e.l,t)})})},_.prototype.getToken=_.prototype.getToken,_.prototype.deleteToken=function(e){var t=this;return this.c.deleteToken(e).then(function(){return t.f()}).then(function(e){return e?e.pushManager.getSubscription():null}).then(function(e){if(e)return e.unsubscribe()})},_.prototype.deleteToken=_.prototype.deleteToken,_.prototype.f=function(){throw this.a.create("should-be-overriden")},_.prototype.requestPermission=function(){throw this.a.create("only-available-in-window")},_.prototype.useServiceWorker=function(){throw this.a.create("only-available-in-window")},_.prototype.useServiceWorker=_.prototype.useServiceWorker,_.prototype.onMessage=function(){throw this.a.create("only-available-in-window")},_.prototype.onMessage=_.prototype.onMessage,_.prototype.onTokenRefresh=function(){throw this.a.create("only-available-in-window")},_.prototype.onTokenRefresh=_.prototype.onTokenRefresh,_.prototype.setBackgroundMessageHandler=function(){throw this.a.create("only-available-in-sw")},_.prototype.setBackgroundMessageHandler=_.prototype.setBackgroundMessageHandler,_.prototype.delete=function(){g(this.c)};var k=function(e,t){var n={};return n["firebase-messaging-msg-type"]=e,n["firebase-messaging-msg-data"]=t,n},C=self,S=function(e){_.call(this,e);var t=this;this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",h),C.addEventListener("push",function(e){return T(t,e)},!1),C.addEventListener("pushsubscriptionchange",function(e){return x(t,e)},!1),C.addEventListener("notificationclick",function(e){return D(t,e)},!1),this.b=null};e(S,_);var T=function(e,t){var n;try{n=t.data.json()}catch(e){return}var i=$().then(function(t){if(t){if(n.notification||e.b)return M(e,n)}else{if((t=n)&&"object"==typeof t.notification){var i=Object.assign({},t.notification),a={};i.data=(a.FCM_MSG=t,a),t=i}else t=void 0;if(t)return C.registration.showNotification(t.title||"",t);if(e.b)return e.b(n)}});t.waitUntil(i)},x=function(e,t){var n=e.getToken().then(function(t){if(!t)throw e.a.create("no-fcm-token-for-resubscribe");var n=e.c;return v(n,t).then(function(t){if(!t)throw e.a.create("invalid-saved-token");return C.registration.pushManager.subscribe(d).then(function(e){return y(t.A,e,t.w)}).catch(function(i){return n.deleteToken(t.B).then(function(){throw e.a.create("unable-to-resubscribe",{message:i})})})})});t.waitUntil(n)},D=function(e,t){if(t.notification&&t.notification.data&&t.notification.data.FCM_MSG){t.stopImmediatePropagation(),t.notification.close();var n=t.notification.data.FCM_MSG,i=n.notification.click_action;if(i){var a=E(i).then(function(e){return e||C.clients.openWindow(i)}).then(function(t){if(t)return delete n.notification,A(e,t,k("notification-clicked",n))});t.waitUntil(a)}}};S.prototype.setBackgroundMessageHandler=function(e){if(e&&"function"!=typeof e)throw this.a.create("bg-handler-function-expected");this.b=e},S.prototype.setBackgroundMessageHandler=S.prototype.setBackgroundMessageHandler;var E=function(e){var t=new URL(e).href;return C.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){for(var n=null,i=0;i<e.length;i++)if(new URL(e[i].url).href===t){n=e[i];break}if(n)return n.focus(),n})},A=function(e,t,n){return new Promise(function(i,a){if(!t)return a(e.a.create("no-window-client-to-msg"));t.postMessage(n),i()})},$=function(){return C.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){return e.some(function(e){return"visible"===e.visibilityState})})},M=function(e,t){return C.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var i=k("push-msg-received",t);return Promise.all(n.map(function(t){return A(e,t,i)}))})};S.prototype.f=function(){return Promise.resolve(C.registration)};var I=function(e){_.call(this,e);var t=this;this.j=null,this.m=firebase.INTERNAL.createSubscribe(function(e){t.j=e}),this.s=null,this.o=firebase.INTERNAL.createSubscribe(function(e){t.s=e}),O(this)};e(I,_),I.prototype.getToken=function(){var e=this
;return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")?N(this).then(function(){return _.prototype.getToken.call(e)}):Promise.reject(this.a.create("unsupported-browser"))},I.prototype.getToken=I.prototype.getToken;var N=function(e){if(e.g)return e.g;var t=document.querySelector('link[rel="manifest"]');return e.g=t?fetch(t.href).then(function(e){return e.json()}).catch(function(){return Promise.resolve()}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.a.create("incorrect-gcm-sender-id")}):Promise.resolve(),e.g};I.prototype.requestPermission=function(){var e=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(t,n){var i=function(i){return"granted"===i?t():n("denied"===i?e.a.create("permission-blocked"):e.a.create("permission-default"))},a=Notification.requestPermission(function(e){a||i(e)});a&&a.then(i)})},I.prototype.requestPermission=I.prototype.requestPermission,I.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.a.create("sw-registration-expected");if(void 0!==this.b)throw this.a.create("use-sw-before-get-token");this.b=e},I.prototype.useServiceWorker=I.prototype.useServiceWorker,I.prototype.onMessage=function(e,t,n){return this.m(e,t,n)},I.prototype.onMessage=I.prototype.onMessage,I.prototype.onTokenRefresh=function(e,t,n){return this.o(e,t,n)},I.prototype.onTokenRefresh=I.prototype.onTokenRefresh;var P=function(e,t){var n=t.installing||t.waiting||t.active;return new Promise(function(i,a){if(n)if("activated"===n.state)i(t);else if("redundant"===n.state)a(e.a.create("sw-reg-redundant"));else{var r=function(){if("activated"===n.state)i(t);else{if("redundant"!==n.state)return;a(e.a.create("sw-reg-redundant"))}n.removeEventListener("statechange",r)};n.addEventListener("statechange",r)}else a(e.a.create("no-sw-in-reg"))})};I.prototype.f=function(){var e=this;return this.b?P(this,this.b):(this.b=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw e.a.create("failed-serviceworker-registration",{browserErrorMessage:t.message})}).then(function(t){return P(e,t).then(function(){return e.b=t,t.update(),t})}))};var O=function(e){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data["firebase-messaging-msg-type"])switch(t=t.data,t["firebase-messaging-msg-type"]){case"push-msg-received":case"notification-clicked":e.j.next(t["firebase-messaging-msg-data"])}},!1)};if(!(firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService))throw Error("Cannot install Firebase Messaging - be sure to load firebase-app.js first.");firebase.INTERNAL.registerService("messaging",function(e){return self&&"ServiceWorkerGlobalScope"in self?new S(e):new I(e)},{Messaging:I}),new firebase.INTERNAL.ErrorFactory("messaging","Messaging",h),new firebase.INTERNAL.ErrorFactory("messaging","Messaging",h),new firebase.INTERNAL.ErrorFactory("messaging","Messaging",h)}.call(this),function(){for(var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,i=["Number","MIN_SAFE_INTEGER"],a=0;a<i.length-1;a++){var r=i[a];r in n||(n[r]={}),n=n[r]}var o=i[i.length-1];-9007199254740991!=n[o]&&t(n,o,{configurable:!0,writable:!0,value:-9007199254740991});var s=this,l=function(e){return void 0!==e},c=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},u=function(e,t){this.code="storage/"+e,this.message="Firebase Storage: "+t,this.serverResponse=null,this.name="FirebaseError"};!function(){function e(){}var t=Error;e.prototype=t.prototype,u.b=t.prototype,u.prototype=new e,u.a=function(e,n,i){for(var a=Array(arguments.length-2),r=2;r<arguments.length;r++)a[r-2]=arguments[r];return t.prototype[n].apply(e,a)}}();var h=function(){return new u("unknown","An unknown error occurred, please check the error payload for server response.")},d=function(){return new u("canceled","User canceled the upload/download.")},f=function(){return new u("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")},p=function(e,t,n){return new u("invalid-argument","Invalid argument in `"+t+"` at index "+e+": "+n)},m=function(){return new u("app-deleted","The Firebase app was deleted.")},g=function(e,t){return new u("invalid-format","String does not match format '"+e+"': "+t)},v=function(e){throw new u("internal-error","Internal error: "+e)},b="https://firebasestorage.googleapis.com",y=function(e){if(void 0!==firebase)return new firebase.Promise(e);throw Error("Error in Firebase Storage - be sure to load firebase-app.js first.")},w=function(e,t){return-1!==e.indexOf(t)},_=function(e,t,n){function i(){h||(h=!0,t.apply(null,arguments))}function a(t){l=setTimeout(function(){l=null,e(r,2===u)},t)}function r(e,t){if(!h)if(e)i.apply(null,arguments);else if(2===u||c)i.apply(null,arguments);else{64>s&&(s*=2);var n;1===u?(u=2,n=0):n=1e3*(s+Math.random()),a(n)}}function o(e){d||(d=!0,h||(null!==l?(e||(u=2),clearTimeout(l),a(0)):e||(u=1)))}var s=1,l=null,c=!1,u=0,h=!1,d=!1;return a(0),setTimeout(function(){c=!0,o(!0)},n),o},k=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},C=function(e){var t={};return k(e,function(e,n){t[e]=n}),t},S=function(e,t,n,i){this.l=e,this.b={},this.method=t,this.headers={},this.body=null,this.m=n,this.c=this.a=null,this.f=[200],this.i=[],this.timeout=i,this.g=!0},T=function(e){var t=encodeURIComponent,n="?";return k(e,function(e,i){e=t(e)+"="+t(i),n=n+e+"&"}),n=n.slice(0,-1)},x=function(e,t,n,i,a,r,o,s,l,c,u){this.F=e,this.D=t,this.A=n,this.u=i,this.B=a.slice(),this.s=r.slice(),this.m=this.o=this.c=this.b=null,this.g=this.i=!1,this.v=o,this.l=s,this.f=c,this.G=u,this.C=l;var h=this;this.w=y(function(e,t){h.o=e,h.m=t,E(h)})},D=function(e,t,n){this.b=e,this.c=t,this.a=!!n},E=function(e){function t(e,t){function n(e){i.f(e.loaded,e.lengthComputable?e.total:-1)}t?e(!1,new D(!1,null,!0)):(t=new tt,t.h.withCredentials=i.G,i.b=t,null!==i.f&&l(t.h.upload)&&t.h.upload.addEventListener("progress",n),nt(t,i.F,i.D,i.u,i.A).then(function(t){null!==i.f&&l(t.h.upload)&&t.h.upload.removeEventListener("progress",n),i.b=null;var a=0===it(t),r=at(t);if(!(a=!a))var a=w([408,429],r),o=w(i.s,r),a=500<=r&&600>r||a||o;a?(t=2===it(t),e(!1,new D(!1,null,t))):e(!0,new D(w(i.B,r),t))}))}function n(e,t){var n=i.o;e=i.m;var a=t.c;if(t.b)try{var r=i.v(a,rt(a));l(r)?n(r):n()}catch(t){e(t)}else null!==a?(t=h(),r=rt(a),t.serverResponse=r,e(i.l?i.l(a,t):t)):(t=t.a?i.g?m():d():new u("retry-limit-exceeded","Max retry time for operation exceeded, please try again."),e(t))}var i=e;e.i?n(0,new D(!1,null,!0)):e.c=_(t,n,e.C)};x.prototype.a=function(){return this.w},x.prototype.cancel=function(e){this.i=!0,this.g=e||!1,null!==this.c&&(0,this.c)(!1),null!==this.b&&this.b.abort()};var A=function(e,t,n){var i=T(e.b),i=e.l+i,a=e.headers?C(e.headers):{};return null!==t&&0<t.length&&(a.Authorization="Firebase "+t),a["X-Firebase-Storage-Version"]="webjs/"+(void 0!==firebase?firebase.SDK_VERSION:"AppManager"),new x(i,e.method,a,e.body,e.f,e.i,e.m,e.a,e.timeout,e.c,n)},$=function(e){this.b=firebase.Promise.reject(e)};$.prototype.a=function(){return this.b},$.prototype.cancel=function(){};var M=function(e,t){this.bucket=e,this.path=t},I=function(e){var t=encodeURIComponent;return"/b/"+t(e.bucket)+"/o/"+t(e.path)},N=function(e){var t;try{t=P(e)}catch(t){return new M(e,"")}if(""===t.path)return t;throw new u("invalid-default-bucket","Invalid default bucket '"+e+"'.")},P=function(e){for(var t=null,n=[{M:/^gs:\/\/([A-Za-z0-9.\-]+)(\/(.*))?$/i,H:{bucket:1,path:3},L:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path=e.path.slice(0,-1))}},{M:/^https?:\/\/firebasestorage\.googleapis\.com\/v[A-Za-z0-9_]+\/b\/([A-Za-z0-9.\-]+)\/o(\/([^?#]*).*)?$/i,H:{bucket:1,path:3},L:function(e){e.path=decodeURIComponent(e.path)}}],i=0;i<n.length;i++){var a=n[i],r=a.M.exec(e);if(r){t=r[a.H.bucket],(r=r[a.H.path])||(r=""),t=new M(t,r),a.L(t);break}}if(null==t)throw new u("invalid-url","Invalid URL '"+e+"'.");return t},O=function(){this.a={},this.b=Number.MIN_SAFE_INTEGER},j=function(e,t){function n(){delete a.a[i]}var i=e.b;e.b++,e.a[i]=t;var a=e;t.a().then(n,n)},R=function(e){k(e.a,function(e,t){t&&t.cancel(!0)}),e.a={}},L=function(e){return l(e)&&null!==e},F=function(e){return"string"==typeof e||e instanceof String},U=function(){return"undefined"!=typeof Blob},W=function(e,t,n,i,a){this.a=e,this.g=null,null!==this.a&&(e=this.a.options,L(e)&&(e=e.storageBucket||null,this.g=null==e?null:N(e).bucket)),this.s=t,this.o=n,this.l=a,this.m=i,this.c=12e4,this.b=6e4,this.i=new O,this.f=!1},H=function(e){return null!==e.a&&L(e.a.INTERNAL)&&L(e.a.INTERNAL.getToken)?e.a.INTERNAL.getToken().then(function(e){return L(e)?e.accessToken:null},function(){return null}):firebase.Promise.resolve(null)};W.prototype.bucket=function(){if(this.f)throw m();return this.g};var z,Y=function(e,t,n){return e.f?new $(m()):(t=e.o(t,n,null===e.a,e.l),j(e.i,t),t)},B=function(e,t){return t=t.split("/").filter(function(e){return 0<e.length}).join("/"),0===e.length?t:e+"/"+t},V=function(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)},q=function(e,t){return t},K=function(e,t,n,i){this.c=e,this.b=t||e,this.writable=!!n,this.a=i||q},X=null,G=function(){if(X)return X;var e=[];e.push(new K("bucket")),e.push(new K("generation")),e.push(new K("metageneration")),e.push(new K("name","fullPath",!0));var t=new K("name");return t.a=function(e,t){return!F(t)||2>t.length?t:V(t)},e.push(t),t=new K("size"),t.a=function(e,t){return L(t)?+t:t},e.push(t),e.push(new K("timeCreated")),e.push(new K("updated")),e.push(new K("md5Hash",null,!0)),e.push(new K("cacheControl",null,!0)),e.push(new K("contentDisposition",null,!0)),e.push(new K("contentEncoding",null,!0)),e.push(new K("contentLanguage",null,!0)),e.push(new K("contentType",null,!0)),e.push(new K("metadata","customMetadata",!0)),e.push(new K("downloadTokens","downloadURLs",!1,function(e,t){if(!(F(t)&&0<t.length))return[];var n=encodeURIComponent;return t.split(",").map(function(t){var i=e.fullPath,i="https://firebasestorage.googleapis.com/v0/b/"+n(e.bucket)+"/o/"+n(i);return t=T({alt:"media",token:t}),i+t})})),X=e},Q=function(e,t){Object.defineProperty(e,"ref",{get:function(){return t.s(t,new M(e.bucket,e.fullPath))}})},J=function(e,t){for(var n={},i=t.length,a=0;a<i;a++){var r=t[a];r.writable&&(n[r.c]=e[r.b])}return JSON.stringify(n)},Z=function(e){if(!e||"object"!=typeof e)throw"Expected Metadata object.";for(var t in e){var n=e[t];if("customMetadata"===t){if("object"!=typeof n)throw"Expected object for 'customMetadata' mapping."}else if(null!=n&&"object"==typeof n)throw"Mapping for '"+t+"' cannot be an object."}},ee=function(e,t,n){for(var i=t.length,a=t.length,r=0;r<t.length;r++)if(t[r].b){i=r;break}if(!(i<=n.length&&n.length<=a))throw i===a?(t=i,i=1===i?"argument":"arguments"):(t="between "+i+" and "+a,i="arguments"),new u("invalid-argument-count","Invalid argument count in `"+e+"`: Expected "+t+" "+i+", received "+n.length+".");for(r=0;r<n.length;r++)try{t[r].a(n[r])}catch(t){if(t instanceof Error)throw p(r,e,t.message);throw p(r,e,t)}},te=function(e,t){var n=this;this.a=function(t){n.b&&!l(t)||e(t)},this.b=!!t},ne=function(e,t){return function(n){e(n),t(n)}},ie=function(e,t){function n(e){if(!("string"==typeof e||e instanceof String))throw"Expected string."}var i;return i=e?ne(n,e):n,new te(i,t)},ae=function(){return new te(function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||U()&&e instanceof Blob))throw"Expected Blob or File."})},re=function(){return new te(function(e){if(!(("number"==typeof e||e instanceof Number)&&0<=e))throw"Expected a number 0 or greater."})},oe=function(e,t){return new te(function(t){if(!(null===t||L(t)&&t instanceof Object))throw"Expected an Object.";L(e)&&e(t)},t)},se=function(){return new te(function(e){if(null!==e&&"function"!=c(e))throw"Expected a Function."},!0)},le=function(e){return function(){var t=[];Array.prototype.push.apply(t,arguments),firebase.Promise.resolve(!0).then(function(){e.apply(null,t)})}},ce=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ue=function(e,t){return e<t?-1:e>t?1:0};e:{var he=s.navigator;if(he){var de=he.userAgent;if(de){z=de;break e}}z=""}var fe,pe=function(e,t){var n=Te;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)},me=-1!=z.indexOf("Opera"),ge=-1!=z.indexOf("Trident")||-1!=z.indexOf("MSIE"),ve=-1!=z.indexOf("Edge"),be=!(-1==z.indexOf("Gecko")||-1!=z.toLowerCase().indexOf("webkit")&&-1==z.indexOf("Edge")||-1!=z.indexOf("Trident")||-1!=z.indexOf("MSIE")||-1!=z.indexOf("Edge")),ye=-1!=z.toLowerCase().indexOf("webkit")&&-1==z.indexOf("Edge");e:{var we="",_e=function(){var e=z;return be?/rv\:([^\);]+)(\)|;)/.exec(e):ve?/Edge\/([\d\.]+)/.exec(e):ge?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ye?/WebKit\/(\S+)/.exec(e):me?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(_e&&(we=_e?_e[1]:""),ge){var ke,Ce=s.document;if(null!=(ke=Ce?Ce.documentMode:void 0)&&ke>parseFloat(we)){fe=String(ke);break e}}fe=we}var Se=fe,Te={},xe=function(e){return pe(e,function(){for(var t=0,n=ce(String(Se)).split("."),i=ce(String(e)).split("."),a=Math.max(n.length,i.length),r=0;0==t&&r<a;r++){var o=n[r]||"",s=i[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ue(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ue(0==o[2].length,0==s[2].length)||ue(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t})},De=function(e){var t=s.BlobBuilder||s.WebKitBlobBuilder;if(l(t)){for(var t=new t,n=0;n<arguments.length;n++)t.append(arguments[n]);return t.getBlob()}if(t=Array.prototype.slice.call(arguments),n=s.BlobBuilder||s.WebKitBlobBuilder,l(n)){for(var n=new n,i=0;i<t.length;i++)n.append(t[i],void 0);t=n.getBlob(void 0)}else{if(!l(s.Blob))throw Error("This browser doesn't seem to support creating Blobs");t=new Blob(t,{})}return t},Ee=function(e,t,n){return l(n)||(n=e.size),e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?be&&!xe("13.0")||ye&&!xe("537.1")?(0>t&&(t+=e.size),0>t&&(t=0),0>n&&(n+=e.size),n<t&&(n=t),e.slice(t,n-t)):e.slice(t,n):null},Ae={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},$e=function(e){switch(e){case"raw":case"base64":case"base64url":case"data_url":break;default:throw"Expected one of the event types: [raw, base64, base64url, data_url]."}},Me=function(e,t){this.data=e,this.a=t||null},Ie=function(e,t){switch(e){case"raw":return new Me(Ne(t));case"base64":case"base64url":return new Me(Pe(e,t));case"data_url":e=new Oe(t);var n;if(e.a)n=Pe("base64",e.c);else{try{n=decodeURIComponent(e.c)}catch(e){throw g("data_url","Malformed data URL.")}n=Ne(n)}return new Me(n,new Oe(t).b)}throw h()},Ne=function(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(127>=i)t.push(i);else if(2047>=i)t.push(192|i>>6,128|63&i);else if(55296==(64512&i))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){var a=e.charCodeAt(++n),i=65536|(1023&i)<<10|1023&a;t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else t.push(239,191,189);else 56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)},Pe=function(e,t){switch(e){case"base64":var n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i)throw g(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case"base64url":if(n=-1!==t.indexOf("+"),i=-1!==t.indexOf("/"),n||i)throw g(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw g(e,"Invalid character found")}for(e=new Uint8Array(a.length),t=0;t<a.length;t++)e[t]=a.charCodeAt(t);return e},Oe=function(e){var t=e.match(/^data:([^,]+)?,/);if(null===t)throw g("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");if(t=t[1]||null,this.a=!1,this.b=null,null!=t){var n=t.length-7;this.b=(this.a=0<=n&&t.indexOf(";base64",n)==n)?t.substring(0,t.length-7):t}this.c=e.substring(e.indexOf(",")+1)},je=function(e,t){U()&&e instanceof Blob?(this.j=e,t=e.size,e=e.type):(e instanceof ArrayBuffer?(t?this.j=new Uint8Array(e):(this.j=new Uint8Array(e.byteLength),this.j.set(new Uint8Array(e))),t=this.j.length):(t?this.j=e:(this.j=new Uint8Array(e.length),this.j.set(e)),t=e.length),e=""),this.a=t,this.b=e};je.prototype.type=function(){return this.b},je.prototype.slice=function(e,t){return U()&&this.j instanceof Blob?(e=Ee(this.j,e,t),null===e?null:new je(e)):(e=new Uint8Array(this.j.buffer,e,t-e),new je(e,!0))};var Re=function(e){var t=[];if(Array.prototype.push.apply(t,arguments),U())return t=t.map(function(e){return e instanceof je?e.j:e}),new je(De.apply(null,t));var t=t.map(function(e){return F(e)?Ie("raw",e).data:e.j}),n=0;t.forEach(function(e){n+=e.byteLength});var i=new Uint8Array(n),a=0;return t.forEach(function(e){for(var t=0;t<e.length;t++)i[a++]=e[t]}),new je(i,!0)},Le=function(e,t,n){"function"==c(e)||L(t)||L(n)?(this.b=e,this.error=t||null,this.a=n||null):(this.b=e.next||null,this.error=e.error||null,this.a=e.complete||null)},Fe=function(e){if(!e)throw h()},Ue=function(e,t){return function(n,i){var a;e:{try{a=JSON.parse(i)}catch(e){a=null;break e}n=typeof a,a="object"==n&&null!=a||"function"==n?a:null}if(null===a)a=null;else{n={type:"file"},i=t.length;for(var r=0;r<i;r++){var o=t[r];n[o.b]=o.a(n,a[o.c])}Q(n,e),a=n}return Fe(null!==a),a}},We=function(e){return function(t,n){return t=401===at(t)?new u("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===at(t)?new u("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===at(t)?new u("unauthorized","User does not have permission to access '"+e.path+"'."):n,t.serverResponse=n.serverResponse,t}},He=function(e){var t=We(e);return function(n,i){var a=t(n,i);return 404===at(n)&&(a=new u("object-not-found","Object '"+e.path+"' does not exist.")),a.serverResponse=i.serverResponse,a}},ze=function(e,t,n){var i=I(t);return e=new S(b+"/v0"+i,"GET",Ue(e,n),e.c),e.a=He(t),e},Ye=function(e,t){var n=I(t);return e=new S(b+"/v0"+n,"DELETE",function(){},e.c),e.f=[200,204],e.a=He(t),e},Be=function(e,t,n){return n=n?C(n):{},n.fullPath=e.path,n.size=t.a,n.contentType||(e=t&&t.type()||"application/octet-stream",n.contentType=e),n},Ve=function(e,t,n,i,a){var r,o="/b/"+encodeURIComponent(t.bucket)+"/o",s={"X-Goog-Upload-Protocol":"multipart"};r="";for(var l=0;2>l;l++)r+=Math.random().toString().slice(2);if(s["Content-Type"]="multipart/related; boundary="+r,a=Be(t,i,a),l=J(a,n),null===(i=Re("--"+r+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+r+"\r\nContent-Type: "+a.contentType+"\r\n\r\n",i,"\r\n--"+r+"--")))throw f();return e=new S(b+"/v0"+o,"POST",Ue(e,n),e.b),e.b={name:a.fullPath},e.headers=s,e.body=i.j,e.a=We(t),e},qe=function(e,t,n,i){this.current=e,this.total=t,this.I=!!n,this.metadata=i||null},Ke=function(e,t){var n;try{n=e.h.getResponseHeader("X-Goog-Upload-Status")}catch(e){Fe(!1)}return Fe(w(t||["active"],n)),n},Xe=function(e,t,n,i,a){var r="/b/"+encodeURIComponent(t.bucket)+"/o",o=Be(t,i,a);return a={name:o.fullPath},r=b+"/v0"+r,i={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.a,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},n=J(o,n),e=new S(r,"POST",function(e){Ke(e);var t;try{t=e.h.getResponseHeader("X-Goog-Upload-URL")}catch(e){Fe(!1)}return Fe(F(t)),t},e.b),e.b=a,e.headers=i,e.body=n,e.a=We(t),e},Ge=function(e,t,n,i){return e=new S(n,"POST",function(e){var t,n=Ke(e,["active","final"]);try{t=e.h.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){Fe(!1)}return e=t,isFinite(e)&&(e=String(e)),e="string"==typeof e?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN,Fe(!isNaN(e)),new qe(e,i.a,"final"===n)},e.b),e.headers={"X-Goog-Upload-Command":"query"},e.a=We(t),e.g=!1,e},Qe=function(e,t,n,i,a,r,o,s){var l=new qe(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.a),i.a!==l.total)throw new u("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=o=l.total-l.current;0<a&&(c=Math.min(c,a));var h=l.current;if(a={"X-Goog-Upload-Command":c===o?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},null===(o=i.slice(h,h+c)))throw f();return n=new S(n,"POST",function(e,n){var a,o=Ke(e,["active","final"]),s=l.current+c,u=i.a;return a="final"===o?Ue(t,r)(e,n):null,new qe(s,u,"final"===o,a)},t.b),n.headers=a,n.body=o.j,n.c=s||null,n.a=We(e),n.g=!1,n},Je={STATE_CHANGED:"state_changed"},Ze={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"},et=function(e){switch(e){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";case"error":default:return"error"}},tt=function(){var e=this;this.h=new XMLHttpRequest,this.b=0,this.c=y(function(t){e.h.addEventListener("abort",function(){e.b=2,t(e)}),e.h.addEventListener("error",function(){e.b=1,t(e)}),e.h.addEventListener("load",function(){t(e)})}),this.a=!1},nt=function(e,t,n,i,a){if(e.a)throw v("cannot .send() more than once");return e.a=!0,e.h.open(n,t,!0),L(a)&&k(a,function(t,n){e.h.setRequestHeader(t,n.toString())}),L(i)?e.h.send(i):e.h.send(),e.c},it=function(e){if(!e.a)throw v("cannot .getErrorCode() before sending");return e.b},at=function(e){if(!e.a)throw v("cannot .getStatus() before sending");try{return e.h.status}catch(e){return-1}},rt=function(e){if(!e.a)throw v("cannot .getResponseText() before sending");return e.h.responseText};tt.prototype.abort=function(){this.h.abort()};var ot=function(){},st=function(e,t,n,i,a,r){this.b=e,this.i=t,this.f=n,this.a=i,this.g=a,this.c=r};e=st.prototype,e.X=function(){return this.b},e.sa=function(){return this.i},e.pa=function(){return this.f},e.ka=function(){return this.a},e.Y=function(){if(L(this.a)){var e=this.a.downloadURLs;return L(e)&&L(e[0])?e[0]:null}return null},e.ra=function(){return this.g},e.na=function(){return this.c};var lt=function(e,t,n,i,a,r){var o=this;this.O=e,this.c=t,this.o=n,this.f=a,this.i=void 0===r?null:r,this.u=i,this.l=0,this.G=this.w=!1,this.B=[],this.U=262144<this.f.a,this.b="running",this.a=this.A=this.g=null,this.m=1,this.s=function(e){o.a=null,o.m=1,"storage/canceled"===e.code?(o.w=!0,yt(o)):(o.g=e,bt(o,"error"))},this.N=function(e){o.a=null,"storage/canceled"===e.code?yt(o):(o.g=e,bt(o,"error"))},this.D=this.v=null,this.F=y(function(e,t){o.v=e,o.D=t,ut(o)}),this.F.then(null,function(){})},ct=function(e){var t=e.l;return function(n){vt(e,t+n)}},ut=function(e){"running"===e.b&&null===e.a&&(e.U?null===e.A?dt(e):e.w?ft(e):e.G?mt(e):pt(e):gt(e))},ht=function(e,t){H(e.c).then(function(n){switch(e.b){case"running":t(n);break;case"canceling":bt(e,"canceled");break;case"pausing":bt(e,"paused")}})},dt=function(e){ht(e,function(t){var n=Xe(e.c,e.o,e.u,e.f,e.i);e.a=Y(e.c,n,t),e.a.a().then(function(t){e.a=null,e.A=t,e.w=!1,yt(e)},e.s)})},ft=function(e){var t=e.A;ht(e,function(n){var i=Ge(e.c,e.o,t,e.f);e.a=Y(e.c,i,n),e.a.a().then(function(t){e.a=null,vt(e,t.current),e.w=!1,t.I&&(e.G=!0),yt(e)},e.s)})},pt=function(e){var t=262144*e.m,n=new qe(e.l,e.f.a),i=e.A;ht(e,function(a){var r;try{r=Qe(e.o,e.c,i,e.f,t,e.u,n,ct(e))}catch(t){return e.g=t,void bt(e,"error")}e.a=Y(e.c,r,a),e.a.a().then(function(t){33554432>262144*e.m&&(e.m*=2),e.a=null,vt(e,t.current),t.I?(e.i=t.metadata,bt(e,"success")):yt(e)},e.s)})},mt=function(e){ht(e,function(t){var n=ze(e.c,e.o,e.u);e.a=Y(e.c,n,t),e.a.a().then(function(t){e.a=null,e.i=t,bt(e,"success")},e.N)})},gt=function(e){ht(e,function(t){var n=Ve(e.c,e.o,e.u,e.f,e.i);e.a=Y(e.c,n,t),e.a.a().then(function(t){e.a=null,e.i=t,vt(e,e.f.a),bt(e,"success")},e.s)})},vt=function(e,t){var n=e.l;e.l=t,e.l!==n&&wt(e)},bt=function(e,t){if(e.b!==t)switch(t){case"canceling":case"pausing":e.b=t,null!==e.a&&e.a.cancel();break;case"running":var n="paused"===e.b;e.b=t,n&&(wt(e),ut(e));break;case"paused":e.b=t,wt(e);break;case"canceled":e.g=d(),e.b=t,wt(e);break;case"error":e.b=t,wt(e);break;case"success":e.b=t,wt(e)}},yt=function(e){switch(e.b){case"pausing":bt(e,"paused");break;case"canceling":bt(e,"canceled");break;case"running":ut(e)}};lt.prototype.C=function(){return new st(this.l,this.f.a,et(this.b),this.i,this,this.O)},lt.prototype.P=function(e,t,n,i){function a(e){try{return void o(e)}catch(e){}try{if(s(e),!(l(e.next)||l(e.error)||l(e.complete)))throw""}catch(e){throw"Expected a function or an Object with one of `next`, `error`, `complete` properties."}}function r(e){return function(t,n,i){null!==e&&ee("on",e,arguments);var a=new Le(t,n,i);return c.B.push(a),kt(c,a),function(){var e=c.B,t=e.indexOf(a);-1!==t&&e.splice(t,1)}}}var o=se().a,s=oe(null,!0).a;ee("on",[ie(function(){if("state_changed"!==e)throw"Expected one of the event types: [state_changed]."}),oe(a,!0),se(),se()],arguments);var c=this,u=[oe(function(e){if(null===e)throw"Expected a function or an Object with one of `next`, `error`, `complete` properties.";a(e)}),se(),se()];return l(t)||l(n)||l(i)?r(null)(t,n,i):r(u)},lt.prototype.then=function(e,t){return this.F.then(void 0===e?null:e,void 0===t?null:t)},lt.prototype.catch=function(e){return this.then(null,e)};var wt=function(e){_t(e),Array.prototype.slice.call(e.B).forEach(function(t){kt(e,t)})},_t=function(e){if(null!==e.v){var t=!0;switch(et(e.b)){case"success":le(e.v.bind(null,e.C()))();break;case"canceled":case"error":le(e.D.bind(null,e.g))();break;default:t=!1}t&&(e.v=null,e.D=null)}},kt=function(e,t){switch(et(e.b)){case"running":case"paused":null!==t.b&&le(t.b.bind(t,e.C()))();break;case"success":null!==t.a&&le(t.a.bind(t))();break;case"canceled":case"error":null!==t.error&&le(t.error.bind(t,e.g))();break;default:null!==t.error&&le(t.error.bind(t,e.g))()}};lt.prototype.T=function(){ee("resume",[],arguments);var e="paused"===this.b||"pausing"===this.b;return e&&bt(this,"running"),e},lt.prototype.R=function(){ee("pause",[],arguments);var e="running"===this.b;return e&&bt(this,"pausing"),e},lt.prototype.cancel=function(){ee("cancel",[],arguments);var e="running"===this.b||"pausing"===this.b;return e&&bt(this,"canceling"),e};var Ct=function(e,t){this.a=e,this.location=t instanceof M?t:P(t)};Ct.prototype.toString=function(){return ee("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path};var St=function(e,t){return new Ct(e,t)};e=Ct.prototype,e.J=function(e){ee("child",[ie()],arguments);var t=B(this.location.path,e);return St(this.a,new M(this.location.bucket,t))},e.ma=function(){var e;if(e=this.location.path,0==e.length)e=null;else{var t=e.lastIndexOf("/");e=-1===t?"":e.slice(0,t)}return null===e?null:St(this.a,new M(this.location.bucket,e))},e.oa=function(){return St(this.a,new M(this.location.bucket,""))},e.W=function(){return this.location.bucket},e.ha=function(){return this.location.path},e.la=function(){return V(this.location.path)},e.qa=function(){return this.a.m},e.aa=function(e,t){return ee("put",[ae(),new te(Z,!0)],arguments),Tt(this,"put"),new lt(this,this.a,this.location,G(),new je(e),t)},e.ba=function(e,t,n){ee("putString",[ie(),ie($e,!0),new te(Z,!0)],arguments),Tt(this,"putString");var i=Ie(L(t)?t:"raw",e),a=n?C(n):{};return!L(a.contentType)&&L(i.a)&&(a.contentType=i.a),new lt(this,this.a,this.location,G(),new je(i.data,!0),a)},e.Z=function(){ee("delete",[],arguments),Tt(this,"delete");var e=this;return H(this.a).then(function(t){var n=Ye(e.a,e.location);return Y(e.a,n,t).a()})},e.K=function(){ee("getMetadata",[],arguments),Tt(this,"getMetadata");var e=this;return H(this.a).then(function(t){var n=ze(e.a,e.location,G());return Y(e.a,n,t).a()})},e.ca=function(e){ee("updateMetadata",[new te(Z,void 0)],arguments),Tt(this,"updateMetadata");var t=this;return H(this.a).then(function(n){var i=t.a,a=t.location,r=e,o=G(),s=I(a),s=b+"/v0"+s,r=J(r,o),i=new S(s,"PATCH",Ue(i,o),i.c);return i.headers={"Content-Type":"application/json; charset=utf-8"},i.body=r,i.a=He(a),Y(t.a,i,n).a()})},e.$=function(){return ee("getDownloadURL",[],arguments),Tt(this,"getDownloadURL"),this.K().then(function(e){if(e=e.downloadURLs[0],L(e))return e;throw new u("no-download-url","The given file does not have any download URLs.")})};var Tt=function(e,t){if(""===e.location.path)throw new u("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},xt=function(e,t,n){this.a=new W(e,function(e,t){return new Ct(e,t)},A,this,t),this.c=e,l(n)?this.b=N(n):null!=this.a.bucket()&&(this.b=new M(this.a.bucket(),"")),this.f=new Dt(this)};e=xt.prototype,e.da=function(e){if(ee("ref",[ie(function(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null===this.b)throw Error("No Storage Bucket defined in Firebase Options.");var t=new Ct(this.a,this.b);return l(e)?t.J(e):t},e.ea=function(e){return ee("refFromURL",[ie(function(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{P(e)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Ct(this.a,e)},e.ja=function(){return this.a.b},e.ga=function(e){ee("setMaxUploadRetryTime",[re()],arguments),this.a.b=e},e.ia=function(){return this.a.c},e.fa=function(e){ee("setMaxOperationRetryTime",[re()],arguments),this.a.c=e},e.V=function(){return this.c},e.S=function(){return this.f};var Dt=function(e){this.a=e};Dt.prototype.b=function(){var e=this.a.a;e.f=!0,e.a=null,R(e.i)};var Et=function(e,t,n){Object.defineProperty(e,t,{get:n})};Ct.prototype.toString=Ct.prototype.toString,Ct.prototype.child=Ct.prototype.J,Ct.prototype.put=Ct.prototype.aa,Ct.prototype.putString=Ct.prototype.ba,Ct.prototype.delete=Ct.prototype.Z,Ct.prototype.getMetadata=Ct.prototype.K,Ct.prototype.updateMetadata=Ct.prototype.ca,Ct.prototype.getDownloadURL=Ct.prototype.$,Et(Ct.prototype,"parent",Ct.prototype.ma),Et(Ct.prototype,"root",Ct.prototype.oa),Et(Ct.prototype,"bucket",Ct.prototype.W),Et(Ct.prototype,"fullPath",Ct.prototype.ha),Et(Ct.prototype,"name",Ct.prototype.la),Et(Ct.prototype,"storage",Ct.prototype.qa),xt.prototype.ref=xt.prototype.da,xt.prototype.refFromURL=xt.prototype.ea,Et(xt.prototype,"maxOperationRetryTime",xt.prototype.ia),xt.prototype.setMaxOperationRetryTime=xt.prototype.fa,Et(xt.prototype,"maxUploadRetryTime",xt.prototype.ja),xt.prototype.setMaxUploadRetryTime=xt.prototype.ga,Et(xt.prototype,"app",xt.prototype.V),Et(xt.prototype,"INTERNAL",xt.prototype.S),Dt.prototype.delete=Dt.prototype.b,xt.prototype.capi_=function(e){b=e},lt.prototype.on=lt.prototype.P,lt.prototype.resume=lt.prototype.T,lt.prototype.pause=lt.prototype.R,lt.prototype.cancel=lt.prototype.cancel,lt.prototype.then=lt.prototype.then,lt.prototype.catch=lt.prototype.catch,Et(lt.prototype,"snapshot",lt.prototype.C),Et(st.prototype,"bytesTransferred",st.prototype.X),
Et(st.prototype,"totalBytes",st.prototype.sa),Et(st.prototype,"state",st.prototype.pa),Et(st.prototype,"metadata",st.prototype.ka),Et(st.prototype,"downloadURL",st.prototype.Y),Et(st.prototype,"task",st.prototype.ra),Et(st.prototype,"ref",st.prototype.na),Je.STATE_CHANGED="state_changed",Ze.RUNNING="running",Ze.PAUSED="paused",Ze.SUCCESS="success",Ze.CANCELED="canceled",Ze.ERROR="error",Ae.RAW="raw",Ae.BASE64="base64",Ae.BASE64URL="base64url",Ae.DATA_URL="data_url",function(){function e(e,t,n){return new xt(e,new ot,n)}var t={TaskState:Ze,TaskEvent:Je,StringFormat:Ae,Storage:xt,Reference:Ct};if(void 0===firebase)throw Error("Cannot install Firebase Storage - be sure to load firebase-app.js first.");firebase.INTERNAL.registerService("storage",e,t,void 0,!0)}()}.call(this);var HuEmoji=function(e,t,n,i){if(this.DEFAULTS={pages:["People","Nature","Food","Activity","Travel","Objects","Symbols","Flags"],search:!1,preview:!1,width:"325px",height:"200px",positionY:"top",positionX:"right",offsetY:0,offsetX:0,spritesUrl:""},this.options=this.extendDefaults(this.DEFAULTS,i),"object"!=typeof e)throw new TypeError("input must be an object, type "+typeof e+" was given instead.");if("object"!=typeof t)throw new TypeError("trigger must be an object, type "+typeof t+" was given instead.");if("object"!=typeof n)throw new TypeError("attach must be an object, type "+typeof n+" was given instead.");if("object"!=typeof i)throw new TypeError("options must be an object, type "+typeof i+" was given instead.");if(this.options.pages.map(function(e,t){if(HuEmoji.emojiPages.indexOf(e)<0)throw new TypeError('options.page "'+this.options.pages[t]+"\" doesn't exist. Try these: "+HuEmoji.emojiPages)}),"boolean"!=typeof this.options.search)throw new TypeError("options.search must be a boolean, type "+typeof this.options.search+" was given instead.");if("boolean"!=typeof this.options.preview)throw new TypeError("options.preview must be a boolean, type "+typeof this.options.preview+" was given instead.");if(HuEmoji.positionYValues.indexOf(this.options.positionY)<0)throw new TypeError('options.positionY value "'+this.options.positionY+'" not available, try these: '+HuEmoji.positionYValues);if(HuEmoji.positionXValues.indexOf(this.options.positionX)<0)throw new TypeError('options.positionX value "'+this.options.positionX+'" not available, try these: '+HuEmoji.positionXValues);if("number"!=typeof this.options.offsetY||"number"!=typeof this.options.offsetX)throw new TypeError("options.offset must be a number");if("string"!=typeof this.options.spritesUrl)throw new TypeError("options.spritesUrl must be a string, type "+typeof i+" was given instead.");this.input=e,this.trigger=t,this.attach=n,this.container=null,this.tabs=null,this.search=null,this.pagesScroll=null,this.checkScroll=!0,this.preview=null,this.init()};HuEmoji.VERSION="1.0.1",HuEmoji.positionYValues=["top","bottom"],HuEmoji.positionXValues=["left","center","right"],HuEmoji.emojiPages=["People","Nature","Food","Activity","Travel","Objects","Symbols","Flags"],HuEmoji.contamination=15,HuEmoji.prototype.extendDefaults=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(e[n]=t[n]);return e},HuEmoji.prototype.toggle=function(e){if(!this.container.contains(e.target)){!0===("block"===this.container.style.display)?this.hide():this.show()}},HuEmoji.prototype.show=function(){this.container.style.display="block",this.options.search&&this.search.focus(),null==this.pagesScroll&&(this.pagesScroll=this.getAllPagesPosition())},HuEmoji.prototype.hide=function(){this.container.style.display="none",this.search&&this.cancelSearch()},HuEmoji.prototype.globalHide=function(e){this.container.contains(e.target)||this.trigger.contains(e.target)||"block"==this.container.style.display&&this.hide()},HuEmoji.prototype.setContainerPosition=function(){var e="top"==this.options.positionY,t="bottom"==this.options.positionY,n="left"==this.options.positionX,i="center"==this.options.positionX,a="right"==this.options.positionX;e?this.container.style.bottom=this.options.offsetY+"px":t&&(this.container.style.top=this.options.offsetY+"px"),n?this.container.style.right=this.options.offsetX+"px":i?(this.container.style.left=0,this.container.style.right=0,this.container.style.margin="0 auto"):a&&(this.container.style.left=this.options.offsetX+"px")},HuEmoji.prototype.updateContainerPosition=function(e,t){var n="top"==this.options.positionY,i="bottom"==this.options.positionY,a="left"==this.options.positionX,r="right"==this.options.positionX;n?this.container.style.bottom=this.options.offsetY+e+"px":i&&(this.container.style.top=this.options.offsetY+e+"px"),a?this.container.style.right=this.options.offsetX+t+"px":r&&(this.container.style.left=this.options.offsetX+t+"px")},HuEmoji.prototype.selectPage=function(e){this.search&&this.cancelSearch();var t=e.target?e.target.parentNode.getAttribute("data-tab")||e.target.getAttribute("data-tab"):e;this.pageClassHandler(t),this.checkScroll=!1,this.container.querySelector("section").scrollTop=this.getPagePosition(t)},HuEmoji.prototype.pageClassHandler=function(e){for(var t=this.tabs.querySelectorAll("li.hu-active"),n=0;n<t.length;n++)t[n].className=t[n].className.replace(" hu-active","");this.tabs.querySelector('[data-tab="'+e+'"]').className+=" hu-active"},HuEmoji.prototype.scrollListener=function(e){if(this.checkScroll){this.checkScroll=!1;var t=e.target.scrollTop,n=this.getPageFromScroll(t);this.pageClassHandler(n)}setTimeout(function(){this.checkScroll=!0},200)},HuEmoji.prototype.getAllPagesPosition=function(){var e=this.options.pages,t=[];for(page in e)position=this.container.querySelector("#page_"+e[page]).offsetTop,!0===this.options.search?position-=91:position-=49,t.push(position);return t},HuEmoji.prototype.getPagePosition=function(e){var t=this.container.querySelector("#page_"+e).offsetTop;return(t-=!0===this.options.search?91:49)+1},HuEmoji.prototype.getPageFromScroll=function(e){for(var t=this.options.pages,n=null,i=t.length-1;i>-1;i--)if(e>this.pagesScroll[i]){n=t[i];break}return null!==n?n:t[0]},HuEmoji.prototype.searchListener=function(e){var t=e.target.value.toLowerCase(),n=[];if(""!=t){var n=this.getObjectsFromJSON(HuEmoji.EMOJIS,t);this.showSearchPage(),this.fillSearchPage(n)}else this.hideSearchPage()},HuEmoji.prototype.showSearchPage=function(){for(var e=0;e<this.options.pages.length;e++){var t=this.container.querySelector("#page_"+this.options.pages[e]);-1==t.className.indexOf("hu-hidden")&&(t.className+=" hu-hidden")}var n=this.container.querySelector("#page_Search");-1!=n.className.indexOf("hu-hidden")&&(n.className=n.className.replace(" hu-hidden",""))},HuEmoji.prototype.hideSearchPage=function(){for(var e=0;e<this.options.pages.length;e++){var t=this.container.querySelector("#page_"+this.options.pages[e]);t.className.indexOf("hu-hidden")>-1&&(t.className=t.className.replace(" hu-hidden",""))}var n=this.container.querySelector("#page_Search");n.className.indexOf("hu-hidden")>-1||(n.className+=" hu-hidden")},HuEmoji.prototype.fillSearchPage=function(e){var t=this.container.querySelector("#page_Search .hu-emoji-list-items");t.innerHTML="";for(var n in e){var i=document.createElement("span");i.className="hu-emoji",i.textContent=e[n].value,i.setAttribute("data-name",e[n].name),i.setAttribute("data-value",e[n].value),i.addEventListener("click",this.pickEmoji.bind(this)),i.addEventListener("mouseenter",this.previewOn.bind(this)),i.addEventListener("mouseleave",this.previewOff.bind(this));var a=document.createElement("div");a.className="hu-emoji-item",a.appendChild(i),t.appendChild(a)}this.alignmentTrick(t,HuEmoji.contamination)},HuEmoji.prototype.cancelSearch=function(){this.search.value="";var e=document.createEvent("HTMLEvents");e.initEvent("keyup",!1,!0),this.search.dispatchEvent(e)},HuEmoji.prototype.alignmentTrick=function(e,t){for(var n=0;n<t;n++){var i=document.createElement("div");i.className="hu-emoji-item",e.appendChild(i)}},HuEmoji.prototype.getObjectsFromJSON=function(e,t){var n=[];for(var i in e)e.hasOwnProperty(i)&&("object"==typeof e[i]?n=n.concat(this.getObjectsFromJSON(e[i],t)):e[i].indexOf(t)>-1&&n.push(e));return n},HuEmoji.prototype.pickEmoji=function(e){var t=e.target.getAttribute("data-value");this.insertEmoji(t,this.input),this.input.focus()},HuEmoji.prototype.insertEmoji=function(e,t){var n,i,a=e.length;if(document.selection){t.focus();document.selection.createRange().text=e}else if(t.selectionStart||"0"==t.selectionStart){var n=t.selectionStart,i=t.selectionEnd;t.value=t.value.substring(0,n)+e+t.value.substring(i,t.value.length),t.focus(),t.setSelectionRange(n+a,i+a)}else t.value+=e},HuEmoji.prototype.previewOn=function(e){var t=this.preview.querySelector(".hu-emoji-preview-image"),n=this.preview.querySelector(".hu-emoji-preview-title"),i=this.preview.querySelector(".hu-emoji-preview-name"),a=e.target||e,r=a.getAttribute("data-name"),o=r.slice(1,r.length-1);t.innerHTML=a.outerHTML,n.textContent=o,i.textContent=r},HuEmoji.prototype.previewOff=function(){var e=this.preview.querySelector(".hu-emoji-preview-image"),t=this.preview.querySelector(".hu-emoji-preview-title"),n=this.preview.querySelector(".hu-emoji-preview-name");e.innerHTML="",t.innerHTML="",n.innerHTML=""},HuEmoji.prototype.init=function(){var e,t,n,i,a,r,o;if(this.container=document.createElement("div"),this.container.className="hu-emoji-container",this.container.style.display="none",this.options.width&&(this.container.style.width=this.options.width),this.options.height&&(this.container.style.height=this.options.height),this.setContainerPosition(),e=document.createElement("div"),e.className="hu-emoji-wrapper",t=document.createElement("header"),n=document.createElement("div"),n.className="hu-emoji-types",this.tabs=n,n.appendChild(this.getEmojiTopbar()),t.appendChild(n),!0===this.options.search){i=document.createElement("div"),i.className="hu-emoji-search";var s=document.createElement("input");s.setAttribute("placeholder","Search emojis"),s.addEventListener("keyup",this.searchListener.bind(this)),s.addEventListener("paste",this.searchListener.bind(this)),i.appendChild(s),this.search=s,t.appendChild(i)}a=document.createElement("section"),a.addEventListener("scroll",this.scrollListener.bind(this));var l=document.createElement("div");l.className="hu-emoji-list",a.appendChild(l);for(var c in this.options.pages)l.appendChild(this.getEmojiPage(this.options.pages[c]));if(!0===this.options.search&&l.appendChild(this.getSearchPage()),r=document.createElement("footer"),!0===this.options.preview){o=document.createElement("div"),o.className="hu-emoji-preview";var u=document.createElement("div");u.className="hu-emoji-preview-image";var h=document.createElement("div");h.className="hu-emoji-preview-info";var d=document.createElement("h4");d.className="hu-emoji-preview-title";var f=document.createElement("p");f.className="hu-emoji-preview-name",h.appendChild(d),h.appendChild(f),o.appendChild(u),o.appendChild(h),this.preview=o,r.appendChild(o)}e.appendChild(t),e.appendChild(a),e.appendChild(r),this.container.appendChild(e),this.attach.appendChild(this.container),this.selectPage(this.options.pages[0]),this.trigger.addEventListener("click",this.toggle.bind(this)),document.addEventListener("click",this.globalHide.bind(this))},HuEmoji.prototype.getEmojiPage=function(e){var t=document.createElement("div");t.className="hu-emoji-list-page",t.id="page_"+e;var n=document.createElement("h3");n.className="hu-emoji-list-type",n.textContent=e,t.appendChild(n);var i=document.createElement("div");i.className="hu-emoji-list-items";for(var a in HuEmoji.EMOJIS[e]){var r=document.createElement("span");r.className="hu-emoji",r.textContent=HuEmoji.EMOJIS[e][a].value,r.setAttribute("data-name",HuEmoji.EMOJIS[e][a].name),r.setAttribute("data-value",HuEmoji.EMOJIS[e][a].value),r.addEventListener("click",this.pickEmoji.bind(this)),r.addEventListener("mouseenter",this.previewOn.bind(this)),r.addEventListener("mouseleave",this.previewOff.bind(this));var o=document.createElement("div");o.className="hu-emoji-item",o.appendChild(r),i.appendChild(o)}return this.alignmentTrick(i,HuEmoji.contamination),t.appendChild(i),t},HuEmoji.prototype.getSearchPage=function(){var e=document.createElement("div");e.className="hu-emoji-list-page hu-hidden",e.id="page_Search";var t=document.createElement("h3");t.className="hu-emoji-list-type",t.textContent="Search results",e.appendChild(t);var n=document.createElement("div");return n.className="hu-emoji-list-items",e.appendChild(n),e},HuEmoji.prototype.getEmojiTopbar=function(){var e=document.createElement("ul");for(var t in this.options.pages){var n=document.createElement("li");n.setAttribute("data-tab",this.options.pages[t]),n.addEventListener("click",this.selectPage.bind(this));var i=document.createElement("div");i.className="icon hu-tab-"+this.options.pages[t],i.style.backgroundImage="url("+this.options.spritesUrl+")",n.appendChild(i),e.appendChild(n)}return e},HuEmoji.EMOJIS={People:[{name:":grinning:",value:"😀"},{name:":grin:",value:"😁"},{name:":joy:",value:"😂"},{name:":smiley:",value:"😃"},{name:":smile:",value:"😄"},{name:":sweat_smile:",value:"😅"},{name:":laughing:",value:"😆"},{name:":innocent:",value:"😇"},{name:":smiling_imp:",value:"😈"},{name:":wink:",value:"😉"},{name:":blush:",value:"😊"},{name:":yum:",value:"😋"},{name:":relieved:",value:"😌"},{name:":heart_eyes:",value:"😍"},{name:":sunglasses:",value:"😎"},{name:":smirk:",value:"😏"},{name:":neutral_face:",value:"😐"},{name:":expressionless:",value:"😑"},{name:":unamused:",value:"😒"},{name:":sweat:",value:"😓"},{name:":pensive:",value:"😔"},{name:":confused:",value:"😕"},{name:":confounded:",value:"😖"},{name:":kissing:",value:"😗"},{name:":kissing_heart:",value:"😘"},{name:":kissing_smiling_eyes:",value:"😙"},{name:":kissing_closed_eyes:",value:"😚"},{name:":stuck_out_tongue:",value:"😛"},{name:":stuck_out_tongue_winking_eye:",value:"😜"},{name:":stuck_out_tongue_closed_eyes:",value:"😝"},{name:":disappointed:",value:"😞"},{name:":worried:",value:"😟"},{name:":angry:",value:"😠"},{name:":rage:",value:"😡"},{name:":cry:",value:"😢"},{name:":persevere:",value:"😣"},{name:":triumph:",value:"😤"},{name:":disappointed_relieved:",value:"😥"},{name:":frowning:",value:"😦"},{name:":anguished:",value:"😧"},{name:":fearful:",value:"😨"},{name:":weary:",value:"😩"},{name:":sleepy:",value:"😪"},{name:":tired_face:",value:"😫"},{name:":grimacing:",value:"😬"},{name:":sob:",value:"😭"},{name:":open_mouth:",value:"😮"},{name:":hushed:",value:"😯"},{name:":cold_sweat:",value:"😰"},{name:":scream:",value:"😱"},{name:":astonished:",value:"😲"},{name:":flushed:",value:"😳"},{name:":sleeping:",value:"😴"},{name:":dizzy_face:",value:"😵"},{name:":no_mouth:",value:"😶"},{name:":mask:",value:"😷"},{name:":smile_cat:",value:"😸"},{name:":joy_cat:",value:"😹"},{name:":smiley_cat:",value:"😺"},{name:":heart_eyes_cat:",value:"😻"},{name:":smirk_cat:",value:"😼"},{name:":kissing_cat:",value:"😽"},{name:":pouting_cat:",value:"😾"},{name:":crying_cat_face:",value:"😿"},{name:":scream_cat:",value:"🙀"},{name:":slightly_frowning_face:",value:"🙁"},{name:":slightly_smiling_face:",value:"🙂"},{name:":upside_down_face:",value:"🙃"},{name:":face_with_rolling_eyes:",value:"🙄"},{name:":no_good:",value:"🙅"},{name:":ok_woman:",value:"🙆"},{name:":bow:",value:"🙇"},{name:":see_no_evil:",value:"🙈"},{name:":hear_no_evil:",value:"🙉"},{name:":speak_no_evil:",value:"🙊"},{name:":raising_hand:",value:"🙋"},{name:":raised_hands:",value:"🙌"},{name:":person_frowning:",value:"🙍"},{name:":person_with_pouting_face:",value:"🙎"},{name:":pray:",value:"🙏"},{name:":rowboat:",value:"🚣"},{name:":bicyclist:",value:"🚴"},{name:":mountain_bicyclist:",value:"🚵"},{name:":walking:",value:"🚶"},{name:":shopping_bags:",value:"🛍"},{name:":zipper_mouth_face:",value:"🤐"},{name:":money_mouth_face:",value:"🤑"},{name:":face_with_thermometer:",value:"🤒"},{name:":nerd_face:",value:"🤓"},{name:":thinking_face:",value:"🤔"},{name:":face_with_head_bandage:",value:"🤕"},{name:":robot_face:",value:"🤖"},{name:":hugging_face:",value:"🤗"},{name:":the_horns:",value:"🤘"},{name:":man-man-boy:",value:"👨‍👨‍👦"},{name:":man-man-boy-boy:",value:"👨‍👨‍👦‍👦"},{name:":man-man-girl:",value:"👨‍👨‍👧"},{name:":man-man-girl-boy:",value:"👨‍👨‍👧‍👦"},{name:":man-man-girl-girl:",value:"👨‍👨‍👧‍👧"},{name:":man-woman-boy-boy:",value:"👨‍👩‍👦‍👦"},{name:":man-woman-girl:",value:"👨‍👩‍👧"},{name:":man-woman-girl-boy:",value:"👨‍👩‍👧‍👦"},{name:":man-woman-girl-girl:",value:"👨‍👩‍👧‍👧"},{name:":man-heart-man:",value:"👨‍❤️‍👨"},{name:":man-kiss-man:",value:"👨‍❤️‍💋‍👨"},{name:":woman-woman-boy:",value:"👩‍👩‍👦"},{name:":woman-woman-boy-boy:",value:"👩‍👩‍👦‍👦"},{name:":woman-woman-girl:",value:"👩‍👩‍👧"},{name:":woman-woman-girl-boy:",value:"👩‍👩‍👧‍👦"},{name:":woman-woman-girl-girl:",value:"👩‍👩‍👧‍👧"},{name:":woman-heart-woman:",value:"👩‍❤️‍👩"},{name:":woman-kiss-woman:",value:"👩‍❤️‍💋‍👩"},{name:":umbrella:",value:"☂"},{name:":umbrella_with_rain_drops:",value:"☔"},{name:":point_up:",value:"☝"},{name:":skull_and_crossbones:",value:"☠"},{name:":white_frowning_face:",value:"☹"},{name:":relaxed:",value:"☺"},{name:":spades:",value:"♠"},{name:":clubs:",value:"♣"},{name:":hearts:",value:"♥"},{name:":diamonds:",value:"♦"},{name:":helmet_with_white_cross:",value:"⛑"},{name:":umbrella_on_ground:",value:"⛱"},{name:":skier:",value:"⛷"},{name:":person_with_ball:",value:"⛹"},{name:":fist:",value:"✊"},{name:":hand:",value:"✋"},{name:":v:",value:"✌"},{name:":writing_hand:",value:"✍"},{name:":sparkles:",value:"✨"},{name:":mahjong:",value:"🀄"},{name:":black_joker:",value:"🃏"},{name:":cyclone:",value:"🌀"},{name:":closed_umbrella:",value:"🌂"},{name:":stars:",value:"🌠"},{name:":thermometer:",value:"🌡"},{name:":jack_o_lantern:",value:"🎃"},{name:":christmas_tree:",value:"🎄"},{name:":santa:",value:"🎅"},{name:":fireworks:",value:"🎆"},{name:":sparkler:",value:"🎇"},{name:":school_satchel:",value:"🎒"},{name:":mortar_board:",value:"🎓"},{name:":art:",value:"🎨"},{name:":tophat:",value:"🎩"},{name:":circus_tent:",value:"🎪"},{name:":performing_arts:",value:"🎭"},{name:":slot_machine:",value:"🎰"},{name:":flower_playing_cards:",value:"🎴"},{name:":snowboarder:",value:"🏂"},{name:":runner:",value:"🏃"},{name:":surfer:",value:"🏄"},{name:":horse_racing:",value:"🏇"},{name:":swimmer:",value:"🏊"},{name:":weight_lifter:",value:"🏋"},{name:":golfer:",value:"🏌"},{name:":racing_motorcycle:",value:"🏍"},{name:":racing_car:",value:"🏎"},{name:":amphora:",value:"🏺"},{name:":skin-tone-2:",value:"🏻"},{name:":skin-tone-3:",value:"🏼"},{name:":skin-tone-4:",value:"🏽"},{name:":skin-tone-5:",value:"🏾"},{name:":skin-tone-6:",value:"🏿"},{name:":eyes:",value:"👀"},{name:":eye:",value:"👁"},{name:":ear:",value:"👂"},{name:":nose:",value:"👃"},{name:":lips:",value:"👄"},{name:":tongue:",value:"👅"},{name:":point_up_2:",value:"👆"},{name:":point_down:",value:"👇"},{name:":point_left:",value:"👈"},{name:":point_right:",value:"👉"},{name:":facepunch:",value:"👊"},{name:":wave:",value:"👋"},{name:":ok_hand:",value:"👌"},{name:":+1:",value:"👍"},{name:":-1:",value:"👎"},{name:":clap:",value:"👏"},{name:":open_hands:",value:"👐"},{name:":crown:",value:"👑"},{name:":womans_hat:",value:"👒"},{name:":eyeglasses:",value:"👓"},{name:":necktie:",value:"👔"},{name:":shirt:",value:"👕"},{name:":jeans:",value:"👖"},{name:":dress:",value:"👗"},{name:":kimono:",value:"👘"},{name:":bikini:",value:"👙"},{name:":womans_clothes:",value:"👚"},{name:":purse:",value:"👛"},{name:":handbag:",value:"👜"},{name:":pouch:",value:"👝"},{name:":mans_shoe:",value:"👞"},{name:":athletic_shoe:",value:"👟"},{name:":high_heel:",value:"👠"},{name:":sandal:",value:"👡"},{name:":boot:",value:"👢"},{name:":footprints:",value:"👣"},{name:":bust_in_silhouette:",value:"👤"},{name:":busts_in_silhouette:",value:"👥"},{name:":boy:",value:"👦"},{name:":girl:",value:"👧"},{name:":man:",value:"👨"},{name:":woman:",value:"👩"},{name:":family:",value:"👪"},{name:":couple:",value:"👫"},{name:":two_men_holding_hands:",value:"👬"},{name:":two_women_holding_hands:",value:"👭"},{name:":cop:",value:"👮"},{name:":dancers:",value:"👯"},{name:":bride_with_veil:",value:"👰"},{name:":person_with_blond_hair:",value:"👱"},{name:":man_with_gua_pi_mao:",value:"👲"},{name:":man_with_turban:",value:"👳"},{name:":older_man:",value:"👴"},{name:":older_woman:",value:"👵"},{name:":baby:",value:"👶"},{name:":construction_worker:",value:"👷"},{name:":princess:",value:"👸"},{name:":japanese_ogre:",value:"👹"},{name:":japanese_goblin:",value:"👺"},{name:":ghost:",value:"👻"},{name:":angel:",value:"👼"},{name:":alien:",value:"👽"},{name:":space_invader:",value:"👾"},{name:":imp:",value:"👿"},{name:":skull:",value:"💀"},{name:":information_desk_person:",value:"💁"},{name:":guardsman:",value:"💂"},{name:":dancer:",value:"💃"},{name:":lipstick:",value:"💄"},{name:":nail_care:",value:"💅"},{name:":massage:",value:"💆"},{name:":haircut:",value:"💇"},{name:":barber:",value:"💈"},{name:":kiss:",value:"💋"},{name:":love_letter:",value:"💌"},{name:":ring:",value:"💍"},{name:":gem:",value:"💎"},{name:":couplekiss:",value:"💏"},{name:":couple_with_heart:",value:"💑"},{name:":anger:",value:"💢"},{name:":bomb:",value:"💣"},{name:":zzz:",value:"💤"},{name:":boom:",value:"💥"},{name:":sweat_drops:",value:"💦"},{name:":dash:",value:"💨"},{name:":hankey:",value:"💩"},{name:":muscle:",value:"💪"},{name:":dizzy:",value:"💫"},{name:":currency_exchange:",value:"💱"},{name:":heavy_dollar_sign:",value:"💲"},{name:":chart:",value:"💹"},{name:":prayer_beads:",value:"📿"},{name:":hole:",value:"🕳"},{name:":man_in_business_suit_levitating:",value:"🕴"},{name:":sleuth_or_spy:",value:"🕵"},{name:":dark_sunglasses:",value:"🕶"},{name:":raised_hand_with_fingers_splayed:",value:"🖐"},{name:":middle_finger:",value:"🖕"},{name:":spock-hand:",value:"🖖"},{name:":frame_with_picture:",value:"🖼"},{name:":speaking_head_in_silhouette:",value:"🗣"}],Nature:[{name:":sunny:",value:"☀"},{name:":cloud:",value:"☁"},{name:":snowman:",value:"☃"},{name:":comet:",value:"☄"},{name:":shamrock:",value:"☘"},{name:":zap:",value:"⚡"},{name:":snowman_without_snow:",value:"⛄"},{name:":partly_sunny:",value:"⛅"},{name:":thunder_cloud_and_rain:",value:"⛈"},{name:":snowflake:",value:"❄"},{name:":star:",value:"⭐"},{name:":rainbow:",value:"🌈"},{name:":ocean:",value:"🌊"},{name:":earth_africa:",value:"🌍"},{name:":earth_americas:",value:"🌎"},{name:":earth_asia:",value:"🌏"},{name:":new_moon:",value:"🌑"},{name:":waxing_crescent_moon:",value:"🌒"},{name:":first_quarter_moon:",value:"🌓"},{name:":moon:",value:"🌔"},{name:":full_moon:",value:"🌕"},{name:":waning_gibbous_moon:",value:"🌖"},{name:":last_quarter_moon:",value:"🌗"},{name:":waning_crescent_moon:",value:"🌘"},{name:":crescent_moon:",value:"🌙"},{name:":new_moon_with_face:",value:"🌚"},{name:":first_quarter_moon_with_face:",value:"🌛"},{name:":last_quarter_moon_with_face:",value:"🌜"},{name:":full_moon_with_face:",value:"🌝"},{name:":sun_with_face:",value:"🌞"},{name:":star2:",value:"🌟"},{name:":mostly_sunny:",value:"🌤"},{name:":barely_sunny:",value:"🌥"},{name:":partly_sunny_rain:",value:"🌦"},{name:":rain_cloud:",value:"🌧"},{name:":snow_cloud:",value:"🌨"},{name:":lightning:",value:"🌩"},{name:":tornado:",value:"🌪"},{name:":fog:",value:"🌫"},{name:":wind_blowing_face:",value:"🌬"},{name:":seedling:",value:"🌱"},{name:":evergreen_tree:",value:"🌲"},{name:":deciduous_tree:",value:"🌳"},{name:":palm_tree:",value:"🌴"},{name:":cactus:",value:"🌵"},{name:":tulip:",value:"🌷"},{name:":cherry_blossom:",value:"🌸"},{name:":rose:",value:"🌹"},{name:":hibiscus:",value:"🌺"},{name:":sunflower:",value:"🌻"},{name:":blossom:",value:"🌼"},{name:":ear_of_rice:",value:"🌾"},{name:":herb:",value:"🌿"},{name:":four_leaf_clover:",value:"🍀"},{name:":maple_leaf:",value:"🍁"},{name:":fallen_leaf:",value:"🍂"},{name:":leaves:",value:"🍃"},{name:":rosette:",value:"🏵"},{name:":rat:",value:"🐀"},{name:":mouse2:",value:"🐁"},{name:":ox:",value:"🐂"},{name:":water_buffalo:",value:"🐃"},{name:":cow2:",value:"🐄"},{name:":tiger2:",value:"🐅"},{name:":leopard:",value:"🐆"},{name:":rabbit2:",value:"🐇"},{name:":cat2:",value:"🐈"},{name:":dragon:",value:"🐉"},{name:":crocodile:",value:"🐊"},{name:":whale2:",value:"🐋"},{name:":snail:",value:"🐌"},{name:":snake:",value:"🐍"},{name:":racehorse:",value:"🐎"},{name:":ram:",value:"🐏"},{name:":goat:",value:"🐐"},{name:":sheep:",value:"🐑"},{name:":monkey:",value:"🐒"},{name:":rooster:",value:"🐓"},{name:":chicken:",value:"🐔"},{name:":dog2:",value:"🐕"},{name:":pig2:",value:"🐖"},{name:":boar:",value:"🐗"},{name:":elephant:",value:"🐘"},{name:":octopus:",value:"🐙"},{name:":shell:",value:"🐚"},{name:":bug:",value:"🐛"},{name:":ant:",value:"🐜"},{name:":bee:",value:"🐝"},{name:":beetle:",value:"🐞"},{name:":fish:",value:"🐟"},{name:":tropical_fish:",value:"🐠"},{name:":blowfish:",value:"🐡"},{name:":turtle:",value:"🐢"},{name:":hatching_chick:",value:"🐣"},{name:":baby_chick:",value:"🐤"},{name:":hatched_chick:",value:"🐥"},{name:":bird:",value:"🐦"},{name:":penguin:",value:"🐧"},{name:":koala:",value:"🐨"},{name:":poodle:",value:"🐩"},{name:":dromedary_camel:",value:"🐪"},{name:":camel:",value:"🐫"},{name:":dolphin:",value:"🐬"},{name:":mouse:",value:"🐭"},{name:":cow:",value:"🐮"},{name:":tiger:",value:"🐯"},{name:":rabbit:",value:"🐰"},{name:":cat:",value:"🐱"},{name:":dragon_face:",value:"🐲"},{name:":whale:",value:"🐳"},{name:":horse:",value:"🐴"},{name:":monkey_face:",value:"🐵"},{name:":dog:",value:"🐶"},{name:":pig:",value:"🐷"},{name:":frog:",value:"🐸"},{name:":hamster:",value:"🐹"},{name:":wolf:",value:"🐺"},{name:":bear:",value:"🐻"},{name:":panda_face:",value:"🐼"},{name:":pig_nose:",value:"🐽"},{name:":feet:",value:"🐾"},{name:":chipmunk:",value:"🐿"},{name:":bouquet:",value:"💐"},{name:":droplet:",value:"💧"},{name:":white_flower:",value:"💮"},{name:":fire:",value:"🔥"},{name:":dove_of_peace:",value:"🕊"},{name:":spider:",value:"🕷"},{name:":spider_web:",value:"🕸"},{name:":crab:",value:"🦀"},{name:":lion_face:",value:"🦁"},{name:":scorpion:",value:"🦂"},{name:":turkey:",value:"🦃"},{name:":unicorn_face:",value:"🦄"}],Food:[{name:":coffee:",value:"☕"},{name:":hotdog:",value:"🌭"},{name:":taco:",value:"🌮"},{name:":burrito:",value:"🌯"},{name:":chestnut:",value:"🌰"},{name:":hot_pepper:",value:"🌶"},{name:":corn:",value:"🌽"},{name:":mushroom:",value:"🍄"},{name:":tomato:",value:"🍅"},{name:":eggplant:",value:"🍆"},{name:":grapes:",value:"🍇"},{name:":melon:",value:"🍈"},{name:":watermelon:",value:"🍉"},{name:":tangerine:",value:"🍊"},{name:":lemon:",value:"🍋"},{name:":banana:",value:"🍌"},{name:":pineapple:",value:"🍍"},{name:":apple:",value:"🍎"},{name:":green_apple:",value:"🍏"},{name:":pear:",value:"🍐"},{name:":peach:",value:"🍑"},{name:":cherries:",value:"🍒"},{name:":strawberry:",value:"🍓"},{name:":hamburger:",value:"🍔"},{name:":pizza:",value:"🍕"},{name:":meat_on_bone:",value:"🍖"},{name:":poultry_leg:",value:"🍗"},{name:":rice_cracker:",value:"🍘"},{name:":rice_ball:",value:"🍙"},{name:":rice:",value:"🍚"},{name:":curry:",value:"🍛"},{name:":ramen:",value:"🍜"},{name:":spaghetti:",value:"🍝"},{name:":bread:",value:"🍞"},{name:":fries:",value:"🍟"},{name:":sweet_potato:",value:"🍠"},{name:":dango:",value:"🍡"},{name:":oden:",value:"🍢"},{name:":sushi:",value:"🍣"},{name:":fried_shrimp:",value:"🍤"},{name:":fish_cake:",value:"🍥"},{name:":icecream:",value:"🍦"},{name:":shaved_ice:",value:"🍧"},{name:":ice_cream:",value:"🍨"},{name:":doughnut:",value:"🍩"},{name:":cookie:",value:"🍪"},{name:":chocolate_bar:",value:"🍫"},{name:":candy:",value:"🍬"},{name:":lollipop:",value:"🍭"},{name:":custard:",value:"🍮"},{name:":honey_pot:",value:"🍯"},{name:":cake:",value:"🍰"},{name:":bento:",value:"🍱"},{name:":stew:",value:"🍲"},{name:":egg:",value:"🍳"},{name:":fork_and_knife:",value:"🍴"},{name:":tea:",value:"🍵"},{name:":sake:",value:"🍶"},{name:":wine_glass:",value:"🍷"},{name:":cocktail:",value:"🍸"},{name:":tropical_drink:",value:"🍹"},{name:":beer:",value:"🍺"},{name:":beers:",value:"🍻"},{name:":baby_bottle:",value:"🍼"},{name:":knife_fork_plate:",value:"🍽"},{name:":champagne:",value:"🍾"},{name:":popcorn:",value:"🍿"},{name:":birthday:",value:"🎂"},{name:":hocho:",value:"🔪"},{name:":cheese_wedge:",value:"🧀"}],Activity:[{name:":soccer:",value:"⚽"},{name:":baseball:",value:"⚾"},{name:":golf:",value:"⛳"},{name:":ice_skate:",value:"⛸"},{name:":medal:",value:"🎖"},{name:":fishing_pole_and_fish:",value:"🎣"},{name:":video_game:",value:"🎮"},{name:":dart:",value:"🎯"},{name:":8ball:",value:"🎱"},{name:":game_die:",value:"🎲"},{name:":bowling:",value:"🎳"},{name:":running_shirt_with_sash:",value:"🎽"},{name:":tennis:",value:"🎾"},{name:":ski:",value:"🎿"},{name:":basketball:",value:"🏀"},{name:":sports_medal:",value:"🏅"},{name:":trophy:",value:"🏆"},{name:":football:",value:"🏈"},{name:":rugby_football:",value:"🏉"},{name:":cricket_bat_and_ball:",value:"🏏"},{name:":volleyball:",value:"🏐"},{name:":field_hockey_stick_and_ball:",value:"🏑"},{name:":ice_hockey_stick_and_puck:",value:"🏒"},{name:":table_tennis_paddle_and_ball:",value:"🏓"},{name:":badminton_racquet_and_shuttlecock:",value:"🏸"},{name:":joystick:",value:"🕹"}],Travel:[{name:":hotsprings:",value:"♨"},{name:":anchor:",value:"⚓"},{name:":shinto_shrine:",value:"⛩"},{name:":church:",value:"⛪"},{name:":mountain:",value:"⛰"},{name:":fountain:",value:"⛲"},{name:":ferry:",value:"⛴"},{name:":boat:",value:"⛵"},{name:":tent:",value:"⛺"},{name:":fuelpump:",value:"⛽"},{name:":airplane:",value:"✈"},{name:":foggy:",value:"🌁"},{name:":night_with_stars:",value:"🌃"},{name:":sunrise_over_mountains:",value:"🌄"},{name:":sunrise:",value:"🌅"},{name:":city_sunset:",value:"🌆"},{name:":city_sunrise:",value:"🌇"},{name:":bridge_at_night:",value:"🌉"},{name:":volcano:",value:"🌋"},{name:":milky_way:",value:"🌌"},{name:":globe_with_meridians:",value:"🌐"},{name:":carousel_horse:",value:"🎠"},{name:":ferris_wheel:",value:"🎡"},{name:":roller_coaster:",value:"🎢"},{name:":snow_capped_mountain:",value:"🏔"},{name:":camping:",value:"🏕"},{name:":beach_with_umbrella:",value:"🏖"},{name:":building_construction:",value:"🏗"},{name:":house_buildings:",value:"🏘"},{name:":cityscape:",value:"🏙"},{name:":derelict_house_building:",value:"🏚"},{name:":classical_building:",value:"🏛"},{name:":desert:",value:"🏜"},{name:":desert_island:",value:"🏝"},{name:":national_park:",value:"🏞"},{name:":stadium:",value:"🏟"},{name:":house:",value:"🏠"},{name:":house_with_garden:",value:"🏡"},{name:":office:",value:"🏢"},{name:":post_office:",value:"🏣"},{name:":european_post_office:",value:"🏤"},{name:":hospital:",value:"🏥"},{name:":bank:",value:"🏦"},{name:":hotel:",value:"🏨"},{name:":love_hotel:",value:"🏩"},{name:":convenience_store:",value:"🏪"},{name:":school:",value:"🏫"},{name:":department_store:",value:"🏬"},{name:":factory:",value:"🏭"},{name:":japanese_castle:",value:"🏯"},{name:":european_castle:",value:"🏰"},{name:":wedding:",value:"💒"},{name:":seat:",value:"💺"},{name:":kaaba:",value:"🕋"},{name:":mosque:",value:"🕌"},{name:":synagogue:",value:"🕍"},{name:":world_map:",value:"🗺"},{name:":mount_fuji:",value:"🗻"},{name:":tokyo_tower:",value:"🗼"},{name:":statue_of_liberty:",value:"🗽"},{name:":japan:",value:"🗾"},{name:":rocket:",value:"🚀"},{name:":helicopter:",value:"🚁"},{name:":steam_locomotive:",value:"🚂"},{name:":railway_car:",value:"🚃"},{name:":bullettrain_side:",value:"🚄"},{name:":bullettrain_front:",value:"🚅"},{name:":train2:",value:"🚆"},{name:":metro:",value:"🚇"},{name:":light_rail:",value:"🚈"},{name:":station:",value:"🚉"},{name:":tram:",value:"🚊"},{name:":train:",value:"🚋"},{name:":bus:",value:"🚌"},{name:":oncoming_bus:",value:"🚍"},{name:":trolleybus:",value:"🚎"},{name:":busstop:",value:"🚏"},{name:":minibus:",value:"🚐"},{name:":ambulance:",value:"🚑"},{name:":fire_engine:",value:"🚒"},{name:":police_car:",value:"🚓"},{name:":oncoming_police_car:",value:"🚔"},{
name:":taxi:",value:"🚕"},{name:":oncoming_taxi:",value:"🚖"},{name:":car:",value:"🚗"},{name:":oncoming_automobile:",value:"🚘"},{name:":blue_car:",value:"🚙"},{name:":truck:",value:"🚚"},{name:":articulated_lorry:",value:"🚛"},{name:":tractor:",value:"🚜"},{name:":monorail:",value:"🚝"},{name:":mountain_railway:",value:"🚞"},{name:":suspension_railway:",value:"🚟"},{name:":mountain_cableway:",value:"🚠"},{name:":aerial_tramway:",value:"🚡"},{name:":ship:",value:"🚢"},{name:":speedboat:",value:"🚤"},{name:":traffic_light:",value:"🚥"},{name:":vertical_traffic_light:",value:"🚦"},{name:":construction:",value:"🚧"},{name:":rotating_light:",value:"🚨"},{name:":bike:",value:"🚲"},{name:":motorway:",value:"🛣"},{name:":railway_track:",value:"🛤"},{name:":motor_boat:",value:"🛥"},{name:":small_airplane:",value:"🛩"},{name:":airplane_departure:",value:"🛫"},{name:":airplane_arriving:",value:"🛬"},{name:":satellite:",value:"🛰"},{name:":passenger_ship:",value:"🛳"}],Objects:[{name:":watch:",value:"⌚"},{name:":hourglass:",value:"⌛"},{name:":keyboard:",value:"⌨"},{name:":alarm_clock:",value:"⏰"},{name:":stopwatch:",value:"⏱"},{name:":timer_clock:",value:"⏲"},{name:":hourglass_flowing_sand:",value:"⏳"},{name:":phone:",value:"☎"},{name:":hammer_and_pick:",value:"⚒"},{name:":crossed_swords:",value:"⚔"},{name:":scales:",value:"⚖"},{name:":alembic:",value:"⚗"},{name:":gear:",value:"⚙"},{name:":coffin:",value:"⚰"},{name:":funeral_urn:",value:"⚱"},{name:":pick:",value:"⛏"},{name:":chains:",value:"⛓"},{name:":scissors:",value:"✂"},{name:":email:",value:"✉"},{name:":pencil2:",value:"✏"},{name:":black_nib:",value:"✒"},{name:":ribbon:",value:"🎀"},{name:":gift:",value:"🎁"},{name:":balloon:",value:"🎈"},{name:":tada:",value:"🎉"},{name:":confetti_ball:",value:"🎊"},{name:":tanabata_tree:",value:"🎋"},{name:":bamboo:",value:"🎍"},{name:":dolls:",value:"🎎"},{name:":flags:",value:"🎏"},{name:":wind_chime:",value:"🎐"},{name:":rice_scene:",value:"🎑"},{name:":reminder_ribbon:",value:"🎗"},{name:":studio_microphone:",value:"🎙"},{name:":level_slider:",value:"🎚"},{name:":control_knobs:",value:"🎛"},{name:":film_frames:",value:"🎞"},{name:":admission_tickets:",value:"🎟"},{name:":microphone:",value:"🎤"},{name:":movie_camera:",value:"🎥"},{name:":headphones:",value:"🎧"},{name:":ticket:",value:"🎫"},{name:":clapper:",value:"🎬"},{name:":musical_note:",value:"🎵"},{name:":notes:",value:"🎶"},{name:":saxophone:",value:"🎷"},{name:":guitar:",value:"🎸"},{name:":musical_keyboard:",value:"🎹"},{name:":trumpet:",value:"🎺"},{name:":violin:",value:"🎻"},{name:":musical_score:",value:"🎼"},{name:":izakaya_lantern:",value:"🏮"},{name:":label:",value:"🏷"},{name:":bow_and_arrow:",value:"🏹"},{name:":syringe:",value:"💉"},{name:":pill:",value:"💊"},{name:":bulb:",value:"💡"},{name:":moneybag:",value:"💰"},{name:":credit_card:",value:"💳"},{name:":yen:",value:"💴"},{name:":dollar:",value:"💵"},{name:":euro:",value:"💶"},{name:":pound:",value:"💷"},{name:":money_with_wings:",value:"💸"},{name:":computer:",value:"💻"},{name:":briefcase:",value:"💼"},{name:":minidisc:",value:"💽"},{name:":floppy_disk:",value:"💾"},{name:":cd:",value:"💿"},{name:":dvd:",value:"📀"},{name:":file_folder:",value:"📁"},{name:":open_file_folder:",value:"📂"},{name:":page_with_curl:",value:"📃"},{name:":page_facing_up:",value:"📄"},{name:":date:",value:"📅"},{name:":calendar:",value:"📆"},{name:":card_index:",value:"📇"},{name:":chart_with_upwards_trend:",value:"📈"},{name:":chart_with_downwards_trend:",value:"📉"},{name:":bar_chart:",value:"📊"},{name:":clipboard:",value:"📋"},{name:":pushpin:",value:"📌"},{name:":round_pushpin:",value:"📍"},{name:":paperclip:",value:"📎"},{name:":straight_ruler:",value:"📏"},{name:":triangular_ruler:",value:"📐"},{name:":bookmark_tabs:",value:"📑"},{name:":ledger:",value:"📒"},{name:":notebook:",value:"📓"},{name:":notebook_with_decorative_cover:",value:"📔"},{name:":closed_book:",value:"📕"},{name:":book:",value:"📖"},{name:":green_book:",value:"📗"},{name:":blue_book:",value:"📘"},{name:":orange_book:",value:"📙"},{name:":books:",value:"📚"},{name:":scroll:",value:"📜"},{name:":memo:",value:"📝"},{name:":telephone_receiver:",value:"📞"},{name:":pager:",value:"📟"},{name:":fax:",value:"📠"},{name:":satellite_antenna:",value:"📡"},{name:":outbox_tray:",value:"📤"},{name:":inbox_tray:",value:"📥"},{name:":package:",value:"📦"},{name:":e-mail:",value:"📧"},{name:":incoming_envelope:",value:"📨"},{name:":envelope_with_arrow:",value:"📩"},{name:":mailbox_closed:",value:"📪"},{name:":mailbox:",value:"📫"},{name:":mailbox_with_mail:",value:"📬"},{name:":mailbox_with_no_mail:",value:"📭"},{name:":postbox:",value:"📮"},{name:":newspaper:",value:"📰"},{name:":iphone:",value:"📱"},{name:":calling:",value:"📲"},{name:":camera:",value:"📷"},{name:":camera_with_flash:",value:"📸"},{name:":video_camera:",value:"📹"},{name:":tv:",value:"📺"},{name:":radio:",value:"📻"},{name:":vhs:",value:"📼"},{name:":film_projector:",value:"📽"},{name:":battery:",value:"🔋"},{name:":electric_plug:",value:"🔌"},{name:":mag:",value:"🔍"},{name:":mag_right:",value:"🔎"},{name:":lock_with_ink_pen:",value:"🔏"},{name:":closed_lock_with_key:",value:"🔐"},{name:":key:",value:"🔑"},{name:":lock:",value:"🔒"},{name:":unlock:",value:"🔓"},{name:":bookmark:",value:"🔖"},{name:":link:",value:"🔗"},{name:":flashlight:",value:"🔦"},{name:":wrench:",value:"🔧"},{name:":hammer:",value:"🔨"},{name:":nut_and_bolt:",value:"🔩"},{name:":gun:",value:"🔫"},{name:":microscope:",value:"🔬"},{name:":telescope:",value:"🔭"},{name:":crystal_ball:",value:"🔮"},{name:":candle:",value:"🕯"},{name:":mantelpiece_clock:",value:"🕰"},{name:":linked_paperclips:",value:"🖇"},{name:":lower_left_ballpoint_pen:",value:"🖊"},{name:":lower_left_fountain_pen:",value:"🖋"},{name:":lower_left_paintbrush:",value:"🖌"},{name:":lower_left_crayon:",value:"🖍"},{name:":desktop_computer:",value:"🖥"},{name:":printer:",value:"🖨"},{name:":three_button_mouse:",value:"🖱"},{name:":trackball:",value:"🖲"},{name:":card_index_dividers:",value:"🗂"},{name:":card_file_box:",value:"🗃"},{name:":file_cabinet:",value:"🗄"},{name:":wastebasket:",value:"🗑"},{name:":spiral_note_pad:",value:"🗒"},{name:":spiral_calendar_pad:",value:"🗓"},{name:":compression:",value:"🗜"},{name:":old_key:",value:"🗝"},{name:":rolled_up_newspaper:",value:"🗞"},{name:":dagger_knife:",value:"🗡"},{name:":ballot_box_with_ballot:",value:"🗳"},{name:":moyai:",value:"🗿"},{name:":door:",value:"🚪"},{name:":smoking:",value:"🚬"},{name:":toilet:",value:"🚽"},{name:":shower:",value:"🚿"},{name:":bath:",value:"🛀"},{name:":bathtub:",value:"🛁"},{name:":couch_and_lamp:",value:"🛋"},{name:":sleeping_accommodation:",value:"🛌"},{name:":bellhop_bell:",value:"🛎"},{name:":bed:",value:"🛏"},{name:":hammer_and_wrench:",value:"🛠"},{name:":shield:",value:"🛡"},{name:":oil_drum:",value:"🛢"}],Symbols:[{name:":copyright:",value:"©"},{name:":registered:",value:"®"},{name:":bangbang:",value:"‼"},{name:":interrobang:",value:"⁉"},{name:":tm:",value:"™"},{name:":information_source:",value:"ℹ"},{name:":left_right_arrow:",value:"↔"},{name:":arrow_up_down:",value:"↕"},{name:":arrow_upper_left:",value:"↖"},{name:":arrow_upper_right:",value:"↗"},{name:":arrow_lower_right:",value:"↘"},{name:":arrow_lower_left:",value:"↙"},{name:":leftwards_arrow_with_hook:",value:"↩"},{name:":arrow_right_hook:",value:"↪"},{name:":eject:",value:"⏏"},{name:":fast_forward:",value:"⏩"},{name:":rewind:",value:"⏪"},{name:":arrow_double_up:",value:"⏫"},{name:":arrow_double_down:",value:"⏬"},{name:":black_right_pointing_double_triangle_with_vertical_bar:",value:"⏭"},{name:":black_left_pointing_double_triangle_with_vertical_bar:",value:"⏮"},{name:":black_right_pointing_triangle_with_double_vertical_bar:",value:"⏯"},{name:":double_vertical_bar:",value:"⏸"},{name:":black_square_for_stop:",value:"⏹"},{name:":black_circle_for_record:",value:"⏺"},{name:":m:",value:"Ⓜ"},{name:":black_small_square:",value:"▪"},{name:":white_small_square:",value:"▫"},{name:":arrow_forward:",value:"▶"},{name:":arrow_backward:",value:"◀"},{name:":white_medium_square:",value:"◻"},{name:":black_medium_square:",value:"◼"},{name:":white_medium_small_square:",value:"◽"},{name:":black_medium_small_square:",value:"◾"},{name:":ballot_box_with_check:",value:"☑"},{name:":radioactive_sign:",value:"☢"},{name:":biohazard_sign:",value:"☣"},{name:":orthodox_cross:",value:"☦"},{name:":star_and_crescent:",value:"☪"},{name:":peace_symbol:",value:"☮"},{name:":yin_yang:",value:"☯"},{name:":wheel_of_dharma:",value:"☸"},{name:":aries:",value:"♈"},{name:":taurus:",value:"♉"},{name:":gemini:",value:"♊"},{name:":cancer:",value:"♋"},{name:":leo:",value:"♌"},{name:":virgo:",value:"♍"},{name:":libra:",value:"♎"},{name:":scorpius:",value:"♏"},{name:":sagittarius:",value:"♐"},{name:":capricorn:",value:"♑"},{name:":aquarius:",value:"♒"},{name:":pisces:",value:"♓"},{name:":recycle:",value:"♻"},{name:":wheelchair:",value:"♿"},{name:":atom_symbol:",value:"⚛"},{name:":fleur_de_lis:",value:"⚜"},{name:":warning:",value:"⚠"},{name:":white_circle:",value:"⚪"},{name:":black_circle:",value:"⚫"},{name:":ophiuchus:",value:"⛎"},{name:":no_entry:",value:"⛔"},{name:":white_check_mark:",value:"✅"},{name:":heavy_check_mark:",value:"✔"},{name:":heavy_multiplication_x:",value:"✖"},{name:":latin_cross:",value:"✝"},{name:":star_of_david:",value:"✡"},{name:":eight_spoked_asterisk:",value:"✳"},{name:":eight_pointed_black_star:",value:"✴"},{name:":sparkle:",value:"❇"},{name:":x:",value:"❌"},{name:":negative_squared_cross_mark:",value:"❎"},{name:":question:",value:"❓"},{name:":grey_question:",value:"❔"},{name:":grey_exclamation:",value:"❕"},{name:":exclamation:",value:"❗"},{name:":heavy_heart_exclamation_mark_ornament:",value:"❣"},{name:":heart:",value:"❤"},{name:":heavy_plus_sign:",value:"➕"},{name:":heavy_minus_sign:",value:"➖"},{name:":heavy_division_sign:",value:"➗"},{name:":arrow_right:",value:"➡"},{name:":curly_loop:",value:"➰"},{name:":loop:",value:"➿"},{name:":arrow_heading_up:",value:"⤴"},{name:":arrow_heading_down:",value:"⤵"},{name:":arrow_left:",value:"⬅"},{name:":arrow_up:",value:"⬆"},{name:":arrow_down:",value:"⬇"},{name:":black_large_square:",value:"⬛"},{name:":white_large_square:",value:"⬜"},{name:":o:",value:"⭕"},{name:":wavy_dash:",value:"〰"},{name:":part_alternation_mark:",value:"〽"},{name:":congratulations:",value:"㊗"},{name:":secret:",value:"㊙"},{name:":a:",value:"🅰"},{name:":b:",value:"🅱"},{name:":o2:",value:"🅾"},{name:":parking:",value:"🅿"},{name:":ab:",value:"🆎"},{name:":cl:",value:"🆑"},{name:":cool:",value:"🆒"},{name:":free:",value:"🆓"},{name:":id:",value:"🆔"},{name:":new:",value:"🆕"},{name:":ng:",value:"🆖"},{name:":ok:",value:"🆗"},{name:":sos:",value:"🆘"},{name:":up:",value:"🆙"},{name:":vs:",value:"🆚"},{name:":koko:",value:"🈁"},{name:":sa:",value:"🈂"},{name:":u7121:",value:"🈚"},{name:":u6307:",value:"🈯"},{name:":u7981:",value:"🈲"},{name:":u7a7a:",value:"🈳"},{name:":u5408:",value:"🈴"},{name:":u6e80:",value:"🈵"},{name:":u6709:",value:"🈶"},{name:":u6708:",value:"🈷"},{name:":u7533:",value:"🈸"},{name:":u5272:",value:"🈹"},{name:":u55b6:",value:"🈺"},{name:":ideograph_advantage:",value:"🉐"},{name:":accept:",value:"🉑"},{name:":crossed_flags:",value:"🎌"},{name:":cinema:",value:"🎦"},{name:":checkered_flag:",value:"🏁"},{name:":atm:",value:"🏧"},{name:":waving_white_flag:",value:"🏳"},{name:":waving_black_flag:",value:"🏴"},{name:":heartbeat:",value:"💓"},{name:":broken_heart:",value:"💔"},{name:":two_hearts:",value:"💕"},{name:":sparkling_heart:",value:"💖"},{name:":heartpulse:",value:"💗"},{name:":cupid:",value:"💘"},{name:":blue_heart:",value:"💙"},{name:":green_heart:",value:"💚"},{name:":yellow_heart:",value:"💛"},{name:":purple_heart:",value:"💜"},{name:":gift_heart:",value:"💝"},{name:":revolving_hearts:",value:"💞"},{name:":heart_decoration:",value:"💟"},{name:":diamond_shape_with_a_dot_inside:",value:"💠"},{name:":speech_balloon:",value:"💬"},{name:":thought_balloon:",value:"💭"},{name:":100:",value:"💯"},{name:":name_badge:",value:"📛"},{name:":loudspeaker:",value:"📢"},{name:":mega:",value:"📣"},{name:":postal_horn:",value:"📯"},{name:":vibration_mode:",value:"📳"},{name:":mobile_phone_off:",value:"📴"},{name:":no_mobile_phones:",value:"📵"},{name:":signal_strength:",value:"📶"},{name:":twisted_rightwards_arrows:",value:"🔀"},{name:":repeat:",value:"🔁"},{name:":repeat_one:",value:"🔂"},{name:":arrows_clockwise:",value:"🔃"},{name:":arrows_counterclockwise:",value:"🔄"},{name:":low_brightness:",value:"🔅"},{name:":high_brightness:",value:"🔆"},{name:":mute:",value:"🔇"},{name:":speaker:",value:"🔈"},{name:":sound:",value:"🔉"},{name:":loud_sound:",value:"🔊"},{name:":bell:",value:"🔔"},{name:":no_bell:",value:"🔕"},{name:":radio_button:",value:"🔘"},{name:":back:",value:"🔙"},{name:":end:",value:"🔚"},{name:":on:",value:"🔛"},{name:":soon:",value:"🔜"},{name:":top:",value:"🔝"},{name:":underage:",value:"🔞"},{name:":keycap_ten:",value:"🔟"},{name:":capital_abcd:",value:"🔠"},{name:":abcd:",value:"🔡"},{name:":1234:",value:"🔢"},{name:":symbols:",value:"🔣"},{name:":abc:",value:"🔤"},{name:":six_pointed_star:",value:"🔯"},{name:":beginner:",value:"🔰"},{name:":trident:",value:"🔱"},{name:":black_square_button:",value:"🔲"},{name:":white_square_button:",value:"🔳"},{name:":red_circle:",value:"🔴"},{name:":large_blue_circle:",value:"🔵"},{name:":large_orange_diamond:",value:"🔶"},{name:":large_blue_diamond:",value:"🔷"},{name:":small_orange_diamond:",value:"🔸"},{name:":small_blue_diamond:",value:"🔹"},{name:":small_red_triangle:",value:"🔺"},{name:":small_red_triangle_down:",value:"🔻"},{name:":arrow_up_small:",value:"🔼"},{name:":arrow_down_small:",value:"🔽"},{name:":om_symbol:",value:"🕉"},{name:":menorah_with_nine_branches:",value:"🕎"},{name:":clock1:",value:"🕐"},{name:":clock2:",value:"🕑"},{name:":clock3:",value:"🕒"},{name:":clock4:",value:"🕓"},{name:":clock5:",value:"🕔"},{name:":clock6:",value:"🕕"},{name:":clock7:",value:"🕖"},{name:":clock8:",value:"🕗"},{name:":clock9:",value:"🕘"},{name:":clock10:",value:"🕙"},{name:":clock11:",value:"🕚"},{name:":clock12:",value:"🕛"},{name:":clock130:",value:"🕜"},{name:":clock230:",value:"🕝"},{name:":clock330:",value:"🕞"},{name:":clock430:",value:"🕟"},{name:":clock530:",value:"🕠"},{name:":clock630:",value:"🕡"},{name:":clock730:",value:"🕢"},{name:":clock830:",value:"🕣"},{name:":clock930:",value:"🕤"},{name:":clock1030:",value:"🕥"},{name:":clock1130:",value:"🕦"},{name:":clock1230:",value:"🕧"},{name:":left_speech_bubble:",value:"🗨"},{name:":right_anger_bubble:",value:"🗯"},{name:":triangular_flag_on_post:",value:"🚩"},{name:":no_entry_sign:",value:"🚫"},{name:":no_smoking:",value:"🚭"},{name:":put_litter_in_its_place:",value:"🚮"},{name:":do_not_litter:",value:"🚯"},{name:":potable_water:",value:"🚰"},{name:":non-potable_water:",value:"🚱"},{name:":no_bicycles:",value:"🚳"},{name:":no_pedestrians:",value:"🚷"},{name:":children_crossing:",value:"🚸"},{name:":mens:",value:"🚹"},{name:":womens:",value:"🚺"},{name:":restroom:",value:"🚻"},{name:":baby_symbol:",value:"🚼"},{name:":wc:",value:"🚾"},{name:":passport_control:",value:"🛂"},{name:":customs:",value:"🛃"},{name:":baggage_claim:",value:"🛄"},{name:":left_luggage:",value:"🛅"},{name:":place_of_worship:",value:"🛐"}],Flags:[{name:":flag-ac:",value:"🇦🇨"},{name:":flag-ad:",value:"🇦🇩"},{name:":flag-ae:",value:"🇦🇪"},{name:":flag-af:",value:"🇦🇫"},{name:":flag-ag:",value:"🇦🇬"},{name:":flag-ai:",value:"🇦🇮"},{name:":flag-al:",value:"🇦🇱"},{name:":flag-am:",value:"🇦🇲"},{name:":flag-ao:",value:"🇦🇴"},{name:":flag-aq:",value:"🇦🇶"},{name:":flag-ar:",value:"🇦🇷"},{name:":flag-as:",value:"🇦🇸"},{name:":flag-at:",value:"🇦🇹"},{name:":flag-au:",value:"🇦🇺"},{name:":flag-aw:",value:"🇦🇼"},{name:":flag-ax:",value:"🇦🇽"},{name:":flag-az:",value:"🇦🇿"},{name:":flag-ba:",value:"🇧🇦"},{name:":flag-bb:",value:"🇧🇧"},{name:":flag-bd:",value:"🇧🇩"},{name:":flag-be:",value:"🇧🇪"},{name:":flag-bf:",value:"🇧🇫"},{name:":flag-bg:",value:"🇧🇬"},{name:":flag-bh:",value:"🇧🇭"},{name:":flag-bi:",value:"🇧🇮"},{name:":flag-bj:",value:"🇧🇯"},{name:":flag-bl:",value:"🇧🇱"},{name:":flag-bm:",value:"🇧🇲"},{name:":flag-bn:",value:"🇧🇳"},{name:":flag-bo:",value:"🇧🇴"},{name:":flag-bq:",value:"🇧🇶"},{name:":flag-br:",value:"🇧🇷"},{name:":flag-bs:",value:"🇧🇸"},{name:":flag-bt:",value:"🇧🇹"},{name:":flag-bv:",value:"🇧🇻"},{name:":flag-bw:",value:"🇧🇼"},{name:":flag-by:",value:"🇧🇾"},{name:":flag-bz:",value:"🇧🇿"},{name:":flag-ca:",value:"🇨🇦"},{name:":flag-cc:",value:"🇨🇨"},{name:":flag-cd:",value:"🇨🇩"},{name:":flag-cf:",value:"🇨🇫"},{name:":flag-cg:",value:"🇨🇬"},{name:":flag-ch:",value:"🇨🇭"},{name:":flag-ci:",value:"🇨🇮"},{name:":flag-ck:",value:"🇨🇰"},{name:":flag-cl:",value:"🇨🇱"},{name:":flag-cm:",value:"🇨🇲"},{name:":flag-cn:",value:"🇨🇳"},{name:":flag-co:",value:"🇨🇴"},{name:":flag-cp:",value:"🇨🇵"},{name:":flag-cr:",value:"🇨🇷"},{name:":flag-cu:",value:"🇨🇺"},{name:":flag-cv:",value:"🇨🇻"},{name:":flag-cw:",value:"🇨🇼"},{name:":flag-cx:",value:"🇨🇽"},{name:":flag-cy:",value:"🇨🇾"},{name:":flag-cz:",value:"🇨🇿"},{name:":flag-de:",value:"🇩🇪"},{name:":flag-dg:",value:"🇩🇬"},{name:":flag-dj:",value:"🇩🇯"},{name:":flag-dk:",value:"🇩🇰"},{name:":flag-dm:",value:"🇩🇲"},{name:":flag-do:",value:"🇩🇴"},{name:":flag-dz:",value:"🇩🇿"},{name:":flag-ea:",value:"🇪🇦"},{name:":flag-ec:",value:"🇪🇨"},{name:":flag-ee:",value:"🇪🇪"},{name:":flag-eg:",value:"🇪🇬"},{name:":flag-eh:",value:"🇪🇭"},{name:":flag-er:",value:"🇪🇷"},{name:":flag-es:",value:"🇪🇸"},{name:":flag-et:",value:"🇪🇹"},{name:":flag-eu:",value:"🇪🇺"},{name:":flag-fi:",value:"🇫🇮"},{name:":flag-fj:",value:"🇫🇯"},{name:":flag-fk:",value:"🇫🇰"},{name:":flag-fm:",value:"🇫🇲"},{name:":flag-fo:",value:"🇫🇴"},{name:":flag-fr:",value:"🇫🇷"},{name:":flag-ga:",value:"🇬🇦"},{name:":flag-gb:",value:"🇬🇧"},{name:":flag-gd:",value:"🇬🇩"},{name:":flag-ge:",value:"🇬🇪"},{name:":flag-gf:",value:"🇬🇫"},{name:":flag-gg:",value:"🇬🇬"},{name:":flag-gh:",value:"🇬🇭"},{name:":flag-gi:",value:"🇬🇮"},{name:":flag-gl:",value:"🇬🇱"},{name:":flag-gm:",value:"🇬🇲"},{name:":flag-gn:",value:"🇬🇳"},{name:":flag-gp:",value:"🇬🇵"},{name:":flag-gq:",value:"🇬🇶"},{name:":flag-gr:",value:"🇬🇷"},{name:":flag-gs:",value:"🇬🇸"},{name:":flag-gt:",value:"🇬🇹"},{name:":flag-gu:",value:"🇬🇺"},{name:":flag-gw:",value:"🇬🇼"},{name:":flag-gy:",value:"🇬🇾"},{name:":flag-hk:",value:"🇭🇰"},{name:":flag-hm:",value:"🇭🇲"},{name:":flag-hn:",value:"🇭🇳"},{name:":flag-hr:",value:"🇭🇷"},{name:":flag-ht:",value:"🇭🇹"},{name:":flag-hu:",value:"🇭🇺"},{name:":flag-ic:",value:"🇮🇨"},{name:":flag-id:",value:"🇮🇩"},{name:":flag-ie:",value:"🇮🇪"},{name:":flag-il:",value:"🇮🇱"},{name:":flag-im:",value:"🇮🇲"},{name:":flag-in:",value:"🇮🇳"},{name:":flag-io:",value:"🇮🇴"},{name:":flag-iq:",value:"🇮🇶"},{name:":flag-ir:",value:"🇮🇷"},{name:":flag-is:",value:"🇮🇸"},{name:":flag-it:",value:"🇮🇹"},{name:":flag-je:",value:"🇯🇪"},{name:":flag-jm:",value:"🇯🇲"},{name:":flag-jo:",value:"🇯🇴"},{name:":flag-jp:",value:"🇯🇵"},{name:":flag-ke:",value:"🇰🇪"},{name:":flag-kg:",value:"🇰🇬"},{name:":flag-kh:",value:"🇰🇭"},{name:":flag-ki:",value:"🇰🇮"},{name:":flag-km:",value:"🇰🇲"},{name:":flag-kn:",value:"🇰🇳"},{name:":flag-kp:",value:"🇰🇵"},{name:":flag-kr:",value:"🇰🇷"},{name:":flag-kw:",value:"🇰🇼"},{name:":flag-ky:",value:"🇰🇾"},{name:":flag-kz:",value:"🇰🇿"},{name:":flag-la:",value:"🇱🇦"},{name:":flag-lb:",value:"🇱🇧"},{name:":flag-lc:",value:"🇱🇨"},{name:":flag-li:",value:"🇱🇮"},{name:":flag-lk:",value:"🇱🇰"},{name:":flag-lr:",value:"🇱🇷"},{name:":flag-ls:",value:"🇱🇸"},{name:":flag-lt:",value:"🇱🇹"},{name:":flag-lu:",value:"🇱🇺"},{name:":flag-lv:",value:"🇱🇻"},{name:":flag-ly:",value:"🇱🇾"},{name:":flag-ma:",value:"🇲🇦"},{name:":flag-mc:",value:"🇲🇨"},{name:":flag-md:",value:"🇲🇩"},{name:":flag-me:",value:"🇲🇪"},{name:":flag-mf:",value:"🇲🇫"},{name:":flag-mg:",value:"🇲🇬"},{name:":flag-mh:",value:"🇲🇭"},{name:":flag-mk:",value:"🇲🇰"},{name:":flag-ml:",value:"🇲🇱"},{name:":flag-mm:",value:"🇲🇲"},{name:":flag-mn:",value:"🇲🇳"},{name:":flag-mo:",value:"🇲🇴"},{name:":flag-mp:",value:"🇲🇵"},{name:":flag-mq:",value:"🇲🇶"},{name:":flag-mr:",value:"🇲🇷"},{name:":flag-ms:",value:"🇲🇸"},{name:":flag-mt:",value:"🇲🇹"},{name:":flag-mu:",value:"🇲🇺"},{name:":flag-mv:",value:"🇲🇻"},{name:":flag-mw:",value:"🇲🇼"},{name:":flag-mx:",value:"🇲🇽"},{name:":flag-my:",value:"🇲🇾"},{name:":flag-mz:",value:"🇲🇿"},{name:":flag-na:",value:"🇳🇦"},{name:":flag-nc:",value:"🇳🇨"},{name:":flag-ne:",value:"🇳🇪"},{name:":flag-nf:",value:"🇳🇫"},{name:":flag-ng:",value:"🇳🇬"},{name:":flag-ni:",value:"🇳🇮"},{name:":flag-nl:",value:"🇳🇱"},{name:":flag-no:",value:"🇳🇴"},{name:":flag-np:",value:"🇳🇵"},{name:":flag-nr:",value:"🇳🇷"},{name:":flag-nu:",value:"🇳🇺"},{name:":flag-nz:",value:"🇳🇿"},{name:":flag-om:",value:"🇴🇲"},{name:":flag-pa:",value:"🇵🇦"},{name:":flag-pe:",value:"🇵🇪"},{name:":flag-pf:",value:"🇵🇫"},{name:":flag-pg:",value:"🇵🇬"},{name:":flag-ph:",value:"🇵🇭"},{name:":flag-pk:",value:"🇵🇰"},{name:":flag-pl:",value:"🇵🇱"},{name:":flag-pm:",value:"🇵🇲"},{name:":flag-pn:",value:"🇵🇳"},{name:":flag-pr:",value:"🇵🇷"},{name:":flag-ps:",value:"🇵🇸"},{name:":flag-pt:",value:"🇵🇹"},{name:":flag-pw:",value:"🇵🇼"},{name:":flag-py:",value:"🇵🇾"},{name:":flag-qa:",value:"🇶🇦"},{name:":flag-re:",value:"🇷🇪"},{name:":flag-ro:",value:"🇷🇴"},{name:":flag-rs:",value:"🇷🇸"},{name:":flag-ru:",value:"🇷🇺"},{name:":flag-rw:",value:"🇷🇼"},{name:":flag-sa:",value:"🇸🇦"},{name:":flag-sb:",value:"🇸🇧"},{name:":flag-sc:",value:"🇸🇨"},{name:":flag-sd:",value:"🇸🇩"},{name:":flag-se:",value:"🇸🇪"},{name:":flag-sg:",value:"🇸🇬"},{name:":flag-sh:",value:"🇸🇭"},{name:":flag-si:",value:"🇸🇮"},{name:":flag-sj:",value:"🇸🇯"},{name:":flag-sk:",value:"🇸🇰"},{name:":flag-sl:",value:"🇸🇱"},{name:":flag-sm:",value:"🇸🇲"},{name:":flag-sn:",value:"🇸🇳"},{name:":flag-so:",value:"🇸🇴"},{name:":flag-sr:",value:"🇸🇷"},{name:":flag-ss:",value:"🇸🇸"},{name:":flag-st:",value:"🇸🇹"},{name:":flag-sv:",value:"🇸🇻"},{name:":flag-sx:",value:"🇸🇽"},{name:":flag-sy:",value:"🇸🇾"},{name:":flag-sz:",value:"🇸🇿"},{name:":flag-ta:",value:"🇹🇦"},{name:":flag-tc:",value:"🇹🇨"},{name:":flag-td:",value:"🇹🇩"},{name:":flag-tf:",value:"🇹🇫"},{name:":flag-tg:",value:"🇹🇬"},{name:":flag-th:",value:"🇹🇭"},{name:":flag-tj:",value:"🇹🇯"},{name:":flag-tk:",value:"🇹🇰"},{name:":flag-tl:",value:"🇹🇱"},{name:":flag-tm:",value:"🇹🇲"},{name:":flag-tn:",value:"🇹🇳"},{name:":flag-to:",value:"🇹🇴"},{name:":flag-tr:",value:"🇹🇷"},{name:":flag-tt:",value:"🇹🇹"},{name:":flag-tv:",value:"🇹🇻"},{name:":flag-tw:",value:"🇹🇼"},{name:":flag-tz:",value:"🇹🇿"},{name:":flag-ua:",value:"🇺🇦"},{name:":flag-ug:",value:"🇺🇬"},{name:":flag-um:",value:"🇺🇲"},{name:":flag-us:",value:"🇺🇸"},{name:":flag-uy:",value:"🇺🇾"},{name:":flag-uz:",value:"🇺🇿"},{name:":flag-va:",value:"🇻🇦"},{name:":flag-vc:",value:"🇻🇨"},{name:":flag-ve:",value:"🇻🇪"},{name:":flag-vg:",value:"🇻🇬"},{name:":flag-vi:",value:"🇻🇮"},{name:":flag-vn:",value:"🇻🇳"},{name:":flag-vu:",value:"🇻🇺"},{name:":flag-wf:",value:"🇼🇫"},{name:":flag-ws:",value:"🇼🇸"},{name:":flag-xk:",value:"🇽🇰"},{name:":flag-ye:",value:"🇾🇪"},{name:":flag-yt:",value:"🇾🇹"},{name:":flag-za:",value:"🇿🇦"},{name:":flag-zm:",value:"🇿🇲"},{name:":flag-zw:",value:"🇿🇼"}]},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,i){var a,r,o,s=t.nodeName.toLowerCase();return"area"===s?(a=t.parentNode,r=a.name,!(!t.href||!r||"map"!==a.nodeName.toLowerCase())&&(!!(o=e("img[usemap='#"+r+"']")[0])&&n(o))):(/^(input|select|textarea|button|object)$/.test(s)?!t.disabled:"a"===s?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function i(e){for(var t,n;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}function a(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=r(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function r(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(h.inline?h.dpDiv.parent()[0]:h.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function s(t,n){e.extend(t,n);for(var i in n)null==n[i]&&(t[i]=n[i]);return t}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),i="absolute"===n,a=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&a.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var i=e.attr(n,"tabindex"),a=isNaN(i);return(a||i>=0)&&t(n,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,r){return e.each(a,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var a="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){e(this).css(r,i(this,t)+"px")})},e.fn["outer"+n]=function(t,a){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(r,i(this,t,!0,a)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(n=a.css("position"))||"relative"===n||"fixed"===n)&&(i=parseInt(a.css("zIndex"),10),!isNaN(i)&&0!==i))return i;a=a.parent()}return 0}}),e.ui.plugin={add:function(t,n,i){var a,r=e.ui[t].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(e,t,n,i){var a,r=e.plugins[t];if(r&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;r.length>a;a++)e.options[r[a][0]]&&r[a][1].apply(e.element,n)}};var l=0,c=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,a,r;for(r=0;null!=(a=n[r]);r++)try{(i=e._data(a,"events"))&&i.remove&&e(a).triggerHandler("remove")}catch(e){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var a,r,o,s,l={},c=t.split(".")[0];return t=t.split(".")[1],a=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[c]=e[c]||{},r=e[c][t],o=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},a=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=a,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}()):void(l[t]=i)}),o.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||t:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,i,a=c.call(arguments,1),r=0,o=a.length;o>r;r++)for(n in a[r])i=a[r][n],
a[r].hasOwnProperty(n)&&void 0!==i&&(t[n]=e.isPlainObject(i)?e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(a){var r="string"==typeof a,o=c.call(arguments,1),s=this;return r?this.each(function(){var n,r=e.data(this,i);return"instance"===a?(s=r,!1):r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(n=r[a].apply(r,o),n!==r&&void 0!==n?(s=n&&n.jquery?s.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):(o.length&&(a=e.widget.extend.apply(null,[a].concat(o))),this.each(function(){var t=e.data(this,i);t?(t.option(a||{}),t._init&&t._init()):e.data(this,i,new n(a,this))})),s}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,a,r,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},i=t.split("."),t=i.shift(),i.length){for(a=o[t]=e.widget.extend({},this.options[t]),r=0;i.length-1>r;r++)a[i[r]]=a[i[r]]||{},a=a[i[r]];if(t=i.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var a,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=a=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),e.each(i,function(i,o){function s(){return t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):void 0}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?a.delegate(u,c,s):n.bind(c,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var a,r,o=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?!0===a||"number"==typeof a?n:a.effect||n:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),o&&e.effects&&e.effects.effect[s]?i[t](a):s!==t&&i[s]?i[s](a.duration,a.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}}),e.widget;var u=!1;e(document).mouseup(function(){u=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(i&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),u=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,n){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,r,o=Math.max,s=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==a)return a;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=i.children()[0];return e("body").append(i),t=r.offsetWidth,i.css("overflow","scroll"),n=r.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),a=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),a=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:a,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i||a?n.width():n.outerWidth(),height:i||a?n.height():n.outerHeight()}}},e.fn.position=function(a){if(!a||!a.of)return p.apply(this,arguments);a=e.extend({},a);var f,m,g,v,b,y,w=e(a.of),_=e.position.getWithinInfo(a.within),k=e.position.getScrollInfo(_),C=(a.collision||"flip").split(" "),S={};return y=i(w),w[0].preventDefault&&(a.at="left top"),m=y.width,g=y.height,v=y.offset,b=e.extend({},v),e.each(["my","at"],function(){var e,t,n=(a[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",e=h.exec(n[0]),t=h.exec(n[1]),S[this]=[e?e[0]:0,t?t[0]:0],a[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]}),1===C.length&&(C[1]=C[0]),"right"===a.at[0]?b.left+=m:"center"===a.at[0]&&(b.left+=m/2),"bottom"===a.at[1]?b.top+=g:"center"===a.at[1]&&(b.top+=g/2),f=t(S.at,m,g),b.left+=f[0],b.top+=f[1],this.each(function(){var i,c,u=e(this),h=u.outerWidth(),d=u.outerHeight(),p=n(this,"marginLeft"),y=n(this,"marginTop"),T=h+p+n(this,"marginRight")+k.width,x=d+y+n(this,"marginBottom")+k.height,D=e.extend({},b),E=t(S.my,u.outerWidth(),u.outerHeight());"right"===a.my[0]?D.left-=h:"center"===a.my[0]&&(D.left-=h/2),"bottom"===a.my[1]?D.top-=d:"center"===a.my[1]&&(D.top-=d/2),D.left+=E[0],D.top+=E[1],r||(D.left=l(D.left),D.top=l(D.top)),i={marginLeft:p,marginTop:y},e.each(["left","top"],function(t,n){e.ui.position[C[t]]&&e.ui.position[C[t]][n](D,{targetWidth:m,targetHeight:g,elemWidth:h,elemHeight:d,collisionPosition:i,collisionWidth:T,collisionHeight:x,offset:[f[0]+E[0],f[1]+E[1]],my:a.my,at:a.at,within:_,elem:u})}),a.using&&(c=function(e){var t=v.left-D.left,n=t+m-h,i=v.top-D.top,r=i+g-d,l={target:{element:w,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:D.left,top:D.top,width:h,height:d},horizontal:0>n?"left":t>0?"right":"center",vertical:0>r?"top":i>0?"bottom":"middle"};h>m&&m>s(t+n)&&(l.horizontal="center"),d>g&&g>s(i+r)&&(l.vertical="middle"),l.important=o(s(t),s(n))>o(s(i),s(r))?"horizontal":"vertical",a.using.call(this,e,l)}),u.offset(e.extend(D,{using:c}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,a=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,s=e.left-t.collisionPosition.marginLeft,l=a-s,c=s+t.collisionWidth-r-a;t.collisionWidth>r?l>0&&0>=c?(n=e.left+l+t.collisionWidth-r-a,e.left+=l-n):e.left=c>0&&0>=l?a:l>c?a+r-t.collisionWidth:a:l>0?e.left+=l:c>0?e.left-=c:e.left=o(e.left-s,e.left)},top:function(e,t){var n,i=t.within,a=i.isWindow?i.scrollTop:i.offset.top,r=t.within.height,s=e.top-t.collisionPosition.marginTop,l=a-s,c=s+t.collisionHeight-r-a;t.collisionHeight>r?l>0&&0>=c?(n=e.top+l+t.collisionHeight-r-a,e.top+=l-n):e.top=c>0&&0>=l?a:l>c?a+r-t.collisionHeight:a:l>0?e.top+=l:c>0?e.top-=c:e.top=o(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,a=t.within,r=a.offset.left+a.scrollLeft,o=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,h=c+t.collisionWidth-o-l,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>u?(0>(n=e.left+d+f+p+t.collisionWidth-o-r)||s(u)>n)&&(e.left+=d+f+p):h>0&&((i=e.left-t.collisionPosition.marginLeft+d+f+p-l)>0||h>s(i))&&(e.left+=d+f+p)},top:function(e,t){var n,i,a=t.within,r=a.offset.top+a.scrollTop,o=a.height,l=a.isWindow?a.scrollTop:a.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,h=c+t.collisionHeight-o-l,d="top"===t.my[1],f=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(0>(i=e.top+f+p+m+t.collisionHeight-o-r)||s(u)>i)&&(e.top+=f+p+m):h>0&&((n=e.top-t.collisionPosition.marginTop+f+p+m-l)>0||h>s(n))&&(e.top+=f+p+m)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,a,o,s=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)t.style[o]=i[o];t.appendChild(l),n=s||document.documentElement,n.insertBefore(t,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",a=e(l).offset().left,r=a>10&&11>a,t.innerHTML="",n.removeChild(t)}()}(),e.ui.position,e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,a=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(i=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(i=e(t.target)),!!i&&(!(this.options.handle&&!n&&(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(a=!0)}),!a))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,i){var a,r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,a,r,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],a=i.item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&a!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==a&&!e.contains(this.placeholder[0],a)&&("semi-dynamic"!==this.options.type||!e.contains(this.element[0],a))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,a=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,a=i+this.helperProportions.height,r=e.left,o=r+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>s&&l>i+c,d="y"===this.options.axis||t+u>r&&o>t+u,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:t+this.helperProportions.width/2>r&&o>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>s&&l>a-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&n,a=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!i&&(this.floating?r&&"right"===r||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&n||"left"===a&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){s.push(this)}var i,a,r,o,s=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(r=e(c[i],this.document[0]),a=r.length-1;a>=0;a--)(o=e.data(r[a],this.widgetFullName))&&o!==this&&!o.options.disabled&&l.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,a,r,o,s,l,c,u=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(a=e(d[n],this.document[0]),i=a.length-1;i>=0;i--)(r=e.data(a[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(h.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(n=h.length-1;n>=0;n--)for(o=h[n][1],s=h[n][0],i=0,c=s.length;c>i;i++)l=e(s[i]),l.data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,a,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(a=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=a.outerWidth(),i.height=a.outerHeight()),r=a.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),a=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(a)):"tr"===i?t._createTrPlaceholder(t.currentItem,a):"img"===i&&a.attr("src",t.currentItem.attr("src")),n||a.css("visibility","hidden"),a},update:function(e,a){(!n||i.forcePlaceholderSize)&&(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var i=this;t.children().each(function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,i,a,r,o,s,l,c,u,h,d=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&e.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(a=1e4,r=null,u=d.floating||this._isFloating(this.currentItem),o=u?"left":"top",s=u?"width":"height",h=u?"clientX":"clientY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[o],c=!1,t[h]-l>this.items[i][s]/2&&(c=!0),a>Math.abs(t[h]-l)&&(a=Math.abs(t[h]-l),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),
left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode),("document"===a.containment||"window"===a.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===a.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===a.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],n=e(a.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(a[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:a.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:a.scrollLeft())*i}},_generatePosition:function(t){var n,i,a=this.options,r=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),a.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/a.grid[1])*a.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-a.grid[1]:n+a.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/a.grid[0])*a.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-a.grid[0]:i+a.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,a=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&a.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||a.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(a.push(function(e){this._trigger("remove",e,this._uiHash())}),a.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),a.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||a.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(a.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;a.length>i;i++)a[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var n,i,a,r,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,i=this.previousFilter||"",a=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),a===i?r=!0:a=i+a,n=this._filterMenuItems(a),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(a=String.fromCharCode(t.keyCode),n=this._filterMenuItems(a)),n.length?(this.focus(t,n),this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,n,i=this,a=this.options.icons.submenu,r=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.parent(),i=e("<span>").addClass("ui-menu-icon ui-icon "+a).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))}),t=r.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);i._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,a,r,o,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.outerHeight(),0>a?this.activeMenu.scrollTop(r+a):a+s>o&&this.activeMenu.scrollTop(r+a-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,a;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),0>n.offset().top-i-a}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,i,a;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+a>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,a=this.element[0].nodeName.toLowerCase(),r="textarea"===a,o="input"===a;this.isMultiLine=!!r||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[r||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(a.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",a);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case r.UP:t=!0,this._keyEvent("previous",a);break;case r.DOWN:t=!0,this._keyEvent("next",a);break;case r.ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case r.TAB:this.menu.active&&this.menu.select(a);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(a),a.preventDefault());break;default:n=!0,this._searchTimeout(a)}},keypress:function(i){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault());if(!n){var a=e.ui.keyCode;switch(i.keyCode){case a.PAGE_UP:this._move("previousPage",i);break;case a.PAGE_DOWN:this._move("nextPage",i);break;case a.UP:this._keyEvent("previous",i);break;case a.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){var i,a;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(a=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:a})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(a.value),void((i=n.item.attr("aria-label")||a.value)&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,a){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!n&&!i)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),--this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").text(n.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var h;e.extend(a.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,a,r;i=t.nodeName.toLowerCase(),a="div"===i||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),r=this._newInst(e(t),a),r.settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,r):a&&this._inlineDatepicker(t,r)},_newInst:function(t,n){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?r(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,a,r,o=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[s?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&t.focus(this._showDatepicker),("button"===i||"both"===i)&&(a=this._get(n,"buttonText"),r=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:r,alt:a,title:a}):e("<button type='button'></button>").addClass(this._triggerClass).html(r?e("<img/>").attr({src:r,alt:a,title:a}):a)),t[s?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,a,r=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=0,i=0,a=0;e.length>a;a++)e[a].length>n&&(n=e[a].length,i=a);return i},r.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,a,r){var o,l,c,u,h,d=this._dialogInst;return d||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},e.data(this._dialogInput[0],"datepicker",d)),s(d.settings,a||{}),n=n&&n.constructor===Date?this._formatDate(d,n):n,this._dialogInput.val(n),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(t){var n,i=e(t),a=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===n?(a.append.remove(),a.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty(),h===a&&(h=null))},_enableDatepicker:function(t){var n,i,a=e(t),r=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=a.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,i,a=e(t),r=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=a.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,i){var a,r,o,l,c=this._getInst(t);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):c?"all"===n?e.extend({},c.settings):this._get(c,n):null:(a=n||{},"string"==typeof n&&(a={},a[n]=i),void(c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),s(c.settings,a),null!==o&&void 0!==a.dateFormat&&void 0===a.minDate&&(c.settings.minDate=this._formatDate(c,o)),null!==l&&void 0!==a.dateFormat&&void 0===a.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in a&&(a.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c))))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,a,r=e.datepicker._getInst(t.target),o=!0,s=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return a=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",r.dpDiv),a[0]&&e.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,a[0]),n=e.datepicker._get(r,"onSelect"),n?(i=e.datepicker._formatDate(r),n.apply(r.input?r.input[0]:null,[i,r])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:
(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,i,a=e.datepicker._getInst(t.target);return e.datepicker._get(a,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(a,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(t){var n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n))&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(e){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,a,r,o,l,c,u;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),a=e.datepicker._get(n,"beforeShow"),!1!==(r=a?a.apply(t,[t,n]):{})&&(s(n.settings,r),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return!(o|="fixed"===e(this).css("position"))}),l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),l=e.datepicker._checkOffset(n,l,o),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),n.inline||(c=e.datepicker._get(n,"showAnim"),u=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",i(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[c]?n.dpDiv.show(c,e.datepicker._get(n,"showOptions"),u):n.dpDiv[c||"show"](c?u:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,h=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,i=this._getNumberOfMonths(t),a=i[1],r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var a=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?a-o:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+s?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+a>l&&l>a?Math.abs(n.left+a-l):0),n.top-=Math.min(n.top,n.top+r>c&&c>r?Math.abs(r+s):0),n},_findPos:function(t){for(var n,i=this._getInst(t),a=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[a?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,i,a,r,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(o,"showAnim"),i=this._get(o,"duration"),a=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),i,a):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,a),n||a(),this._datepickerShowing=!1,r=this._get(o,"onClose"),r&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var a=e(t),r=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(r,n+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(t){var n,i=e(t),a=this._getInst(i[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(n=new Date,a.selectedDay=n.getDate(),a.drawMonth=a.selectedMonth=n.getMonth(),a.drawYear=a.selectedYear=n.getFullYear()),this._notifyChange(a),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var a=e(t),r=this._getInst(a[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(a)},_selectDay:function(t,n,i,a){var r,o=e(t);e(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(r=this._getInst(o[0]),r.selectedDay=r.currentDay=e("a",a).html(),r.selectedMonth=r.currentMonth=n,r.selectedYear=r.currentYear=i,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,a=e(t),r=this._getInst(a[0]);n=null!=n?n:this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r),i=this._get(r,"onSelect"),i?i.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,i,a,r=this._get(t,"altField");r&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),a=this.formatDate(n,i,this._getFormatConfig(t)),e(r).each(function(){e(this).val(a)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?""+n:n+""))return null;var a,r,o,s,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,d=(i?i.dayNames:null)||this._defaults.dayNames,f=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,p=(i?i.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,b=-1,y=!1,w=function(e){var n=t.length>a+1&&t.charAt(a+1)===e;return n&&a++,n},_=function(e){var t=w(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,a="y"===e?i:1,r=RegExp("^\\d{"+a+","+i+"}"),o=n.substring(l).match(r);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},k=function(t,i,a){var r=-1,o=e.map(w(t)?a:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var i=t[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(r=t[0],l+=i.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+l},C=function(){if(n.charAt(l)!==t.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;t.length>a;a++)if(y)"'"!==t.charAt(a)||w("'")?C():y=!1;else switch(t.charAt(a)){case"d":v=_("d");break;case"D":k("D",h,d);break;case"o":b=_("o");break;case"m":g=_("m");break;case"M":g=k("M",f,p);break;case"y":m=_("y");break;case"@":s=new Date(_("@")),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"!":s=new Date((_("!")-this._ticksTo1970)/1e4),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"'":w("'")?C():y=!0;break;default:C()}if(n.length>l&&(o=n.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),b>-1)for(g=1,v=b;!((r=this._getDaysInMonth(m,g-1))>=v);)g++,v-=r;if(s=this._daylightSavingAdjust(new Date(m,g-1,v)),s.getFullYear()!==m||s.getMonth()+1!==g||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i,a=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=e.length>i+1&&e.charAt(i+1)===t;return n&&i++,n},c=function(e,t,n){var i=""+t;if(l(e))for(;n>i.length;)i="0"+i;return i},u=function(e,t,n,i){return l(e)?i[t]:n[t]},h="",d=!1;if(t)for(i=0;e.length>i;i++)if(d)"'"!==e.charAt(i)||l("'")?h+=e.charAt(i):d=!1;else switch(e.charAt(i)){case"d":h+=c("d",t.getDate(),2);break;case"D":h+=u("D",t.getDay(),a,r);break;case"o":h+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",t.getMonth()+1,2);break;case"M":h+=u("M",t.getMonth(),o,s);break;case"y":h+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=e.charAt(i)}return h},_possibleChars:function(e){var t,n="",i=!1,a=function(n){var i=e.length>t+1&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;e.length>t;t++)if(i)"'"!==e.charAt(t)||a("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":a("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,a=this._getDefaultDate(e),r=a,o=this._getFormatConfig(e);try{r=this.parseDate(n,i,o)||a}catch(e){i=t?"":i}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=i?r.getDate():0,e.currentMonth=i?r.getMonth():0,e.currentYear=i?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var a=null==n||""===n?i:"string"==typeof n?function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(e){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=i.getFullYear(),r=i.getMonth(),o=i.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(n);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(a,r));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(a,r))}l=s.exec(n)}return new Date(a,r,o)}(n):"number"==typeof n?isNaN(n)?i:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(n):new Date(n.getTime());return a=a&&"Invalid Date"==""+a?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,a=e.selectedMonth,r=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),a===e.selectedMonth&&r===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,a,r,o,s,l,c,u,h,d,f,p,m,g,v,b,y,w,_,k,C,S,T,x,D,E,A,$,M,I,N,P,O,j,R,L,F,U=new Date,W=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),H=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),Y=this._get(e,"hideIfNoPrevNext"),B=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),q=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),X=1!==V[0]||1!==V[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-q,ee=e.drawYear;if(0>Z&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)0>--Z&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,n=this._get(e,"prevText"),n=B?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+n+"</span></a>":Y?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+n+"</span></a>",a=this._get(e,"nextText"),a=B?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e)):a,r=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+a+"</span></a>":Y?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+a+"</span></a>",o=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?G:W,o=B?this.formatDate(o,s,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(H?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(H?"":l)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(e,"showWeek"),d=this._get(e,"dayNames"),f=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),w="",k=0;V[0]>k;k++){for(C="",this.maxRows=4,S=0;V[1]>S;S++){if(T=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),x=" ui-corner-all",D="",X){if(D+="<div class='ui-datepicker-group",V[1]>1)switch(S){case 0:D+=" ui-datepicker-group-first",x=" ui-corner-"+(H?"right":"left");break;case V[1]-1:D+=" ui-datepicker-group-last",x=" ui-corner-"+(H?"left":"right");break;default:D+=" ui-datepicker-group-middle",x=""}D+="'>"}for(D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+x+"'>"+(/all|left/.test(x)&&0===k?H?r:i:"")+(/all|right/.test(x)&&0===k?H?i:r:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,k>0||S>0,p,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",E=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",_=0;7>_;_++)A=(_+u)%7,E+="<th scope='col'"+((_+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[A]+"'>"+f[A]+"</span></th>";for(D+=E+"</tr></thead><tbody>",$=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,$)),M=(this._getFirstDayOfMonth(ee,Z)-u+7)%7,I=Math.ceil((M+$)/7),N=X&&this.maxRows>I?this.maxRows:I,this.maxRows=N,P=this._daylightSavingAdjust(new Date(ee,Z,1-M)),O=0;N>O;O++){for(D+="<tr>",j=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"",_=0;7>_;_++)R=g?g.apply(e.input?e.input[0]:null,[P]):[!0,""],L=P.getMonth()!==Z,F=L&&!b||!R[0]||Q&&Q>P||J&&P>J,j+="<td class='"+((_+u+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(P.getTime()===T.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===P.getTime()&&y.getTime()===T.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+R[1]+(P.getTime()===G.getTime()?" "+this._currentClass:"")+(P.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(F?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":F?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===W.getTime()?" ui-state-highlight":"")+(P.getTime()===G.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);D+=j+"</tr>"}Z++,Z>11&&(Z=0,ee++),D+="</tbody></table>"+(X?"</div>"+(V[0]>0&&S===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=D}w+=C}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,i,a,r,o,s){var l,c,u,h,d,f,p,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",w="";if(r||!g)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=i&&i.getFullYear()===n,c=a&&a.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=i.getMonth())&&(!c||a.getMonth()>=u)&&(w+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+s[u]+"</option>");w+="</select>"}if(b||(y+=w+(!r&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!v)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),f=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);return isNaN(t)?d:t},p=f(h[0]),m=Math.max(p,f(h[1]||"")),p=i?Math.max(p,i.getFullYear()):p,m=a?Math.min(m,a.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=p;p++)e.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!r&&g&&v?"":"&#xa0;")+w),y+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"===n?t:0),a=e.drawMonth+("M"===n?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(i,a))+("D"===n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,a,r)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),a=n&&n>t?n:t;return i&&a>i?i:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var a=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(n,i+(0>t?t:a[0]*a[1]),1));return 0>t&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var n,i,a=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),o=null,s=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),o=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!a||t.getTime()>=a.getTime())&&(!r||t.getTime()<=r.getTime())&&(!o||t.getFullYear()>=o)&&(!s||s>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new a,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker}),function(e){e.fn.qrcode=function(t){"string"==typeof t&&(t={text:t}),t=e.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},t);var n=function(){var e=new QRCode(t.typeNumber,t.correctLevel);e.addData(t.text),e.make();var n=document.createElement("canvas");n.width=t.width,n.height=t.height;for(var i=n.getContext("2d"),a=t.width/e.getModuleCount(),r=t.height/e.getModuleCount(),o=0;o<e.getModuleCount();o++)for(var s=0;s<e.getModuleCount();s++){i.fillStyle=e.isDark(o,s)?t.foreground:t.background;var l=Math.ceil((s+1)*a)-Math.floor(s*a),c=Math.ceil((o+1)*a)-Math.floor(o*a);i.fillRect(Math.round(s*a),Math.round(o*r),l,c)}return n},i=function(){var n=new QRCode(t.typeNumber,t.correctLevel);n.addData(t.text),n.make();for(var i=e("<table></table>").css("width",t.width+"px").css("height",t.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",t.background),a=t.width/n.getModuleCount(),r=t.height/n.getModuleCount(),o=0;o<n.getModuleCount();o++)for(var s=e("<tr></tr>").css("height",r+"px").appendTo(i),l=0;l<n.getModuleCount();l++)e("<td></td>").css("width",a+"px").css("background-color",n.isDark(o,l)?t.foreground:t.background).appendTo(s);return i};return this.each(function(){var a="canvas"==t.render?n():i();e(a).appendTo(this)})}}(jQuery),function(e,t){function n(t,n,i,a){var r={data:a||0===a||!1===a?a:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:u,nest:h,wrap:d,html:f,update:p};return t&&e.extend(r,t,{nodes:[],parent:n}),i&&(r.tmpl=i,r._ctnt=r._ctnt||e.isFunction(r.tmpl)&&r.tmpl(e,r)||i,r.key=++_,(C.length?y:b)[_]=r),r}function i(t,n,r){var o,s=r?e.map(r,function(e){return"string"==typeof e?t.key?e.replace(S.template_anotate,"$1 "+v+'="'+t.key+'" $2'):e:i(e,t,e._ctnt)}):t;return n?s:(s=s.join(""),s.replace(S.text_only_template,function(t,n,i,r){o=e(i).get(),c(o),n&&(o=a(n).concat(o)),r&&(o=o.concat(a(r)))}),o||a(s))}function a(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function r(t){var n=function(n,i,a,r,o,l,c){if(!a)return"');__.push('";var u,h,d,f=e.tmpl.tag[a];return!f&&window.console&&console.group&&(console.group("Exception"),console.error(t),console.error("Unknown tag: ",a),console.error(n),console.groupEnd("Exception")),f?(u=f._default||[],l&&!S.last_word.test(o)&&(o+=l,l=""),o?(o=s(o),c=c?","+s(c)+")":l?")":"",h=l?o.indexOf(".")>-1?o+s(l):"("+o+").call($item"+c:o,d=l?h:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):d=h=u.$1||"null",r=s(r),"');"+f[i?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(d).split("$1").join(h).split("$2").join(r||u.$2||"")+"__.push('"):"');__.push('"},i=function(){return e.tmpl.tag[arguments[2]]?(console.group("Depreciated"),console.info(t),console.info("Markup has old style indicators, use {% %} instead of {{ }}"),console.info(arguments[0]),console.groupEnd("Depreciated"),n.apply(this,arguments)):"');__.push('{{"+arguments[2]+"}}');__.push('"},a="var $=$,call,__=[],$data=$item.data; with($data){__.push('",r=e.trim(t);return r=r.replace(S.sq_escape,"\\$1"),r=r.replace(S.nl_strip," "),r=r.replace(S.shortcut_replace,"{%= $1%}"),r=r.replace(S.lang_parse,n),r=r.replace(S.old_lang_parse,i),a+=r,a+="');}return __;",new Function("$","$item",a)}function o(t,n){t._wrap=i(t,!0,e.isArray(n)?n:[S.html_expr.test(n)?n:e(n).html()]).join("")}function s(e){return e?e.replace(S.sq_unescape,"'").replace(S.dq_unescape,"\\"):null}function l(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function c(t){function i(t){function i(e){e+=c,o=u[e]=u[e]||n(o,b[o.parent.key+c]||o.parent)}var a,r,o,s,l=t;if(s=t.getAttribute(v)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(a=l.getAttribute(v)););a!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(v)||0:0,(o=b[s])||(o=y[s],o=n(o,b[l]||y[l]),o.key=++_,b[_]=o),k&&i(s)),t.removeAttribute(v)}else k&&(o=e.data(t,"tmplItem"))&&(i(o.key),b[o.key]=o,l=e.data(t.parentNode,"tmplItem"),l=l?l.key:0);if(o){for(r=o;r&&r.key!=l;)r.nodes.push(t),r=r.parent;delete o._ctnt,delete o._wrap,e.data(t,"tmplItem",o)}}var a,r,o,s,l,c="_"+k,u={};for(o=0,s=t.length;o<s;o++)if(1===(a=t[o]).nodeType){for(r=a.getElementsByTagName("*"),l=r.length-1;l>=0;l--)i(r[l]);i(a)}}function u(e,t,n,i){if(!e)return C.pop();C.push({_:e,tmpl:t,item:this,data:n,options:i})}function h(t,n,i){return e.tmpl(e.template(t),n,i,this)}function d(t,n){var i=t.options||{};return i.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,i,t.item)}function f(t,n){var i=this._wrap;return e.map(e(e.isArray(i)?i.join(""):i).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||l(e)})}function p(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var m,g=e.fn.domManip,v="_tmplitem",b={},y={},w={key:0,data:{}},_=0,k=0,C=[],S={sq_escape:/([\\'])/g,sq_unescape:/\\'/g,dq_unescape:/\\\\/g,nl_strip:/[\r\t\n]/g,shortcut_replace:/\$\{([^\}]*)\}/g,lang_parse:/\{\%(\/?)(\w+|.)(?:\(((?:[^\%]|\%(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\%]|\%(?!\}))*?)\))?\s*\%\}/g,old_lang_parse:/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,template_anotate:/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,text_only_template:/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,html_expr:/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! |\{\%! /,last_word:/\w$/};e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(i){var a,r,o,s,l=[],c=e(i),u=1===this.length&&this[0].parentNode;if(m=b||{},u&&11===u.nodeType&&1===u.childNodes.length&&1===c.length)c[n](this[0]),l=this;else{for(r=0,o=c.length;r<o;r++)k=r,a=(r>0?this.clone(!0):this).get(),e(c[r])[n](a),l=l.concat(a);k=0,l=this.pushStack(l,t,c.selector)}return s=m,m=null,e.tmpl.complete(s),l}}),e.fn.extend({tmpl:function(t,n,i){return e.tmpl(this[0],t,n,i)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,i,a){if(t[0]&&e.isArray(t[0])){for(var r,o=e.makeArray(arguments),s=t[0],l=s.length,c=0;c<l&&!(r=e.data(s[c++],"tmplItem")););r&&k&&(o[2]=function(t){e.tmpl.afterManip(this,t,i)}),g.apply(this,o)}else g.apply(this,arguments);return k=0,m||e.tmpl.complete(b),this}}),e.extend({tmpl:function(t,a,r,s){var l,c=!s;if(c)s=w,t=e.template[t]||e.template(null,t),y={};else if(!t)return t=s.tmpl,b[s.key]=s,s.nodes=[],s.wrapped&&o(s,s.wrapped),e(i(s,null,s.tmpl(e,s)));return t?("function"==typeof a&&(a=a.call(s||{})),r&&r.wrapped&&o(r,r.wrapped),l=e.isArray(a)?e.map(a,function(e){return e?n(r,s,t,e):null}):[n(r,s,t,a)],c?e(i(s,null,l)):l):[]},tmplItem:function(t){var n;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode););return n||w},template:function(t,n){return n?("string"==typeof n?n=r(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",r(n.innerHTML))),
"string"==typeof t?e.template[t]=n:n):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,t):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{open:"}else{"},elif:{open:"}else if(($notnull_1) && $1a){"},elseif:{open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(e){b={}},afterManip:function(t,n,i){var a=11===n.nodeType?e.makeArray(n.childNodes):1===n.nodeType?[n]:[];i.call(t,n),c(a),k++}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=e.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(t){function i(){var i,a;return!n.settings.submitHandler||(n.submitButton&&(i=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),a=n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&i.remove(),void 0!==a&&a)}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var t,n,i;return e(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,n=e(this[0].form).validate(),this.each(function(){(t=n.element(this)&&t)||(i=i.concat(n.errorList))}),n.errorList=i),t},rules:function(t,n){if(this.length){var i,a,r,o,s,l,c=this[0];if(t)switch(i=e.data(c.form,"validator").settings,a=i.rules,r=e.validator.staticRules(c),t){case"add":e.extend(r,e.validator.normalizeRule(n)),delete r.messages,a[c.name]=r,n.messages&&(i.messages[c.name]=e.extend(i.messages[c.name],n.messages));break;case"remove":return n?(l={},e.each(n.split(/\s/),function(t,n){l[n]=r[n],delete r[n],"required"===n&&e(c).removeAttr("aria-required")}),l):(delete a[c.name],r)}return o=e.validator.normalizeRules(e.extend({},e.validator.classRules(c),e.validator.attributeRules(c),e.validator.dataRules(c),e.validator.staticRules(c)),c),o.required&&(s=o.required,delete o.required,o=e.extend({required:s},o),e(c).attr("aria-required","true")),o.remote&&(s=o.remote,delete o.remote,o=e.extend(o,{remote:s})),o}}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var n=e(t).val();return null!==n&&!!e.trim(""+n)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:void 0===n?t:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,n){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===n.which&&""===this.elementValue(t)||-1!==e.inArray(n.keyCode,i)||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(i):e(t).addClass(n).removeClass(i)},unhighlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(i):e(t).removeClass(n).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,""),a=n.settings;a[i]&&!e(this).is(a.ignore)&&a[i].call(n,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})}),n=this.settings.rules,e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n,i,a=this.clean(t),r=this.validationTargetFor(a),o=this,s=!0;return void 0===r?delete this.invalid[a.name]:(this.prepareElement(r),this.currentElements=e(r),i=this.groups[r.name],i&&e.each(this.groups,function(e,t){t===i&&e!==r.name&&(a=o.validationTargetFor(o.clean(o.findByName(e))))&&a.name in o.invalid&&(o.currentElements.push(a),s=s&&o.check(a))}),n=!1!==this.check(r),s=s&&n,this.invalid[r.name]=!n,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!n)),s},showErrors:function(t){if(t){var n=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.length},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var i=this.name||e(this).attr("name");return!i&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=e(this).closest("form")[0]),!(i in n||!t.objectLength(e(this).rules()))&&(n[i]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,i,a=e(t),r=t.type;return"radio"===r||"checkbox"===r?this.findByName(t.name).filter(":checked").val():"number"===r&&void 0!==t.validity?t.validity.badInput?"NaN":a.val():(n=t.hasAttribute("contenteditable")?a.text():a.val(),"file"===r?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(i=n.lastIndexOf("/"),i>=0?n.substr(i+1):(i=n.lastIndexOf("\\"),i>=0?n.substr(i+1):n)):"string"==typeof n?n.replace(/\r/g,""):n)},check:function(t){t=this.validationTargetFor(this.clean(t));var n,i,a,r=e(t).rules(),o=e.map(r,function(e,t){return t}).length,s=!1,l=this.elementValue(t);if("function"==typeof r.normalizer){if("string"!=typeof(l=r.normalizer.call(t,l)))throw new TypeError("The normalizer should return a string value.");delete r.normalizer}for(i in r){a={method:i,parameters:r[i]};try{if("dependency-mismatch"===(n=e.validator.methods[i].call(this,l,t,a.parameters))&&1===o){s=!0;continue}if(s=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,a),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+a.method+"' method."),e}}if(!s)return this.objectLength(r)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,n){var i=this.findDefined(this.customMessage(t.name,n.method),this.customDataMessage(t,n.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),a=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,n.parameters,t):a.test(i)&&(i=e.validator.format(i.replace(a,"{$1}"),n.parameters)),i},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var i,a,r,o,s=this.errorsFor(t),l=this.idOrName(t),c=e(t).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(n)):(s=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(n||""),i=s,this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t),s.is("label")?s.attr("for",l):0===s.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(r=s.attr("id"),c?c.match(new RegExp("\\b"+this.escapeCssMeta(r)+"\\b"))||(c+=" "+r):c=r,e(t).attr("aria-describedby",c),(a=this.groups[t.name])&&(o=this,e.each(o.groups,function(t,n){n===a&&e("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",s.attr("id"))})))),!n&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,t)),this.toShow=this.toShow.add(s)},errorsFor:function(t){var n=this.escapeCssMeta(this.idOrName(t)),i=e(t).attr("aria-describedby"),a="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(a=a+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(a)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,n){return!!e(t,n.form).length},function:function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,n){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:n})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(e,t,n,i){/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?e[n]=i:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(t){var n,i,a={},r=e(t),o=t.getAttribute("type");for(n in e.validator.methods)"required"===n?(i=t.getAttribute(n),""===i&&(i=!0),i=!!i):i=r.attr(n),this.normalizeAttributeRule(a,o,n,i);return a.maxlength&&/-1|2147483647|524288/.test(a.maxlength)&&delete a.maxlength,a},dataRules:function(t){var n,i,a={},r=e(t),o=t.getAttribute("type");for(n in e.validator.methods)i=r.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(a,o,n,i);return a},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(i,a){if(!1===a)return void delete t[i];if(a.param||a.depends){var r=!0;switch(typeof a.depends){case"string":r=!!e(a.depends,n.form).length;break;case"function":r=a.depends.call(n,n)}r?t[i]=void 0===a.param||a.param:(e.data(n.form,"validator").resetElements(e(n)),delete t[i])}}),e.each(t,function(i,a){t[i]=e.isFunction(a)&&"normalizer"!==i?a(n):a}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==i?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var a=e(n).val();return a&&a.length>0}return this.checkable(n)?this.getLength(t,n)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||a>=i},maxlength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i>=a},rangelength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||a>=i[0]&&a<=i[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(t,n,i){var a=e(n).attr("type"),r="Step attribute on input type "+a+" is not supported.",o=["text","number","range"],s=new RegExp("\\b"+a+"\\b");if(a&&!s.test(o.join()))throw new Error(r);return this.optional(n)||t%i==0},equalTo:function(t,n,i){var a=e(i);return this.settings.onfocusout&&a.not(".validate-equalTo-blur").length&&a.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(n).valid()}),t===a.val()},remote:function(t,n,i,a){if(this.optional(n))return"dependency-mismatch";a="string"==typeof a&&a||"remote";var r,o,s,l=this.previousValue(n,a);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[n.name][a],this.settings.messages[n.name][a]=l.message,i="string"==typeof i&&{url:i}||i,s=e.param(e.extend({data:t},i.data)),l.old===s?l.valid:(l.old=s,r=this,this.startRequest(n),o={},o[n.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:o,context:r.currentForm,success:function(e){var i,o,s,c=!0===e||"true"===e;r.settings.messages[n.name][a]=l.originalMessage,c?(s=r.formSubmitted,r.resetInternals(),r.toHide=r.errorsFor(n),r.formSubmitted=s,r.successList.push(n),r.invalid[n.name]=!1,r.showErrors()):(i={},o=e||r.defaultMessage(n,{method:a,parameters:t}),i[n.name]=l.message=o,r.invalid[n.name]=!0,r.showErrors(i)),l.valid=c,r.stopRequest(n,c)}},i)),"pending")}}});var t,n={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,i){var a=e.port;"abort"===e.mode&&(n[a]&&n[a].abort(),n[a]=i)}):(t=e.ajax,e.ajax=function(i){var a=("mode"in i?i:e.ajaxSettings).mode,r=("port"in i?i:e.ajaxSettings).port;return"abort"===a?(n[r]&&n[r].abort(),n[r]=t.apply(this,arguments),n[r]):t.apply(this,arguments)})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return pi.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){var t;for(t in e)return!1;return!0}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,i){return gt(e,t,n,i,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function h(e){return null==e._pf&&(e._pf=u()),e._pf}function d(e){if(null==e._isValid){var t=h(e),n=gi.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function f(e){var t=c(NaN);return null!=e?l(h(t),e):h(t).userInvalidated=!0,t}function p(e){return void 0===e}function m(e,t){var n,i,a;if(p(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),p(t._i)||(e._i=t._i),p(t._f)||(e._f=t._f),p(t._l)||(e._l=t._l),p(t._strict)||(e._strict=t._strict),p(t._tzm)||(e._tzm=t._tzm),p(t._isUTC)||(e._isUTC=t._isUTC),p(t._offset)||(e._offset=t._offset),p(t._pf)||(e._pf=h(t)),p(t._locale)||(e._locale=t._locale),vi.length>0)for(n in vi)i=vi[n],a=t[i],p(a)||(e[i]=a);return e}function g(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===bi&&(bi=!0,e.updateOffset(this),bi=!1)}function v(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function b(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=b(t)),n}function w(e,t,n){var i,a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(i=0;i<a;i++)(n&&e[i]!==t[i]||!n&&y(e[i])!==y(t[i]))&&o++;return o+r}function _(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function k(t,n){var i=!0;return l(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),i){for(var a,r=[],o=0;o<arguments.length;o++){if(a="","object"==typeof arguments[o]){a+="\n["+o+"] ";for(var s in arguments[0])a+=s+": "+arguments[0][s]+", ";a=a.slice(0,-2)}else a=arguments[o];r.push(a)}_(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),i=!1}return n.apply(this,arguments)},n)}function C(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),yi[t]||(_(n),yi[t]=!0)}function S(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e){var t,n;for(n in e)t=e[n],S(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function x(e,t){var i,a=l({},e);for(i in t)s(t,i)&&(n(e[i])&&n(t[i])?(a[i]={},l(a[i],e[i]),l(a[i],t[i])):null!=t[i]?a[i]=t[i]:delete a[i]);for(i in e)s(e,i)&&!s(t,i)&&n(e[i])&&(a[i]=l({},a[i]));return a}function D(e){null!=e&&this.set(e)}function E(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return S(i)?i.call(t,n):i}function A(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function $(){return this._invalidDate}function M(e){return this._ordinal.replace("%d",e)}function I(e,t,n,i){var a=this._relativeTime[n];return S(a)?a(e,t,n,i):a.replace(/%d/i,e)}function N(e,t){var n=this._relativeTime[e>0?"future":"past"];return S(n)?n(t):n.replace(/%s/i,t)}function P(e,t){var n=e.toLowerCase();Di[n]=Di[n+"s"]=Di[t]=e}function O(e){return"string"==typeof e?Di[e]||Di[e.toLowerCase()]:void 0}function j(e){var t,n,i={};for(n in e)s(e,n)&&(t=O(n))&&(i[t]=e[n]);return i}function R(e,t){Ei[e]=t}function L(e){var t=[];for(var n in e)t.push({unit:n,priority:Ei[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function F(t,n){return function(i){return null!=i?(W(this,t,i),e.updateOffset(this,n),this):U(this,t)}}function U(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function W(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function H(e){return e=O(e),S(this[e])?this[e]():this}function z(e,t){if("object"==typeof e){e=j(e);for(var n=L(e),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit])}else if(e=O(e),S(this[e]))return this[e](t);return this}function Y(e,t,n){var i=""+Math.abs(e),a=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+i}function B(e,t,n,i){var a=i;"string"==typeof i&&(a=function(){return this[i]()}),e&&(Ii[e]=a),t&&(Ii[t[0]]=function(){return Y(a.apply(this,arguments),t[1],t[2])}),n&&(Ii[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function q(e){var t,n,i=e.match(Ai);for(t=0,n=i.length;t<n;t++)Ii[i[t]]?i[t]=Ii[i[t]]:i[t]=V(i[t]);return function(t){var a,r="";for(a=0;a<n;a++)r+=i[a]instanceof Function?i[a].call(t,e):i[a];return r}}function K(e,t){return e.isValid()?(t=X(t,e.localeData()),Mi[t]=Mi[t]||q(t),Mi[t](e)):e.localeData().invalidDate()}function X(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for($i.lastIndex=0;i>=0&&$i.test(e);)e=e.replace($i,n),$i.lastIndex=0,i-=1;return e}function G(e,t,n){Gi[e]=S(t)?t:function(e,i){return e&&n?n:t}}function Q(e,t){return s(Gi,e)?Gi[e](t._strict,t._locale):new RegExp(J(e))}function J(e){return Z(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,a){return t||n||i||a}))}function Z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ee(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),a(t)&&(i=function(e,n){n[t]=y(e)}),n=0;n<e.length;n++)Qi[e[n]]=i}function te(e,t){ee(e,function(e,n,i,a){i._w=i._w||{},t(e,i._w,i,a)})}function ne(e,t,n){null!=t&&s(Qi,e)&&Qi[e](t,n._a,n,e)}function ie(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ae(e,n){return e?t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||la).test(n)?"format":"standalone"][e.month()]:this._months}function re(e,n){return e?t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[la.test(n)?"format":"standalone"][e.month()]:this._monthsShort}function oe(e,t,n){var i,a,r,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=c([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?(a=sa.call(this._shortMonthsParse,o),-1!==a?a:null):(a=sa.call(this._longMonthsParse,o),-1!==a?a:null):"MMM"===t?(a=sa.call(this._shortMonthsParse,o),-1!==a?a:(a=sa.call(this._longMonthsParse,o),-1!==a?a:null)):(a=sa.call(this._longMonthsParse,o),-1!==a?a:(a=sa.call(this._shortMonthsParse,o),-1!==a?a:null))}function se(e,t,n){var i,a,r;if(this._monthsParseExact)return oe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(a=c([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i
;if(!n&&this._monthsParse[i].test(e))return i}}function le(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=y(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ce(t){return null!=t?(le(this,t),e.updateOffset(this,!0),this):U(this,"Month")}function ue(){return ie(this.year(),this.month())}function he(e){return this._monthsParseExact?(s(this,"_monthsRegex")||fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=ha),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function de(e){return this._monthsParseExact?(s(this,"_monthsRegex")||fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=da),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function fe(){function e(e,t){return t.length-e.length}var t,n,i=[],a=[],r=[];for(t=0;t<12;t++)n=c([2e3,t]),i.push(this.monthsShort(n,"")),a.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(e),a.sort(e),r.sort(e),t=0;t<12;t++)i[t]=Z(i[t]),a[t]=Z(a[t]);for(t=0;t<24;t++)r[t]=Z(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function pe(e){return me(e)?366:365}function me(e){return e%4==0&&e%100!=0||e%400==0}function ge(){return me(this.year())}function ve(e,t,n,i,a,r,o){var s=new Date(e,t,n,i,a,r,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function be(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ye(e,t,n){var i=7+t-n;return-(7+be(e,0,i).getUTCDay()-t)%7+i-1}function we(e,t,n,i,a){var r,o,s=(7+n-i)%7,l=ye(e,i,a),c=1+7*(t-1)+s+l;return c<=0?(r=e-1,o=pe(r)+c):c>pe(e)?(r=e+1,o=c-pe(e)):(r=e,o=c),{year:r,dayOfYear:o}}function _e(e,t,n){var i,a,r=ye(e.year(),t,n),o=Math.floor((e.dayOfYear()-r-1)/7)+1;return o<1?(a=e.year()-1,i=o+ke(a,t,n)):o>ke(e.year(),t,n)?(i=o-ke(e.year(),t,n),a=e.year()+1):(a=e.year(),i=o),{week:i,year:a}}function ke(e,t,n){var i=ye(e,t,n),a=ye(e+1,t,n);return(pe(e)-i+a)/7}function Ce(e){return _e(e,this._week.dow,this._week.doy).week}function Se(){return this._week.dow}function Te(){return this._week.doy}function xe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function De(e){var t=_e(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ee(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ae(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function $e(e,n){return e?t(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(n)?"format":"standalone"][e.day()]:this._weekdays}function Me(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ie(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ne(e,t,n){var i,a,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=c([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?(a=sa.call(this._weekdaysParse,o),-1!==a?a:null):"ddd"===t?(a=sa.call(this._shortWeekdaysParse,o),-1!==a?a:null):(a=sa.call(this._minWeekdaysParse,o),-1!==a?a:null):"dddd"===t?(a=sa.call(this._weekdaysParse,o),-1!==a?a:(a=sa.call(this._shortWeekdaysParse,o),-1!==a?a:(a=sa.call(this._minWeekdaysParse,o),-1!==a?a:null))):"ddd"===t?(a=sa.call(this._shortWeekdaysParse,o),-1!==a?a:(a=sa.call(this._weekdaysParse,o),-1!==a?a:(a=sa.call(this._minWeekdaysParse,o),-1!==a?a:null))):(a=sa.call(this._minWeekdaysParse,o),-1!==a?a:(a=sa.call(this._weekdaysParse,o),-1!==a?a:(a=sa.call(this._shortWeekdaysParse,o),-1!==a?a:null)))}function Pe(e,t,n){var i,a,r;if(this._weekdaysParseExact)return Ne.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(a=c([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(a,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(a,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(a,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Oe(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ee(e,this.localeData()),this.add(e-t,"d")):t}function je(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Re(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ae(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Le(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=ba),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Fe(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ya),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ue(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=wa),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function We(){function e(e,t){return t.length-e.length}var t,n,i,a,r,o=[],s=[],l=[],u=[];for(t=0;t<7;t++)n=c([2e3,1]).day(t),i=this.weekdaysMin(n,""),a=this.weekdaysShort(n,""),r=this.weekdays(n,""),o.push(i),s.push(a),l.push(r),u.push(i),u.push(a),u.push(r);for(o.sort(e),s.sort(e),l.sort(e),u.sort(e),t=0;t<7;t++)s[t]=Z(s[t]),l[t]=Z(l[t]),u[t]=Z(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function He(){return this.hours()%12||12}function ze(){return this.hours()||24}function Ye(e,t){B(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Be(e,t){return t._meridiemParse}function Ve(e){return"p"===(e+"").toLowerCase().charAt(0)}function qe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ke(e){return e?e.toLowerCase().replace("_","-"):e}function Xe(e){for(var t,n,i,a,r=0;r<e.length;){for(a=Ke(e[r]).split("-"),t=a.length,n=Ke(e[r+1]),n=n?n.split("-"):null;t>0;){if(i=Ge(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&w(a,n,!0)>=t-1)break;t--}r++}return null}function Ge(e){var t=null;if(!Ta[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=_a._abbr,require("./locale/"+e),Qe(t)}catch(e){}return Ta[e]}function Qe(e,t){var n;return e&&(n=p(t)?et(e):Je(e,t))&&(_a=n),_a._abbr}function Je(e,t){if(null!==t){var n=Sa;if(t.abbr=e,null!=Ta[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Ta[e]._config;else if(null!=t.parentLocale){if(null==Ta[t.parentLocale])return xa[t.parentLocale]||(xa[t.parentLocale]=[]),xa[t.parentLocale].push({name:e,config:t}),null;n=Ta[t.parentLocale]._config}return Ta[e]=new D(x(n,t)),xa[e]&&xa[e].forEach(function(e){Je(e.name,e.config)}),Qe(e),Ta[e]}return delete Ta[e],null}function Ze(e,t){if(null!=t){var n,i=Sa;null!=Ta[e]&&(i=Ta[e]._config),t=x(i,t),n=new D(t),n.parentLocale=Ta[e],Ta[e]=n,Qe(e)}else null!=Ta[e]&&(null!=Ta[e].parentLocale?Ta[e]=Ta[e].parentLocale:null!=Ta[e]&&delete Ta[e]);return Ta[e]}function et(e){var n;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return _a;if(!t(e)){if(n=Ge(e))return n;e=[e]}return Xe(e)}function tt(){return ki(Ta)}function nt(e){var t,n=e._a;return n&&-2===h(e).overflow&&(t=n[Zi]<0||n[Zi]>11?Zi:n[ea]<1||n[ea]>ie(n[Ji],n[Zi])?ea:n[ta]<0||n[ta]>24||24===n[ta]&&(0!==n[na]||0!==n[ia]||0!==n[aa])?ta:n[na]<0||n[na]>59?na:n[ia]<0||n[ia]>59?ia:n[aa]<0||n[aa]>999?aa:-1,h(e)._overflowDayOfYear&&(t<Ji||t>ea)&&(t=ea),h(e)._overflowWeeks&&-1===t&&(t=ra),h(e)._overflowWeekday&&-1===t&&(t=oa),h(e).overflow=t),e}function it(e){var t,n,i,a,r,o,s=e._i,l=Da.exec(s)||Ea.exec(s);if(l){for(h(e).iso=!0,t=0,n=$a.length;t<n;t++)if($a[t][1].exec(l[1])){a=$a[t][0],i=!1!==$a[t][2];break}if(null==a)return void(e._isValid=!1);if(l[3]){for(t=0,n=Ma.length;t<n;t++)if(Ma[t][1].exec(l[3])){r=(l[2]||" ")+Ma[t][0];break}if(null==r)return void(e._isValid=!1)}if(!i&&null!=r)return void(e._isValid=!1);if(l[4]){if(!Aa.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=a+(r||"")+(o||""),ct(e)}else e._isValid=!1}function at(t){var n=Ia.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(it(t),void(!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t))))}function rt(e,t,n){return null!=e?e:null!=t?t:n}function ot(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function st(e){var t,n,i,a,r=[];if(!e._d){for(i=ot(e),e._w&&null==e._a[ea]&&null==e._a[Zi]&&lt(e),e._dayOfYear&&(a=rt(e._a[Ji],i[Ji]),e._dayOfYear>pe(a)&&(h(e)._overflowDayOfYear=!0),n=be(a,0,e._dayOfYear),e._a[Zi]=n.getUTCMonth(),e._a[ea]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ta]&&0===e._a[na]&&0===e._a[ia]&&0===e._a[aa]&&(e._nextDay=!0,e._a[ta]=0),e._d=(e._useUTC?be:ve).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ta]=24)}}function lt(e){var t,n,i,a,r,o,s,l;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)r=1,o=4,n=rt(t.GG,e._a[Ji],_e(vt(),1,4).year),i=rt(t.W,1),((a=rt(t.E,1))<1||a>7)&&(l=!0);else{r=e._locale._week.dow,o=e._locale._week.doy;var c=_e(vt(),r,o);n=rt(t.gg,e._a[Ji],c.year),i=rt(t.w,c.week),null!=t.d?((a=t.d)<0||a>6)&&(l=!0):null!=t.e?(a=t.e+r,(t.e<0||t.e>6)&&(l=!0)):a=r}i<1||i>ke(n,r,o)?h(e)._overflowWeeks=!0:null!=l?h(e)._overflowWeekday=!0:(s=we(n,i,a,r,o),e._a[Ji]=s.year,e._dayOfYear=s.dayOfYear)}function ct(t){if(t._f===e.ISO_8601)return void it(t);t._a=[],h(t).empty=!0;var n,i,a,r,o,s=""+t._i,l=s.length,c=0;for(a=X(t._f,t._locale).match(Ai)||[],n=0;n<a.length;n++)r=a[n],i=(s.match(Q(r,t))||[])[0],i&&(o=s.substr(0,s.indexOf(i)),o.length>0&&h(t).unusedInput.push(o),s=s.slice(s.indexOf(i)+i.length),c+=i.length),Ii[r]?(i?h(t).empty=!1:h(t).unusedTokens.push(r),ne(r,i,t)):t._strict&&!i&&h(t).unusedTokens.push(r);h(t).charsLeftOver=l-c,s.length>0&&h(t).unusedInput.push(s),t._a[ta]<=12&&!0===h(t).bigHour&&t._a[ta]>0&&(h(t).bigHour=void 0),h(t).parsedDateParts=t._a.slice(0),h(t).meridiem=t._meridiem,t._a[ta]=ut(t._locale,t._a[ta],t._meridiem),st(t),nt(t)}function ut(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function ht(e){var t,n,i,a,r;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<e._f.length;a++)r=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],ct(t),d(t)&&(r+=h(t).charsLeftOver,r+=10*h(t).unusedTokens.length,h(t).score=r,(null==i||r<i)&&(i=r,n=t));l(e,n||t)}function dt(e){if(!e._d){var t=j(e._i);e._a=o([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),st(e)}}function ft(e){var t=new g(nt(pt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function pt(e){var n=e._i,i=e._f;return e._locale=e._locale||et(e._l),null===n||void 0===i&&""===n?f({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),v(n)?new g(nt(n)):(r(n)?e._d=n:t(i)?ht(e):i?ct(e):mt(e),d(e)||(e._d=null),e))}function mt(n){var i=n._i;void 0===i?n._d=new Date(e.now()):r(i)?n._d=new Date(i.valueOf()):"string"==typeof i?at(n):t(i)?(n._a=o(i.slice(0),function(e){return parseInt(e,10)}),st(n)):"object"==typeof i?dt(n):a(i)?n._d=new Date(i):e.createFromInputFallback(n)}function gt(e,a,r,o,s){var l={};return!0!==r&&!1!==r||(o=r,r=void 0),(n(e)&&i(e)||t(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=r,l._i=e,l._f=a,l._strict=o,ft(l)}function vt(e,t,n,i){return gt(e,t,n,i,!1)}function bt(e,n){var i,a;if(1===n.length&&t(n[0])&&(n=n[0]),!n.length)return vt();for(i=n[0],a=1;a<n.length;++a)n[a].isValid()&&!n[a][e](i)||(i=n[a]);return i}function yt(){return bt("isBefore",[].slice.call(arguments,0))}function wt(){return bt("isAfter",[].slice.call(arguments,0))}function _t(e){var t=j(e),n=t.year||0,i=t.quarter||0,a=t.month||0,r=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+o+7*r,this._months=+a+3*i+12*n,this._data={},this._locale=et(),this._bubble()}function kt(e){return e instanceof _t}function Ct(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function St(e,t){B(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+Y(~~(e/60),2)+t+Y(~~e%60,2)})}function Tt(e,t){var n=(t||"").match(e);if(null===n)return null;var i=n[n.length-1]||[],a=(i+"").match(ja)||["-",0,0],r=60*a[1]+y(a[2]);return 0===r?0:"+"===a[0]?r:-r}function xt(t,n){var i,a;return n._isUTC?(i=n.clone(),a=(v(t)||r(t)?t.valueOf():vt(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+a),e.updateOffset(i,!1),i):vt(t).local()}function Dt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Et(t,n){var i,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Tt(qi,t)))return this}else Math.abs(t)<16&&(t*=60);return!this._isUTC&&n&&(i=Dt(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!n||this._changeInProgress?Yt(this,Ft(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Dt(this)}function At(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function $t(e){return this.utcOffset(0,e)}function Mt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Dt(this),"m")),this}function It(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=Tt(Vi,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Nt(e){return!!this.isValid()&&(e=e?vt(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Pt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ot(){if(!p(this._isDSTShifted))return this._isDSTShifted;var e={};if(m(e,this),e=pt(e),e._a){var t=e._isUTC?c(e._a):vt(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function jt(){return!!this.isValid()&&!this._isUTC}function Rt(){return!!this.isValid()&&this._isUTC}function Lt(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ft(e,t){var n,i,r,o=e,l=null;return kt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(o={},t?o[t]=e:o.milliseconds=e):(l=Ra.exec(e))?(n="-"===l[1]?-1:1,o={y:0,d:y(l[ea])*n,h:y(l[ta])*n,m:y(l[na])*n,s:y(l[ia])*n,ms:y(Ct(1e3*l[aa]))*n}):(l=La.exec(e))?(n="-"===l[1]?-1:1,o={y:Ut(l[2],n),M:Ut(l[3],n),w:Ut(l[4],n),d:Ut(l[5],n),h:Ut(l[6],n),m:Ut(l[7],n),s:Ut(l[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Ht(vt(o.from),vt(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new _t(o),kt(e)&&s(e,"_locale")&&(i._locale=e._locale),i}function Ut(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Wt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ht(e,t){var n;return e.isValid()&&t.isValid()?(t=xt(t,e),e.isBefore(t)?n=Wt(e,t):(n=Wt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function zt(e,t){return function(n,i){var a,r;return null===i||isNaN(+i)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),n="string"==typeof n?+n:n,a=Ft(n,i),Yt(this,a,e),this}}function Yt(t,n,i,a){var r=n._milliseconds,o=Ct(n._days),s=Ct(n._months);t.isValid()&&(a=null==a||a,r&&t._d.setTime(t._d.valueOf()+r*i),o&&W(t,"Date",U(t,"Date")+o*i),s&&le(t,U(t,"Month")+s*i),a&&e.updateOffset(t,o||s))}function Bt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Vt(t,n){var i=t||vt(),a=xt(i,this).startOf("day"),r=e.calendarFormat(this,a)||"sameElse",o=n&&(S(n[r])?n[r].call(this,i):n[r]);return this.format(o||this.localeData().calendar(r,this,vt(i)))}function qt(){return new g(this)}function Kt(e,t){var n=v(e)?e:vt(e);return!(!this.isValid()||!n.isValid())&&(t=O(p(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Xt(e,t){var n=v(e)?e:vt(e);return!(!this.isValid()||!n.isValid())&&(t=O(p(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Gt(e,t,n,i){return i=i||"()",("("===i[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))}function Qt(e,t){var n,i=v(e)?e:vt(e);return!(!this.isValid()||!i.isValid())&&(t=O(t||"millisecond"),"millisecond"===t?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Jt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Zt(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function en(e,t,n){var i,a,r,o;return this.isValid()?(i=xt(e,this),i.isValid()?(a=6e4*(i.utcOffset()-this.utcOffset()),t=O(t),"year"===t||"month"===t||"quarter"===t?(o=tn(this,i),"quarter"===t?o/=3:"year"===t&&(o/=12)):(r=this-i,o="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?o:b(o)):NaN):NaN}function tn(e,t){var n,i,a=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(a,"months");return t-r<0?(n=e.clone().add(a-1,"months"),i=(t-r)/(r-n)):(n=e.clone().add(a+1,"months"),i=(t-r)/(n-r)),-(a+i)||0}function nn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function an(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():K(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function rn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a=t+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+a)}function on(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=K(this,t);return this.localeData().postformat(n)}function sn(e,t){return this.isValid()&&(v(e)&&e.isValid()||vt(e).isValid())?Ft({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ln(e){return this.from(vt(),e)}function cn(e,t){return this.isValid()&&(v(e)&&e.isValid()||vt(e).isValid())?Ft({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function un(e){return this.to(vt(),e)}function hn(e){var t;return void 0===e?this._locale._abbr:(t=et(e),null!=t&&(this._locale=t),this)}function dn(){return this._locale}function fn(e){switch(e=O(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function pn(e){return e=O(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function mn(){return this._d.valueOf()-6e4*(this._offset||0)}function gn(){return Math.floor(this.valueOf()/1e3)}function vn(){return new Date(this.valueOf())}function bn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function yn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function wn(){return this.isValid()?this.toISOString():null}function _n(){return d(this)}function kn(){return l({},h(this))}function Cn(){return h(this).overflow}function Sn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Tn(e,t){B(0,[e,e.length],0,t)}function xn(e){return $n.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Dn(e){return $n.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function En(){return ke(this.year(),1,4)}function An(){var e=this.localeData()._week;return ke(this.year(),e.dow,e.doy)}function $n(e,t,n,i,a){var r;return null==e?_e(this,i,a).year:(r=ke(e,i,a),t>r&&(t=r),Mn.call(this,e,t,n,i,a))}function Mn(e,t,n,i,a){var r=we(e,t,n,i,a),o=be(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function In(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Nn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Pn(e,t){t[aa]=y(1e3*("0."+e))}function On(){return this._isUTC?"UTC":""}function jn(){return this._isUTC?"Coordinated Universal Time":""}function Rn(e){return vt(1e3*e)}function Ln(){return vt.apply(null,arguments).parseZone()}function Fn(e){return e}function Un(e,t,n,i){var a=et(),r=c().set(i,t);return a[n](r,e)}function Wn(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return Un(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=Un(e,i,n,"month");return r}function Hn(e,t,n,i){"boolean"==typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var r=et(),o=e?r._week.dow:0;if(null!=n)return Un(t,(n+o)%7,i,"day");var s,l=[];for(s=0;s<7;s++)l[s]=Un(t,(s+o)%7,i,"day");return l}function zn(e,t){return Wn(e,t,"months")}function Yn(e,t){return Wn(e,t,"monthsShort")}function Bn(e,t,n){return Hn(e,t,n,"weekdays")}function Vn(e,t,n){return Hn(e,t,n,"weekdaysShort")}function qn(e,t,n){return Hn(e,t,n,"weekdaysMin")}function Kn(){var e=this._data;return this._milliseconds=Xa(this._milliseconds),this._days=Xa(this._days),this._months=Xa(this._months),e.milliseconds=Xa(e.milliseconds),e.seconds=Xa(e.seconds),e.minutes=Xa(e.minutes),e.hours=Xa(e.hours),e.months=Xa(e.months),e.years=Xa(e.years),this}function Xn(e,t,n,i){var a=Ft(t,n);return e._milliseconds+=i*a._milliseconds,e._days+=i*a._days,e._months+=i*a._months,e._bubble()}function Gn(e,t){return Xn(this,e,t,1)}function Qn(e,t){return Xn(this,e,t,-1)}function Jn(e){return e<0?Math.floor(e):Math.ceil(e)}function Zn(){var e,t,n,i,a,r=this._milliseconds,o=this._days,s=this._months,l=this._data;return r>=0&&o>=0&&s>=0||r<=0&&o<=0&&s<=0||(r+=864e5*Jn(ti(s)+o),o=0,s=0),l.milliseconds=r%1e3,e=b(r/1e3),l.seconds=e%60,t=b(e/60),l.minutes=t%60,n=b(t/60),l.hours=n%24,o+=b(n/24),a=b(ei(o)),s+=a,o-=Jn(ti(a)),i=b(s/12),s%=12,l.days=o,l.months=s,l.years=i,this}function ei(e){return 4800*e/146097}function ti(e){return 146097*e/4800}function ni(e){var t,n,i=this._milliseconds;if("month"===(e=O(e))||"year"===e)return t=this._days+i/864e5,n=this._months+ei(t),"month"===e?n:n/12;switch(t=this._days+Math.round(ti(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function ii(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function ai(e){return function(){return this.as(e)}}function ri(e){return e=O(e),this[e+"s"]()}function oi(e){return function(){return this._data[e]}}function si(){return b(this.days()/7)}function li(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function ci(e,t,n){var i=Ft(e).abs(),a=hr(i.as("s")),r=hr(i.as("m")),o=hr(i.as("h")),s=hr(i.as("d")),l=hr(i.as("M")),c=hr(i.as("y")),u=a<dr.s&&["s",a]||r<=1&&["m"]||r<dr.m&&["mm",r]||o<=1&&["h"]||o<dr.h&&["hh",o]||s<=1&&["d"]||s<dr.d&&["dd",s]||l<=1&&["M"]||l<dr.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,li.apply(null,u)}function ui(e){return void 0===e?hr:"function"==typeof e&&(hr=e,!0)}function hi(e,t){return void 0!==dr[e]&&(void 0===t?dr[e]:(dr[e]=t,!0))}function di(e){var t=this.localeData(),n=ci(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function fi(){var e,t,n,i=fr(this._milliseconds)/1e3,a=fr(this._days),r=fr(this._months);e=b(i/60),t=b(e/60),i%=60,e%=60,n=b(r/12),r%=12;var o=n,s=r,l=a,c=t,u=e,h=i,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(o?o+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(c||u||h?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(h?h+"S":""):"P0D"}var pi,mi;mi=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var gi=mi,vi=e.momentProperties=[],bi=!1,yi={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var wi;wi=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var _i,ki=wi,Ci={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Si={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ti=/\d{1,2}/,xi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Di={},Ei={},Ai=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$i=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Mi={},Ii={},Ni=/\d/,Pi=/\d\d/,Oi=/\d{3}/,ji=/\d{4}/,Ri=/[+-]?\d{6}/,Li=/\d\d?/,Fi=/\d\d\d\d?/,Ui=/\d\d\d\d\d\d?/,Wi=/\d{1,3}/,Hi=/\d{1,4}/,zi=/[+-]?\d{1,6}/,Yi=/\d+/,Bi=/[+-]?\d+/,Vi=/Z|[+-]\d\d:?\d\d/gi,qi=/Z|[+-]\d\d(?::?\d\d)?/gi,Ki=/[+-]?\d+(\.\d{1,3})?/,Xi=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Gi={},Qi={},Ji=0,Zi=1,ea=2,ta=3,na=4,ia=5,aa=6,ra=7,oa=8;_i=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var sa=_i;B("M",["MM",2],"Mo",function(){return this.month()+1}),B("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),B("MMMM",0,0,function(e){return this.localeData().months(this,e)}),P("month","M"),R("month",8),G("M",Li),G("MM",Li,Pi),G("MMM",function(e,t){return t.monthsShortRegex(e)}),G("MMMM",function(e,t){return t.monthsRegex(e)}),ee(["M","MM"],function(e,t){t[Zi]=y(e)-1}),ee(["MMM","MMMM"],function(e,t,n,i){var a=n._locale.monthsParse(e,i,n._strict);null!=a?t[Zi]=a:h(n).invalidMonth=e});var la=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ca="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ua="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ha=Xi,da=Xi;B("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),B(0,["YY",2],0,function(){return this.year()%100}),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),P("year","y"),R("year",1),G("Y",Bi),G("YY",Li,Pi),G("YYYY",Hi,ji),G("YYYYY",zi,Ri),G("YYYYYY",zi,Ri),ee(["YYYYY","YYYYYY"],Ji),ee("YYYY",function(t,n){n[Ji]=2===t.length?e.parseTwoDigitYear(t):y(t)}),ee("YY",function(t,n){n[Ji]=e.parseTwoDigitYear(t)}),ee("Y",function(e,t){t[Ji]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return y(e)+(y(e)>68?1900:2e3)};var fa=F("FullYear",!0);B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),R("week",5),R("isoWeek",5),G("w",Li),G("ww",Li,Pi),G("W",Li),G("WW",Li,Pi),te(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=y(e)});var pa={dow:0,doy:6};B("d",0,"do","day"),B("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),B("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),B("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),R("day",11),R("weekday",11),R("isoWeekday",11),G("d",Li),G("e",Li),G("E",Li),G("dd",function(e,t){return t.weekdaysMinRegex(e)}),G("ddd",function(e,t){return t.weekdaysShortRegex(e)}),G("dddd",function(e,t){return t.weekdaysRegex(e)}),te(["dd","ddd","dddd"],function(e,t,n,i){var a=n._locale.weekdaysParse(e,i,n._strict);null!=a?t.d=a:h(n).invalidWeekday=e}),te(["d","e","E"],function(e,t,n,i){t[i]=y(e)});var ma="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ga="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),va="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ba=Xi,ya=Xi,wa=Xi;B("H",["HH",2],0,"hour"),B("h",["hh",2],0,He),B("k",["kk",2],0,ze),B("hmm",0,0,function(){return""+He.apply(this)+Y(this.minutes(),2)}),B("hmmss",0,0,function(){return""+He.apply(this)+Y(this.minutes(),2)+Y(this.seconds(),2)}),B("Hmm",0,0,function(){return""+this.hours()+Y(this.minutes(),2)}),B("Hmmss",0,0,function(){return""+this.hours()+Y(this.minutes(),2)+Y(this.seconds(),2)}),Ye("a",!0),Ye("A",!1),P("hour","h"),R("hour",13),G("a",Be),G("A",Be),G("H",Li),G("h",Li),G("HH",Li,Pi),G("hh",Li,Pi),G("hmm",Fi),G("hmmss",Ui),G("Hmm",Fi),G("Hmmss",Ui),ee(["H","HH"],ta),ee(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ee(["h","hh"],function(e,t,n){t[ta]=y(e),h(n).bigHour=!0}),ee("hmm",function(e,t,n){var i=e.length-2;t[ta]=y(e.substr(0,i)),t[na]=y(e.substr(i)),h(n).bigHour=!0}),ee("hmmss",function(e,t,n){var i=e.length-4,a=e.length-2;t[ta]=y(e.substr(0,i)),t[na]=y(e.substr(i,2)),t[ia]=y(e.substr(a)),h(n).bigHour=!0}),ee("Hmm",function(e,t,n){var i=e.length-2;t[ta]=y(e.substr(0,i)),t[na]=y(e.substr(i))}),ee("Hmmss",function(e,t,n){var i=e.length-4,a=e.length-2;t[ta]=y(e.substr(0,i)),t[na]=y(e.substr(i,2)),t[ia]=y(e.substr(a))});var _a,ka=/[ap]\.?m?\.?/i,Ca=F("Hours",!0),Sa={calendar:Ci,
longDateFormat:Si,invalidDate:"Invalid date",ordinal:"%d",ordinalParse:Ti,relativeTime:xi,months:ca,monthsShort:ua,week:pa,weekdays:ma,weekdaysMin:va,weekdaysShort:ga,meridiemParse:ka},Ta={},xa={},Da=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ea=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Aa=/Z|[+-]\d\d(?::?\d\d)?/,$a=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ma=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ia=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=k("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){};var Na=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=vt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:f()}),Pa=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=vt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:f()}),Oa=function(){return Date.now?Date.now():+new Date};St("Z",":"),St("ZZ",""),G("Z",qi),G("ZZ",qi),ee(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Tt(qi,e)});var ja=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Ra=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,La=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ft.fn=_t.prototype;var Fa=zt(1,"add"),Ua=zt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Wa=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});B(0,["gg",2],0,function(){return this.weekYear()%100}),B(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Tn("gggg","weekYear"),Tn("ggggg","weekYear"),Tn("GGGG","isoWeekYear"),Tn("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),R("weekYear",1),R("isoWeekYear",1),G("G",Bi),G("g",Bi),G("GG",Li,Pi),G("gg",Li,Pi),G("GGGG",Hi,ji),G("gggg",Hi,ji),G("GGGGG",zi,Ri),G("ggggg",zi,Ri),te(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=y(e)}),te(["gg","GG"],function(t,n,i,a){n[a]=e.parseTwoDigitYear(t)}),B("Q",0,"Qo","quarter"),P("quarter","Q"),R("quarter",7),G("Q",Ni),ee("Q",function(e,t){t[Zi]=3*(y(e)-1)}),B("D",["DD",2],"Do","date"),P("date","D"),R("date",9),G("D",Li),G("DD",Li,Pi),G("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ee(["D","DD"],ea),ee("Do",function(e,t){t[ea]=y(e.match(Li)[0],10)});var Ha=F("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),R("dayOfYear",4),G("DDD",Wi),G("DDDD",Oi),ee(["DDD","DDDD"],function(e,t,n){n._dayOfYear=y(e)}),B("m",["mm",2],0,"minute"),P("minute","m"),R("minute",14),G("m",Li),G("mm",Li,Pi),ee(["m","mm"],na);var za=F("Minutes",!1);B("s",["ss",2],0,"second"),P("second","s"),R("second",15),G("s",Li),G("ss",Li,Pi),ee(["s","ss"],ia);var Ya=F("Seconds",!1);B("S",0,0,function(){return~~(this.millisecond()/100)}),B(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,function(){return 10*this.millisecond()}),B(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),B(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),B(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),B(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),B(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),R("millisecond",16),G("S",Wi,Ni),G("SS",Wi,Pi),G("SSS",Wi,Oi);var Ba;for(Ba="SSSS";Ba.length<=9;Ba+="S")G(Ba,Yi);for(Ba="S";Ba.length<=9;Ba+="S")ee(Ba,Pn);var Va=F("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var qa=g.prototype;qa.add=Fa,qa.calendar=Vt,qa.clone=qt,qa.diff=en,qa.endOf=pn,qa.format=on,qa.from=sn,qa.fromNow=ln,qa.to=cn,qa.toNow=un,qa.get=H,qa.invalidAt=Cn,qa.isAfter=Kt,qa.isBefore=Xt,qa.isBetween=Gt,qa.isSame=Qt,qa.isSameOrAfter=Jt,qa.isSameOrBefore=Zt,qa.isValid=_n,qa.lang=Wa,qa.locale=hn,qa.localeData=dn,qa.max=Pa,qa.min=Na,qa.parsingFlags=kn,qa.set=z,qa.startOf=fn,qa.subtract=Ua,qa.toArray=bn,qa.toObject=yn,qa.toDate=vn,qa.toISOString=an,qa.inspect=rn,qa.toJSON=wn,qa.toString=nn,qa.unix=gn,qa.valueOf=mn,qa.creationData=Sn,qa.year=fa,qa.isLeapYear=ge,qa.weekYear=xn,qa.isoWeekYear=Dn,qa.quarter=qa.quarters=In,qa.month=ce,qa.daysInMonth=ue,qa.week=qa.weeks=xe,qa.isoWeek=qa.isoWeeks=De,qa.weeksInYear=An,qa.isoWeeksInYear=En,qa.date=Ha,qa.day=qa.days=Oe,qa.weekday=je,qa.isoWeekday=Re,qa.dayOfYear=Nn,qa.hour=qa.hours=Ca,qa.minute=qa.minutes=za,qa.second=qa.seconds=Ya,qa.millisecond=qa.milliseconds=Va,qa.utcOffset=Et,qa.utc=$t,qa.local=Mt,qa.parseZone=It,qa.hasAlignedHourOffset=Nt,qa.isDST=Pt,qa.isLocal=jt,qa.isUtcOffset=Rt,qa.isUtc=Lt,qa.isUTC=Lt,qa.zoneAbbr=On,qa.zoneName=jn,qa.dates=k("dates accessor is deprecated. Use date instead.",Ha),qa.months=k("months accessor is deprecated. Use month instead",ce),qa.years=k("years accessor is deprecated. Use year instead",fa),qa.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",At),qa.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ot);var Ka=D.prototype;Ka.calendar=E,Ka.longDateFormat=A,Ka.invalidDate=$,Ka.ordinal=M,Ka.preparse=Fn,Ka.postformat=Fn,Ka.relativeTime=I,Ka.pastFuture=N,Ka.set=T,Ka.months=ae,Ka.monthsShort=re,Ka.monthsParse=se,Ka.monthsRegex=de,Ka.monthsShortRegex=he,Ka.week=Ce,Ka.firstDayOfYear=Te,Ka.firstDayOfWeek=Se,Ka.weekdays=$e,Ka.weekdaysMin=Ie,Ka.weekdaysShort=Me,Ka.weekdaysParse=Pe,Ka.weekdaysRegex=Le,Ka.weekdaysShortRegex=Fe,Ka.weekdaysMinRegex=Ue,Ka.isPM=Ve,Ka.meridiem=qe,Qe("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=k("moment.lang is deprecated. Use moment.locale instead.",Qe),e.langData=k("moment.langData is deprecated. Use moment.localeData instead.",et);var Xa=Math.abs,Ga=ai("ms"),Qa=ai("s"),Ja=ai("m"),Za=ai("h"),er=ai("d"),tr=ai("w"),nr=ai("M"),ir=ai("y"),ar=oi("milliseconds"),rr=oi("seconds"),or=oi("minutes"),sr=oi("hours"),lr=oi("days"),cr=oi("months"),ur=oi("years"),hr=Math.round,dr={s:45,m:45,h:22,d:26,M:11},fr=Math.abs,pr=_t.prototype;return pr.abs=Kn,pr.add=Gn,pr.subtract=Qn,pr.as=ni,pr.asMilliseconds=Ga,pr.asSeconds=Qa,pr.asMinutes=Ja,pr.asHours=Za,pr.asDays=er,pr.asWeeks=tr,pr.asMonths=nr,pr.asYears=ir,pr.valueOf=ii,pr._bubble=Zn,pr.get=ri,pr.milliseconds=ar,pr.seconds=rr,pr.minutes=or,pr.hours=sr,pr.days=lr,pr.weeks=si,pr.months=cr,pr.years=ur,pr.humanize=di,pr.toISOString=fi,pr.toString=fi,pr.toJSON=fi,pr.locale=hn,pr.localeData=dn,pr.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fi),pr.lang=Wa,B("X",0,0,"unix"),B("x",0,0,"valueOf"),G("x",Bi),G("X",Ki),ee("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ee("x",function(e,t,n){n._d=new Date(y(e))}),e.version="2.17.1",function(e){pi=e}(vt),e.fn=qa,e.min=yt,e.max=wt,e.now=Oa,e.utc=c,e.unix=Rn,e.months=zn,e.isDate=r,e.locale=Qe,e.invalid=f,e.duration=Ft,e.isMoment=v,e.weekdays=Bn,e.parseZone=Ln,e.localeData=et,e.isDuration=kt,e.monthsShort=Yn,e.weekdaysMin=qn,e.defineLocale=Je,e.updateLocale=Ze,e.locales=tt,e.weekdaysShort=Vn,e.normalizeUnits=O,e.relativeTimeRounding=ui,e.relativeTimeThreshold=hi,e.calendarFormat=Bt,e.prototype=qa,e}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.NProgress=t()}(this,function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,i){var a;return a="translate3d"===c.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===c.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},a.transition="all "+n+"ms "+i,a}function i(e,t){return("string"==typeof e?e:o(e)).indexOf(" "+t+" ")>=0}function a(e,t){var n=o(e),a=n+t;i(n,t)||(e.className=a.substring(1))}function r(e,t){var n,a=o(e);i(e,t)&&(n=a.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function o(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function s(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={};l.version="0.2.0";var c=l.settings={minimum:.16,easing:"ease",positionUsing:"",speed:500,trickle:!0,trickleRate:.05,trickleSpeed:800,showSpinner:!1,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div>'};l.configure=function(e){var t,n;for(t in e)void 0!==(n=e[t])&&e.hasOwnProperty(t)&&(c[t]=n);return this},l.status=null,l.set=function(t){var i=l.isStarted();t=e(t,c.minimum,1),l.status=1===t?null:t;var a=l.render(!i),r=a.querySelector(c.barSelector),o=c.speed,s=c.easing;return a.offsetWidth,u(function(e){""===c.positionUsing&&(c.positionUsing=l.getPositioningCSS()),h(r,n(t,o,s)),1===t?(h(a,{transition:"none",opacity:1}),a.offsetWidth,setTimeout(function(){h(a,{transition:"all "+o+"ms linear",opacity:0}),setTimeout(function(){l.remove(),e()},o)},o)):setTimeout(e,o)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(0);var e=function(){setTimeout(function(){l.status&&(l.trickle(),e())},c.trickleSpeed)};return c.trickle&&e(),this},l.done=function(e){return e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(t){var n=l.status;return n?("number"!=typeof t&&(t=(1-n)*e(Math.random()*n,.1,.95)),n=e(n+t,0,.994),l.set(n)):l.start()},l.trickle=function(){return l.inc(Math.random()*c.trickleRate)},function(){var e=0,t=0;l.promise=function(n){return n&&"resolved"!==n.state()?(0===t&&l.start(),e++,t++,n.always(function(){t--,0===t?(e=0,l.done()):l.set((e-t)/e)}),this):this}}(),l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");a(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=c.template;var i,r=n.querySelector(c.barSelector),o=e?"-100":t(l.status||0),u=document.querySelector(c.parent);return h(r,{transition:"all 0 linear",transform:"translate3d("+o+"%,0,0)"}),c.showSpinner||(i=n.querySelector(c.spinnerSelector))&&s(i),u!=document.body&&a(u,"nprogress-custom-parent"),u.appendChild(n),n},l.remove=function(){r(document.documentElement,"nprogress-busy"),r(document.querySelector(c.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&s(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var u=function(){function e(){var n=t.shift();n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),h=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var n,i=a.length,r=e.charAt(0).toUpperCase()+e.slice(1);i--;)if((n=a[i]+r)in t)return n;return e}function n(n){return n=e(n),r[n]||(r[n]=t(n))}function i(e,t,i){t=n(t),e.style[t]=i}var a=["Webkit","O","Moz","ms"],r={};return function(e,t){var n,a,r=arguments;if(2==r.length)for(n in t)void 0!==(a=t[n])&&t.hasOwnProperty(n)&&i(e,n,a);else i(e,r[1],r[2])}}();return l}),function e(t,n,i){function a(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return a(n||e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,n){"use strict";function i(e){e.fn.perfectScrollbar=function(e){return this.each(function(){if("object"==typeof e||void 0===e){var t=e;r.get(this)||a.initialize(this,t)}else{var n=e;"update"===n?a.update(this):"destroy"===n&&a.destroy(this)}})}}var a=e("../main"),r=e("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],i);else{var o=window.jQuery?window.jQuery:window.$;void 0!==o&&i(o)}t.exports=i},{"../main":7,"../plugin/instances":18}],2:[function(e,t,n){"use strict";function i(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function a(e,t){var n=e.className.split(" "),i=n.indexOf(t);i>=0&&n.splice(i,1),e.className=n.join(" ")}n.add=function(e,t){e.classList?e.classList.add(t):i(e,t)},n.remove=function(e,t){e.classList?e.classList.remove(t):a(e,t)},n.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],3:[function(e,t,n){"use strict";function i(e,t){return window.getComputedStyle(e)[t]}function a(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function r(e,t){for(var n in t){var i=t[n];"number"==typeof i&&(i=i.toString()+"px"),e.style[n]=i}return e}var o={};o.e=function(e,t){var n=document.createElement(e);return n.className=t,n},o.appendTo=function(e,t){return t.appendChild(e),e},o.css=function(e,t,n){return"object"==typeof t?r(e,t):void 0===n?i(e,t):a(e,t,n)},o.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},o.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},o.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return o.matches(e,t)})},t.exports=o},{}],4:[function(e,t,n){"use strict";var i=function(e){this.element=e,this.events={}};i.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},i.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter(function(i){return!(!n||i===t)||(this.element.removeEventListener(e,i,!1),!1)},this)},i.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var a=function(){this.eventElements=[]};a.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new i(e),this.eventElements.push(t)),t},a.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},a.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},a.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},a.prototype.once=function(e,t,n){var i=this.eventElement(e),a=function(e){i.unbind(t,a),n(e)};i.bind(t,a)},t.exports=a},{}],5:[function(e,t,n){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],6:[function(e,t,n){"use strict";var i=e("./class"),a=e("./dom"),r=n.toInt=function(e){return parseInt(e,10)||0},o=n.clone=function(e){if(e){if(e.constructor===Array)return e.map(o);if("object"==typeof e){var t={};for(var n in e)t[n]=o(e[n]);return t}return e}return null};n.extend=function(e,t){var n=o(e);for(var i in t)n[i]=o(t[i]);return n},n.isEditable=function(e){return a.matches(e,"input,[contenteditable]")||a.matches(e,"select,[contenteditable]")||a.matches(e,"textarea,[contenteditable]")||a.matches(e,"button,[contenteditable]")},n.removePsClasses=function(e){for(var t=i.list(e),n=0;n<t.length;n++){var a=t[n];0===a.indexOf("ps-")&&i.remove(e,a)}},n.outerWidth=function(e){return r(a.css(e,"width"))+r(a.css(e,"paddingLeft"))+r(a.css(e,"paddingRight"))+r(a.css(e,"borderLeftWidth"))+r(a.css(e,"borderRightWidth"))},n.startScrolling=function(e,t){i.add(e,"ps-in-scrolling"),void 0!==t?i.add(e,"ps-"+t):(i.add(e,"ps-x"),i.add(e,"ps-y"))},n.stopScrolling=function(e,t){i.remove(e,"ps-in-scrolling"),void 0!==t?i.remove(e,"ps-"+t):(i.remove(e,"ps-x"),i.remove(e,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(e,t,n){"use strict";var i=e("./plugin/destroy"),a=e("./plugin/initialize"),r=e("./plugin/update");t.exports={initialize:a,update:r,destroy:i}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(e,t,n){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(e,t,n){"use strict";var i=e("../lib/helper"),a=e("../lib/dom"),r=e("./instances");t.exports=function(e){var t=r.get(e);t&&(t.event.unbindAll(),a.remove(t.scrollbarX),a.remove(t.scrollbarY),a.remove(t.scrollbarXRail),a.remove(t.scrollbarYRail),i.removePsClasses(e),r.remove(e))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(e,t,n){"use strict";function i(e,t){function n(e){return e.getBoundingClientRect()}var i=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",i),t.event.bind(t.scrollbarYRail,"click",function(i){var a=i.pageY-window.pageYOffset-n(t.scrollbarYRail).top,s=a>t.scrollbarYTop?1:-1;o(e,"top",e.scrollTop+s*t.containerHeight),r(e),i.stopPropagation()}),t.event.bind(t.scrollbarX,"click",i),t.event.bind(t.scrollbarXRail,"click",function(i){var a=i.pageX-window.pageXOffset-n(t.scrollbarXRail).left,s=a>t.scrollbarXLeft?1:-1;o(e,"left",e.scrollLeft+s*t.containerWidth),r(e),i.stopPropagation()})}var a=e("../instances"),r=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){i(e,a.get(e))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(e,t,n){"use strict";function i(e,t){function n(n){var a=i+n*t.railXRatio,o=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=a<0?0:a>o?o:a;var s=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",s)}var i=null,a=null,s=function(t){n(t.pageX-a),l(e),t.stopPropagation(),t.preventDefault()},u=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarX,"mousedown",function(n){a=n.pageX,i=r.toInt(o.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function a(e,t){function n(n){var a=i+n*t.railYRatio,o=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=a<0?0:a>o?o:a;var s=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",s)}var i=null,a=null,s=function(t){n(t.pageY-a),l(e),t.stopPropagation(),t.preventDefault()},u=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarY,"mousedown",function(n){a=n.pageY,i=r.toInt(o.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var r=e("../../lib/helper"),o=e("../../lib/dom"),s=e("../instances"),l=e("../update-geometry"),c=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t),a(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(e,t,n){"use strict";function i(e,t){function n(n,i){var a=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===a&&i>0||a>=t.contentHeight-t.containerHeight&&i<0)return!t.settings.wheelPropagation}var r=e.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===r&&n<0||r>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var i=!1;t.event.bind(e,"mouseenter",function(){i=!0}),t.event.bind(e,"mouseleave",function(){i=!1});var o=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=r.matches(t.scrollbarX,":focus")||r.matches(t.scrollbarY,":focus");if(i||u){var h=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(h){if("IFRAME"===h.tagName)h=h.contentDocument.activeElement;else for(;h.shadowRoot;)h=h.shadowRoot.activeElement;if(a.isEditable(h))return}var d=0,f=0;switch(c.which){case 37:d=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:f=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:d=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:f=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:f=90;break;case 32:f=c.shiftKey?90:-90;break;case 34:f=-90;break;case 35:f=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:f=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-f),l(e,"left",e.scrollLeft+d),s(e),(o=n(d,f))&&c.preventDefault()}}})}var a=e("../../lib/helper"),r=e("../../lib/dom"),o=e("../instances"),s=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){i(e,o.get(e))}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(e,t,n){"use strict";function i(e,t){function n(n,i){var a=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===a&&i>0||a>=t.contentHeight-t.containerHeight&&i<0)return!t.settings.wheelPropagation}var r=e.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===r&&n<0||r>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function i(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}function a(t,n){var i=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(i){if(!window.getComputedStyle(i).overflow.match(/(scroll|auto)/))return!1;var a=i.scrollHeight-i.clientHeight;if(a>0&&!(0===i.scrollTop&&n>0||i.scrollTop===a&&n<0))return!0;var r=i.scrollLeft-i.clientWidth;if(r>0&&!(0===i.scrollLeft&&t<0||i.scrollLeft===r&&t>0))return!0}return!1}function s(s){var c=i(s),u=c[0],h=c[1];a(u,h)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(h?o(e,"top",e.scrollTop-h*t.settings.wheelSpeed):o(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?o(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):o(e,"left",e.scrollLeft-h*t.settings.wheelSpeed),l=!0):(o(e,"top",e.scrollTop-h*t.settings.wheelSpeed),o(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),r(e),(l=l||n(u,h))&&(s.stopPropagation(),s.preventDefault()))}var l=!1;void 0!==window.onwheel?t.event.bind(e,"wheel",s):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",s)}var a=e("../instances"),r=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){i(e,a.get(e))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(e,t,n){"use strict";function i(e,t){t.event.bind(e,"scroll",function(){r(e)})}var a=e("../instances"),r=e("../update-geometry");t.exports=function(e){i(e,a.get(e))}},{"../instances":18,"../update-geometry":19}],15:[function(e,t,n){"use strict";function i(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function i(){c||(c=setInterval(function(){return r.get(e)?(s(e,"top",e.scrollTop+u.top),s(e,"left",e.scrollLeft+u.left),void o(e)):void clearInterval(c)},50))}function l(){c&&(clearInterval(c),c=null),a.stopScrolling(e)}var c=null,u={top:0,left:0},h=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?h=!0:(h=!1,l())}),t.event.bind(window,"mouseup",function(){h&&(h=!1,l())}),t.event.bind(window,"keyup",function(){h&&(h=!1,l())}),t.event.bind(window,"mousemove",function(t){if(h){var n={x:t.pageX,y:t.pageY},r={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<r.left+3?(u.left=-5,a.startScrolling(e,"x")):n.x>r.right-3?(u.left=5,a.startScrolling(e,"x")):u.left=0,n.y<r.top+3?(u.top=r.top+3-n.y<5?-5:-20,a.startScrolling(e,"y")):n.y>r.bottom-3?(u.top=n.y-r.bottom+3<5?5:20,a.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():i()}})}var a=e("../../lib/helper"),r=e("../instances"),o=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){i(e,r.get(e))}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(e,t,n){"use strict";function i(e,t,n,i){function a(n,i){var a=e.scrollTop,r=e.scrollLeft,o=Math.abs(n),s=Math.abs(i);if(s>o){if(i<0&&a===t.contentHeight-t.containerHeight||i>0&&0===a)return!t.settings.swipePropagation}else if(o>s&&(n<0&&r===t.contentWidth-t.containerWidth||n>0&&0===r))return!t.settings.swipePropagation;return!0}function l(t,n){s(e,"top",e.scrollTop-n),s(e,"left",e.scrollLeft-t),o(e)}function c(){w=!0}function u(){w=!1}function h(e){return e.targetTouches?e.targetTouches[0]:e}function d(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function f(e){if(d(e)){_=!0;var t=h(e);g.pageX=t.pageX,g.pageY=t.pageY,v=(new Date).getTime(),null!==y&&clearInterval(y),e.stopPropagation()}}function p(e){if(!_&&t.settings.swipePropagation&&f(e),!w&&_&&d(e)){var n=h(e),i={pageX:n.pageX,pageY:n.pageY},r=i.pageX-g.pageX,o=i.pageY-g.pageY;l(r,o),g=i;var s=(new Date).getTime(),c=s-v;c>0&&(b.x=r/c,b.y=o/c,v=s),a(r,o)&&(e.stopPropagation(),e.preventDefault())}}function m(){!w&&_&&(_=!1,clearInterval(y),y=setInterval(function(){return r.get(e)&&(b.x||b.y)?Math.abs(b.x)<.01&&Math.abs(b.y)<.01?void clearInterval(y):(l(30*b.x,30*b.y),b.x*=.8,void(b.y*=.8)):void clearInterval(y)},10))}var g={},v=0,b={},y=null,w=!1,_=!1;n&&(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",f),t.event.bind(e,"touchmove",p),t.event.bind(e,"touchend",m)),i&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",f),t.event.bind(e,"pointermove",p),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",f),t.event.bind(e,"MSPointerMove",p),t.event.bind(e,"MSPointerUp",m)))}var a=e("../../lib/helper"),r=e("../instances"),o=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){if(a.env.supportsTouch||a.env.supportsIePointer){i(e,r.get(e),a.env.supportsTouch,a.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(e,t,n){"use strict";var i=e("../lib/helper"),a=e("../lib/class"),r=e("./instances"),o=e("./update-geometry"),s={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},l=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},a.add(e,"ps-container");var n=r.add(e);n.settings=i.extend(n.settings,t),a.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){s[t](e)}),l(e),o(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(e,t,n){"use strict";function i(e){function t(){l.add(e,"ps-focus")}function n(){l.remove(e,"ps-focus")}var i=this;i.settings=s.clone(c),i.containerWidth=null,i.containerHeight=null,i.contentWidth=null,i.contentHeight=null,i.isRtl="rtl"===u.css(e,"direction"),i.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),i.negativeScrollAdjustment=i.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.event=new h,i.ownerDocument=e.ownerDocument||document,i.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),i.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),i.scrollbarXRail),i.scrollbarX.setAttribute("tabindex",0),i.event.bind(i.scrollbarX,"focus",t),i.event.bind(i.scrollbarX,"blur",n),i.scrollbarXActive=null,i.scrollbarXWidth=null,i.scrollbarXLeft=null,i.scrollbarXBottom=s.toInt(u.css(i.scrollbarXRail,"bottom")),i.isScrollbarXUsingBottom=i.scrollbarXBottom===i.scrollbarXBottom,
i.scrollbarXTop=i.isScrollbarXUsingBottom?null:s.toInt(u.css(i.scrollbarXRail,"top")),i.railBorderXWidth=s.toInt(u.css(i.scrollbarXRail,"borderLeftWidth"))+s.toInt(u.css(i.scrollbarXRail,"borderRightWidth")),u.css(i.scrollbarXRail,"display","block"),i.railXMarginWidth=s.toInt(u.css(i.scrollbarXRail,"marginLeft"))+s.toInt(u.css(i.scrollbarXRail,"marginRight")),u.css(i.scrollbarXRail,"display",""),i.railXWidth=null,i.railXRatio=null,i.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),i.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),i.scrollbarYRail),i.scrollbarY.setAttribute("tabindex",0),i.event.bind(i.scrollbarY,"focus",t),i.event.bind(i.scrollbarY,"blur",n),i.scrollbarYActive=null,i.scrollbarYHeight=null,i.scrollbarYTop=null,i.scrollbarYRight=s.toInt(u.css(i.scrollbarYRail,"right")),i.isScrollbarYUsingRight=i.scrollbarYRight===i.scrollbarYRight,i.scrollbarYLeft=i.isScrollbarYUsingRight?null:s.toInt(u.css(i.scrollbarYRail,"left")),i.scrollbarYOuterWidth=i.isRtl?s.outerWidth(i.scrollbarY):null,i.railBorderYWidth=s.toInt(u.css(i.scrollbarYRail,"borderTopWidth"))+s.toInt(u.css(i.scrollbarYRail,"borderBottomWidth")),u.css(i.scrollbarYRail,"display","block"),i.railYMarginHeight=s.toInt(u.css(i.scrollbarYRail,"marginTop"))+s.toInt(u.css(i.scrollbarYRail,"marginBottom")),u.css(i.scrollbarYRail,"display",""),i.railYHeight=null,i.railYRatio=null}function a(e){return e.getAttribute("data-ps-id")}function r(e,t){e.setAttribute("data-ps-id",t)}function o(e){e.removeAttribute("data-ps-id")}var s=e("../lib/helper"),l=e("../lib/class"),c=e("./default-setting"),u=e("../lib/dom"),h=e("../lib/event-manager"),d=e("../lib/guid"),f={};n.add=function(e){var t=d();return r(e,t),f[t]=new i(e),f[t]},n.remove=function(e){delete f[a(e)],o(e)},n.get=function(e){return f[a(e)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(e,t,n){"use strict";function i(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function a(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,s.css(t.scrollbarXRail,n);var i={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?i.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:i.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?i.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:i.left=t.scrollbarYLeft+e.scrollLeft,s.css(t.scrollbarYRail,i),s.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),s.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var r=e("../lib/helper"),o=e("../lib/class"),s=e("../lib/dom"),l=e("./instances"),c=e("./update-scroll");t.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=s.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=s.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=i(t,r.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=r.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=i(t,r.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=r.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),a(e,t),t.scrollbarXActive?o.add(e,"ps-active-x"):(o.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?o.add(e,"ps-active-y"):(o.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(e,t,n){"use strict";var i,a,r=e("./instances"),o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};t.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(o("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(o("ps-x-reach-start")));var s=r.get(e);"top"===t&&n>=s.contentHeight-s.containerHeight&&(n=s.contentHeight-s.containerHeight,n-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(o("ps-y-reach-end"))),"left"===t&&n>=s.contentWidth-s.containerWidth&&(n=s.contentWidth-s.containerWidth,n-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(o("ps-x-reach-end"))),i||(i=e.scrollTop),a||(a=e.scrollLeft),"top"===t&&n<i&&e.dispatchEvent(o("ps-scroll-up")),"top"===t&&n>i&&e.dispatchEvent(o("ps-scroll-down")),"left"===t&&n<a&&e.dispatchEvent(o("ps-scroll-left")),"left"===t&&n>a&&e.dispatchEvent(o("ps-scroll-right")),"top"===t&&(e.scrollTop=i=n,e.dispatchEvent(o("ps-scroll-y"))),"left"===t&&(e.scrollLeft=a=n,e.dispatchEvent(o("ps-scroll-x")))}},{"./instances":18}],21:[function(e,t,n){"use strict";var i=e("../lib/helper"),a=e("../lib/dom"),r=e("./instances"),o=e("./update-geometry"),s=e("./update-scroll");t.exports=function(e){var t=r.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,a.css(t.scrollbarXRail,"display","block"),a.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=i.toInt(a.css(t.scrollbarXRail,"marginLeft"))+i.toInt(a.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=i.toInt(a.css(t.scrollbarYRail,"marginTop"))+i.toInt(a.css(t.scrollbarYRail,"marginBottom")),a.css(t.scrollbarXRail,"display","none"),a.css(t.scrollbarYRail,"display","none"),o(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),a.css(t.scrollbarXRail,"display",""),a.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);var RichTextApp=function(e){this.DEFAULTS={linkify:{enable:!0,class:"hu-link",class_big:"hu-big"},code:{enable:!0,class:"hu-code"},html:{enable:!1},symbols:{"*":{class:"hu-bold"},_:{class:"hu-italic"}}},this.extendDefaults=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(e[n]=t[n]);return e},this.options=this.extendDefaults(this.DEFAULTS,e),this.transform=function(e,t){if(e instanceof Node==!1)throw new Error("[RichText]: 1st argument must be a Node");if("string"!=typeof t)throw new Error("[RichText]: 2nd argument must be a String");if(e.innerHTML="",""!=t){var n=new RichTextApp.Transformer(t,this.options);this.options.html.enable&&n.htmlInjection(),this.options.code.enable&&n.codify(),n.divideByLine(),n.domify(),!0===this.options.linkify.enable&&n.linkify();for(var i=n.sections,a=0;a<i.length;a++)e.appendChild(i[a]);return i}}};RichTextApp.Transformer=function(e,t){this.raw=e,this.sections=[e],this.utils=new RichTextApp.Utils(t),this.htmlInjection=function(){var e=this,t=new RegExp(/{html}([\s\S]*?){\/html}/g);this.sections=this.utils.splitStringFocus(this.sections,t),this.sections=this.sections.map(function(n){return e.utils.convertToHtml(n,t)})},this.codify=function(){var e=this,t=new RegExp(/```([\s\S]*?)```/g);this.sections=this.utils.splitStringFocus(this.sections,t),this.sections=this.sections.map(function(n){return e.utils.convertToCode(n,t)})},this.divideByLine=function(){this.sections=this.utils.splitStringFocus(this.sections,"\n")},this.domify=function(){var e=this;this.sections=this.sections.map(function(t,n){return e.utils.domifyString(t)}),this.sections=this.utils.levelUpArray(this.sections)},this.linkify=function(){var e=this;this.sections=this.sections.map(function(t,n){return e.utils.linkifyNode(t)}),this.sections=this.utils.levelUpArray(this.sections)}},RichTextApp.FormatNode=function(e){this.index=e.index>-1?e.index:-1,this.symbols=e.symbols||[],this.hasSymbol=function(e){return this.symbols.indexOf(e)>-1},this.removeSymbol=function(e){this.symbols=this.symbols.filter(function(t,n){return t!=e})}},RichTextApp.Utils=function(e){this.symbols=e.symbols,this.symbolsArr=Object.keys(e.symbols),this.linkify=e.linkify,this.code=e.code,this.splitStringFocus=function(e,t){var n=t instanceof RegExp?t:new RegExp(t,"g"),i=e.map(function(e,t){return"string"==typeof e?e.replace(n,"¡çÇ!$&¡çÇ!").split("¡çÇ!"):e});return i=this.levelUpArray(i.slice(0))},this.levelUpArray=function(e){for(var t=0;t<e.length;t++)e[t]instanceof Array?e.splice.apply(e,[t,1].concat(e[t])):(""==e[t].textContent&&"BR"!=e[t].tagName&&""==e[t].innerHTML||""==e[t])&&e.splice(t--,1);return e},this.domifyString=function(e){if("string"!=typeof e)return e;if("\n"==e)return document.createElement("br");var t=this.getFormatNodes(e);t=this.cleanFormatNodes(t.slice(0));var n=this.getNodeSections(e,t);return this.nodeProcessor(n,t)},this.getFormatNodes=function(e){for(var t=this,n=[""," ","\n","\t","(","[","{","'",'"',"`","¡","¿"],i=[" ","\n","\t",")","]","}","'",'"',"`","!","?",",",".",";",":"],a=[],r=!1,o=0;o<e.length;o++){var s=this.discoverSymbol(e.slice(o));if(1==s.state){var l=a[a.length-1];if(1==(!!l&&l.symbols.indexOf(s.symbol)>-1)){var c=e.charAt(o+s.symbol.length);((function(e){if(!e||""==e)return!0;var n=t.composeRegExp(t.symbolsArr,"exclusive");return null!=e.match(n)})(e.slice(o+s.symbol.length).split(t.composeRegExp(i))[0])||i.indexOf(c)>-1)&&a.push(this.createSubstractorNode(s.symbol,o,l)),r=!0}else{var u=e.charAt(o-1);(r||n.indexOf(u)>-1)&&(a.push(this.createAdderNode(s.symbol,o,l)),r=!0)}}else r=!1;o+=s.symbol?s.symbol.length-1:0}return a[0]&&0==a[0].index||a.unshift(new RichTextApp.FormatNode({index:0,symbols:[]})),a},this.discoverSymbol=function(e){var t,n=this.symbolsArr;return n=n.filter(function(t,n){return t==e.slice(0,t.length)}),t=n.sort(function(e,t){return t.length-e.length})[0],{state:void 0!=t,symbol:t}},this.createSubstractorNode=function(e,t,n){return new RichTextApp.FormatNode({index:t,symbols:n.symbols.slice(0).filter(function(t,n){return t!=e})})},this.createAdderNode=function(e,t,n){return new RichTextApp.FormatNode({index:t,symbols:n?function(){var t=n.symbols.slice(0);return t.push(e),t}():[e]})},this.cleanFormatNodes=function(e){var t=e.length-1;if(!e[t])return e;if(0==e[t].symbols.length)return e;for(var n=e.slice(0),i=e[t].symbols,a=i.map(function(){return!1});t>-1;){for(var r=0;r<i.length;r++)n[t].hasSymbol(i[r])||(a[r]=!0),a[r]||n[t].removeSymbol(i[r]);n[t+1]&&JSON.stringify(n[t+1].symbols)==JSON.stringify(n[t].symbols)&&n.splice(t+1,1),t--}return n},this.getNodeSections=function(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i].index,r=t[i+1]?t[i+1].index:e.length;n.push(e.slice(a,r))}return n},this.nodeProcessor=function(e,t){var n=this;return e.map(function(e,i){var a=!!t[i-1]&&t[i-1].symbols;return n.spanify(e,t[i].symbols,a)})},this.spanify=function(e,t,n){var i=this;if("string"!=typeof e)return e;var a,r;a=n?t.concat(n):t,r=this.composeRegExp(a,"begins"),e=e.replace(r,"");var o=t.map(function(e){return i.symbols[e].class});if(o.length>0){var s=document.createElement("span");return s.className="rich-text "+o.join(" "),s.textContent=e,s}return document.createTextNode(e)},this.escapeRegExp=function(e){if(!e)return"";var t=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],n=RegExp("["+t.join("\\")+"]","g");return e.replace(n,"\\$&")},this.composeRegExp=function(e,t){var n=this;return"begins"===t?new RegExp("^("+e.map(function(e){return n.escapeRegExp(e)}).join("|")+")+","g"):"exclusive"===t?new RegExp("^("+e.map(function(e){return n.escapeRegExp(e)}).join("|")+")+$","g"):new RegExp("("+e.map(function(e){return n.escapeRegExp(e)}).join("|")+")+","g")},this.convertToCode=function(e,t){if("string"!=typeof e||""===e)return e;if(null===e.match(t))return e;var n=document.createElement("span");return n.className="rich-text "+this.code.class,n.textContent=e.replace(t,"$1"),n},this.convertToHtml=function(e,t){if("string"!=typeof e||""===e)return e;if(null===e.match(t))return e;var n=document.createElement("div");return n.className="rich-text rich-text-noop",n.innerHTML=e.replace(t,"$1").trim(),n},this.linkifyNode=function(e){if(e.className&&e.className.indexOf("rich-text-noop")>-1)return e;for(var t,n=this,i=e.textContent,a=/(http(s)?(:\/\/))?(www\.)?(\w+@)?(?:(?:[-\w\.]+(\.(?:nl|se|no|es|milru|fr|es|uk|ca|de|jp|au|us|ch|it|io|org|com|net|int|edu|mil|arpa|ly|in)))|(?:(?:(?:[0-9]{1,3}\.){3}[0-9]{1,3})|(?:localhost)(?:[0-9]{1,5})?))([-a-zA-Z0-9:%_\+.~#?&\/\/=@]*)(?:(?:\[.+?\])*(?:!!)*)/gi,r=i,o=[];t=a.exec(r);){var s=document.createTextNode(r.slice(0,t.index)),l=function(e){var t="!!"==e.slice(e.length-2,e.length),i=null!=e.match(/\[.*\]/g),a="http"==e.slice(0,4),r=/^[a-zA-Z0-9.!#$%&’*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e),o=document.createElement("a"),s=t?n.linkify.class+" "+n.linkify.class_big:n.linkify.class,l=t?e.slice(0,e.length-2):e;l=i?l.replace(/(^.*)\[(.*)\](.*)/g,"$2"):l;var c=t?e.slice(0,e.length-2):e;return c=i?c.replace(/(^.*)\[(.*)\](.*)/g,"$1"):c,c=a||r?c:"http://".concat(c),c=r?"mailto:".concat(c):c,o.className="rich-text "+s,o.href=c,o.target=r?"_top":"_blank",o.textContent=l,o}(r.slice(t.index,t.index+t[0].length));o.push(s,l),r=r.slice(t.index+t[0].length),a.lastIndex=0}if(o.length>0&&""!=r&&o.push(document.createTextNode(r)),o.length>0){if(e.innerHTML="",!(e instanceof HTMLElement))return o;for(var c=0;c<o.length;c++)""!=o[c].textContent&&e.appendChild(o[c])}return[e]}},RichTextApp.VERSION="2.0.4",function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=v({},t),e[R]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in n)!(i in t)&&(t[i]=n[i]);q(t);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&W,a(e,"mousedown",this._onTapStart),a(e,"touchstart",this._onTapStart),this.nativeDraggable&&(a(e,"dragover",this),a(e,"dragenter",this)),B.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){_&&_.state!==e&&(s(_,"display",e?"none":""),!e&&_.state&&k.insertBefore(_,b),_.state=e)}function n(e,t,n){if(e){n=n||F,t=t.split(".");var i=t.shift().toUpperCase(),a=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do{if(">*"===i&&e.parentNode===n||(""===i||e.nodeName.toUpperCase()==i)&&(!t.length||((" "+e.className+" ").match(a)||[]).length==t.length))return e}while(e!==n&&(e=e.parentNode))}return null}function i(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function a(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}function o(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(j," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(j," ")}}function s(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return F.defaultView&&F.defaultView.getComputedStyle?n=F.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var i=e.getElementsByTagName(t),a=0,r=i.length;if(n)for(;r>a;a++)n(i[a],a);return i}return[]}function c(e,t,n,i,a,r,o){var s=F.createEvent("Event"),l=(e||t[R]).options,c="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=t,s.from=a||t,s.item=i||t,s.clone=_,s.oldIndex=r,s.newIndex=o,t.dispatchEvent(s),l[c]&&l[c].call(e,s)}function u(e,t,n,i,a,r){var o,s,l=e[R],c=l.options.onMove;return o=F.createEvent("Event"),o.initEvent("move",!0,!0),o.to=t,o.from=e,o.dragged=n,o.draggedRect=i,o.related=a||t,o.relatedRect=r||t.getBoundingClientRect(),e.dispatchEvent(o),c&&(s=c.call(l,o)),s}function h(e){e.draggable=!1}function d(){z=!1}function f(e,t){var n=e.lastElementChild,i=n.getBoundingClientRect();return(t.clientY-(i.top+i.height)>5||t.clientX-(i.right+i.width)>5)&&n}function p(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function m(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function g(e,t){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?e.call(i,n[0]):e.apply(i,n),n=void 0},t))}}function v(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var b,y,w,_,k,C,S,T,x,D,E,A,$,M,I,N,P,O={},j=/\s+/g,R="Sortable"+(new Date).getTime(),L=window,F=L.document,U=L.parseInt,W=!!("draggable"in F.createElement("div")),H=function(e){return e=F.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),z=!1,Y=Math.abs,B=[],V=g(function(e,t,n){if(n&&t.scroll){var i,a,r,o,s=t.scrollSensitivity,l=t.scrollSpeed,c=e.clientX,u=e.clientY,h=window.innerWidth,d=window.innerHeight;if(T!==n&&(S=t.scroll,T=n,!0===S)){S=n;do{if(S.offsetWidth<S.scrollWidth||S.offsetHeight<S.scrollHeight)break}while(S=S.parentNode)}S&&(i=S,a=S.getBoundingClientRect(),r=(Y(a.right-c)<=s)-(Y(a.left-c)<=s),o=(Y(a.bottom-u)<=s)-(Y(a.top-u)<=s)),r||o||(r=(s>=h-c)-(s>=c),o=(s>=d-u)-(s>=u),(r||o)&&(i=L)),(O.vx!==r||O.vy!==o||O.el!==i)&&(O.el=i,O.vx=r,O.vy=o,clearInterval(O.pid),i&&(O.pid=setInterval(function(){i===L?L.scrollTo(L.pageXOffset+r*l,L.pageYOffset+o*l):(o&&(i.scrollTop+=o*l),r&&(i.scrollLeft+=r*l))},24)))}},30),q=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,i=this.el,a=this.options,r=e.type,o=e.touches&&e.touches[0],s=(o||e).target,l=s,u=a.filter;if(!("mousedown"===r&&0!==e.button||a.disabled)&&(s=n(s,a.draggable,i))){if(A=m(s),"function"==typeof u){if(u.call(this,e,s,this))return c(t,l,"filter",s,i,A),void e.preventDefault()}else if(u&&(u=u.split(",").some(function(e){return e=n(l,e.trim(),i),e?(c(t,e,"filter",s,i,A),!0):void 0})))return void e.preventDefault();(!a.handle||n(l,a.handle,i))&&this._prepareDragStart(e,o,s)}},_prepareDragStart:function(e,t,n){var i,r=this,s=r.el,c=r.options,u=s.ownerDocument;n&&!b&&n.parentNode===s&&(I=e,k=s,b=n,y=b.parentNode,C=b.nextSibling,M=c.group,i=function(){r._disableDelayedDrag(),b.draggable=!0,o(b,r.options.chosenClass,!0),r._triggerDragStart(t)},c.ignore.split(",").forEach(function(e){l(b,e.trim(),h)}),a(u,"mouseup",r._onDrop),a(u,"touchend",r._onDrop),a(u,"touchcancel",r._onDrop),c.delay?(a(u,"mouseup",r._disableDelayedDrag),a(u,"touchend",r._disableDelayedDrag),a(u,"touchcancel",r._disableDelayedDrag),a(u,"mousemove",r._disableDelayedDrag),a(u,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(i,c.delay)):i())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(I={target:b,clientX:e.clientX,clientY:e.clientY},this._onDragStart(I,"touch")):this.nativeDraggable?(a(b,"dragend",this),a(k,"dragstart",this._onDragStart)):this._onDragStart(I,!0);try{F.selection?F.selection.empty():window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){k&&b&&(o(b,this.options.ghostClass,!0),e.active=this,c(this,k,"start",b,k,A))},_emulateDragOver:function(){if(N){if(this._lastX===N.clientX&&this._lastY===N.clientY)return;this._lastX=N.clientX,this._lastY=N.clientY,H||s(w,"display","none");var e=F.elementFromPoint(N.clientX,N.clientY),t=e,n=" "+this.options.group.name,i=B.length;if(t)do{if(t[R]&&t[R].options.groups.indexOf(n)>-1){for(;i--;)B[i]({clientX:N.clientX,clientY:N.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);H||s(w,"display","")}},_onTouchMove:function(t){if(I){e.active||this._dragStarted(),this._appendGhost();var n=t.touches?t.touches[0]:t,i=n.clientX-I.clientX,a=n.clientY-I.clientY,r=t.touches?"translate3d("+i+"px,"+a+"px,0)":"translate("+i+"px,"+a+"px)";P=!0,N=n,s(w,"webkitTransform",r),s(w,"mozTransform",r),s(w,"msTransform",r),s(w,"transform",r),t.preventDefault()}},_appendGhost:function(){if(!w){var e,t=b.getBoundingClientRect(),n=s(b),i=this.options;w=b.cloneNode(!0),o(w,i.ghostClass,!1),o(w,i.fallbackClass,!0),s(w,"top",t.top-U(n.marginTop,10)),s(w,"left",t.left-U(n.marginLeft,10)),s(w,"width",t.width),s(w,"height",t.height),s(w,"opacity","0.8"),s(w,"position","fixed"),s(w,"zIndex","100000"),s(w,"pointerEvents","none"),i.fallbackOnBody&&F.body.appendChild(w)||k.appendChild(w),e=w.getBoundingClientRect(),s(w,"width",2*t.width-e.width),s(w,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,i=this.options;this._offUpEvents(),"clone"==M.pull&&(_=b.cloneNode(!0),s(_,"display","none"),k.insertBefore(_,b)),t?("touch"===t?(a(F,"touchmove",this._onTouchMove),a(F,"touchend",this._onDrop),a(F,"touchcancel",this._onDrop)):(a(F,"mousemove",this._onTouchMove),a(F,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,b)),a(F,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var i,a,r,o=this.el,l=this.options,c=l.group,h=c.put,p=M===c,m=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),P=!0,M&&!l.disabled&&(p?m||(r=!k.contains(b)):M.pull&&h&&(M.name===c.name||h.indexOf&&~h.indexOf(M.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(V(e,l,this.el),z)return;if(i=n(e.target,l.draggable,o),a=b.getBoundingClientRect(),r)return t(!0),void(_||C?k.insertBefore(b,_||C):m||k.appendChild(b));if(0===o.children.length||o.children[0]===w||o===e.target&&(i=f(o,e))){if(i){if(i.animated)return;v=i.getBoundingClientRect()}t(p),!1!==u(k,o,b,a,i,v)&&(b.contains(o)||(o.appendChild(b),y=o),this._animate(a,b),i&&this._animate(v,i))}else if(i&&!i.animated&&i!==b&&void 0!==i.parentNode[R]){x!==i&&(x=i,D=s(i),E=s(i.parentNode));var g,v=i.getBoundingClientRect(),S=v.right-v.left,T=v.bottom-v.top,A=/left|right|inline/.test(D.cssFloat+D.display)||"flex"==E.display&&0===E["flex-direction"].indexOf("row"),$=i.offsetWidth>b.offsetWidth,I=i.offsetHeight>b.offsetHeight,N=(A?(e.clientX-v.left)/S:(e.clientY-v.top)/T)>.5,O=i.nextElementSibling,j=u(k,o,b,a,i,v);if(!1!==j){if(z=!0,setTimeout(d,30),t(p),1===j||-1===j)g=1===j;else if(A){var L=b.offsetTop,F=i.offsetTop;g=L===F?i.previousElementSibling===b&&!$||N&&$:F>L}else g=O!==b&&!I||N&&I;b.contains(o)||(g&&!O?o.appendChild(b):i.parentNode.insertBefore(b,g?O:i)),y=b.parentNode,this._animate(a,b),this._animate(v,i)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var i=t.getBoundingClientRect();s(t,"transition","none"),s(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,s(t,"transition","all "+n+"ms"),s(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){s(t,"transition",""),s(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(F,"touchmove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"touchcancel",this._onDrop)},_onDrop:function(t){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(O.pid),clearTimeout(this._dragStartTimer),r(F,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(F,"drop",this),r(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(P&&(t.preventDefault(),!i.dropBubble&&t.stopPropagation()),w&&w.parentNode.removeChild(w),b&&(this.nativeDraggable&&r(b,"dragend",this),h(b),o(b,this.options.ghostClass,!1),o(b,this.options.chosenClass,!1),k!==y?($=m(b))>=0&&(c(null,y,"sort",b,k,A,$),c(this,k,"sort",b,k,A,$),c(null,y,"add",b,k,A,$),c(this,k,"remove",b,k,A,$)):(_&&_.parentNode.removeChild(_),b.nextSibling!==C&&($=m(b))>=0&&(c(this,k,"update",b,k,A,$),c(this,k,"sort",b,k,A,$))),e.active&&((null===$||-1===$)&&($=A),c(this,k,"end",b,k,A,$),this.save())),k=b=y=w=C=_=S=T=I=N=P=$=x=D=M=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?b&&(this._onDragOver(e),i(e)):("drop"===t||"dragend"===t)&&this._onDrop(e)},toArray:function(){for(var e,t=[],i=this.el.children,a=0,r=i.length,o=this.options;r>a;a++)e=i[a],n(e,o.draggable,this.el)&&t.push(e.getAttribute(o.dataIdAttr)||p(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,a){var r=i.children[a];n(r,this.options.draggable,i)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&q(n)))},destroy:function(){var e=this.el;e[R]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),B.splice(B.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:a,off:r,css:s,find:l,is:function(e,t){return!!n(e,t,e)},extend:v,throttle:g,closest:n,toggleClass:o,index:m},e.create=function(t,n){return new e(t,n)},e.version="1.4.2",e}),function(){"use strict";Array.prototype.find||(Array.prototype.find=function(e,t){var n=Object(this);if("function"!=typeof e)throw new TypeError;for(var i=0;i<n.length;i++)if(i in n){var a=n[i];if(e.call(t,a,i,n))return a}}),$.widget("ui.tabulator",{data:[],activeData:[],firstRender:!0,mouseDrag:!1,mouseDragWidth:!1,mouseDragElement:!1,mouseDragOut:!1,sortCurCol:null,sortCurDir:null,filterField:null,filterValue:null,filterType:null,paginationCurrentPage:1,paginationMaxPage:1,progressiveRenderTimer:null,progressiveRenderFill:!1,columnList:[],loaderDiv:$("<div class='tablulator-loader'><div class='tabulator-loader-msg'></div></div>"),lang:{},defaultLang:{columns:{},pagination:{first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page"}},options:{colMinWidth:"40px",colResizable:!0,colVertAlign:"top",height:!1,fitColumns:!1,movableCols:!1,movableRows:!1,movableRowHandle:"<div></div><div></div><div></div>",locale:"en-gb",langs:{},persistentLayout:!1,persistentLayoutID:"",pagination:!1,paginationSize:!1,paginationElement:!1,paginationDataReceived:{current_page:"current_page",last_page:"last_page",data:"data"},paginationDataSent:{page:"page",size:"size",sort:"sort",sort_dir:"sort_dir",filter:"filter",filter_value:"filter_value",filter_type:"fitler_type"},paginator:!1,progressiveRender:!1,progressiveRenderSize:20,progressiveRenderMargin:200,headerFilterPlaceholder:"filter column...",tooltips:!1,tooltipsHeader:!1,columns:!1,data:!1,index:"id",sortable:!0,dateFormat:"dd/mm/yyyy",sortBy:"id",sortDir:"desc",groupBy:!1,groupHeader:function(e,t,n){return e+"<span>("+t+" "+(1===t?"item":"items")+")</span>"},rowFormatter:!1,addRowPos:"bottom",selectable:!0,ajaxURL:!1,ajaxParams:{},ajaxType:"get",showLoader:!0,loader:"<div class='tabulator-loading'>Loading Data</div>",loaderError:"<div class='tabulator-error'>Loading Error</div>",rowClick:function(){},rowAdded:function(){},rowDeleted:function(){},rowContext:function(){},rowMoved:function(){},rowUpdated:function(){},cellEdited:function(){},colMoved:function(){},colTitleChanged:function(){},dataLoading:function(){},dataLoaded:function(){},dataLoadError:function(){},dataEdited:function(){},ajaxResponse:!1,dataFiltering:function(){},dataFiltered:function(){},dataSorting:function(){},dataSorted:function(){},renderStarted:function(){},renderComplete:function(){},pageLoaded:function(){},localized:function(){},tableBuilding:function(){},tableBuilt:function(){}},_create:function(){var e=this,t=e.element;e.options.columns||(e.options.columns=[]),t.is("table")?e._parseTable():e._buildElement()},_parseTable:function(){function e(e){var t=!1;return $.each(s,function(n,i){if(i.title===e)return t=i,!1}),t}var t=this,n=t.element,i=t.options,a=$("tbody tr",n),r=$("th",n),o=!1,s=i.columns;r.length?r.each(function(t){var n=$(this),r=!1,l=e(n.text());l?r=!0:l={title:n.text()},l.field||(l.field=n.text().toLowerCase().replace(" ","_")),$("td:eq("+t+")",a).data("field",l.field);var c=n.attr("width");c&&!l.width&&(l.width=c),l.field==i.index&&(o=!0),r||s.push(l)}):(r=$("tr:first td",n),r.each(function(e){var t={title:"",field:"col"+e};$("td:eq("+e+")",a).data("field",t.field);var n=$(this).attr("width");n&&(t.width=n),s.push(t)})),t.data=[],a.each(function(e){var n={};o||(n[i.index]=e),$("td",$(this)).each(function(e){console.log($(this).html()),n[$(this).data("field")]=$(this).html()}),t.data.push(n)});var l=$("<div></div>"),c=n.prop("attributes");$.each(c,function(){l.attr(this.name,this.value)}),n.replaceWith(l),i.data=t.data,l.tabulator(i)},_buildElement:function(){var e=this,t=e.options,n=e.element;t.tableBuilding(),e.setLocale(e.options.locale),void 0!==t.columnLayoutCookie&&(t.persistentLayout=t.columnLayoutCookie,t.persistentLayoutID=t.columnLayoutCookieID),e.options.persistentLayout&&(e.options.persistentLayout=!0!==e.options.persistentLayout?e.options.persistentLayout:void 0!==window.localStorage?"local":"cookie",e.options.persistentLayoutID="tabulator-"+(e.options.persistentLayoutID?e.options.persistentLayoutID:e.element.attr("id")?e.element.attr("id"):"")),t.colMinWidth=isNaN(t.colMinWidth)?t.colMinWidth:t.colMinWidth+"px",t.height&&(t.height=isNaN(t.height)?t.height:t.height+"px",n.css({height:t.height})),n.addClass("tabulator").attr("role","grid"),n.empty(),e.header=$("<div class='tabulator-header'></div>"),e.tableHolder=$("<div class='tabulator-tableHolder'></div>");var i=0;e.tableHolder.scroll(function(){var t=$(this),n=t.scrollLeft();e.header.scrollLeft(n);var a=e.header[0].scrollWidth-e.element.innerWidth();n>a?e.header.css("margin-left",-(n-a)):e.header.css("margin-left",0),
e.options.progressiveRender&&i!=t.scrollTop()&&i<t.scrollTop()&&t[0].scrollHeight-t.innerHeight()-t.scrollTop()<e.options.progressiveRenderMargin&&("remote"==e.options.progressiveRender?e.paginationCurrentPage<=e.paginationMaxPage&&e._renderTable(!0):e.paginationCurrentPage<e.paginationMaxPage&&(e.paginationCurrentPage++,e._renderTable(!0))),i=t.scrollTop()}),e.table=$("<div class='tabulator-table'></div>"),t.pagination&&(!0===t.pagination&&(t.pagination="local"),t.paginationElement||(t.paginationElement=$("<div class='tabulator-footer'></div>"),e.footer=t.paginationElement),e.paginator=$("<span class='tabulator-paginator'><span class='tabulator-page' data-page='first' role='button' aria-label='"+e.lang.pagination.first_title+"' title='"+e.lang.pagination.first_title+"'>"+e.lang.pagination.first+"</span><span class='tabulator-page' data-page='prev' role='button' aria-label='"+e.lang.pagination.prev_title+"' title='"+e.lang.pagination.prev_title+"'>"+e.lang.pagination.prev+"</span><span class='tabulator-pages'></span><span class='tabulator-page' data-page='next' role='button' aria-label='"+e.lang.pagination.next_title+"' title='"+e.lang.pagination.next_title+"'>"+e.lang.pagination.next+"</span><span class='tabulator-page' data-page='last' role='button' aria-label='"+e.lang.pagination.last_title+"' title='"+e.lang.pagination.last_title+"'>"+e.lang.pagination.last+"</span></span>"),e.paginator.on("click",".tabulator-page",function(){$(this).hasClass("disabled")||e.setPage($(this).data("page"))}),t.paginationElement.append(e.paginator)),t.persistentLayout?e._getPersistentCol():e._colLayout()},_setOption:function(e,t){var n=this;if(["columns"].indexOf(e)>-1)return!1;$.Widget.prototype._setOption.apply(this,arguments),["colMinWidth","colResizable","fitColumns","movableCols","movableRows","movableRowHandle","sortable","groupBy","groupHeader","rowFormatter","selectable"].indexOf(e)>-1?n._renderTable():["height","pagination","paginationSize","tooltips"].indexOf(e)>-1?n.options.pagination?n.setPage(1):n._renderTable():["dateFormat","sortBy","sortDir"].indexOf(e)>-1?n.sortCurCol&&n.sort(n.sortCurCol,n.sortCurDir):["index"].indexOf(e)>-1?n._parseData(n.data):["paginationElement"].indexOf(e)},setLocale:function(e){function t(e,n){for(var i in e)"object"==typeof e[i]?(n[i]||(n[i]={}),t(e[i],n[i])):n[i]=e[i]}var n=this,i=!1;if(!0===e&&navigator.language&&(e=navigator.language.toLowerCase()),e)if(n.options.langs[e])i=e;else{var a=e.split("-")[0];n.options.langs[a]&&(i=a)}return n.lang=$.extend(!0,[],n.defaultLang),i&&t(n.options.langs[i],n.lang),n.options.locale=i,n.firstRender||n._updateLocaleText(),n.options.localized(i,n.lang),i},_updateLocaleText:function(){var e=this;if(e.columnList.forEach(function(t){t.field&&$(".tabulator-col[data-field="+t.field+"] .tabulator-col-title",e.header).text(e.lang.columns[t.field]||t.title)}),e.options.pagination)for(var t in e.lang.pagination){var n=t.split("_"),i=$(".tabulator-paginator .tabulator-page[data-page="+n[0]+"]",e.element);n.length>1?i.attr("title",e.lang.pagination[t]).attr("aria-label",e.lang.pagination[t]):i.text(e.lang.pagination[t])}e.redraw(!0)},getLocale:function(){return this.options.locale},getLang:function(){var e=this,t=e.options.langs[e.options.locale];return t||!1},dataCount:function(){return this.data.length},redraw:function(e){var t=this;if((t.options.fitColumns||e)&&t._colRender(),t.element.innerHeight()>0){var n=$(".tabulator-loader-msg",t.loaderDiv);n.css({"margin-top":t.element.innerHeight()/2-n.outerHeight()/2})}t._styleRows(!0),e&&t._renderTable()},download:function(e,t){var n=this,i=document.createElement("a");if("function"==typeof e)i.setAttribute("href",e(n.columnList,n.activeData));else switch(e){case"csv":var a=[],r=[];n.columnList.forEach(function(e){e.field&&(a.push(e.title),r.push(e.field))});var o=[a.join(",")];n.activeData.forEach(function(e){var t=[];r.forEach(function(n){t.push(e[n])}),o.push(t.join(","))}),i.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(o.join("\n")));break;case"json":var o=JSON.stringify(n.activeData,null,"\t");i.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(o));break;default:return!1}return i.setAttribute("download",t||"Tabulator."+("function"==typeof e?"txt":e)),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),!0},_setPersistentCol:function(){function e(t){var n=[];return t.forEach(function(t){var i={field:t.field,width:t.width,visible:t.visible};t.columns&&(i.title=t.title,i.columns=e(t.columns)),n.push(i)}),n}var t=this,n=e(t.options.columns),i=JSON.stringify(n);if("cookie"==t.options.persistentLayout){var a=new Date;a.setDate(a.getDate()+1e4),document.cookie=t.options.persistentLayoutID+"="+i+"; expires="+a.toUTCString()}else localStorage.setItem(t.options.persistentLayoutID,i)},_getPersistentCol:function(){var e=this,t="";if("cookie"==e.options.persistentLayout){var n=document.cookie,i=n.indexOf(e.options.persistentLayoutID+"=");if(i>-1){n=n.substr(i);var a=n.indexOf(";");a>-1&&(n=n.substr(0,a)),t=n.replace(e.options.persistentLayoutID+"=","")}}else var t=localStorage.getItem(e.options.persistentLayoutID);t?e.setColumns(JSON.parse(t),!0):e._colLayout()},setColumns:function(e,t){function n(e,t){t.forEach(function(t,a){var r=t.columns?"group":t.field?"field":"object",o=i(e,t,r);if(!1!==o){var s=e.splice(o,1)[0];s.width=t.width,s.visible=t.visible,e.splice(a,0,s),"group"==r&&n(s.columns,t.columns)}})}function i(e,t,n){var i=!1;return $.each(e,function(e,a){switch(n){case"group":t.title===a.title&&t.columns.length===a.columns.length&&(i=e);break;case"field":t.field===a.field&&(i=e);break;case"object":t===a&&(i=e)}if(!1!==i)return!1}),i}var a=this;Array.isArray(e)&&(t?n(a.options.columns,e):a.options.columns=e,a._colLayout(!0),a.options.persistentLayout&&a._setPersistentCol())},getColumns:function(){return this.options.columns},addColumn:function(e,t,n){var i=this;if(e){if(n){var a=i._findColumn(n);a&&a.parent.splice(t?a.index:a.index+1,0,e)}else i.options.columns.splice(t?0:i.options.columns.length+1,0,e);i.setColumns(i.options.columns)}},deleteColumn:function(e){var t=this;if(e){var n=t._findColumn(e);n&&n.parent.splice(n.index,1),t.setColumns(t.options.columns)}},_traverseColumns:function(e,t){var n=this;t=t||n.options.columns,$.each(t,function(t,i){i.columns?n._traverseColumns(e,i.columns):e(i)})},_findColumn:function(e,t){var n=this,i=!1;return t=t||n.options.columns,$.each(t,function(a,r){switch(typeof e){case"object":if(r==e)return i={parent:t,column:r,index:a},!1;break;case"function":if(e(r))return i={parent:t,column:r,index:a},!1;break;default:if(r.field==e)return i={parent:t,column:r,index:a},!1}if(r.columns){var o=n._findColumn(e,r.columns);if(o)return i=o,!1}}),i},_setColVisibility:function(e,t){var n=this;if(e){e.visible=t;var i=$(".tabulator-col[data-field="+e.field+"], .tabulator-cell[data-field="+e.field+"]",n.element);t?i.show():i.hide(),n._renderTable(),n.options.persistentLayout&&n._setPersistentCol()}},hideCol:function(e){var t=this,n=t._findColumn(e);n&&t._setColVisibility(n.column,!1)},showCol:function(e){var t=this,n=t._findColumn(e);n&&t._setColVisibility(n.column,!0)},toggleCol:function(e){var t=this,n=t._findColumn(e);n&&t._setColVisibility(n.column,!n.column.visible)},deleteRow:function(e){var t=this,n=isNaN(e)?e.data("data")[t.options.index]:e,i=isNaN(e)?e:$("[data-id="+e+"]",t.element);if(i.length){i.data("data").tabulator_delete_row=!0;var a=t.data.find(function(e){return e.tabulator_delete_row});a&&(a=t.data.indexOf(a))>-1&&t.data.splice(a,1),a=t.activeData.find(function(e){return e.tabulator_delete_row}),a&&(a=t.activeData.indexOf(a))>-1&&t.activeData.splice(a,1);var r=i.closest(".tabulator-group");if(i.remove(),t.options.groupBy){var o=$(".tabulator-row",r),s=o.length;if(s){var l=[];o.each(function(){l.push($(this).data("data"))});var c=$(".tabulator-group-header",r),u=$(".tabulator-arrow",c).clone(!0,!0);c.empty(),c.append(u).append(t.options.groupHeader(r.data("value"),s,l))}else r.remove()}t._styleRows(),t._colRender(!t.firstRender),t.options.rowDeleted(n),t.options.dataEdited(t.data)}},addRow:function(e,t){var n=this;e?e[n.options.index]=e[n.options.index]?e[n.options.index]:0:e={id:0},e=n._mutateData(e);var i=n._renderRow(e),t=void 0===t?n.options.addRowPos:!0===t||"top"===t?"top":"bottom";"top"==t?(n.activeData.unshift(e),n.table.prepend(i)):(n.activeData.push(e),n.table.append(i)),n._colRender(!n.firstRender),n._styleRows(),n.options.rowAdded(e,i),n.options.dataEdited(n.data)},updateRow:function(e,t,n){var i=this,a=isNaN(e)?e.data("data")[i.options.index]:e,r=isNaN(e)?e:$("[data-id="+e+"]",i.element);if(r.length){var o=r.data("data");if(t=i._mutateData(t),JSON.stringify(o)!==JSON.stringify(t)){for(var s in t)o[s]=t[s];var l=i._renderRow(o);r.replaceWith(l),n||(i._colRender(!i.firstRender),i._styleRows()),i.options.rowUpdated(a,t,l),n||i.options.dataEdited(i.data)}return!0}return!1},getData:function(e){var t=this,n=$.extend(!0,[],!0===e?t.activeData:t.data);return t._applyAccessors(n)},updateData:function(e){var t=this;e&&(e.forEach(function(e){t.updateRow(e[t.options.index],e,!0)}),t._colRender(!t.firstRender),t._styleRows(),t.options.dataEdited(t.data))},_applyAccessors:function(e){var t=this;return t._traverseColumns(function(n){if(n.accessor){var i="function"==typeof n.accessor?n.accessor:t.accessors[n.accessor];e.forEach(function(e,t){e[n.field]=i(e[n.field],e)})}}),e},_parsePageData:function(e,t){var n=this,i=n.options;n.paginationMaxPage=parseInt(e[i.paginationDataReceived.last_page]),n._layoutPageSelector(),n._parseData(e[i.paginationDataReceived.data],t)},_getRemotePageData:function(e){var t=this,n=t.options;if("function"==typeof n.paginator){var i=n.paginator(n.ajaxURL,t.paginationCurrentPage,n.paginationSize,n.ajaxParams);t._getAjaxData(i,{},null,e)}else{var a={};for(var r in n.ajaxParams)a[r]=n.ajaxParams[r];a[n.paginationDataSent.page]=t.paginationCurrentPage,n.paginationSize&&(a[n.paginationDataSent.size]=n.paginationSize),t.sortCurCol&&"string"==typeof t.sortCurCol.field&&(a[n.paginationDataSent.sort]=t.sortCurCol.field,a[n.paginationDataSent.sort_dir]=t.sortCurDir),t.filterField&&"string"==typeof t.filterField&&(a[n.paginationDataSent.filter]=t.filterField,a[n.paginationDataSent.filter_value]=t.filterValue,a[n.paginationDataSent.filter_type]=t.filterType),t._getAjaxData(n.ajaxURL,a,null,e)}},setData:function(e,t,n){var i=this;i.options.dataLoading(e,t),t=t||{},i.options.ajaxParams=t,i._showLoader(this,this.options.loader),"string"==typeof e?0==e.indexOf("{")||0==e.indexOf("[")?i._parseData(jQuery.parseJSON(e)):(i.options.ajaxURL=e,"remote"==i.options.pagination?i.setPage(1):i._getAjaxData(e,t,n)):e?i._parseData(e):this.options.ajaxURL?"remote"==i.options.pagination?i.setPage(1):i._getAjaxData(this.options.ajaxURL,t,n):i._parseData([])},clear:function(){this.table.empty(),this.data=[],this._filterData()},_getAjaxData:function(e,t,n,i){var a=this;a.options;$.ajax({url:e,type:n||a.options.ajaxType,data:t||a.options.ajaxParams,async:!0,dataType:"json",success:function(n){var r="function"==typeof a.options.ajaxResponse?a.options.ajaxResponse(e,t||a.options.ajaxParams,n):n;"remote"==a.options.pagination||"remote"==a.options.progressiveRender?a._parsePageData(r,i):a._parseData(r,i)},error:function(e,t,n){console.error("Tablulator ERROR (ajax get): "+e.status+" - "+n),a.options.dataLoadError(e,t,n),a._showLoader(a,a.options.loaderError)}})},_parseData:function(e,t){var n=this;if(Array.isArray(e)){var i=[];e.length&&(void 0===e[0][n.options.index]?(n.options.index="_index",$.each(e,function(e,t){i[e]=t,i[e]._index=e})):$.each(e,function(e,t){i.push(t)})),n.options.dataLoaded(i);var a=n._mutateData(i);t?(n.data=a,n.data=n.data.concat(a),n.activeData=n.activeData.concat(a),n.progressiveRenderFill&&n._renderTable(!0)):(n.data=a,n._filterData())}},_mutateData:function(e){var t=this;return t._traverseColumns(function(n){if(n.mutator&&"edit"!==n.mutateType){var i="function"==typeof n.mutator?n.mutator:t.mutators[n.mutator];Array.isArray(e)?e.forEach(function(e,t){void 0!==e[n.field]&&(e[n.field]=i(e[n.field],"data",e))}):void 0!==e[n.field]&&(e[n.field]=i(e[n.field],"data",e))}}),e},setFilter:function(e,t,n){var i=this;i.options.dataFiltering(e,t,n),e?(i.filterField=e,i.filterType=void 0===n?"=":t,i.filterValue=void 0===n?t:n):(i.filterField=null,i.filterType=null,i.filterValue=null),this._filterData()},clearFilter:function(){var e=this;e.filterField=null,e.filterType=null,e.filterValue=null,this._filterData()},getFilter:function(){var e=this;if(e.filterField){return{field:e.filterField,type:e.filterType,value:e.filterValue}}return!1},_filterData:function(){var e=this;e.filterField?e.activeData=e.data.filter(function(t){return e._filterRow(t)}):e.activeData=e.data,"local"==e.options.pagination&&(e.paginationMaxPage=Math.ceil(e.activeData.length/e.options.paginationSize)),e.options.dataFiltered(e.activeData,e.filterField,e.filterType,e.filterValue),e.sortCurCol&&"remote"!=e.options.pagination?e.sort(e.sortCurCol,e.sortCurDir):"local"==e.options.pagination?e.setPage(1):e._renderTable()},_filterRow:function(e){var t=this;if(!t.filterField)return!0;if("function"==typeof t.filterField)return t.filterField(e);var n=e[t.filterField],i=t.filterValue;switch(t.filterType){case"=":return n==i;case"<":return n<i;case"<=":return n<=i;case">":return n>i;case">=":return n>=i;case"!=":return n!=i;case"like":return null===n?i===n:n.toLowerCase().indexOf(i.toLowerCase())>-1;default:return!1}return!1},getSort:function(){var e=this;return{field:!!e.sortCurCol&&e.sortCurCol.field,dir:e.sortCurDir||!1}},_sortClick:function(e,t){var n=this;"desc"==t.data("sortdir")?t.data("sortdir","asc").attr("aria-sort","ascending"):t.data("sortdir","desc").attr("aria-sort","descending"),n.sort(e,t.data("sortdir"))},sort:function(e,t){var n=this,i=n.header;this.options;Array.isArray(e)||(e=[{field:e,dir:t}]),$.each(e,function(a,r){if("string"==typeof r.field){var o=n._findColumn(r.field);o&&(r.field=o.column)}$(".tabulator-col[data-sortable=true][data-field!="+r.field.field+"]",n.header).data("sortdir","desc").attr("aria-sort","none"),$(".tabulator-col .tabulator-arrow",n.header).removeClass("asc desc");var s=$(".tabulator-col[data-field='"+r.field.field+"']",i),l=$(".tabulator-arrow",s);"asc"==t?l.removeClass("desc").addClass("asc"):l.removeClass("asc").addClass("desc"),n._sorter(r.field,r.dir,e,a)}),n.options.dataSorted(n.data,e,t),n.options.pagination?n.setPage(1):n._renderTable()},_sorter:function(e,t,n,i){var a=this,r=a.table;a.options,a.data;!1!==a.options.dataSorting(n,t)&&(a.sortCurCol=e,a.sortCurDir=t,a._sortElement(r,e,t,n,i))},_sortElement:function(e,t,n,i,a){var r=this;r.activeData=r.activeData.sort(function(e,o){var s=r._processSorter(e,o,t,n);if(0==s&&a)for(var l=a-1;l>=0&&0==(s=r._processSorter(e,o,i[l].field,i[l].dir));l--);return s})},_processSorter:function(e,t,n,i){var a=this,r="asc"==i?e:t,o="asc"==i?t:e;e=r[n.field],t=o[n.field];var s=void 0===n.sorter?"string":n.sorter;return s="string"==typeof s?a.sorters[s]:s,s.call(a,e,t,r,o)},getPage:function(){var e=this;return!!e.options.pagination&&e.paginationCurrentPage},getPageMax:function(){var e=this;return!!e.options.pagination&&e.paginationMaxPage},setPage:function(e){var t=this;if(e>0&&e<=t.paginationMaxPage)t.paginationCurrentPage=e;else switch(e){case"first":t.paginationCurrentPage=1;break;case"prev":t.paginationCurrentPage>1&&t.paginationCurrentPage--;break;case"next":t.paginationCurrentPage<t.paginationMaxPage&&t.paginationCurrentPage++;break;case"last":t.paginationCurrentPage=t.paginationMaxPage}"local"==t.options.pagination?(t._layoutPageSelector(),t._renderTable()):t._getRemotePageData()},setPageSize:function(e){var t=this;Number.isInteger(e)&&e>0&&(t.options.paginationSize=parseInt(e),t._filterData())},_layoutPageSelector:function(){var e=this,t=1,n=e.paginationMaxPage,i=$(".tabulator-pages",e.paginator);i.empty();var a=$("<span> ... </span>");e.paginationMaxPage>10&&(e.paginationCurrentPage<=4?n=5:e.paginationCurrentPage>e.paginationMaxPage-4?(t=e.paginationMaxPage-4,i.append(a.clone())):(t=e.paginationCurrentPage-2,n=e.paginationCurrentPage+2,i.append(a.clone())));for(var r=t;r<=n;++r){var o=r==e.paginationCurrentPage?"active":"";i.append("<span class='tabulator-page "+o+"' data-page='"+r+"' role='button' aria-label='Show Page "+r+"'>"+r+"</span>")}e.paginationMaxPage>10&&(e.paginationCurrentPage<=4||e.paginationCurrentPage<=e.paginationMaxPage-4)&&i.append(a.clone()),$(".tabulator-page",e.paginator).removeClass("disabled").attr("aria-disabled","false"),1==e.paginationCurrentPage&&$(".tabulator-page[data-page=first], .tabulator-page[data-page=prev]",e.paginator).addClass("disabled").attr("aria-disabled","true"),e.paginationCurrentPage==e.paginationMaxPage&&$(".tabulator-page[data-page=next], .tabulator-page[data-page=last]",e.paginator).addClass("disabled").attr("aria-disabled","true")},_renderTable:function(e){var t=this,n=t.options,i=0;if(t.options.renderStarted(),t._showLoader(t,t.options.loader),e||(clearTimeout(t.progressiveRenderTimer),i=t.tableHolder.scrollLeft(),t.table.empty()),n.pagination||!n.progressiveRender||e||("remote"!==n.progressiveRender?(t.paginationCurrentPage=1,t.paginationMaxPage=Math.ceil(t.activeData.length/t.options.progressiveRenderSize),n.paginationSize=n.progressiveRenderSize):n.paginationSize=t.activeData.length,e=!0),("local"==n.pagination||n.progressiveRender?t.activeData.slice((t.paginationCurrentPage-1)*t.options.paginationSize,(t.paginationCurrentPage-1)*t.options.paginationSize+t.options.paginationSize):t.activeData).forEach(function(e,i){var a=t._renderRow(e);if(n.groupBy){var r="function"==typeof n.groupBy?n.groupBy(e):e[n.groupBy],o=$(".tabulator-group[data-value='"+r+"']",t.table);0==o.length&&(o=t._renderGroup(r),t.table.append(o)),$(".tabulator-group-body",o).append(a)}else t.table.append(a)}),n.movableRows){var a={handle:".tabulator-row-handle",opacity:1,axis:"y",start:function(e,t){t.item.addClass("tabulator-row-moving")},stop:function(e,t){t.item.removeClass("tabulator-row-moving")},update:function(e,i){t._styleRows(),$(".tabulator-col[data-sortable=true]",t.header).data("sortdir","desc"),$(".tabulator-col .tabulator-arrow",t.header).removeClass("asc desc"),t.activeData=[],$(".tabulator-row",t.table).each(function(){t.activeData.push($(this).data("data"))}),n.rowMoved(i.item.data("id"),i.item.data("data"),i.item,i.item.prevAll(".tabulator-row").length)}};n.groupBy?$(".tabulator-group-body",t.table).sortable(a):t.table.sortable(a)}n.groupBy&&($(".tabulator-group",t.table).each(function(){t._renderGroupHeader($(this))}),t._sortElement(t.table,{},"asc",!0)),t._colRender(!t.firstRender),t._styleRows(),e&&t.paginationCurrentPage<t.paginationMaxPage&&t.tableHolder[0].scrollHeight<=t.tableHolder.innerHeight()?(t.progressiveRenderFill=!0,t.paginationCurrentPage++,"remote"==n.progressiveRender?t._getRemotePageData(!0):t._renderTable(!0)):(t._hideLoader(t),t.options.pagination&&t.options.pageLoaded(t.paginationCurrentPage),"remote"==n.progressiveRender&&(t.progressiveRenderFill=!1,t.paginationCurrentPage++,t._getRemotePageData(!0))),e||t.tableHolder.scrollLeft(i),t.firstRender&&(t.firstRender=!1,n.tableBuilt())},_renderRow:function(e){var t=this,n=$("<div class='tabulator-row' data-id='"+e[t.options.index]+"' role='row'></div>");if(n.data("data",e),n.on("click",function(i){t._rowClick(i,n,e)}),n.on("contextmenu",function(i){t._rowContext(i,n,e)}),t.options.movableRows){var i=$("<div class='tabulator-row-handle'></div>");i.append(t.options.movableRowHandle),n.append(i)}return $.each(t.columnList,function(i,a){var r=void 0===e[a.field]?"":e[a.field];void 0===e[a.field]&&(e[a.field]="");var o=void 0===a.align?"left":a.align,s=a.editable||a.editor?"tabindex='0'":"",l=a.visible?"inline-block":"none",c="text-align: "+o+"; display:"+l+";",u=$("<div class='tabulator-cell "+a.cssClass+"' "+s+" style='"+c+"' data-index='"+i+"' data-field='"+a.field+"' data-value='"+t._safeString(r)+"' role='gridcell'></div>");if(t._generateTooltip(u,e,a.tooltip),a.editable||a.editor){if(a.editor)var h=a.editor;else var h=t.editors[a.formatter]?a.formatter:"input";u.data("editor",h)}if(u.data("formatter",a.formatter),u.data("formatterParams",a.formatterParams),u.html(t._formatCell(a.formatter,r,e,u,n,a.formatterParams)),"function"==typeof a.onClick)u.on("click",function(e){t._cellClick(e,u)});else if(u.data("editor")&&(u.on("click",function(e){$(this).hasClass("tabulator-editing")||$(this).focus()}),u.on("focus",function(e){e.stopPropagation();var n="string"==typeof u.data("editor")?t.editors[u.data("editor")]:u.data("editor"),i=n.call(t,u,u.data("value"),u.closest(".tabulator-row").data("data"));!1!==i?(u.addClass("tabulator-editing"),u.empty(),u.append(i),u.children().click(function(e){e.stopPropagation()})):u.blur()}),a.mutator&&"data"!==a.mutateType)){var d="function"==typeof a.mutator?a.mutator:t.mutators[a.mutator];u.data("mutator",d)}n.append(u)}),n},_renderGroup:function(e){return $("<div class='tabulator-group show' data-value='"+e+"' role='rowgroup'><div class='tabulator-group-header' role='rowheader'></div><div class='tabulator-group-body'></div></div>")},_renderGroupHeader:function(e){var t=this,n=$("<div class='tabulator-arrow'></div>").on("click",function(){$(this).closest(".tabulator-group").toggleClass("show")}),i=[];$(".tabulator-row",e).each(function(){i.push($(this).data("data"))}),$(".tabulator-group-header",e).html(n).append(t.options.groupHeader(e.data("value"),$(".tabulator-row",e).length,i))},_showLoader:function(e,t){e.options.showLoader&&($(".tabulator-loader-msg",e.loaderDiv).attr("role","alert"),$(".tabulator-loader-msg",e.loaderDiv).empty().append(t),$(".tabulator-loader-msg",e.loaderDiv).css({"margin-top":e.element.innerHeight()/2-$(".tabulator-loader-msg",e.loaderDiv).outerHeight()/2}),e.element.append(e.loaderDiv))},_hideLoader:function(e){$(".tablulator-loader",e.element).remove()},_generateTooltip:function(e,t,n){var i=this,n=n||!1===n?n:i.options.tooltips;!0===n?n=e.data("value"):"function"==typeof n&&(n=n(e.data("field"),e.data("value"),t)),n?e.attr("title",n):e.attr("title","")},_resizeCol:function(e,t){var n=this;$(".tabulator-cell[data-index="+e+"], .tabulator-col[data-index="+e+"]",this.element).css({width:t}),n.options.fitColumns&&($(".tabulator-row .tabulator-cell:last-of-type",n.element).css("border-right",""),$(".tabulator-col:last",n.element).css("border-right","")),n._vertAlignColHeaders()},_vertAlignColHeaders:function(){var e=this;if(e.header){var t=e.header.outerHeight(),n=$(".tabulator-col-group-cols>.tabulator-col:not(.tabulator-col-group)",e.header),i=$(".tabulator-col:not(.tabulator-col-group)",e.header);i.css({"padding-top":""}),n.css({height:""}),$(">.tabulator-col, >.tabulator-col-row-handle",e.header).css({height:""}).css({height:e.header.innerHeight()+"px"}),n.each(function(){$(this).css({height:$(this).parent().innerHeight()})}),"top"!==e.options.colVertAlign&&i.each(function(){var t=$(this),n=$(".tabulator-col-content",t).outerHeight();t.css({"padding-top":t.innerHeight()-("bottom"===e.options.colVertAlign?n:1.5*n)})}),e.options.height&&t!=e.header.outerHeight()&&e.tableHolder.css({"min-height":"calc(100% - "+e.header.outerHeight()+"px)","max-height":"calc(100% - "+e.header.outerHeight()+"px)"})}e.table.is(":empty")&&e.header[0].scrollWidth>e.header.outerHeight()?e.table.css({"min-width":e.header[0].scrollWidth+"px","min-height":"1px",visibility:"hidden"}):e.table.css({"min-width":"","min-height":"",visibility:""})},_colLayout:function(e){var t=this,n=(t.options,t.element);t.header.empty(),t.columnList=[],t._colLayoutGroup(t.options.columns,t.header);var i=$("<div class='tabulator-arrow'></div>");if(t.options.colResizable){var a=$("<div class='tabulator-handle'></div>"),r=$("<div class='tabulator-handle prev'></div>");$(".tabulator-col",t.header).append(a).append(r),$(".tabulator-col .tabulator-handle",t.header).on("mousedown",function(e){e.stopPropagation();var n=$(this),i=n.hasClass("prev")?n.closest(".tabulator-col").prev(".tabulator-col"):n.closest(".tabulator-col");void 0===i.attr("data-index")&&(i=$(".tabulator-col",i).last()),i&&(t.mouseDrag=e.screenX,t.mouseDragWidth=i.outerWidth(),t.mouseDragElement=i),$("body").on("mouseup",o)}),t.element.on("mousemove",function(e){t.mouseDrag&&(t.mouseDragElement.css({width:t.mouseDragWidth+(e.screenX-t.mouseDrag)}),t._resizeCol(t.mouseDragElement.attr("data-index"),t.mouseDragElement.outerWidth()))});var o=function(e){if(t.mouseDrag){e.stopPropagation(),e.stopImmediatePropagation(),$("body").off("mouseup",o),t.mouseDragOut=!0,t._resizeCol(t.mouseDragElement.attr("data-index"),t.mouseDragElement.outerWidth());var n=t._findColumn(t.mouseDragElement.data("field"));n&&(n.column.width=t.mouseDragElement.outerWidth()),t.options.persistentLayout&&t._setPersistentCol(),t.mouseDrag=!1,t.mouseDragWidth=!1,t.mouseDragElement=!1}}}if(n.append(t.header),t.tableHolder.append(t.table),n.append(t.tableHolder),t.footer){n.append(t.footer);var s=t.header.outerHeight()+t.footer.outerHeight();t.tableHolder.css({"min-height":"calc(100% - "+s+"px)","max-height":"calc(100% - "+s+"px)"})}else t.options.height&&t.tableHolder.css({"min-height":"calc(100% - "+t.header.outerHeight()+"px)","max-height":"calc(100% - "+t.header.outerHeight()+"px)"});"local"!=t.options.pagination||t.options.paginationSize||(t.options.height?t.options.paginationSize=Math.floor(t.tableHolder.outerHeight()/$(".tabulator-col .tabulator-col-content",t.header).first().outerHeight()):t.options.paginationSize=10),n.on("editval",".tabulator-cell",function(e,n){var i=$(this);i.is(":focus")&&i.blur(),t._cellDataChange(i,n)}),n.on("editcancel",".tabulator-cell",function(e,n){t._cellDataChange($(this),$(this).data("value"))}),$(".tabulator-col[data-sortable=true] .tabulator-col-content",t.header).data("sortdir","desc").append(i.clone()),setTimeout(function(){t._colRender(!1,e),t.firstRender&&(t.options.data?setTimeout(function(){t._parseData(t.options.data)},100):t.options.ajaxURL&&("remote"===t.options.pagination?t.setPage(1):"remote"==t.options.progressiveRender?(t.paginationCurrentPage=1,t._getRemotePageData()):t._getAjaxData(t.options.ajaxURL,t.options.ajaxParams,t.options.ajaxType)))},100)},_colLayoutGroup:function(e,t){function n(){function e(e){var n=!0;for(var i in t)switch(t[i].comparison){case"partial":-1==String(e[i]).toLowerCase().indexOf(String(t[i].value).toLowerCase())&&(n=!1);break;default:e[i]!=t[i].value&&(n=!1)}return n}var t={};$(".tabulator-header-filter",i.header).each(function(){var e=$(this),n=e.data("filter-val");if(void 0!==n&&""!==n){var i="match";$("input",$(this)).length&&("text"!=$("input",$(this)).attr("type")&&""!=$("input",$(this)).attr("type")||(i="partial")),t[e.closest(".tabulator-col").data("field")]={value:n,comparison:i}}}),i.setFilter(e)}var i=this,a=i.options;i.element;if(a.movableRows){var r=$("<div class='tabulator-col-row-handle' role='gridcell'>&nbsp</div>");i.header.append(r)}a.movableCols&&t.sortable({axis:"x",opacity:1,cancel:".tabulator-col-row-handle, .tabulator-col[data-field=''], .tabulator-col[data-field=undefined]",start:function(e,t){t.placeholder.css({display:"inline-block",visibility:"visible",width:t.item.outerWidth()})},change:function(e,t){function n(e){var t=e.next(".tabulator-col");if(!t.length){var i=e.parent().closest(".tabulator-col.tabulator-col-group");if(i.length)var t=n(i)}return t.hasClass("tabulator-col-group")?$(".tabulator-col[data-index]",t).first():t}function a(e,t){$(".tabulator-row",i.table).each(function(){t.length?$(".tabulator-cell[data-index="+e.data("index")+"]",$(this)).insertBefore($(".tabulator-cell[data-index="+t.data("index")+"]",$(this))):$(this).append($(".tabulator-cell[data-index="+e.data("index")+"]",$(this)))})}var r=t.item;t.placeholder.css({display:"inline-block",visibility:"visible",width:t.item.outerWidth()});var o=n(t.placeholder);if(r.index!=o.data("index"))if(r.hasClass("tabulator-col-group")){var s=o;$($(".tabulator-col[data-index]",r).get().reverse()).each(function(){a($(this),s),s=$(this)})}else a(r,o)},update:function(e,t){var n=t.item.next(".tabulator-col"),r=t.item.parent().closest(".tabulator-col-group"),o=t.item.data("column"),s=r.length?r.data("column").columns:a.columns,l=n.length?n.data("column"):null,c=s.splice(i._findColumn(o,s).index,1)[0];l=i._findColumn(l,s).index,s.splice(void 0!==l?l:s.length,0,c),i.columnList=[],i._traverseColumns(function(e){i.columnList.push(e)}),a.colMoved(t.item.data("field"),a.columns),i.options.persistentLayout&&i._setPersistentCol()}}),e.forEach(function(e,r){if(e.columns){var o=$('<div class="tabulator-col tabulator-col-group" role="columngroup" aria-label="'+e.title+'"><div class="tabulator-col-content"><div class="tabulator-col-title">'+e.title+'</div></div><div class="tabulator-col-group-cols"></div></div>');i._colLayoutGroup(e.columns,$(".tabulator-col-group-cols",o))}else{if(i.columnList.push(e),e.index=i.columnList.length-1,e.sorter=void 0===e.sorter?"string":e.sorter,e.sortable=void 0===e.sortable?a.sortable:e.sortable,e.sortable=void 0!==e.field&&e.sortable,e.visible=void 0===e.visible||e.visible,e.cssClass=void 0===e.cssClass?"":e.cssClass,a.sortBy==e.field){var s=" data-sortdir='"+a.sortDir+"' ";i.sortCurCol=e,i.sortCurDir=a.sortDir}else var s="";var l=e.visible?"inline-block":"none",c=void 0===e.minWidth?a.colMinWidth:e.minWidth,o=$('<div class="tabulator-col '+e.cssClass+'" style="display:'+l+"; min-width:"+c+';" data-index="'+e.index+'" data-field="'+e.field+'" data-sortable='+e.sortable+s+' role="columnheader" aria-sort="'+(a.sortBy==e.field?"asc"==a.sortDir?"ascending":"descending":"none")+'"><div class="tabulator-col-content"><div class="tabulator-col-title"></div></div></div>'),u=$(".tabulator-col-content",o),h=$(".tabulator-col-title",o),d=i.lang.columns[e.field]||(e.title?e.title:"&nbsp");if(e.editableTitle){var f=$("<input class='tabulator-title-editor'>");f.val(d),f.on("click",function(e){e.stopPropagation(),$(this).focus()}),f.on("change",function(){var t=$(this).val();e.title=t,a.colTitleChanged(t,e,a.columns)}),d=f}if(e.headerFilter){if(!0===e.headerFilter)if(e.editor)var p=e.editor;else var p=i.editors[e.formatter]?e.formatter:"input";else var p=e.headerFilter;var m="string"==typeof p?i.editors[p]:p,g=$("<div class='tabulator-header-filter'></div>"),v=m.call(i,g,"");g.append(v),g.children().attr("placeholder",i.options.headerFilterPlaceholder),v.on("click",function(e){e.stopPropagation(),$(this).focus()}),v.on("keyup",function(e){g.trigger("editval",$(this).val())}),"number"==v.attr("type")&&v.on("change",function(e){g.trigger("editval",$(this).val())}),g.on("editval editcancel",function(e,t){$(this).data("filter-val",t),n()}),h.append(d),u.append(g)}else h.html(d);var b=e.tooltipHeader?e.tooltipHeader:!(!a.tooltipsHeader||!1===e.tooltipHeader);!0===b?b=d:"function"==typeof b&&(b=b(e)),b?o.attr("title",b):o.attr("title",""),void 0!==e.width&&(e.width=isNaN(e.width)?e.width:e.width+"px",o.data("width",e.width),o.css({width:e.width})),e.sortable&&o.on("click",function(){i.mouseDragOut||i._sortClick(e,o),i.mouseDragOut=!1})}o.data("column",e),t.append(o)})},_colRender:function(e,t){var n=this,i=n.options,a=(n.table,n.header,n.element);if(e||!i.fitColumns)$.each(n.columnList,function(e,t){u=$(".tabulator-col[data-field='"+t.field+"']",a).outerWidth(),$(".tabulator-cell[data-field='"+t.field+"']",a).css({width:u})});else if(i.fitColumns){$(".tabulator-row .tabulator-cell:last-child, .tabulator-col:last",a).css("border-right","none"),n.options.fitColumns&&$(".tabulator-row",n.table).css({width:"100%"});var r=i.movableRows?n.element.innerWidth()-30:n.element.innerWidth(),o=0,s=0,l=0,c="";$.each(n.columnList,function(e,t){if(t.visible)if(o++,t.width){var n=0;n="string"==typeof t.width?t.width.indexOf("%")>-1?r/100*parseInt(t.width):parseInt(t.width):t.width,s+=n,l++}else c=t.field})
;var u=r/o,h=Math.floor((r-s)/(o-l)),d=r-s-h*(o-l);d=d>0?d:0,$.each(n.columnList,function(e,t){if(t.visible){var n=parseInt(void 0===t.minWidth?i.colMinWidth:t.minWidth);if(h>=n){var o=h;t.width&&(o="string"==typeof t.width?t.width.indexOf("%")>-1?r/100*parseInt(t.width):parseInt(t.width):t.width);var s=$(".tabulator-cell[data-index="+e+"], .tabulator-col[data-index="+e+"]",a);t.field==c?s.css({width:o+d}):(o<n&&s.css({"min-width":o}),s.css({width:o}))}else{var s=$(".tabulator-cell[data-index="+e+"], .tabulator-col[data-index="+e+"]",a);s.css({width:u})}}})}else $.each(n.columnList,function(e,t){var n=$(".tabulator-cell[data-index="+e+"], .tabulator-col[data-index="+e+"]",a);if(t.width)r=t.width;else{var r=0;if(n.each(function(){r=$(this).outerWidth()>r?$(this).outerWidth():r}),i.colMinWidth||void 0!==t.minWidth){var o=parseInt(void 0===t.minWidth?i.colMinWidth:t.minWidth);r=r<o?o:r}}n.css({width:r})});n._vertAlignColHeaders(),t&&n._renderTable()},_styleRows:function(e){var t=this;e||(t.options.selectable?$(".tabulator-row").addClass("selectable"):$(".tabulator-row").removeClass("selectable"),t.options.rowFormatter&&$(".tabulator-row",t.table).each(function(){var e=t.options.rowFormatter($(this),$(this).data("data"));e&&$(this).html(e)})),t.element.is(":visible")&&$(".tabulator-row",t.table).each(function(){$(".tabulator-cell, .tabulator-row-handle",$(this)).css({height:$(this).innerHeight()+"px"})}),t.options.renderComplete()},_resizeRow:function(e){$(".tabulator-cell, .tabulator-row-handle",e).css({height:""}),$(".tabulator-cell, .tabulator-row-handle",e).css({height:e.innerHeight()+"px"})},_formatCell:function(e,t,n,i,a,r){var o=this,e=void 0===e?"plaintext":e;return e="string"==typeof e?this.formatters[e]:e,e.call(o,t,n,i,a,this.options,r)},_rowClick:function(e,t,n){this.options.rowClick(e,t.data("id"),n,t)},_rowContext:function(e,t,n){this.options.rowContext(e,t.data("id"),n,t)},_cellClick:function(e,t){var n=this,i=t.data("index"),a=n._findColumn(function(e){return e.index==i});a&&a.column.onClick(e,t,t.data("value"),t.closest(".tabulator-row").data("data"))},_cellDataChange:function(e,t){var n=this,i=e.closest(".tabulator-row");e.removeClass("tabulator-editing");var a=i.data("data"),r=a[e.data("field")]!=t,o=a[e.data("field")];if(r){var s=e.data("mutator");s&&(t=s(t,"edit",a)),e.data("value",t),a[e.data("field")]=t,i.data("data",a)}e.html(n._formatCell(e.data("formatter"),t,a,e,i,e.data("formatterParams"))),r&&(n.options.cellEdited(a[n.options.index],e.data("field"),t,o,a,e,i),n._generateTooltip(e,a,n._findColumn(e.data("field")).column.tooltip)),n._styleRows(),n.options.dataEdited(n.data)},_safeString:function(e){return String(e).replace(/'/g,"&#39;")},_formatDate:function(e){var t=this.options.dateFormat,n=t.indexOf("yyyy"),i=t.indexOf("mm"),a=t.indexOf("dd");if(e)var r=e.substring(n,n+4)+"-"+e.substring(i,i+2)+"-"+e.substring(a,a+2),o=Date.parse(r);else var o=0;return isNaN(o)?0:o},_formatText:function(e){return $("<div>").text(e).html()},sorters:{number:function(e,t){return parseFloat(String(e).replace(",",""))-parseFloat(String(t).replace(",",""))},string:function(e,t){return String(e).toLowerCase().localeCompare(String(t).toLowerCase())},date:function(e,t){var n=this;return n._formatDate(e)-n._formatDate(t)},boolean:function(e,t){return(!0===e||"true"===e||"True"===e||1===e?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},alphanum:function(e,t){var n,i,a,r,o,s=0,l=/(\d+)|(\D+)/g,c=/\d/;if(isFinite(e)&&isFinite(t))return e-t;if(n=String(e).toLowerCase(),i=String(t).toLowerCase(),n===i)return 0;if(!c.test(n)||!c.test(i))return n>i?1:-1;for(n=n.match(l),i=i.match(l),o=n.length>i.length?i.length:n.length;s<o;)if(a=n[s],r=i[s++],a!==r)return isFinite(a)&&isFinite(r)?("0"===a.charAt(0)&&(a="."+a),"0"===r.charAt(0)&&(r="."+r),a-r):a>r?1:-1;return n.length>i.length},time:function(e,t){return e=e.split(":"),t=t.split(":"),e=60*e[0]+e[1],t=60*t[0]+t[1],e>t}},formatters:{plaintext:function(e,t,n,i,a,r){return this._formatText(e)},textarea:function(e,t,n,i,a,r){return n.css({"white-space":"pre-wrap"}),this._formatText(e)},money:function(e,t,n,i,a,r){var o=parseFloat(e);if(isNaN(o))return this._formatText(e);for(var s=o.toFixed(2),s=s.split("."),l=s[0],c=s.length>1?"."+s[1]:"",u=/(\d+)(\d{3})/;u.test(l);)l=l.replace(u,"$1,$2");return l+c},email:function(e,t,n,i,a,r){return"<a href='mailto:"+this._formatText(e)+"'>"+this._formatText(e)+"</a>"},link:function(e,t,n,i,a,r){return"<a href='"+this._formatText(e)+"'>"+this._formatText(e)+"</a>"},tick:function(e,t,n,i,a,r){return!0===e||"true"===e||"True"===e||1===e?(n.attr("aria-checked",!0),'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'):(n.attr("aria-checked",!1),"")},tickCross:function(e,t,n,i,a,r){return!0===e||"true"===e||"True"===e||1===e?(n.attr("aria-checked",!0),'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'):(n.attr("aria-checked",!1),'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>')},star:function(e,t,n,i,a,r){var o=r&&r.stars?r.stars:5,s=$("<span style='vertical-align:middle;'></span>");e=parseInt(e)<o?parseInt(e):o;for(var l=$('<svg width="14" height="14" viewBox="0 0 512 512" xml:space="preserve" style="margin:0 1px;"><polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>'),c=$('<svg width="14" height="14" viewBox="0 0 512 512" xml:space="preserve" style="margin:0 1px;"><polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>'),u=1;u<=o;u++){var h=u<=e?l:c;s.append(h.clone())}return n.css({"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),n.attr("aria-label",this._formatText(e)),s.html()},progress:function(e,t,n,i,a,r){var o=r&&r.max?r.max:100,s=r&&r.min?r.min:0,l=r&&r.color?r.color:"#2DC214";e=parseFloat(e)<=o?parseFloat(e):o,e=parseFloat(e)>=s?parseFloat(e):s;var c=(o-s)/100;return e=100-Math.round((e-s)/c),n.css({"min-width":"30px",position:"relative"}),n.attr("aria-label",e),"<div style='position:absolute; top:8px; bottom:8px; left:4px; right:"+e+"%; margin-right:4px; background-color:"+l+"; display:inline-block;' data-max='"+o+"' data-min='"+s+"'></div>"},color:function(e,t,n,i,a,r){return n.css({"background-color":e}),""},buttonTick:function(e,t,n,i,a,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(e,t,n,i,a,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}},editors:{input:function(e,t,n){var i=$("<input type='text'/>");return i.css({padding:"4px",width:"100%","box-sizing":"border-box"}).val(t),e.hasClass("tabulator-cell")&&setTimeout(function(){i.focus()},100),i.on("change blur",function(t){e.trigger("editval",i.val())}),i.on("keydown",function(t){13==t.keyCode&&e.trigger("editval",i.val())}),i},textarea:function(e,t,n){var i=this,a=(t.match(/(?:\r\n|\r|\n)/g)||[]).length+1,r=e.closest(".tabulator-row"),o=$("<textarea></textarea>");return o.css({display:"block",height:"100%",width:"100%",padding:"2px","box-sizing":"border-box","white-space":"pre-wrap",resize:"none"}).val(t),e.hasClass("tabulator-cell")&&setTimeout(function(){o.focus()},100),o.on("change blur",function(t){e.trigger("editval",o.val()),setTimeout(function(){i._resizeRow(r)},300)}),o.on("keyup",function(){var e=$(this).val(),t=(e.match(/(?:\r\n|\r|\n)/g)||[]).length+1;if(t!=a){var n=o.innerHeight()/a;o.css({height:n*t+"px"}),i._resizeRow(r),a=t}}),o},number:function(e,t,n){var i=$("<input type='number'/>");return i.css({padding:"4px",width:"100%","box-sizing":"border-box"}).val(t),e.hasClass("tabulator-cell")&&setTimeout(function(){i.focus()},100),i.on("blur",function(t){e.trigger("editval",i.val())}),i.on("keydown",function(t){13==t.keyCode&&e.trigger("editval",i.val())}),i},star:function(e,t,n){var i=$("svg",e).length;i=i||5;var a=$("svg:first",e).attr("width");a=a||14;var r=$("<div style='vertical-align:middle; padding:4px; display:inline-block; vertical-align:middle;'></div>");t=parseInt(t)<i?parseInt(t):i;for(var o=$('<svg width="'+a+'" height="'+a+'" class="tabulator-star-active" viewBox="0 0 512 512" xml:space="preserve" style="padding:0 1px;"><polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>'),s=$('<svg width="'+a+'" height="'+a+'" class="tabulator-star-inactive" viewBox="0 0 512 512" xml:space="preserve" style="padding:0 1px;"><polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>'),l=1;l<=i;l++){var c=l<=t?o:s;r.append(c.clone())}var u=function(e){$(".tabulator-star-active",e.closest("div")).length!=e.prevAll("svg").length+1&&(e.prevAll("svg").replaceWith(o.clone()),e.nextAll("svg").replaceWith(s.clone()),e.replaceWith(o.clone()))};return r.on("mouseover","svg",function(e){e.stopPropagation(),u($(this))}),r.on("mouseover",function(e){$("svg",$(this)).replaceWith(s.clone())}),r.on("click",function(e){$(this).closest(".tabulator-cell").trigger("editval",0)}),r.on("click","svg",function(t){var n=$(this).prevAll("svg").length+1;e.trigger("editval",n)}),e.css({"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),e.on("blur",function(){$(this).trigger("editcancel")}),e.on("keydown",function(t){switch(t.keyCode){case 39:u($(".tabulator-star-inactive:first",r));break;case 37:var n=$(".tabulator-star-active:last",r).prev("svg");n.length?u(n):$("svg",r).replaceWith(s.clone());break;case 13:e.trigger("editval",$(".tabulator-star-active",r).length)}}),r},progress:function(e,t,n){var i=$("div",e).data("max"),a=$("div",e).data("min");t=parseFloat(t)<=i?parseFloat(t):i,t=parseFloat(t)>=a?parseFloat(t):a;var r=(i-a)/100;t=100-Math.round((t-a)/r),e.css({padding:"0 4px"}),e.attr("aria-valuemin",a).attr("aria-valuemax",i);var o=function(){var n=r*Math.round(s.outerWidth()/(e.width()/100))+a;e.trigger("editval",n),e.attr("aria-valuenow",n).attr("aria-label",t)},s=$("<div style='position:absolute; top:8px; bottom:8px; left:4px; right:"+t+"%; margin-right:4px; background-color:#488CE9; display:inline-block; max-width:100%; min-width:0%;' data-max='"+i+"' data-min='"+a+"'></div>"),l=$("<div class='tabulator-progress-handle' style='position:absolute; right:0; top:0; bottom:0; width:5px;'></div>");return s.append(l),l.on("mousedown",function(e){s.data("mouseDrag",e.screenX),s.data("mouseDragWidth",s.outerWidth())}),l.on("mouseover",function(){$(this).css({cursor:"ew-resize"})}),e.on("mousemove",function(e){s.data("mouseDrag")&&s.css({width:s.data("mouseDragWidth")+(e.screenX-s.data("mouseDrag"))})}),e.on("mouseup",function(e){s.data("mouseDrag")&&(e.stopPropagation(),e.stopImmediatePropagation(),s.data("mouseDragOut",!0),s.data("mouseDrag",!1),s.data("mouseDragWidth",!1),o())}),e.on("keydown",function(t){switch(t.keyCode){case 39:s.css({width:s.width()+e.width()/100});break;case 37:s.css({width:s.width()-e.width()/100});break;case 13:o()}}),e.on("blur",function(){$(this).trigger("editcancel")}),s},tickCross:function(e,t,n){var i=$("<input type='checkbox'/>");return i.css({"margin-top":"5px","box-sizing":"border-box"}).val(t),e.hasClass("tabulator-cell")&&setTimeout(function(){i.focus()},100),!0===t||"true"===t||"True"===t||1===t?i.prop("checked",!0):i.prop("checked",!1),i.on("change blur",function(t){e.trigger("editval",i.is(":checked"))}),i.on("keydown",function(t){13==t.keyCode&&e.trigger("editval",i.is(":checked"))}),i},tick:function(e,t,n){var i=$("<input type='checkbox'/>");return i.css({"margin-top":"5px","box-sizing":"border-box"}).val(t),e.hasClass("tabulator-cell")&&setTimeout(function(){i.focus()},100),!0===t||"true"===t||"True"===t||1===t?i.prop("checked",!0):i.prop("checked",!1),i.on("change blur",function(t){e.trigger("editval",i.is(":checked"))}),i.on("keydown",function(t){13==t.keyCode&&e.trigger("editval",i.is(":checked"))}),i}},mutators:{},accessors:{},_destroy:function(){var e=this,t=e.element;t.empty(),t.removeClass("tabulator")}})}(),function(e){"use strict";function t(t,n){this.isInit=!0,this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(n),this.isInit=!1}function n(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(e){return e[n]}}}function i(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(){return n}}}function a(e){return e?l.text(e).html():""}function r(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}function o(t,n){var i=!1;return e.each(n,function(e,n){if("number"==typeof n&&t.which===n)return i=!0,!1;if(t.which===n.which){var a=!n.hasOwnProperty("altKey")||t.altKey===n.altKey,r=!n.hasOwnProperty("shiftKey")||t.shiftKey===n.shiftKey,o=!n.hasOwnProperty("ctrlKey")||t.ctrlKey===n.ctrlKey;if(a&&r&&o)return i=!0,!1}}),i}var s={tagClass:function(e){return"label label-info"},focusClass:"focus",itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},itemTitle:function(e){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0};t.prototype={constructor:t,add:function(t,n,i){var r=this;if(!(r.options.maxTags&&r.itemsArray.length>=r.options.maxTags)&&(!1===t||t)){if("string"==typeof t&&r.options.trimValue&&(t=e.trim(t)),"object"==typeof t&&!r.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(r.isSelect&&!r.multiple&&r.itemsArray.length>0&&r.remove(r.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var o=r.options.delimiterRegex?r.options.delimiterRegex:r.options.delimiter,s=t.split(o);if(s.length>1){for(var l=0;l<s.length;l++)this.add(s[l],!0);return void(n||r.pushVal(r.options.triggerChange))}}var c=r.options.itemValue(t),u=r.options.itemText(t),h=r.options.tagClass(t),d=r.options.itemTitle(t),f=e.grep(r.itemsArray,function(e){return r.options.itemValue(e)===c})[0];if(!f||r.options.allowDuplicates){if(!(r.items().toString().length+t.length+1>r.options.maxInputLength)){var p=e.Event("beforeItemAdd",{item:t,cancel:!1,options:i});if(r.$element.trigger(p),!p.cancel){r.itemsArray.push(t);var m=e('<span class="tag '+a(h)+(null!==d?'" title="'+d:"")+'">'+a(u)+'<span data-role="remove"></span></span>');m.data("item",t),r.findInputWrapper().before(m),m.after(" ");var g=e('option[value="'+encodeURIComponent(c)+'"]',r.$element).length||e('option[value="'+a(c)+'"]',r.$element).length;if(r.isSelect&&!g){var v=e("<option selected>"+a(u)+"</option>");v.data("item",t),v.attr("value",c),r.$element.append(v)}n||r.pushVal(r.options.triggerChange),r.options.maxTags!==r.itemsArray.length&&r.items().toString().length!==r.options.maxInputLength||r.$container.addClass("bootstrap-tagsinput-max"),e(".typeahead, .twitter-typeahead",r.$container).length&&r.$input.typeahead("val",""),this.isInit?r.$element.trigger(e.Event("itemAddedOnInit",{item:t,options:i})):r.$element.trigger(e.Event("itemAdded",{item:t,options:i}))}}}else if(r.options.onTagExists){var b=e(".tag",r.$container).filter(function(){return e(this).data("item")===f});r.options.onTagExists(t,b)}}}},remove:function(t,n,i){var a=this;if(a.objectItems&&(t="object"==typeof t?e.grep(a.itemsArray,function(e){return a.options.itemValue(e)==a.options.itemValue(t)}):e.grep(a.itemsArray,function(e){return a.options.itemValue(e)==t}),t=t[t.length-1]),t){var r=e.Event("beforeItemRemove",{item:t,cancel:!1,options:i});if(a.$element.trigger(r),r.cancel)return;e(".tag",a.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",a.$element).filter(function(){return e(this).data("item")===t}).remove(),-1!==e.inArray(t,a.itemsArray)&&a.itemsArray.splice(e.inArray(t,a.itemsArray),1)}n||a.pushVal(a.options.triggerChange),a.options.maxTags>a.itemsArray.length&&a.$container.removeClass("bootstrap-tagsinput-max"),a.$element.trigger(e.Event("itemRemoved",{item:t,options:i}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal(t.options.triggerChange)},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var n=e(this),i=n.data("item"),r=t.options.itemValue(i),o=t.options.itemText(i),s=t.options.tagClass(i);if(n.attr("class",null),n.addClass("tag "+a(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=a(o),t.isSelect){e("option",t.$element).filter(function(){return e(this).data("item")===i}).attr("value",r)}})},items:function(){return this.itemsArray},pushVal:function(){var t=this,n=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(n,!0),t.options.triggerChange&&t.$element.trigger("change")},build:function(t){var a=this;if(a.options=e.extend({},s,t),a.objectItems&&(a.options.freeInput=!1),n(a.options,"itemValue"),n(a.options,"itemText"),i(a.options,"tagClass"),a.options.typeahead){var l=a.options.typeahead||{};i(l,"source"),a.$input.typeahead(e.extend({},l,{source:function(t,n){function i(e){for(var t=[],i=0;i<e.length;i++){var o=a.options.itemText(e[i]);r[o]=e[i],t.push(o)}n(t)}this.map={};var r=this.map,o=l.source(t);e.isFunction(o.success)?o.success(i):e.isFunction(o.then)?o.then(i):e.when(o).then(i)},updater:function(e){return a.add(this.map[e]),this.map[e]},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(a.options.typeaheadjs){var c=null,u={},h=a.options.typeaheadjs;e.isArray(h)?(c=h[0],u=h[1]):u=h,a.$input.typeahead(c,u).on("typeahead:selected",e.proxy(function(e,t){u.valueKey?a.add(t[u.valueKey]):a.add(t),a.$input.typeahead("val","")},a))}a.$container.on("click",e.proxy(function(e){a.$element.attr("disabled")||a.$input.removeAttr("disabled"),a.$input.focus()},a)),a.options.addOnBlur&&a.options.freeInput&&a.$input.on("focusout",e.proxy(function(t){0===e(".typeahead, .twitter-typeahead",a.$container).length&&(a.add(a.$input.val()),a.$input.val(""))},a)),a.$container.on({focusin:function(){a.$container.addClass(a.options.focusClass)},focusout:function(){a.$container.removeClass(a.options.focusClass)}}),a.$container.on("keydown","input",e.proxy(function(t){var n=e(t.target),i=a.findInputWrapper();if(a.$element.attr("disabled"))return void a.$input.attr("disabled","disabled");switch(t.which){case 8:if(0===r(n[0])){var o=i.prev();o.length&&a.remove(o.data("item"))}break;case 46:if(0===r(n[0])){var s=i.next();s.length&&a.remove(s.data("item"))}break;case 37:var l=i.prev();0===n.val().length&&l[0]&&(l.before(i),n.focus());break;case 39:var c=i.next();0===n.val().length&&c[0]&&(c.after(i),n.focus())}var u=n.val().length;Math.ceil(u/5);n.attr("size",Math.max(this.inputSize,n.val().length))},a)),a.$container.on("keypress","input",e.proxy(function(t){var n=e(t.target);if(a.$element.attr("disabled"))return void a.$input.attr("disabled","disabled");var i=n.val(),r=a.options.maxChars&&i.length>=a.options.maxChars;a.options.freeInput&&(o(t,a.options.confirmKeys)||r)&&(0!==i.length&&(a.add(r?i.substr(0,a.options.maxChars):i),n.val("")),!1===a.options.cancelConfirmKeysOnEmpty&&t.preventDefault());var s=n.val().length;Math.ceil(s/5);n.attr("size",Math.max(this.inputSize,n.val().length))},a)),a.$container.on("click","[data-role=remove]",e.proxy(function(t){a.$element.attr("disabled")||a.remove(e(t.target).closest(".tag").data("item"))},a)),a.options.itemValue===s.itemValue&&("INPUT"===a.$element[0].tagName?a.add(a.$element.val()):e("option",a.$element).each(function(){a.add(e(this).attr("value"),!0)}))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],n=this.$container[0];t&&t.parentNode!==n;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(n,i,a){var r=[];return this.each(function(){var o=e(this).data("tagsinput");if(o)if(n||i){if(void 0!==o[n]){if(3===o[n].length&&void 0!==a)var s=o[n](i,null,a);else var s=o[n](i);void 0!==s&&r.push(s)}}else r.push(o);else o=new t(this,n),e(this).data("tagsinput",o),r.push(o),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())}),"string"==typeof n?r.length>1?r:r[0]:r},e.fn.tagsinput.Constructor=t;var l=e("<div />");e(function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.sanitizer(this.updater(e))).change(),txt.trigger("keyup"),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sanitizer:function(t){return e("<div>").text(t).html()},sorter:function(e){for(var t,n=[],i=[],a=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):a.push(t):n.push(t);return n.concat(i,a)},highlighter:function(e){return this.sanitizer(e)},render:function(t){var n=this;return t=e(t).map(function(t,i){return t=e(n.options.item).attr("data-value",n.sanitizer(i)),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),i=n.next();i.length||(i=e(this.$menu.find("li")[0])),i.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var i=e(this),a=i.data("typeahead"),r="object"==typeof n&&n;a||i.data("typeahead",a=new t(this,r)),"string"==typeof n&&a[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);n.data("typeahead")||n.typeahead(n.data())})}(window.jQuery),function(e){e.fn.extend({mention:function(t){this.opts={shortcuts:[],delimiter:"/",sensitive:!0,emptyQuery:!1,queryBy:["name","shortcut"],typeaheadOpts:{}};var n=e.extend({},this.opts,t),i=function(){if(void 0===e)throw new Error("jQuery is Required");if(void 0===e.fn.typeahead)throw new Error("Typeahead is Required");return!0},a=function(e,t){var i;for(i=t;i>=0&&e[i]!=n.delimiter;i--);return e.substring(i,t)},r=function(e){var t;if(n.emptyQuery){var i=this.query.toLowerCase(),r=this.$element[0].selectionStart;if(i.slice(r-1,r)==n.delimiter)return!0}for(t in n.queryBy)if(e[n.queryBy[t]]){var o,s=e[n.queryBy[t]].toLowerCase(),r=this.$element[0].selectionStart,l=this.query.toLowerCase(),c=new RegExp("^"+n.delimiter+"\\w+$","g"),u=a(l,r).match(c);if(u)for(o=0;o<u.length;o++){var h=u[o].substring(1).toLowerCase(),d=new RegExp(n.delimiter+s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),"g");this.query.toLowerCase().match(d);if(-1!=s.indexOf(h))return!0}}},o=function(e){var t,i=this.query,a=this.$element[0].selectionStart;for(t=a;t>=0&&i[t]!=n.delimiter;t--);var r=(i.substring(t,a),i.substring(0,t)),o=i.substring(a),i=r+e+o;return this.tempQuery=i,i},s=function(e){if(e.length&&n.sensitive){var t,i=a(this.query,this.$element[0].selectionStart).substring(1),r=e.length,o={highest:[],high:[],med:[],low:[]},s=[];if(1==i.length){for(t=0;t<r;t++){var l=e[t];l.shortcut[0]==i?o.highest.push(l):l.shortcut[0].toLowerCase()==i.toLowerCase()?o.high.push(l):-1!=l.shortcut.indexOf(i)?o.med.push(l):o.low.push(l)}for(t in o){var c;for(c in o[t])s.push(o[t][c])}return s}}return e},l=function(t){var i=this;return t=e(t).map(function(t,a){t=e(i.options.item).attr("data-value",i.sanitizer(a.name));var r=e("<div />");a.image&&r.append('<img class="mention_image" src="'+i.sanitizer(a.image)+'">'),a.name&&r.append('<b class="mention_name">'+i.sanitizer(a.name)+"</b>"),a.shortcut&&r.append('<span class="mention_username"> '+n.delimiter+i.sanitizer(a.shortcut)+"</span>");var o=r.find("b").html(i.highlighter(r.find("b").text())),s=r.find("span").html(i.highlighter(r.find("span").text()));return t.find("a").empty(),t.find("a").append(o,s),t[0]}),t.first().addClass("active"),this.$menu.html(t),this};return e.fn.typeahead.Constructor.prototype.render=l,this.each(function(){var t=e(this);i()&&t.typeahead(e.extend({source:n.shortcuts,matcher:r,updater:o,sorter:s},n.typeaheadOpts))})}})}(jQuery)
;var onboardingTutorialStorageKey="helloumi-onboarding",txt=$("#js-typearea"),hiddenDiv=$(document.createElement("div")),content=null,$mainContainerFluid=$(".container-fluid.wz-container-height"),colSiderightClient=$(".wz-sideright-client"),colSiderightOrder=$(".wz-sideright-order"),colSiderightSamurai=$(".wz-sideright-samurai"),colSiderightPayment=$(".wz-sideright-payment"),$colSideright=$("#wz-col-sideright"),$colCentral=$(".wz-col-height.wz-col-central"),phoneInput=$(".js-customer-input"),richText,$emojiBtn=$("#emoji-btn"),finder=$("#wz-finder"),inputFinder=$("#wz-finder input"),openF=$(".js-open-wz-finder"),closeF=$(".js-close-wz-finder"),finder2=$("#wz-sl2-finder"),inputFinder2=$("#wz-sl2-finder input"),openF2=$(".js-open-wz-sl2-finder"),closeF2=$(".js-close-wz-sl2-finder"),$topBar=$(".wz-topbar"),$topBarOption=$(".js-topbar-option"),$topBarModals=$("#wz-modal-clients, #wz-modal-reports, #wz-modal-bots-contact, #wz-modal-ronin-manager"),$topBarChats=$(".js-topbar-chats"),$topBarSettings=$(".js-topbar-settings"),$topBarRoninManager=$(".js-topbar-ronin-manager"),audio=document.getElementById("wz-notification-audio"),notificationsList=$(".js-notifications-list"),notificationTemplate=$(".js-loadtemplate-notification"),iconBell=$(".icon-bell.js-bell");audio&&(audio.volume=.2);var defNotificationTimer=2e3,longNotificationTimer=4e3,formatInfoTimeout,formatInfoTime=5e3,submitImg=$("#wz-modal-upload-image .js-submit-image"),resetImg=$("#wz-modal-upload-image .js-reset-image"),sendForm=$("#send_form"),modalImg=$("#wz-modal-upload-image"),fileUploadLimit=5,txtImage=$(".js-image-caption-text"),modalFormImageUpload=$(".js-form-image-upload"),inputImageFlags=$(".js-image-flags"),$modalFullImage=$("#wz-modal-full-image"),formLatitude=$("#wz-modal-send-location #location-lat"),formLongitude=$("#wz-modal-send-location #location-lng"),inputLatitude=$(".js-input-latitude"),inputLongitude=$(".js-input-longitude"),submitLocation=$("#wz-modal-send-location #js-submit-location"),resetLocation=$("#wz-modal-send-location #js-reset-location"),txtLocation=$("#wz-modal-send-location .js-location-caption-text"),modalLocation=$("#wz-modal-send-location"),orderSelect=$(".js-orders-select"),showOrderList=$(".js-show-orders-list"),ordersList=$("#wz-modal-orders"),modalAddOrder=$("#wz-modal-add-order"),modalOrder=$("#wz-modal-order"),orderTemplate=$(".js-loadtemplate-order"),ordersAssignationSelect=$(".js-orders-assignation-select"),tabOrders=$(".js-tab-orders"),ordersStatusSelect=$(".js-status-order-select"),selectStatus=$(".js-select-status"),TICKET_DESCRIPTION_LIMIT=3e3,TICKET_TITLE_LIMIT=100,TICKET_TAG_LIMIT=25,modalAddShortcut=$("#wz-modal-add-shortcut"),modalShortcuts=$("#wz-modal-shortcuts"),shorcutBtnContainer=$("#send_form .upper .shortcuts"),$sideLeft1=$(".wz-col-sideleft-1"),$addChannel=$(".js-add-channel"),$addAgent=$(".js-add-agent"),$channelTemplate=$(".js-loadtemplate-channel"),chatList=$(".js-list-chat"),chatsSelect=$(".js-chats-select"),chatsStatusSelect=$(".js-status-user-select"),tabChats=$(".js-tab-chats"),selectClient=$(".js-select-client"),selectOrder=$(".js-select-order"),viewCurrentOrder=$(".js-view-current"),archiveCurrent=$(".js-archive-current"),archiveCurrentOption=$(".js-archive-current ul li"),openCurrent=$(".js-open-current"),sendStatus=$("#send_form .status"),checkNote=$("#js-button-checknote"),publishNote=$("#js-publish-note"),$messageTemplate=$(".js-loadtemplate-message"),$messageTemplateImage=$(".js-loadtemplate-messageImage"),$messageTemplateMultipleImages=$(".js-loadtemplate-messageMultipleImages"),$messageTemplateAudio=$(".js-loadtemplate-messageAudio"),$messageTemplateDocument=$(".js-loadtemplate-messageFile"),$messageTemplateVideo=$(".js-loadtemplate-messageVideo"),$messageTemplateLocation=$(".js-loadtemplate-messageLocation"),$messageTemplateEmail=$(".js-loadtemplate-messageEmail"),$messageTemplateFullImage=$(".js-loadtemplate-messageFullImage"),$messageTemplateNote=$(".js-loadtemplate-note"),$messageTemplateHidden=$(".js-loadtemplate-hidden"),$messageTemplateUmi=$(".js-loadtemplate-messageUmi"),$messageTemplateDialog=$(".js-loadtemplate-dialog"),$messageTemplateTrash=$(".js-loadtemplate-trash"),inputImage=$("#id_images"),inputAudio=$("#js-input-audio"),buttonSendimage=$("#js-button-sendimage"),buttonSendimageA=$("#js-button-sendimage a"),buttonSendaudio=$("#js-button-sendaudio"),buttonSendlocation=$("#js-button-sendlocation"),limitMessages=20,fillerMessageList=$(".js-filler-chat"),limitTimestampSameGroup=120,messageListContainer=$(".wz-col-central section.main section"),olderMessagesLoader=$(".js-see-older-chats"),$deleteMessageDropdown=$(".js-loadtemplate-delconfirm"),modalAddAlert=$("#wz-modal-add-alert"),notificationAlert=$("#wz-notification-alert"),disconnectionTemplate=$(".js-loadtemplate-disconnection"),paymentsettingslv1Template=$(".js-loadtemplate-payment-settings-lv1"),modalAddNote=$("#wz-modal-add-note"),emptyCol02=$(".wz-col-sideleft-2 .empty-state"),searchContactContainer=$(".wz-col-sideleft-2 .wz-sideleft2-search"),closeContact=$(".wz-col-sideleft-2  .js-close-wz-column"),openContact=$(".wz-col-central  li.visible-xs-2 .js-open-wz-column"),contactList=$(".js-list-contacts"),contactListContainer=$(".wz-col-sideleft-2 section section"),listContactsLi=$(".js-list-contacts li"),olderContactsLoader=$(".js-see-older-contacts"),fillerContactList=$(".js-filler-contact"),limitContacts=20,contactTemplate=$(".js-loadtemplate-contact"),$currentOrderTmpl=$(".js-loadtemplate-currentorder"),$currentOrderNoneTmpl=$(".js-loadtemplate-currentorder-none"),modalEditUser=$("#wz-modal-edit-user"),$assignTemplate=$(".js-loadtemplate-assign"),modalSendEmail=$("#wz-modal-send-email"),limitPages=500,ACTIVATION_TIME=3e4,preloaderLimit=2e4,editAutoresponseModal=$("#wz-modal-edit-response"),customersModal=$("#wz-modal-clients"),reportsModal=$("#wz-modal-reports"),ADVANCED_FILTER_LIMIT=12,ROWS_PER_PAGE=20,accountLockedModal=$("#wz-modal-account-locked"),$notificationModal=$("#wz-modal-notification"),$notificationModalIcon=$("#wz-modal-notification .js-modalnot-icon"),$notificationModalTitle=$("#wz-modal-notification .js-modalnot-title"),$notificationModalMessage=$("#wz-modal-notification .js-modalnot-message"),$notificationModalButtons=$("#wz-modal-notification .js-modalnot-buttons"),$notificationModalSection=$("#wz-modal-notification section"),$notificationModalCloseIcon=$("#wz-modal-notification header button"),$notificationModalFooter=$("#wz-modal-notification footer"),$notificationModalHeaderText=$("#wz-modal-notification header>span"),$notificationModalSeparator=$("#wz-modal-notification .wz-separator"),welcomeModal=$("#wz-modal-welcome"),laWelcomeModal=$("#wz-modal-la-welcome"),settingsModal=$("#wz-modal-clients"),settingsUser=$("#user-settings"),settingsBrand=$("#company-settings"),settingsChannels=$("#channel-settings"),settingsSamurais=$("#agent-settings"),settingsPayments=$("#payment-settings"),settingsSuscription=$("#suscription-settings"),settingsSlack=$("#slack-settings"),roninManagerModal=$("#wz-modal-ronin-manager"),$blockTemplateMenuLight,$blockTemplateMenuHeavy,$blockTemplateSubmenu,$blockTemplateTextarea,$blockTemplateOptions,BOT_TITLE_LIMIT=100,$sideleft1Scroll=$("#sideleft1-scroll"),$sideleft2Scroll=$("#sideleft2-scroll"),$centralScroll=$("#central-scroll"),siderightScrollSelector="#wz-col-sideright .js-perfect-scroll",$siderightScroll=$(siderightScrollSelector),AVATAR_COLOR=["avatar-yellow","avatar-red","avatar-violet","avatar-green","avatar-light-violet"];CONTACTS={},MESSAGES={},COUNTERS={channels:{},agents:{},pending_unread:{},channels_unread:{},attention_unread:{}},FIREBASE_APP=null,settingsChRedirect=!1,tutorialActive=!1,settingsModalOpen=!1,lastChatView="pending",chatView="pending",chatViewSamurai=!1,chatViewChannel=!1,numContactLoaded=0,currentChat=!1,currentChatRef=!1,currentOrder=!1,currentSamurai=!1,viewProfile="client",viewClientOption="info",viewOrderSelected=!1,viewPaymentSelected=!1,viewSamuraiSelected=!1,viewSamuraiOption="activity",closeEvent=!0,recordingAudio=!1,settingsView="info",timeoutActivation=!1,reportManager=!1,dashboardManager=!1,lastMessageScroll=0,howManyMessages=0,lastMessageToScroll=!1,timeoutUiAutoLoadMessages=!1,timeoutUiAutoScrollMessages=!1,intervalUiAutoScrollMessages=!1,firstMessageToScroll=!1,shortcutsFocused=!1,typeareaFocused=!1,imgSendFlags=[],preloaderEnded=!1,currentLimitContacts=limitContacts,timeoutUiAutoLoadContacts=!1,contactStatusView="all",lastContactScroll=0,onlineStatus="online",currentRetry=0,remainingReconnectingTime=-1,reconnecting=!1;var huEmojiPicker;$(".wz-button-check").click(function(){$(this).toggleClass("js-checked")}),$("#js-typearea").focus(function(){typeareaFocused=!0,void 0!==CONTACTS[currentChat]&&(CONTACTS[currentChat].isArchived()||CONTACTS[currentChat].getAgent()&&CONTACTS[currentChat].getAgent()!=myID||$(".shortcuts").addClass("js-focused"))}),$("#js-typearea").blur(function(){typeareaFocused=!1,shortcutsFocused||$(".shortcuts").removeClass("js-focused")}),$(".shortcuts").mouseover(function(){shortcutsFocused=!0,void 0!==CONTACTS[currentChat]&&(CONTACTS[currentChat].isArchived()||CONTACTS[currentChat].getAgent()&&CONTACTS[currentChat].getAgent()!=myID||$(".shortcuts").addClass("js-focused"))}),$(".shortcuts").mouseout(function(){shortcutsFocused=!1,typeareaFocused||$(this).removeClass("js-focused")});var notificationArray=[];NotificationPlugin=function(e,t,n,i,a,r){this.title=e||"",this.message=t||"",this.icon=n||"icon-bell",this.button=i,this.callback=a,this.id="notification-plugin-"+Date.now(),this.elem=$("<div>").attr("id",this.id).attr("class","wz-notification wz-notification-slim closed"),this.countdown=r;var o=$("<div>").addClass("wz-notification-head"),s=$("<i>").addClass("js-notification-icon").addClass(this.icon);o.append(s);var l=$("<div>").addClass("wz-notification-body"),c=$("<h3>").addClass("js-notification-title").text(this.title),u=$("<p>").addClass("js-notification-message").text(this.message);l.append(c,u);var h=$("<div>").addClass("wz-notification-foot");if("string"==typeof this.button){var d=$("<div>").attr("class","btn btn-info").text(this.button);d.click(this.close.bind(this)),h.append(d),l.append(h)}this.elem.append(o,l),this.elem.click(this.close.bind(this)),this.create(),this.show()},NotificationPlugin.prototype.create=function(){notificationArray.push(this),$("body").append(this.elem)},NotificationPlugin.prototype.show=function(){setTimeout(function(){this.elem.removeClass("closed"),"number"==typeof this.countdown&&(this.countdownTimeout=setTimeout(this.close.bind(this),this.countdown)),renderAllNotificationPlugin()}.bind(this),100)},NotificationPlugin.prototype.setMessage=function(e){"string"==typeof e&&(this.message=e,this.elem.find(".js-notification-message").text(e))},NotificationPlugin.prototype.setIcon=function(e){"string"==typeof e&&(this.elem.find(".js-notification-icon").removeClass(this.icon).addClass(e),this.icon=e)},NotificationPlugin.prototype.setCountdown=function(e){"number"==typeof e&&(this.countdown=e,this.show())},NotificationPlugin.prototype.setTitle=function(e){"string"==typeof e&&(this.title=e,this.elem.find(".js-notification-title").text(e))},NotificationPlugin.prototype.close=function(){clearTimeout(this.countdownTimeout),this.elem.addClass("closed"),setTimeout(function(){this.elem.remove(),"function"==typeof this.callback&&this.callback(),deleteNotificationPlugin(this)}.bind(this),400)},window.audioFlag=!1,window.lastNotificationTime=0,playNotification=function(e){var t=Date.now(),n=t-window.lastNotificationTime;if((GROUPS.indexOf("notify_all")>=0||!document.hasFocus())&&!1===window.audioFlag&&n>=5e3){console.log("Notification no focus");var i=function(){window.audioFlag=!1};window.audioFlag=audio.play().then(i,i),notifyMe(e.customer,e.message),window.lastNotificationTime=t}else console.log("Notification focus")},scrollMessages=function(){firstMessageToScroll?(lastMessageToScroll=$(".js-list-chat li.js-chat-message[data-key="+firstMessageToScroll+"]").first(),scrollToFirstMessage()):(listHeight=chatList.height(),messageListContainer.scrollTop(listHeight),$centralScroll.perfectScrollbar("update"))},openF.click(function(){finder.addClass("js-open"),inputFinder.focus(),mixpanelEvents("searchMessages")}),closeF.click(function(){finder.removeClass("js-open"),inputFinder.val("")});var s2f=$(".wz-col-sideleft-2 footer");openF2.click(function(){finder2.addClass("js-open"),s2f.addClass("js-f-open"),inputFinder2.focus()}),closeF2.click(function(){finder2.removeClass("js-open"),s2f.removeClass("js-f-open"),inputFinder2.val("")}),finder2.submit(function(e){e.preventDefault()}),inputFinder2.autocomplete({source:[],minLength:1,select:onClickSearchContact}).autocomplete("instance")._renderItem=function(e,t){return $("<li>").append($("<i class='wz-margin-r-5 icon-"+t.channel+"'>")).append($("<span>").text(t.value)).appendTo(e)},$(function(){$("[data-toggle=popover]").popover({html:!0})}),$("body").on("click",function(e){$('[data-toggle="popover"]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),Preloader=function(e){this.screenElem=document.getElementById(e),this.promisesToBeDone=[],this.functionsToRunAfter=[],this.timeoutLimit=setTimeout(function(){this.close()}.bind(this),preloaderLimit)},Preloader.prototype.config=function(e,t){this.promisesToBeDone=e,this.functionsToRunAfter=t,$.when.apply($,e).then(this.close.bind(this),function(e){"402"==e.status?(console.log("[Preloader] promise ended with error 402, payment required!"),this.close()):(console.log("[Preloader] promise ended with error "+e.status),new NotificationPlugin(trError,trAnErrorOcurred,"icon-cross"))}.bind(this))},Preloader.prototype.close=function(){try{nextPreloader(2),setTimeout(this.destroy.bind(this),1e3)}catch(e){this.destroy()}},Preloader.prototype.destroy=function(){clearInterval(this.timeoutLimit);var e=this.screenElem;e&&e.parentElement&&(e.style.opacity=1,function t(){(e.style.opacity-=.1)<.1?e.parentElement&&e.parentElement.removeChild(e):requestAnimationFrame(t)}());var t=!1;this.functionsToRunAfter&&$.each(this.functionsToRunAfter,function(e,n){t||!1===n()&&(t=!0)}),preloaderEnded=!0};var shortcutsLoaded={},shortcutClicked=function(){var e=$(this).data("key");e||0==e?(txt.val(txt.val()+shortcutsLoaded[e].name),txt.focus(),mixpanelEvents("clickShortcut")):(0==Object.keys(shortcutsLoaded).length?(daisho.getShortcutForm(""),modalAddShortcut.modal("show")):modalShortcuts.modal("show"),mixpanelEvents("openShortcuts"))},loadShortcutsButtons=function(e){shortcutsLoaded={};var t=Object.keys(e),n=function(t,n){return e[t].shortcut.toUpperCase()<e[n].shortcut.toUpperCase()?-1:e[t].shortcut.toUpperCase()>e[n].shortcut.toUpperCase()?1:0};t.sort(n),shorcutBtnContainer.empty();for(var i=0;i<5&&i<t.length;i++){var a=t[i],r=$('<div class="btn"  data-key="'+a+'">'),o=$("<span>").text("/"+e[a].shortcut);shortcutsLoaded[a]=e[a],r.append(o),r.click(shortcutClicked),shorcutBtnContainer.append(r)}var r=$('<div class="btn more">'),s=t.length>0?trAddMore:trSetShort,o=$("<span>").text(s);r.append(o),r.click(shortcutClicked),shorcutBtnContainer.append(r)},shortcuts=function(e){setTimeout(function(){var e=$(".js-last-order li.dropdown a.btn").text();sendForm.removeClass(),sendForm.addClass(e)},500),$("#js-typearea").mention({shortcuts:e}),$("#js-typearea").typeahead().data("typeahead").source=e};$("#filterShortcut").keyup(function(e){filter("#shortcuts-table .tabulator-row",$(this).val())}),$(".wz-filter a").click(function(e){e.preventDefault(),$(this).parent().parent().find("a.active").removeClass("active"),$(this).addClass("active")}),$(".list-inline li").click(function(e){e.preventDefault(),$(this).parent().find(".active").removeClass("active"),$(this).addClass("active")}),Contact=function(e){var t=e.id,n=e.name,i=e.avatar,a=e.phone,r=e.status,o=e.channel,s=e.channel_id,l=e.unread,c=e.agent,u=e.archived,h=e.last_message,d=e.register_date,f=e.ronin,p=e.order?new Order({id:e.order,name:e.order_name,status:e.order_status}):{};this.clone=function(){return new Contact(this.getData())},this.getKey=function(){return t},this.getName=function(){return n||a},this.getInitials=function(){return getInitials(n)},this.getAvatar=function(){return i},this.getPhone=function(){return a},this.getStatus=function(){return r||"intro"},this.getChannel=function(){return"number"==typeof s&&CHANNELS[s]?CHANNELS[s]:{id:s,name:trRemoved,type:o,deleted:!0}},this.getRegisterDate=function(){return d},this.getRoninStatus=function(){return f},this.setRoninStatus=function(e){f=e,this.refresh(["button","archive_btn","status","input"])},this.isArchived=function(){return u},this.isUnread=function(){return l},this.getAgent=function(){return c},this.getLast=function(){return h},this.getReceiver=function(){return this.getChannel().id||0},this.getLastOrder=function(){return p}},Contact.prototype.getData=function(){return{id:this.getKey(),name:this.getName(),avatar:this.getAvatar(),phone:this.getPhone(),status:this.getStatus(),channel:this.getChannel().name,channel_id:this.getChannel().id,unread:this.isUnread(),agent:this.getAgent(),archived:this.isArchived(),last_message:this.getLast(),register_date:this.getRegisterDate(),ronin:this.getRoninStatus(),order:this.getLastOrder().id,order_name:this.getLastOrder().name,order_status:this.getLastOrder().status}},Contact.prototype.getChatviews=function(){var e=[!1];return this.isArchived()?e.push("archived"):this.getAgent()?e.push("active"):e.push("pending"),e.push("all"),e},Contact.prototype.isInChatview=function(e,t,n){return!(-1==this.getChatviews().indexOf(e)||t&&this.getAgent()!=t||n&&this.getChannel().id!=n)},Contact.prototype.assignTo=function(e){var t=this;daisho.assignCustomerTo(t.getKey(),e).fail(showDefaultErrorNotification).done(function(){})},Contact.prototype.assignMe=function(){var e=this;daisho.assignCustomer(e.getKey()).fail(showDefaultErrorNotification).done(function(){})},Contact.prototype.unassignMe=function(){var e=this;return daisho.unassignCustomer(e.getKey()).fail(showDefaultErrorNotification).done(function(){})},Contact.prototype.archive=function(){var e=this;daisho.archiveCustomer(e.getKey()).fail(showDefaultErrorNotification).done(function(){firebaseService.deleteOptionMessages(e.getKey()),mixpanelEvents("archiveChat")})},Contact.prototype.unArchive=function(){var e=this;daisho.unarchiveCustomer(e.getKey()).fail(showDefaultErrorNotification).done(function(){var e=$(".js-status-select.selected");if(e.length>0){var t=e.data("status");"2"!=t&&"3"!=t||daisho.createOptionsMessage()}mixpanelEvents("unarchiveChat")})},Contact.prototype.block=function(){$.post(daisho.getURLs().customers.block+this.getKey())},Contact.prototype.delete=function(){$.ajax({url:"/api/v1/customers/"+this.getKey()+"/",type:"DELETE"})},Contact.prototype.getRenderedData=function(){return formatShortDatetime(dateFromTimestamp(this.getLast()))},Contact.prototype.getUnreadClass=function(){return this.isUnread()?"js-unread":""},Contact.prototype.getContactButton=function(){return this.isArchived()?{class:"btn btn-warning",function:"CONTACTS['"+this.getKey()+"'].unArchive();",text:trOpen,filterText:"",filterFunction:""}:this.getRoninStatus()?{class:"btn-chatbot",function:"",text:"",filterText:"",filterFunction:""}:this.getAgent()==myID?{class:"btn btn-info",function:"CONTACTS['"+this.getKey()+"'].unassignMe();",text:trUnassign,filterText:trAssignedInbox,filterFunction:"$('.js-chats-select[data-option=\"active\"]').click();"}:this.getAgent()?{class:"btn btn-primary",function:"",text:SAMURAIS[this.getAgent()].name,filterText:trAssignedInbox,filterFunction:"$('.js-chats-select[data-option=\"active\"]').click();"}:{class:"btn btn-info",function:"CONTACTS['"+this.getKey()+"'].assignMe();",text:trAssign,filterText:trUnassignedInbox,filterFunction:"$('.js-chats-select[data-option=\"pending\"]').click();"}},Contact.prototype.getAvatarDisplay=function(){var e=-1!=this.getAvatar().indexOf("yexir.png"),t=e?"":"hide",n=e?"hide":"";return{div:t+" "+getAvatarColor(this.getKey()),img:n}},Contact.prototype.getAssignButton=function(){return this.isArchived()?{class:"archived",text:trOpenAssign}:this.getRoninStatus()?{class:"assigned",text:"ChatBot"}:this.getAgent()==myID?{class:"assigned",text:trAssignedMe}:this.getAgent()?{class:"assigned",text:SAMURAIS[this.getAgent()].name}:{class:"unassigned",text:trUnassigned}},Contact.prototype.getSelector=function(){return this.getAgent()?"active":this.isArchived()?"archived":"pending"},Contact.prototype.goToContact=function(){var e=contactList.find(".js-contact-"+this.getKey());if(e.length>0){var t=e.position().top+contactListContainer.scrollTop()-$(".wz-col-sideleft-2 header").outerHeight(),n=contactList.outerHeight()-contactListContainer.outerHeight();t>=n&&(t=n-1),lastContactScroll=e.scrollBottom(),contactListContainer.scrollTop(t-1),$sideleft2Scroll.perfectScrollbar("update")}},Contact.prototype.render=function(e){$(".js-list-contacts .js-contact-"+this.getKey()).remove();var t=this.getContactButton(),n=this.getChannel(),i=contactTemplate.tmpl({key:this.getKey(),picture:this.getAvatar(),name:this.getName(),initials:this.getInitials(),date:this.getLast(),render_date:this.getRenderedData(),assigned:this.getAgent(),assigned_function:t.function,assigned_text:t.text,channel_name:n.name,channel_ico:n.type,channel_status:n.deleted?"removed":"",status:this.getStatus(),selector:this.getSelector(),btn_class:t.class,avatar_img:this.getAvatarDisplay().img,avatar_div:this.getAvatarDisplay().div,unread:this.getUnreadClass(),archived:this.isArchived()?"archived":""});if(contactList.append(i.hide().fadeIn(500).css("display","block")),$("#statusDropdown").on("show.bs.dropdown",function(){var e=$("#statusDropdown").find(".dropdown-menu").clone(!0).addClass("js-dropdown-clone").css("display","block");$(".wz-col-central").append(e)}),$("#statusDropdown").on("hide.bs.dropdown",function(){$(".wz-col-central .dropdown-menu.js-dropdown-clone").remove()}),e){$(".js-list-contacts .js-contact-"+this.getKey()).addClass("js-search").trigger("click"),this.goToContact()}return this},Contact.prototype.refresh=function(e){var t=this,n=t.getKey(),i=t.getAvatar(),a=t.getStatus(),r=$(".js-list-contacts .js-contact-"+n);if(r.length>0)if(t.isInChatview(chatView,chatViewSamurai,chatViewChannel))r.find(".wz-assigned-change").removeClass("js-show");else{var o=t.getContactButton();if("archived"==t.getSelector()||"archived"==chatView)r.remove();else if(r.hasClass("active")){var s=r.find(".wz-assigned-change");s.hasClass("js-show")||(s.find("a").text(o.filterText),s.addClass("js-show").data("original-title",o.filterText).attr("onclick",o.filterFunction))}else r.remove();noCustomersViewHandler()}var l={name:function(){$(".js-name-"+n).text(t.getName())},avatar:function(){$(".js-picture-"+n).css("background-image","url("+i+")"),-1==i.indexOf("yexir.png")?($(".js-picture-"+n).removeClass("hide"),$(".js-avatar-"+n).addClass("hide")):($(".js-picture-"+n).addClass("hide"),$(".js-avatar-"+n).removeClass("hide"),$(".js-avatar-"+n+" p").text(t.getInitials()))},icon:function(){var e=r.find(".js-channel-icon");e.length>0&&(removeClassByRegExp(e,/^icon-/),e.addClass("icon-"+t.getChannel().type))},status:function(){r.attr("data-status",a)},selector:function(){r.attr("data-selector",t.getSelector())},button:function(){var e=t.getContactButton(),i=t.getAssignButton();removeClassByRegExp(r.find(".js-status"),/^btn/),r.find(".js-status").addClass(e.class).attr("onclick",e.function).html(e.text),currentChat==n&&setClientInfoBtn("#client-status",i.text,i.class)},channel_name:function(){var e=t.getChannel().name;r.find(".js-channel-name").text(e)},unread:function(){t.isUnread()?r.addClass("js-unread"):r.removeClass("js-unread")},timestamp:function(){r.find(".js-render-date").text(t.getRenderedData()),r.attr("timestamp",t.getLast())},input:function(){var e=".wz-col-central footer .assignation";currentChat==n&&(sendStatus.removeClass("archived assignedToOther channelDeleted"),t.getChannel().deleted?(sendStatus.addClass("channelDeleted"),txt.prop("disabled",!0).prop("placeholder",trChatRemovedChannel),$(e).empty()):t.isArchived()?(sendStatus.addClass("archived"),txt.prop("disabled",!0).prop("placeholder",trChatArchived),$(e).empty()):t.getAgent()&&t.getAgent()!=myID||t.getRoninStatus()?(sendStatus.addClass("assignedToOther"),txt.prop("disabled",!0).prop("placeholder",trChatAssignedToOther),$(e).empty(),$(e).append($assignTemplate.tmpl()),setAssignationListeners(e)):(txt.prop("disabled",!1).prop("placeholder",trTypeMessage),$(e).empty()))},current_order:function(){currentChat==n&&daisho.currentOrder.set(t.getLastOrder())},archive_btn:function(){currentChat==n&&(t.isArchived()?(sendStatus.addClass("archived"),archiveCurrent.addClass("hidden"),openCurrent.removeClass("hidden")):(t.getAgent()&&t.getAgent()!=myID||t.getRoninStatus()?sendStatus.addClass("assignedToOther"):sendStatus.removeClass("assignedToOther"),sendStatus.removeClass("archived"),openCurrent.addClass("hidden"),archiveCurrent.removeClass("hidden")))}};e&&e.length>0?$.each(Object.keys(l),function(t,n){e.indexOf(n)>-1&&l[n]()}):$.each(Object.keys(l),function(e,t){l[t]()})},Message=function(e){function t(){var e="frontendEmail"===q?$messageTemplateEmail:$messageTemplate,t=e.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,message:D,readed:m().class,readed_ico:m().icon,samurai:p(),subject:K,avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()});if("umichat"==CONTACTS[currentChat].getChannel().type&&"string"==typeof D){var n=t[0].querySelector(".js-chat-message-text");richText.transform(n,D)}return t}function n(){return $messageTemplateFullImage.tmpl({url:j,message:D})}function i(){var e=$messageTemplateImage.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,url:j,message:D,readed:m().class,readed_ico:m().icon,samurai:p(),avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()});if(e.find("img.wz-chat-image").click(function(){openImageMessage(x,T)}),"umichat"==CONTACTS[currentChat].getChannel().type&&"string"==typeof D){var t=e[0].querySelector(".js-chat-message-text");richText.transform(t,D)}return e}function a(){var e=$messageTemplateMultipleImages.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,urls:H,message:D,readed:m().class,readed_ico:m().icon,samurai:p(),avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()});if(e.find("img.wz-chat-image").click(function(){openImageUrl($(this).attr("src"))}),"umichat"==CONTACTS[currentChat].getChannel().type&&"string"==typeof D){var t=e[0].querySelector(".js-chat-message-text");richText.transform(t,D)}return e}function r(){return $template=$messageTemplateLocation.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,location:P,address:S(),readed:m().class,readed_ico:m().icon,samurai:p(),avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()})}function o(){return $messageTemplateDocument.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,url:j,readed:m().class,readed_ico:m().icon,samurai:p(),file_name:U,size:F,avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()})}function s(){return $messageTemplateVideo.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,url:j,readed:m().class,readed_ico:m().icon,samurai:p(),avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()})}function l(){return $messageTemplateAudio.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,url:j,readed:m().class,readed_ico:m().icon,samurai:p(),avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()})}function c(){var e=$messageTemplateNote.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,message:D,readed:m().class,readed_ico:m().icon,samurai:p(),subject:K,avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()});if("string"==typeof D){var t=e[0].querySelector(".js-chat-message-text");richText.transform(t,D)}return e}function u(){var e=$messageTemplateUmi.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,message:D,samurai:p(),subject:K,template:z}),t=$(".js-messageUmi-"+z).tmpl({data:Y});return e.find(".wz-container").append(t),linkify(strongify(e))}function h(){var e=$messageTemplateDialog.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,message:D,samurai:p(),subject:K,template:"dialog",title:B}),t=e.find(".wz-button-container");if($.each(V,function(e,n){var i=$('<a class="btn btn-pink btn-warning" href="#" onclick="putText(this);">').text(n);t.append(i)}),"umichat"==CONTACTS[currentChat].getChannel().type){var n=e[0].querySelector(".js-chat-message-text");"string"==typeof B&&richText.transform(n,B);for(var i=e[0].querySelectorAll(".wz-button-container a.btn"),a=0;a<i.length;a++)"string"==typeof i[a].textContent&&richText.transform(i[a],i[a].textContent)}return e}function d(){return $messageTemplateHidden.tmpl({key:T,author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,samurai:p()})}function f(){return $messageTemplate.tmpl({key:T,author_picture:w(),author_name:_(),author_key:C(),author_id:k(),date:formatShortTime(dateFromTimestamp(A)),day:M,dayClass:I,timestamp:A,message:j,readed:m().class,readed_ico:m().icon,samurai:p(),avatar_div:b().div,avatar_img:b().img,initials:y(),starred:g()})}function p(){return N||0==N?1:0}function m(){return L||!N||N<0?{class:"wz-checks-2",icon:staticImgURL+"/blue-check.png"}:{class:"wz-checks-1 js-message-check-"+T,icon:staticImgURL+"/gray-check.png"}}function g(){return W?"selected":""}function v(){R.on("child_added",function(e){"readed_at"==e.key&&(messageCheckBox=$(".js-message-check-"+T),messageCheckBox.css("background-image","url("+staticImgURL+"/blue-check.png)"),messageCheckBox.removeClass("wz-checks-1"),messageCheckBox.addClass("wz-checks-2"))})}function b(){var e=w(),t=-1!=e.indexOf("yexir.png")&&!N&&0!=N,n=t?"":"hide",i=t?"hide":"";return{div:n+" "+getAvatarColor(x),img:i}}function y(){return getInitials(_())}function w(){var e=daisho.getMediaUrl()+"avatars/yexir.png";return N||0==N?N>0&&SAMURAIS[N]&&void 0!==SAMURAIS[N].avatar?SAMURAIS[N].avatar:N<0&&BOTS[-1*N]&&void 0!==BOTS[-1*N].avatar?BOTS[-1*N].avatar:e:CONTACTS[x]?CONTACTS[x].getAvatar():e}function _(){return N?N>0&&SAMURAIS[N]?(hideGhostChat(),SAMURAIS[N].name.capitalizeFirstLetter()):BOTS[-1*N]?(hideGhostChat(),BOTS[-1*N].name.capitalizeFirstLetter()):trDeletedAgent:0==N?"Landbot":CONTACTS[x]?CONTACTS[x].getName():""}function k(){return N||0==N?"agent_"+N:CONTACTS[x]?"contact_"+CONTACTS[x].getKey():"unknown_"+Date.now()}function C(){return N||0==N?"agent-"+N:x}function S(){return void 0==O?"":O}var T=e.key,x=currentChat,D=e.val().message,E=(e.val().author,e.val().type),A=e.val().timestamp,M=formatShortDate(dateFromTimestamp(A),!0),I="js-day-"+formatShortDate(dateFromTimestamp(A),!0).replace(/\//g,"-"),N=e.val().samurai,P={latitude:e.val().latitude,longitude:e.val().longitude
},O=e.val().address,j=e.val().url,R=e.ref,L=e.val().readed_at,F=e.val().size,U=e.val().file_name,W=e.val().starred,H=e.val().urls,z=e.val().template,Y=e.val().data,B=e.val().title,V=e.val().buttons,q=e.val().channel_type,K=e.val().subject;e.val().read||void 0!=N&&0!=N||(R.child("read").set(!0),preloaderEnded&&newTicketTutorial(currentChat)),this.getStarred=function(){return W||!1},this.setStarred=function(e){"boolean"==typeof e&&(W=e)},this.renderBefore=function(e){var t=this.getRendered();e.before(t.hide())},this.getRendered=function(e){var p=!1,m=e||E;return p="text"==m?t():"image"==m?i():"multiple_images"==m?a():"image-full"==m?n():"audio"==m?l():"file"==m||"document"==m?o():"video"==m?s():"location"==m?r():"note"==m?c():"bot"==m?u():"menu"==m||"dialog"==m?h():"iframe"==m?f():d(),"Shogun"==role&&p&&p.find(".wz-caption").last().after($messageTemplateTrash.tmpl({key:T})),p},this.render=function(){var e=this.getRendered();e&&("image"!=E&&"location"!=E||e.find("img.js-chat-image").on("load",scrollMessages),"video"==E&&e.find("video.js-chat-video").on("canplay",scrollMessages)),chatList.append(e),L||!N&&0!=N||v()},this.getTimestamp=function(){return A}},Order=function(e){e?(this.id=e.id,this.name=e.name,this.status=e.status):(this.id=null,this.name=null,this.status=null)},Order.prototype.getName=function(){if(this.name){return new RegExp("^#[0-9]+$","g").test(this.name)?"TICKET "+this.name:this.name}return"TICKET #"+this.id},Order.prototype.getStatus=function(){switch(this.status){case 0:return trPending;case 1:return trAttention;case 2:return trCompleted;case 3:return trRejected;default:return!1}},CurrentOrder=function(){this.order=!1,this.container=".js-last-order",this.render()},CurrentOrder.prototype.set=function(e){e instanceof Order?(this.order=e,this.render()):this.clear()},CurrentOrder.prototype.getID=function(){return this.order instanceof Order?this.order.id:null},CurrentOrder.prototype.clear=function(){this.order=!1,this.render()},CurrentOrder.prototype.getRendered=function(){return this.order instanceof Order?$currentOrderTmpl.tmpl({name:this.order.getName(),order:this.order.id,status:this.order.status}):$currentOrderNoneTmpl.tmpl()},CurrentOrder.prototype.render=function(){$(this.container).empty(),$(this.container).append(this.getRendered()),$("#currentOrderMenu").remove(),this.order instanceof Order?viewCurrentOrder.removeClass("hide"):viewCurrentOrder.addClass("hide"),this.setListeners()},CurrentOrder.prototype.setListeners=function(){$(this.container).find(".js-status-select").on("click",function(){daisho.setStatus($(this).data("status")),mixpanelEvents("changeOrderStatusTitle",STATUS[status])}),$(this.container).find("#statusDropdown").on("show.bs.dropdown",function(){console.log("show"),$("#currentOrderMenu").remove();var e=$(this).find(".dropdown-menu").clone(!0).css("display","block").addClass("js-dropdown-clone").attr("id","currentOrderMenu");$(".wz-col-central").append(e)}),$(this.container).find("#statusDropdown").on("hide.bs.dropdown",function(){console.log("hide"),$("#currentOrderMenu").remove()})},$(function(){$.widget("custom.blockpanel",{options:{headerText:!1,items:[],clickCallback:function(e){this.clickHandler(e)}},_create:function(){var e=!1;this.options.items.length>0&&(e=this.options.items);var t={header:this.options.headerText,items:e};this.element.append($(".js-template-ronin-menu-light").tmpl(t)),this.$panel=this.element.find(".wz-block-panel"),this.element.find(".js-selectable").on("click",this.options.clickCallback.bind(this))},_destroy:function(){this.$panel.remove()},_setOption:function(e,t){"status"===e&&this.setStatus(t),this.super(e,t)},_setOptions:function(e){var t=this;$.each(e,function(e,n){t._setOptions(e,n)})},getChecked:function(){return this.element.find(".js-selectable.checked").data("value")},setChecked:function(e){this.element.find(".js-selectable").removeClass("checked"),e.addClass("checked")},clickHandler:function(e){for(var t=e.target;!$(t).hasClass("js-selectable");)t=e.target.parentNode;if($(t).hasClass("checked"))return!1;this.setChecked($(t))}})}),$(function(){$.widget("custom.buttonswitch",{options:{initialStatus:0,inputID:"switch-default",textON:"ON",textOFF:"OFF"},_create:function(){var e=this;this.element.addClass("wz-switch-button"),this.input=$("<input>").attr({type:"checkbox",id:e.options.inputID}).addClass("wz-switch-button-input").appendTo(e.element),this.setStatus(this.options.initialStatus),this.label=$("<label>").attr({for:e.options.inputID}).addClass("wz-switch-button-label").appendTo(e.element),this.inner=$("<span>").addClass("wz-switch-button-inner").appendTo(e.label),this.setInnerText(this.options.textON,this.options.textOFF),this.slider=$("<span>").addClass("wz-switch-button-slider").appendTo(e.label)},_destroy:function(){this.element.removeClass("wz-switch-button"),this.input.remove(),this.label.remove()},_setOption:function(e,t){"status"===e&&this.setStatus(t),this.super(e,t)},_setOptions:function(e){var t=this;$.each(e,function(e,n){t._setOptions(e,n)})},getStatus:function(){return this.input[0].checked},setStatus:function(e){this.input[0].checked=e},setID:function(e){this.options.inputID=e,this.input.attr("id",e)},setInnerText:function(e,t){this.options.textON=e,this.options.textOFF=t,this.inner.attr("data-before",e).attr("data-after",t)},enable:function(){this.input.prop("disabled",!0)},disable:function(){this.input.prop("disabled",!1)}})}),$(function(){$.widget("custom.checkbox",{options:{icon:!1,label:!1,clickCallback:function(){this.clickHandler()}},_create:function(){var e=this;this.element.addClass("wz-checkbox-container").on("click",this.options.clickCallback.bind(this)),this.element.data("icon")&&(this.options.icon=this.element.data("icon")),this.element.data("label")&&(this.options.label=this.element.data("label")),this.wrapper=$("<i>").addClass("icon-none wz-check").appendTo(e.element),this.input=this.element.find('input[type="checkbox"]').appendTo(this.wrapper),this.input[0].checked&&this.wrapper.addClass("active"),this.options.icon&&(this.icon=$("<i>").addClass("wz-check-icon").addClass(this.options.icon).appendTo(e.element)),this.options.label&&(this.label=$("<span>").text(this.options.label).appendTo(e.element))},_destroy:function(){this.element.removeClass("wz-checkbox-container"),this.input.appendTo(this.element),this.icon&&this.icon.remove(),this.label.remove()},_setOption:function(e,t){"status"===e&&this.setStatus(t),this.super(e,t)},_setOptions:function(e){var t=this;$.each(e,function(e,n){t._setOptions(e,n)})},getStatus:function(){return this.input[0].checked},setStatus:function(e){this.input[0].checked=e,this.classUpdate()},classUpdate:function(){this.input[0].checked?this.wrapper.addClass("active"):this.wrapper.removeClass("active")},setID:function(e){this.input.attr("id",e)},setText:function(e){this.options.label=e,this.label.text(e)},clickHandler:function(){this.setStatus(!this.getStatus())}})}),$(function(){$.widget("custom.combobox",{options:{appendToElem:this.element,strict:!0,initialValue:""},_create:function(){this.wrapper=$("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.hide(),this._createAutocomplete(),this._createShowAllButton()},_setOption:function(e,t){"appendToElem"===e&&this._super(e,t)},_createAutocomplete:function(){var e=this.element.children(":selected"),t=e.val()?e.text():"",n=this.options.initialValue,i=this;this.input=$("<input>").appendTo(this.wrapper).val(n||t).attr("title","").addClass("form-control custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source"),appendTo:i.options.appendToElem}).on("click",function(){$(this).autocomplete("search","")}),this.input.autocomplete("instance")._renderItem=function(e,t){var n=$("<li>");return t.image&&n.append($("<span>").addClass(t.image)),n.append($("<span>").text(t.value)),n.appendTo(e),n},this._on(this.input,{autocompleteselect:function(e,t){if(t.item.option.selected=!0,this._trigger("select",e,{item:t.item.option}),t.item.image){var n=$(this.input).parent().parent().find(".image-selected");n.length>0&&(n.prop("class",""),n.addClass("image-selected "+t.item.image)),$(this.input).val(t.item.value),$(this.input).blur()}},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var e=this.input,t=!1;$("<a>").appendTo(this.wrapper).html("<span class='caret'></span>").removeClass("ui-corner-all").addClass("form-control btn btn-default custom-combobox-toggle ui-corner-right").on("mousedown",function(){t=e.autocomplete("widget").is(":visible")}).on("click",function(){e.trigger("focus"),t||e.autocomplete("search","")})},_source:function(e,t){var n=new RegExp($.ui.autocomplete.escapeRegex(e.term),"i");t(this.element.children("option").map(function(){var t=$(this).text(),i=$(this).attr("image");if(this.value&&(!e.term||n.test(t)))return{label:"<b>"+t+"</b>",value:t,image:i||!1,option:this}}))},_removeIfInvalid:function(e,t){if(!t.item){var n=this.input.val(),i=n.toLowerCase(),a=!1;this.element.children("option").each(function(){if($(this).text().toLowerCase()===i)return this.selected=a=!0,!1}),a||!1===this.options.strict||(this.input.val(""),this.element.val(""),this.input.autocomplete("instance").term="")}},_destroy:function(){this.wrapper.remove(),this.element.show()}})}),$(function(){$.widget("custom.timepicker",{variables:{cursorPosition:0},options:{hours:0,minutes:0},_create:function(){var e=this;this.element.addClass("wz-timepicker").val(this.formatTime(this.options.hours,this.options.minutes)).on("click",function(){this.selectionStart>2?(e.selectMinutes(),e.variables.cursorPosition=3):(e.selectHours(),e.variables.cursorPosition=0)}).on("keydown",function(t){var n=t.keyCode||t.which;switch(t.preventDefault(),n){case 39:e.selectMinutes(),e.variables.cursorPosition=3;break;case 37:e.selectHours(),e.variables.cursorPosition=0;break;case 38:e.variables.cursorPosition<3?e.increaseHours():e.increaseMinutes();break;case 40:e.variables.cursorPosition<3?e.decreaseHours():e.decreaseMinutes();break;case 8:e.variables.cursorPosition<3?(e.deleteHours(this),e.variables.cursorPosition=0):(e.deleteMinutes(this),e.variables.cursorPosition=3)}n>=48&&n<=57?e.enterValue(n-48):n>=96&&n<=105&&e.enterValue(n-96)}),this.checkHours(),this.checkMinutes(),this._refresh()},_setOption:function(e,t){"hours"===e?(this._super(e,t),this.checkHours()):"minutes"===e&&(this._super(e,t),this.checkMinutes()),this._refresh()},_setOptions:function(e){var t=this;$.each(e,function(e,n){t._setOption(e,n)})},_refresh:function(){var e=this;this.element.val(e.formatTime())},formatTime:function(){var e=this.options.hours,t=this.options.minutes;return e=e<10?"0"+e:""+e,t=t<10?"0"+t:""+t,e+":"+t},checkHours:function(){this.options.hours>23&&(this.options.hours=23)},checkMinutes:function(){this.options.minutes>59&&(this.options.minutes=59)},increaseHours:function(){var e=this.options.hours;this.options.hours=e<23?e+1:0,this._refresh(),this.selectHours()},decreaseHours:function(){var e=this.options.hours;this.options.hours=e>0?e-1:23,this._refresh(),this.selectHours()},increaseMinutes:function(){var e=this.options.minutes;this.options.minutes=e<59?e+1:0,this._refresh(),this.selectMinutes()},decreaseMinutes:function(){var e=this.options.minutes;this.options.minutes=e>0?e-1:59,this._refresh(),this.selectMinutes()},enterValue:function(e){switch(this.variables.cursorPosition){case 0:this.options.hours=this.options.hours%10+10*e,this.variables.cursorPosition=1,this.checkHours(),this._refresh(),this.selectHours();break;case 1:this.options.hours=10*parseInt(this.options.hours/10)+e,this.variables.cursorPosition=3,this.checkHours(),this._refresh(),this.selectMinutes();break;case 3:this.options.minutes=this.options.minutes%10+10*e,this.variables.cursorPosition=4,this.checkMinutes(),this._refresh(),this.selectMinutes();break;case 4:this.options.minutes=10*parseInt(this.options.minutes/10)+e,this.variables.cursorPosition=3,this.checkMinutes(),this._refresh(),this.selectMinutes()}},deleteHours:function(){this.options.hours=0,this._refresh(),this.selectHours()},deleteMinutes:function(){this.options.minutes=0,this._refresh(),this.selectMinutes()},selectHours:function(){this.element[0].setSelectionRange(0,2)},selectMinutes:function(){this.element[0].setSelectionRange(3,5)},_destroy:function(){this.element.removeClass("wz-timepicker").val("")}})}),DaishoService.prototype.currentOrder=null,DaishoService.prototype.setMainChat=function(e){firebaseService.setMainChat(e),this.currentOrder.set(CONTACTS[e].getLastOrder()),txt.focus(),checkNote.hasClass("js-checked")&&checkNote.click(),loadOldMessages(),closeContact.trigger("click")},DaishoService.prototype.getMediaUrl=function(){return self.mediaURL},DaishoService.prototype.getURLs=function(){return self.urls},DaishoService.prototype.setMediaUrl=function(e){self.mediaURL=e},DaishoService.prototype.reading=!1,DaishoService.prototype.setReaded=function(e){var t=this;if("object"==typeof CONTACTS[e]&&CONTACTS[e].isUnread()&&!1===t.reading)return t.reading=!0,$.post(self.urls.customers.read+e).always(function(){t.reading=!1});var n=new $.Deferred;return n.reject(),n.promise()},DaishoService.prototype.searchContacts=function(e,t){$.post(self.urls.customers.search,{search:e.term},function(e){if(e.customers&&e.customers.length>0)t($.map(e.customers,function(e){return 0==$('#wz-modal-reports  .js-filter-elem[data-key="'+e.id+'"]').length?(e.label=e.name,e):null}));else{var n=[{label:trNoMatchesFound,value:t.term}];t(n)}})},DaishoService.prototype.searchSamurais=function(e,t){var n=[];$.each(SAMURAIS,function(t,i){0==$('#wz-modal-reports  .js-filter-elem[data-key="'+t+'"]').length&&-1!=i.name.toUpperCase().search(e.term.toUpperCase())&&(i.label=i.name,i.id=parseInt(t),n.push(i))}),t(n.length>0?n:[{label:trNoMatchesFound,value:t.term}])},DaishoService.prototype.loadContacts=function(e,t,n,i,a){var r={};return(e||0===e)&&(r.first=e),t&&(r.quantity=t),n&&(r.status=n),i&&(r.agent_id=i),a&&(r.channel_id=a),$.post(self.urls.customers.list,r,function(e){if(e.customers&&e.customers.length>0){numContactLoaded=e.customers.length,$.each(e.customers,function(e,t){NProgress.inc(),CONTACTS[t.id]=new Contact(t),CONTACTS[t.id].render(),CONTACTS[t.id].refresh(["button","name","avatar"])}),NProgress.inc(),sortContacts();var t=$(".js-list-contacts .js-contact-"+currentChat);t.length>0&&t.addClass("active")}tooltips(".wz-col-sideleft-2"),$("#sideleft2-scroll").perfectScrollbar("update"),noCustomersViewHandler()})},DaishoService.prototype.saveContact=function(e){$.post(self.urls.customers.new,{customer:e})},DaishoService.prototype.deleteContact=function(e){var t=e||CONTACTS[currentChat].getKey();return $.post(self.urls.customers.delete+t+"/",function(e){})},DaishoService.prototype.setContactPicture=function(e){$.post(self.urls.customers.get_picture+"/"+e)},DaishoService.prototype.getCustomerProfile=function(e){if(e==currentChat)return $.post(createURL(self.urls.customers.profile,e),function(e){e.page&&colSiderightClient.html(e.page)})},DaishoService.prototype.getOrderProfile=function(e,t,n){if(e||0===e)return $.post(self.urls.katana.orders.profile+"/"+e,function(e){e.page&&(n||colSiderightOrder.html(e.page),t&&$.each(t,function(e,t){t()}))});console.log("getOrderProfile: no order_id received");var i=new $.Deferred;return i.reject(),i.promise()},DaishoService.prototype.getSamuraiProfile=function(e,t){if(e||0===e)return $.post(self.urls.samurais.profile+"/"+e,function(e){e.page&&(colSiderightSamurai.html(e.page),t&&$.each(t,function(e,t){t()}))});console.log("getSamuraiProfile: no agent_id received");var n=new $.Deferred;return n.reject(),n.promise()},DaishoService.prototype.getPaymentProfile=function(e,t){if(void 0!=e)return $.post(self.urls.payments.view+e+"/",function(e){e.page&&(colSiderightPayment.html(e.page),t&&$.each(t,function(e,t){t()}))});console.log("getPaymentProfile: no payment_id received");var n=new $.Deferred;return n.reject(),n.promise()},DaishoService.prototype.getOrderForm=function(e){!e&&0!==e||void 0===CONTACTS[currentChat]?new NotificationPlugin(trSelectChat,trSelectChatTicket,"icon-lock",null,null,defNotificationTimer):($.post(self.urls.katana.orders.new+"/"+e+"/"+CONTACTS[currentChat].getReceiver(),function(e){e.page&&modalAddOrder.html(e.page)}),$("#wz-modal-add-order").addClass("js-hide-optionals"))},DaishoService.prototype.getShortcutForm=function(e){void 0!=e&&$.post(self.urls.wakizashi.shortcut+e,function(e){e.page&&(modalAddShortcut.html(e.page),modalAddShortcut.modal("show"))})},DaishoService.prototype.getShortcuts=function(){return $.post(self.urls.wakizashi.get_shortcuts,function(e){loadShortcuts(e)})},DaishoService.prototype.removeShortcut=function(e){void 0!=e&&$.post(self.urls.wakizashi.shortcut+e+"/remove/",function(e){modalAddShortcut.modal("hide"),loadShortcuts(e),modalShortcuts.modal("show"),new NotificationPlugin(trSaved,trShortcutRemoved,"icon-check",null,null,defNotificationTimer)})},DaishoService.prototype.getEmailForm=function(){void 0!==CONTACTS[currentChat]&&$.post(createURL(self.urls.katana.send_email,currentChat,""),{},function(e){e.page&&modalSendEmail.html(e.page)})},DaishoService.prototype.getEditProfileForm=function(e){void 0!=e&&$.post(self.urls.customers.edit+"/"+e,function(e){e.page&&modalEditUser.html(e.page)})},DaishoService.prototype.clearRoninFrom=function(e){void 0!=e&&$.post(self.urls.customers.clear_ronin+e,function(e){e.success?console.log("Ronin data deleted"):console.log(e.error)})},DaishoService.prototype.getSendCustomerNote=function(){var e=new URL_(self.urls.customers.send_note+"/"+currentChat);$.post(e.getURL(),function(e){e.page&&modalAddNote.html(e.page),setTimeout(function(){$(".js-focus-on-load").focus()},500)})},DaishoService.prototype.getSendOrderNote=function(e){$.post(self.urls.katana.orders.send_note+"/"+e+"/",function(e){e.page&&modalAddNote.html(e.page),setTimeout(function(){$(".js-focus-on-load").focus()},500)})},DaishoService.prototype.editOrderNote=function(e){$.post(self.urls.katana.orders.edit_note+e+"/",function(e){e.page&&modalAddNote.html(e.page),setTimeout(function(){$(".js-focus-on-load").focus()},500)})},DaishoService.prototype.removeOrderNote=function(e){$.get(createURL(self.urls.katana.orders.remove_note,e),function(e){e.error||($("#wz-modal-add-note").modal("hide"),new NotificationPlugin(trNoteDeleted,trNoteDeleted,"icon-trash",null,null,defNotificationTimer))})},DaishoService.prototype.removeCustomerNote=function(e){$.post(self.urls.customers.remove_note+e,function(e){e.error||($("#wz-modal-add-note").modal("hide"),daisho.getCustomerProfile(e.customer_id),new NotificationPlugin(trNoteDeleted,trNoteDeleted,"icon-trash",null,null,defNotificationTimer))})},DaishoService.prototype.sendForm=function(e,t,n){if(void 0!=e&&void 0!=t){var i=$(e),a=$('input[type="file"]:not([disabled])',i);a.each(function(e,t){t.files.length>0||$(t).prop("disabled",!0)});var r=$.ajax({url:t,type:"POST",data:new FormData(i[0]),contentType:!1,cache:!1,processData:!1,success:n});return modalImg.modal("hide"),a.prop("disabled",!1),r}return!1},DaishoService.prototype.setShortDescription=function(e,t){var n=t||this.currentOrder.getID();if(null!=n)return $.post(createURL(self.urls.katana.orders.set_short_description,n),{shortDescription:e},function(t){t.success&&mixpanelEvents("changeOrderShortDescription",e)})},DaishoService.prototype.setDescription=function(e,t){var n=t||this.currentOrder.getID();if(null!=n)return $.post(createURL(self.urls.katana.orders.set_description,n),{description:e},function(t){t.success&&mixpanelEvents("changeOrderDescription",e)})},DaishoService.prototype.setStatus=function(e,t){var n=this,i=t||n.currentOrder.getID();if(null!=i&&void 0!=e)return $.post(createURL(self.urls.katana.orders.set_status,i,e),function(t){if(t.success){n.currentOrder.getID()==i&&($(".js-status-select").removeClass("selected"),$(".js-status-select[data-status="+e+"]").addClass("selected"),removeClassByRegExp($("#statusDropdown i"),/^wz\-status\-/),$("#statusDropdown i").addClass("wz-status-"+e));var a=$("#wz-tab-pedidos .js-order-view[data-order="+i+"]").find(".wz-order-status");a.length>0&&(removeClassByRegExp(a,/^wz\-status\-/),a.addClass("wz-status-"+e)),i!=n.currentOrder.getID()||0!=e&&1!=e||firebaseService.deleteOptionMessages()}});var a=new $.Deferred;return a.reject(),a.promise()},DaishoService.prototype.editOrderTags=function(e,t){var n=t||this.currentOrder.getID();if(null!=n)return $.post(self.urls.katana.orders.edit_tags,{order_id:n,tags:e},function(t){t.success&&mixpanelEvents("changeOrderTags",e)})},DaishoService.prototype.setAlert=function(){return $.post(self.urls.katana.set_alert,function(e){e.success&&modalAddAlert.html(e.page)})},DaishoService.prototype.getEditOrderForm=function(e){return $.post(self.urls.katana.orders.edit+"/"+e+"/",function(e){e.page&&modalAddOrder.html(e.page),mixpanelEvents("editOrder")})},DaishoService.prototype.getContact=function(e,t){if(void 0!=e)return $.post(self.urls.customers.get+"/"+e,function(n){CONTACTS[e]=new Contact(n),t||CONTACTS[e].refresh()})},DaishoService.prototype.getReports=function(){return $.post(self.urls.katana.reports,function(e){e.page&&(reportsModal.html(e.page),mixpanelEvents("openReports"))})},DaishoService.prototype.openSettings=function(e,t){var n,i=e||"#user-settings";switch(i){case"#user-settings":n=this.loadSettingsInfo();break;case"#company-settings":n=this.loadSettingsBrand();break;case"#channel-settings":n=this.loadSettingsChannels();break;case"#payment-settings":n=this.loadSettingsPayments();break;case"#agent-settings":n=this.loadSettingsSamurais();break;case"#suscription-settings":n=this.loadSettingsSuscription();break;case"#slack-settings":n=this.loadSettingsSlack();break;default:n=this.loadSettingsInfo()}$("#wz-modal-clients .wz-crm-menu .active").removeClass("active"),$('#wz-modal-clients .wz-crm-menu a[href="'+i+'"]').addClass("active"),settingsModal.addClass("wz-modal-right").removeClass("wz-modal-fullscreen modal-botbuilder modal-betatester modal-firstchannel modal-facebook");var a=$("#wz-modal-ronin-manager").hasClass("in");return betaTester?(settingsModal.removeClass("wz-modal-right").addClass("wz-modal-fullscreen modal-betatester"),settingsModal.find(".modal-menu").hide()):a?(settingsModal.removeClass("wz-modal-right").addClass("wz-modal-fullscreen modal-botbuilder"),settingsModal.find(".modal-menu").hide()):tutorialActive&&Object.keys(CHANNELS)<=0?(settingsModal.removeClass("wz-modal-right").addClass("wz-modal-fullscreen modal-firstchannel modal-facebook"),settingsModal.find(".modal-menu").hide()):settingsModal.find(".modal-menu").show(),n.done(function(){$("#wz-modal-clients .block-show").removeClass("block-show").addClass("hide"),$(i).removeClass("hide").addClass("block-show"),"function"==typeof t&&t(),settingsModal.find(".modal-body").scrollTop(0),!1===betaTester&&(history.pushState("","","?settings"),"undefined"!=typeof Appcues&&Appcues.start())}),n},DaishoService.prototype.assignCustomer=function(e){if(void 0!=e)return $.post(self.urls.customers.assign+"/"+e)},DaishoService.prototype.assignCustomerTo=function(e,t){if(void 0!=e&&void 0!=t)return $.post(self.urls.customers.assign_to+"/"+e+"/"+t)},DaishoService.prototype.unassignCustomer=function(e){if(void 0!=e)return $.post(self.urls.customers.unassign+"/"+e)},DaishoService.prototype.archiveCustomer=function(e){if(void 0!=e)return $.post(self.urls.customers.archive+e)},DaishoService.prototype.unarchiveCustomer=function(e){if(void 0!=e)return $.post(self.urls.customers.unarchive+e)},DaishoService.prototype.toggleAdminRights=function(e){if(void 0!=e)return $.post(self.urls.samurais.admin+e,function(t){daisho.loadSettingsSamurais(),mixpanelEvents("changePermissions",e)})},DaishoService.prototype.reloadChannels=function(){return $.post(self.urls.brands.channels.get_all,function(e){e.channels&&($(".js-channel-list:not(.js-channel-list-all)").addClass("js-not-processed"),e.channels.forEach(function(e,t){var n=$(".js-channel-list[data-channel="+e.id+"]");void 0===CHANNELS[e.id]&&(n=$channelTemplate.tmpl({key:e.id,name:e.name,type:e.type.toLowerCase(),active:e.active}),$(".js-channel-list-all").parent().append(n),COUNTERS.channels[e.id]={},COUNTERS.channels_unread[e.id]={},n.on("click",chatFilterSelection)),CHANNELS[e.id]={id:e.id,name:e.name,deleted:!1,facebook_id:e.app_id,phone:e.phone,type:e.type.toLowerCase(),active:e.active,image:e.image},n.removeClass("js-not-processed"),n.find(".wz-channel-name").text(e.name),e.active?n.removeClass("js-channel-offline"):n.addClass("js-channel-offline")}),$(".js-channel-list.js-not-processed").each(function(e,t){var n=$(this).data("channel");deleteDictKey(COUNTERS.channels,n),deleteDictKey(COUNTERS.channels_unread,n),$(this).hasClass("active")&&$(".js-channel-list-all a").trigger("click"),$(this).remove()}),daisho.refreshCounters(),tutorialActive&&(Object.keys(e.channels).length<=1?settingsModal.modal("hide"):(welcomeModal.addClass("wz-modal-right").removeClass("wz-modal-fullscreen"),welcomeModal.find(".wz-team").removeClass("hide"),settingsModal.addClass("wz-modal-right").removeClass("wz-modal-fullscreen modal-firstchannel modal-facebook"),settingsModal.find(".modal-menu").show())))})},DaishoService.prototype.reloadSamurais=function(){$.post(self.urls.samurais.get_all,function(e){e.samurais&&(e.samurais.forEach(function(e,t){void 0===SAMURAIS[e.id]&&(SAMURAIS[e.id]={}),SAMURAIS[e.id].name=e.name,SAMURAIS[e.id].avatar=e.avatar,SAMURAIS[e.id].shogun=e.shogun}),loadSearchSamurai("#client-status"),loadSearchSamurai(".wz-col-central .textarea .assignation"))})},DaishoService.prototype.deleteSamurai=function(e){void 0!=e&&$.post(self.urls.samurais.delete+e,function(e){daisho.loadSettingsSamurais(),daisho.reloadSamurais()})},DaishoService.prototype.deleteStripe=function(){$.post(self.urls.brands.stripe.delete,function(){loadSettingsPayments(),mixpanelEvents("removePaymentGateway",{type:"Stripe"})})},DaishoService.prototype.roninDisable=function(e,t){if(void 0!=e)return $.post(self.urls.ronin.disable+e+"/",t)},DaishoService.prototype.roninDelete=function(e,t){if(void 0!=e)return $.post(self.urls.ronin.delete+e+"/",t)},DaishoService.prototype.roninEdit=function(e,t){if(void 0!=e)return $.post(self.urls.ronin.edit+e+"/",t)},DaishoService.prototype.saveRoninMode=function(e){if(void 0!=e)return $.post(self.urls.ronin.save_mode,{new:e})},DaishoService.prototype.saveRoninImage=function(e){return daisho.sendForm(document.getElementById("sendRoninImage"),daisho.getURLs().ronin.save_image,e)},DaishoService.prototype.roninManager=function(){return $.post(self.urls.ronin.manager,function(e){e.manager&&(roninManagerModal.html(e.manager),!1===betaTester&&(history.pushState("","","?dashboard"),Appcues.start()))})},DaishoService.prototype.roninRequest=function(e,t){if(void 0!=e&&""!=e&&void 0!=t)return $.post(self.urls.ronin.request_bot,{bot:e,type:t},function(e){e.success||new NotificationPlugin(trErrorSendingData,trPleaseTryAgain,"icon-cross",null,null,null)})},DaishoService.prototype.verifySubscription=function(){return!subscriptionExpired||(removeSettings(),SAMURAIS[myID].shogun?modalPricing():modalNotification({icon:"icon-lock",title:trAccountLocked,message:trRenewSubscription,close:!0}),mixpanelEvents("endSubscription"),!1)},DaishoService.prototype.getHowManyChannel=function(){for(var e=Object.keys(CHANNELS),t=0,n=0,i=0;i<e.length;i++){"umichat"!=CHANNELS[e[i]].type||n>0?t+=1:n+=1}return t+n},DaishoService.prototype.saveTicketAttach=function(e,t,n){if(void 0!=e&&void 0!=t&&void 0!=n)return $.ajax({url:daisho.getURLs().katana.orders.attach,type:"POST",data:{order_id:e,type:t,key:n},cache:!1,dataType:"json",processData:!0})},DaishoService.prototype.deleteTicketAttach=function(e,t,n){if(void 0!=e&&void 0!=t&&void 0!=n)return $.ajax({url:daisho.getURLs().katana.orders.unattach,type:"POST",data:{order_id:e,type:t,key:n},cache:!1,dataType:"json",processData:!0})},DaishoService.prototype.goToMessage=function(e,t,n){var i=chatList.find(".js-chat-message[data-key="+t+"]");if(i.length>0){var a=i.position().top-i.outerHeight()+messageListContainer.scrollTop();a<10&&(a=10),messageListContainer.scrollTop(a),$centralScroll.perfectScrollbar("update"),i.removeClass("stick"),setTimeout(function(){i.addClass("stick")},100)}else firebaseService.setChat(e,n).done(function(){var e=chatList.find(".js-chat-message[data-key="+t+"]");e.removeClass("stick"),setTimeout(function(){e.addClass("stick")},100)})},DaishoService.prototype.clearChat=function(e){var t=e||CONTACTS[currentChat].getKey();return $.post(self.urls.wakizashi.clear+t+"/",function(e){e.success&&daisho.clearChatConfirmClose()})},DaishoService.prototype.clearChatConfirmOpen=function(){$("#edit-customer-form .wz-clear-chat-btn").addClass("hide"),$("#edit-customer-form .wz-clear-chat-confirm").removeClass("hide")},DaishoService.prototype.clearChatConfirmClose=function(){$("#edit-customer-form .wz-clear-chat-confirm").addClass("hide"),$("#edit-customer-form .wz-clear-chat-btn").removeClass("hide")},DaishoService.prototype.deleteMessage=function(e){if(void 0!=e)return $.post(self.urls.wakizashi.delete+CONTACTS[currentChat].getKey()+"/",{message_id:e})},DaishoService.prototype.changeStatus=function(e){return $.post(self.urls.samurais.set_status+e)},DaishoService.prototype.createOptionsMessage=function(){return $.post(self.urls.customers.options+currentChat)},DaishoService.prototype.createAutoTicket=function(){return $.post(self.urls.customers.autoticket+currentChat)},DaishoService.prototype.loadCounters=function(e){e&&(COUNTERS=e,daisho.refreshCounters())},DaishoService.prototype.getCounters=function(){},DaishoService.prototype.refreshCounters=function(){var e=0;$.each(Object.keys(COUNTERS.channels),function(t,n){var i=COUNTERS.channels[n].all;e+=i,$("#wz-acc-c-01 .js-chats-select[data-channel="+n+"] .badge").text(i).removeClass("loading")});var t=0;$.each(Object.keys(COUNTERS.agents),function(e,n){var i=Object.keys(COUNTERS.agents[n]).length;t+=i,$("#wz-acc-a-01 .js-chats-select[data-samurai="+n+"] .badge").text(i).removeClass("loading"),i>0?$("#wz-acc-a-01 .js-samurai-list[data-samurai="+n+"]").addClass("unread"):$("#wz-acc-a-01 .js-samurai-list[data-samurai="+n+"]").removeClass("unread")}),$("#wz-acc-a-01 .js-chats-select[data-samurai=all] .badge").text(t).removeClass("loading"),t>0?$("#wz-acc-a-01 .js-samurai-list[data-samurai=all]").addClass("unread"):$("#wz-acc-a-01 .js-samurai-list[data-samurai=all]").removeClass("unread");var n=0;$.each(Object.keys(COUNTERS.channels_unread),function(e,t){var i=COUNTERS.channels_unread[t].all;n+=i,i>0?$("#wz-acc-c-01 .js-channel-list[data-channel="+t+"]").addClass("unread"):$("#wz-acc-c-01 .js-channel-list[data-channel="+t+"]").removeClass("unread")}),$("#wz-acc-c-01 .js-channel-list-all .badge").text(e).removeClass("loading"),n>0?$("#wz-acc-c-01 .js-channel-list-all, .wz-filter .js-select-all").addClass("unread"):$("#wz-acc-c-01 .js-channel-list-all, .wz-filter .js-select-all").removeClass("unread"),COUNTERS.pending_unread.all>0?$(".wz-filter .js-pending a").addClass("unread"):$(".wz-filter .js-pending a").removeClass("unread"),COUNTERS.attention_unread.all>0?$(".wz-filter .js-active a").addClass("unread"):$(".wz-filter .js-active a").removeClass("unread")},DaishoService.prototype.loadSettingsInfo=function(){return $.post(self.urls.katana.settings.info,function(e){e.page&&settingsUser.html(e.page)})},DaishoService.prototype.loadSettingsBrand=function(){return $.post(self.urls.katana.settings.brand,function(e){e.page&&settingsBrand.html(e.page)})},DaishoService.prototype.loadSettingsChannels=function(){return $.post(self.urls.katana.settings.channels,function(e){e.page&&settingsChannels.html(e.page)})},DaishoService.prototype.loadSettingsSamurais=function(){return $.post(self.urls.katana.settings.samurais,function(e){e.page&&settingsSamurais.html(e.page)})},DaishoService.prototype.loadSettingsPayments=function(){
return $.post(self.urls.katana.settings.payments,function(e){e.page&&settingsPayments.html(e.page)})},DaishoService.prototype.loadSettingsSlack=function(){return $.post(self.urls.katana.settings.slack,function(e){e.page&&settingsSlack.html(e.page)})},DaishoService.prototype.loadSettingsSuscription=function(){return $.post(self.urls.katana.settings.suscription,function(e){e.page&&settingsSuscription.html(e.page)})},DaishoService.prototype.loadSettingsSuscriptionForm=function(){return $.post(self.urls.brands.subscriptions.subscription_form,function(e){e.page&&$("#wz-subscription-data").html(e.page)})},DaishoService.prototype.loadContact=function(e){e&&e.id&&(void 0===CONTACTS[e.id]&&(CONTACTS[e.id]=new Contact(e)),CONTACTS[e.id].isInChatview(chatView,chatViewSamurai,chatViewChannel)?CONTACTS[e.id].render(!0):resetChatview().done(function(){var t=$(".js-list-contacts .js-contact-"+e.id);t.length>0?(CONTACTS[e.id].goToContact(),t.click()):CONTACTS[e.id].render(!0)}))},FirebaseService=function(e){var t=e.child("messages");this.statusRef=e.child("presence/"+myID),this.statusRef.set(1),this.statusRef.onDisconnect().set(0);var n=limitMessages;this.getRef=function(){return t},this.getMessage=function(e,n){var i,a=new $.Deferred;return t.child(e).child("messages").child(n).once("value",function(e){e&&e.val()&&(i={key:e.key,type:e.val().type,timestamp:e.val().timestamp,message:e.val().message,samurai:e.val().samurai,url:e.val().url,file_name:e.val().file_name,latitude:e.val().latitude,longitude:e.val().longitude}),a.resolve(i)}),a.promise()},this.getAttach=function(e,n){var i=new $.Deferred;return t.child(e).child("messages").child(n).once("value",function(e){i.resolve(e)}),i.promise()},this.deleteOptionMessages=function(e){var n="number"==typeof e?e:currentChat,i=new $.Deferred;return n?t.child(n).child("messages").once("value",function(e){e.forEach(function(e){"bot"==e.val().type&&"openTicket"==e.val().template&&t.child(n).child("messages").child(e.key).remove()}),i.resolve()}):i.reject(),i.promise()},this.setChat=function(e,i){var a=new $.Deferred,r=this,o=function(t){var n=null,i=0;t.forEach(function(e){r.loadMessage(e),n=e.val().timestamp+.1,i+=1}),0==i||i<limitMessages?fillerMessageList.hide():fillerMessageList.show(),$centralScroll.perfectScrollbar("update"),a.resolve(),currentChatRef.orderByChild("timestamp").startAt(n).on("child_added",function(t){firstMessageToScroll=!1,r.loadMessage(t),"object"==typeof CONTACTS[e]&&CONTACTS[e].isUnread()&&daisho.setReaded(e)}),currentChatRef.on("child_removed",function(e){var t=$('.js-list-chat .js-chat-message[data-key="'+e.key+'"]');if(t.length>0){var n=getClassByName(t,/^js-day-/);t.hasClass("js-chat-groupped")||t.next().removeClass("js-chat-groupped"),t.remove(),$sameDayMessages=$(".js-list-chat ."+n),1==$sameDayMessages.length&&$sameDayMessages.remove()}})};if("object"==typeof CONTACTS[e]&&CONTACTS[e].isUnread()&&daisho.setReaded(e),currentChat!=e||i){currentChatRef&&($(".js-list-contacts .js-contact-"+currentChat).removeClass("active"),currentChatRef.off()),currentChat=e,daisho.getCustomerProfile(e),"object"==typeof CONTACTS[e]&&CONTACTS[e].refresh(),currentChatRef=t.child(e).child("messages"),$(".js-list-contacts .js-contact-"+e).addClass("active"),chatList.html(""),phoneInput.val(e),MESSAGES=[],n=limitMessages;var s=9999999999;firstMessageToScroll=!1,i&&(s=i),s<9999999999?currentChatRef.orderByChild("timestamp").startAt(s).once("value",function(e){n=1e4,e.forEach(function(e){0==n&&(firstMessageToScroll=e.key),n+=1}),n<limitMessages&&(n=limitMessages),currentChatRef.orderByChild("timestamp").limitToLast(n).once("value",o)}):currentChatRef.orderByChild("timestamp").limitToLast(n).once("value",o)}else $(".js-list-contacts .js-contact-"+e).addClass("active");return a.promise()},this.loadMessage=function(e){MESSAGES[e.key]=new Message(e);var t=dateFromTimestamp(e.val().timestamp),n=new Date(formatShortDate(t,!0)),i="js-day-"+formatShortDate(t,!0).replace(/\//g,"-"),a=n.getTime()/1e3;0===$(".js-chat-date-subhead."+i).length&&chatList.append('<li class="list-group-item js-chat-date-subhead '+i+'" data-day="'+formatShortDate(t,!0)+'" data-timestamp="'+a+'"><div class="wz-date-day">'+formatShortDate(n)+"</div></li>"),MESSAGES[e.key].render(),scrollMessages(),this.sortMessages("."+i),tooltips('.wz-col-central ul.js-list-chat li[data-key="'+e.key+'"]')}},FirebaseService.prototype.setMainChat=function(e){this.setChat(e)},FirebaseService.prototype.setGrouped=function(e){if(lastMessage){var t=$(e).data("timestamp"),n=$(lastMessage).data("timestamp"),i=t-n,a=dateFromTimestamp(t),r=dateFromTimestamp(n),o=formatShortDate(a,!0),s=formatShortDate(r,!0),l=$(e).data("author"),c=$(lastMessage).data("author"),u=$(e).hasClass("js-chat-umi"),h=$(lastMessage).hasClass("js-chat-umi"),d=t>=n,f=l===c,p=i<=limitTimestampSameGroup,m=o===s,g=u===h;d&&f&&p&&m&&g?$(e).addClass("js-chat-groupped"):$(e).removeClass("js-chat-groupped")}else $(e).removeClass("js-chat-groupped");lastMessage=e},FirebaseService.prototype.sortMessages=function(e,t){function n(e,t){return $(t).data("timestamp")<$(e).data("timestamp")?1:-1}e=e||"",$selector=$(".js-list-chat li"+e);var i=this,a=$selector.length,r=$(".js-list-chat li").length;t&&a!=r?$selector.sort(n).insertBefore(t):$selector.sort(n).appendTo(".js-list-chat"),lastMessage=!1,$(".js-list-chat li.js-chat-message"+e).each(function(e,t){i.setGrouped(t)})},FirebaseService.prototype.getOlder=function(){var e=new $.Deferred;return $renderBefore=$(".js-list-chat li.js-chat-message").first(),dateFirst=$renderBefore.data("timestamp"),relativeFirst=!0,currentChatRef.orderByChild("timestamp").endAt(dateFirst).limitToLast(limitMessages).once("value",function(t){var n=0,i=0;t.forEach(function(e){e.key in MESSAGES||(i+=1)}),i>0?t.forEach(function(t){if(!(t.key in MESSAGES)){MESSAGES[t.key]=new Message(t);var a=!1,r=dateFromTimestamp(t.val().timestamp),o=new Date(formatShortDate(r,!0)),s="js-day-"+formatShortDate(r,!0).replace(/\//g,"-"),l=o.getTime()/1e3;$(".js-list-chat li."+s).length>0?$renderBefore=$(".js-list-chat li."+s).first():$renderBefore=$(".js-list-chat li").first();var c=getClassByName($renderBefore,/^js-day-/);if(new Date($renderBefore.data("day"))>o)a=$(".js-list-chat li."+c).first(),0===a.length&&(a=!1);else{var u=$(".js-list-chat li."+c).last().data("key");for(a=$('.js-list-chat li[data-key="'+u+'"]').next();a.length>0&&new Date(a.data("day"))<o;){var h=getClassByName(a,/^js-day-/),d=$(".js-list-chat li."+h).last().data("key");a=$('.js-list-chat li[data-key="'+d+'"]').next()}0===a.length&&(a=$(".js-list-chat li").last())}0===$(".js-chat-date-subhead."+s).length&&$renderBefore.before('<li class="list-group-item js-chat-date-subhead '+s+'" data-day="'+formatShortDate(r,!0)+'" data-timestamp="'+l+'"><div class="wz-date-day">'+formatShortDate(o)+"</div></li>"),MESSAGES[t.key].renderBefore($renderBefore),this.sortMessages("."+s,a),n+=1,n===i&&e.resolve()}}.bind(this)):e.resolve(),$(".js-list-chat li.js-chat-message:first").removeClass("js-chat-groupped")}.bind(this)),e.promise()},FirebaseService.prototype.starMessage=function(e){if("object"==typeof CONTACTS[currentChat]){var t=CONTACTS[currentChat].getAgent();if(t&&t!=myID)return}currentChatRef.child(e).child("starred").set(!MESSAGES[e].getStarred(),function(t){if(t)console.log("[Firebase starMessage] Error: Synchronization failed!");else{var n=!1,i=chatList.find("li[data-key="+e+"] .wz-starred");MESSAGES[e].setStarred(!MESSAGES[e].getStarred());var a=daisho.currentOrder.getID();MESSAGES[e].getStarred()?(i.addClass("selected"),a&&(n=daisho.saveTicketAttach(a,0,e))):(i.removeClass("selected"),a&&(n=daisho.deleteTicketAttach(a,0,e))),n&&n.fail(function(){console.log("[Firebase starMessage] Error: Save ticket attachment failed!")}),mixpanelEvents(MESSAGES[e].getStarred()?"starredMessage":"unstarredMessage")}})},FirebaseService.prototype.updateStatus=function(e){var t={online:1,busy:2};this.statusRef.set(t[e])},FirebaseService.prototype.setTyping=function(e){e?this.getRef().child(currentChat.toString()).child("typing/agent").set(myID):this.getRef().child(currentChat.toString()).child("typing/agent").set("")},$(document).ready(function(){var e=new Preloader("preloader");initDaisho(),addDaishoReact(),e.config([initFirebase(),loadStylesheet(staticCSSURL),daisho.getShortcuts()],[emojiPicker,sendMessages,loadOldMessages,loadOldContacts,loadSearchContact,scrollMessages,modalDismiss]),createListeners(),tooltips(),modalClientsTable(),modalOrdersTable(),notifications(),responsiveUI(),autoSizeTextarea(),initPerfectScroll(),initMixpanel({ID:companyId,name:company,agentId:myID,firstName:firstName,lastName:lastName,created:created,email:companyEmail,country:country,company:company,role:role,customersCount:customersCount,server:server,expired:subscriptionExpired,partner:partner,plan:plan,plan_version:daishoConfig.plan_version,agents:Object.keys(SAMURAIS).length,landbots:landbotsCount,beta_segment:beta_segment,producthunter:producthunter})});var NP_PAYMENT={title:trPaymentSent,message:trWeVeSent,icon:"icon-mail",countdown:null},NP_DATA_SAVE={title:trSaved,message:trDataSaved,icon:"icon-check",countdown:defNotificationTimer};jQuery.expr[":"].Contains=jQuery.expr.createPseudo(function(e){return function(t){return jQuery(t).text().toUpperCase().indexOf(e.toUpperCase())>=0}}),String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var deleteDictKey=function(e,t){return void 0!==e&&void 0!==e[t]&&(delete e[t],!0)},addDictKey=function(e,t){return void 0!==e&&(!0!==e[t]&&(e[t]=!0,!0))};$.fn.scrollBottom=function(){return this.scrollTop()+this.height()+1};var messageUmiTimestamp=!1,messageUmiLastChat=!1;String.prototype.preventScripts=function(){return this.replace(/<script>/g,"&lt;script&gt;").replace(/<\/script>/g,"&lt;/script&gt;")},MyWebSocket=function(){try{"https:"==window.location.protocol?"wss://"+window.location.host+"/ws/stream/":"ws://localhost:4445/ws/stream/",window.daishoSocket=function(e){var t=JSON.parse(e.data);switch(t.ws_type){case"disconnect":t.ws_data.message&&(reconnecting=!0,remainingReconnectingTime=-1,new NotificationPlugin(trError,t.ws_data.message,"icon-cross",null,function(){location.reload(!0)})),this.close();break;case"counters":daisho.loadCounters(t.ws_data.data);break;case"notification":processNotification(t.ws_data);break;case"customer-updated":var n=CONTACTS.length,i=t.ws_data.data.id,a=t.ws_data.action,r=CONTACTS[i]?CONTACTS[i].clone():void 0;CONTACTS[i]=new Contact(t.ws_data.data),console.debug("%cwebsocket.service : customer-updated received!","color:red",i,a),0==contactList.find(".js-contact-"+i).length?-1==CONTACTS[i].getChatviews().indexOf(chatView)||chatViewChannel&&chatViewChannel!=CONTACTS[i].channel_id||chatViewSamurai&&chatViewSamurai!=CONTACTS[i].agent?CONTACTS[i].refresh():(CONTACTS[i].render(),CONTACTS[i].refresh(),noCustomersViewHandler()):CONTACTS[i].refresh();var o=CONTACTS[i].getChannel().id||0,s=CONTACTS[i].getAgent(),l=CONTACTS[i].isUnread();if(console.debug("%cwebsocket.service : newData","color:red",i,{channel:o,agent:s,unread:l}),void 0!==r){var c=r.getChannel().id||0,u=r.getAgent(),h=r.isUnread();if(console.debug("%cwebsocket.service : oldData","color:red",i,{channel:c,agent:u,unread:h}),"update"==a){if(c&&(deleteDictKey(COUNTERS.channels[c],i),COUNTERS.channels[c].all=decreaseCounter(COUNTERS.channels[c].all),h&&COUNTERS.channels_unread[c]&&(deleteDictKey(COUNTERS.channels_unread[c],i),COUNTERS.channels_unread[c].all=decreaseCounter(COUNTERS.channels_unread[c].all))),o){var d=addDictKey(COUNTERS.channels[o],i);if(d&&COUNTERS.channels[o].all++,l){var d=addDictKey(COUNTERS.channels_unread[o],i);d&&COUNTERS.channels_unread[o].all++}}if(u?(deleteDictKey(COUNTERS.agents[u],i),h&&(deleteDictKey(COUNTERS.attention_unread,i),COUNTERS.attention_unread.all=decreaseCounter(COUNTERS.attention_unread.all))):h&&(deleteDictKey(COUNTERS.pending_unread,i),COUNTERS.pending_unread.all=decreaseCounter(COUNTERS.pending_unread.all)),s){if(addDictKey(COUNTERS.agents[s],i),l){var d=addDictKey(COUNTERS.attention_unread,i);d&&COUNTERS.attention_unread.all++}}else if(l){var d=addDictKey(COUNTERS.pending_unread,i);d&&COUNTERS.pending_unread.all++}}else if("delete"==a&&(delete CONTACTS[i],deleteDictKey(COUNTERS.channels[c],i),COUNTERS.channels[c].all=decreaseCounter(COUNTERS.channels[c].all),h&&(deleteDictKey(COUNTERS.channels_unread[c],i),u?COUNTERS.attention_unread.all=decreaseCounter(COUNTERS.attention_unread.all):COUNTERS.pending_unread.all=decreaseCounter(COUNTERS.pending_unread.all)),u&&deleteDictKey(COUNTERS.agents[u],i),currentChat==i)){currentChat=!1,currentChatRef.off(),currentChatRef=!1,daisho.currentOrder.clear(),colSiderightClient.empty(),chatList.empty(),contactList.empty(),archiveCurrent.addClass("hidden"),openCurrent.addClass("hidden");var f=function(){var e=contactList.find("li").first().data("key");e&&daisho.setMainChat(e)},p=daisho.loadContacts(0,limitContacts,chatView,chatViewSamurai,chatViewChannel);$.when(p).done(f)}}else{t.ws_data.is_new?(customersCount+=1,"function"==typeof window.daishoCounterCallback&&window.daishoCounterCallback(customersCount)):($.each(Object.keys(COUNTERS.channels),function(e,t){deleteDictKey(COUNTERS.channels[t],i),COUNTERS.channels[t].all=decreaseCounter(COUNTERS.channels[t].all)}),$.each(Object.keys(COUNTERS.agents),function(e,t){deleteDictKey(COUNTERS.agents[t],i)}),$.each(Object.keys(COUNTERS.channels_unread),function(e,t){deleteDictKey(COUNTERS.channels_unread[t],i),COUNTERS.channels_unread[t].all=decreaseCounter(COUNTERS.channels_unread[t].all)}),deleteDictKey(COUNTERS.pending_unread,i),COUNTERS.pending_unread.all=decreaseCounter(COUNTERS.pending_unread.all),deleteDictKey(COUNTERS.attention_unread,i),COUNTERS.attention_unread.all=decreaseCounter(COUNTERS.attention_unread.all));var d=addDictKey(COUNTERS.channels[o],i);if(d&&COUNTERS.channels[o].all++,s&&addDictKey(COUNTERS.agents[s],i),l&&COUNTERS.channels_unread[o]){var d=addDictKey(COUNTERS.channels_unread[o],i);d&&COUNTERS.channels_unread[o].all++}if(!s&&l){var d=addDictKey(COUNTERS.pending_unread,i);d&&COUNTERS.pending_unread.all++}if(s&&l){var d=addDictKey(COUNTERS.attention_unread,i);d&&COUNTERS.attention_unread.all++}0==n&&contactList.find(".js-contact-"+i).trigger("click")}daisho.refreshCounters(),sortContacts(),currentChat==i&&(daisho.getCustomerProfile(i),"order"==viewProfile&&(daisho.getOrderProfile(viewOrderSelected,void 0,!1),viewProfileOrder(viewOrderSelected)));break;case"update-model":switch(t.ws_data.type){case"samurai":var m=t.ws_data.data.id,g=t.ws_data.data.status;refreshSamuraiStatus(m,g);break;case"channel":var v=t.ws_data.data,b=$(".js-channel-list[data-channel="+v.id+"]");if(v.disabled)deleteDictKey(CHANNELS,v.id),b.remove(),deleteDictKey(COUNTERS.channels,v.id),deleteDictKey(COUNTERS.channels_unread,v.id),daisho.refreshCounters();else{if(void 0===CHANNELS[v.id])console.log("New channel "),b=$channelTemplate.tmpl({key:v.id,name:v.name,type:v.type,active:v.active}),$(".js-channel-list-all").parent().append(b),b.find(".js-chats-select").click(chatFilterSelection),chatsSelect=$(".js-chats-select"),COUNTERS.channels[v.id]={all:0},COUNTERS.channels_unread[v.id]={all:0};else{console.log("Existing channel");var y=$channelTemplate.tmpl({key:v.id,name:v.name,type:v.type,active:v.active});y.insertBefore(b),y.find(".js-chats-select").click(chatFilterSelection),chatsSelect=$(".js-chats-select"),b.remove()}CHANNELS[v.id]=v,$sideLeft1.find(".js-chats-select .badge").removeClass("loading"),daisho.refreshCounters()}break;case"slack":var w=t.ws_data.data;window.updateSlackData&&updateSlackData(w);break;case"mailchimp":var _=t.ws_data.data;window.updateMailchimpData&&updateMailchimpData(_);break;case"spreadsheet":var k=t.ws_data.data;window.updateSpreadsheetData&&updateSpreadsheetData(k)}break;case"update-samurai-status":var m=t.ws_data.data.id,g=t.ws_data.data.status;refreshSamuraiStatus(m,g);break;case"smooch":setSmoochToken(t.ws_data.token);break;default:console.log("Websocket wrong type: "+t)}}}catch(e){console.log(e)}},MyWebSocket.prototype.send=function(e){this.socket.readyState==window.WebSocket.OPEN?this.socket.send(JSON.stringify(e)):reconnectSocket()},setInterval(function(){remainingReconnectingTime>=0&&(0==remainingReconnectingTime&&connectSocket(),remainingReconnectingTime=decreaseCounter(remainingReconnectingTime))},1e3);